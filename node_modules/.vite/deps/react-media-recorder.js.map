{
  "version": 3,
  "sources": ["../../fast-unique-numbers/src/factories/add-unique-number.ts", "../../fast-unique-numbers/src/factories/cache.ts", "../../fast-unique-numbers/src/factories/generate-unique-number.ts", "../../fast-unique-numbers/src/module.ts", "../../broker-factory/src/guards/message-port.ts", "../../broker-factory/src/helpers/port-map.ts", "../../broker-factory/src/helpers/extend-broker-implementation.ts", "../../broker-factory/build/es2019/interfaces/broker-actions.js", "../../broker-factory/build/es2019/interfaces/broker-definition.js", "../../broker-factory/build/es2019/interfaces/default-broker-definition.js", "../../broker-factory/build/es2019/interfaces/worker-event.js", "../../broker-factory/src/interfaces/index.ts", "../../broker-factory/build/es2019/types/broker-implementation.js", "../../broker-factory/src/types/index.ts", "../../broker-factory/src/module.ts", "../../media-encoder-host-broker/build/es2019/interfaces/media-encoder-host-broker-definition.js", "../../media-encoder-host-broker/src/interfaces/index.ts", "../../media-encoder-host-broker/build/es2019/types/media-encoder-host-broker-loader.js", "../../media-encoder-host-broker/build/es2019/types/media-encoder-host-broker-wrapper.js", "../../media-encoder-host-broker/src/types/index.ts", "../../media-encoder-host-broker/src/module.ts", "../../media-encoder-host/src/worker/worker.ts", "../../media-encoder-host/src/module.ts", "../../extendable-media-recorder/src/factories/blob-event-factory.ts", "../../extendable-media-recorder/src/factories/decode-web-m-chunk.ts", "../../extendable-media-recorder/src/factories/event-target-constructor.ts", "../../extendable-media-recorder/src/factories/event-target-factory.ts", "../../extendable-media-recorder/src/factories/invalid-modification-error.ts", "../../extendable-media-recorder/src/factories/invalid-state-error.ts", "../../extendable-media-recorder/src/factories/is-supported-promise.ts", "../../extendable-media-recorder/src/factories/media-recorder-constructor.ts", "../../extendable-media-recorder/src/factories/native-blob-event-constructor.ts", "../../extendable-media-recorder/src/factories/native-media-recorder.ts", "../../extendable-media-recorder/src/factories/native-media-recorder-constructor.ts", "../../extendable-media-recorder/src/factories/not-supported-error.ts", "../../extendable-media-recorder/src/factories/read-element-content.ts", "../../extendable-media-recorder/src/factories/read-element-type.ts", "../../extendable-media-recorder/src/factories/read-variable-size-integer.ts", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/src/factories/add-unique-number.ts", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/src/factories/cache.ts", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/src/factories/generate-unique-number.ts", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/build/es2019/types/add-unique-number-factory.js", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/build/es2019/types/add-unique-number-function.js", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/build/es2019/types/cache-factory.js", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/build/es2019/types/cache-function.js", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/build/es2019/types/generate-unique-number-factory.js", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/build/es2019/types/generate-unique-number-function.js", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/src/types/index.ts", "../../recorder-audio-worklet/node_modules/fast-unique-numbers/src/module.ts", "../../rxjs-interop/source/symbols.ts", "../../rxjs-interop/source/patch.ts", "../../rxjs-interop/source/to-observer.ts", "../../rxjs-interop/dist/esm/types.js", "../../rxjs-interop/source/index.ts", "../../subscribable-things/src/factories/animation-frame.ts", "../../subscribable-things/src/factories/attribute.ts", "../../subscribable-things/src/factories/geolocation.ts", "../../subscribable-things/src/factories/intersections.ts", "../../subscribable-things/src/factories/map-subscribable-thing.ts", "../../subscribable-things/src/factories/media-devices.ts", "../../subscribable-things/src/factories/media-query-match.ts", "../../subscribable-things/src/factories/metrics.ts", "../../subscribable-things/src/factories/midi-inputs.ts", "../../subscribable-things/src/factories/midi-outputs.ts", "../../subscribable-things/src/factories/mutations.ts", "../../subscribable-things/src/factories/on.ts", "../../subscribable-things/src/factories/online.ts", "../../subscribable-things/src/factories/permission-state.ts", "../../subscribable-things/src/factories/prepend-subscribable-thing.ts", "../../subscribable-things/src/factories/reports.ts", "../../subscribable-things/src/factories/resizes.ts", "../../subscribable-things/src/factories/unhandled-rejection.ts", "../../subscribable-things/src/factories/video-frame.ts", "../../subscribable-things/src/factories/wake-lock.ts", "../../subscribable-things/src/factories/window.ts", "../../subscribable-things/src/factories/wrap-subscribe-function.ts", "../../subscribable-things/src/functions/emit-not-supported-error.ts", "../../subscribable-things/build/es2019/interfaces/html-video-element.js", "../../subscribable-things/build/es2019/interfaces/midi-access.js", "../../subscribable-things/build/es2019/interfaces/midi-connection-event.js", "../../subscribable-things/build/es2019/interfaces/midi-input.js", "../../subscribable-things/build/es2019/interfaces/midi-input-event-map.js", "../../subscribable-things/build/es2019/interfaces/midi-message-event.js", "../../subscribable-things/build/es2019/interfaces/midi-output.js", "../../subscribable-things/build/es2019/interfaces/midi-output-event-map.js", "../../subscribable-things/build/es2019/interfaces/midi-port.js", "../../subscribable-things/build/es2019/interfaces/report.js", "../../subscribable-things/build/es2019/interfaces/report-body.js", "../../subscribable-things/build/es2019/interfaces/reporting-observer.js", "../../subscribable-things/build/es2019/interfaces/reporting-observer-options.js", "../../subscribable-things/build/es2019/interfaces/resize-observer.js", "../../subscribable-things/build/es2019/interfaces/resize-observer-entry.js", "../../subscribable-things/build/es2019/interfaces/resize-observer-options.js", "../../subscribable-things/build/es2019/interfaces/resize-observer-size.js", "../../subscribable-things/build/es2019/interfaces/video-frame-metadata.js", "../../subscribable-things/build/es2019/interfaces/wake-lock.js", "../../subscribable-things/build/es2019/interfaces/wake-lock-sentinel.js", "../../subscribable-things/build/es2019/interfaces/wake-lock-sentinel-event-map.js", "../../subscribable-things/src/interfaces/index.ts", "../../subscribable-things/build/es2019/types/animation-frame-factory.js", "../../subscribable-things/build/es2019/types/animation-frame-function.js", "../../subscribable-things/build/es2019/types/emit-not-supported-error-function.js", "../../subscribable-things/build/es2019/types/event-handler.js", "../../subscribable-things/build/es2019/types/event-target-with-property-handler.js", "../../subscribable-things/build/es2019/types/event-type.js", "../../subscribable-things/build/es2019/types/flexible-subscribe-function.js", "../../subscribable-things/build/es2019/types/intersections-factory.js", "../../subscribable-things/build/es2019/types/intersections-function.js", "../../subscribable-things/build/es2019/types/media-devices-factory.js", "../../subscribable-things/build/es2019/types/media-devices-function.js", "../../subscribable-things/build/es2019/types/media-query-match-factory.js", "../../subscribable-things/build/es2019/types/media-query-match-function.js", "../../subscribable-things/build/es2019/types/metrics-factory.js", "../../subscribable-things/build/es2019/types/metrics-function.js", "../../subscribable-things/build/es2019/types/midi-connection-event-handler.js", "../../subscribable-things/build/es2019/types/midi-inputs-factory.js", "../../subscribable-things/build/es2019/types/midi-inputs-function.js", "../../subscribable-things/build/es2019/types/midi-message-event-handler.js", "../../subscribable-things/build/es2019/types/midi-outputs-factory.js", "../../subscribable-things/build/es2019/types/midi-outputs-function.js", "../../subscribable-things/build/es2019/types/midi-port-connection-state.js", "../../subscribable-things/build/es2019/types/midi-port-device-state.js", "../../subscribable-things/build/es2019/types/midi-port-type.js", "../../subscribable-things/build/es2019/types/mutations-factory.js", "../../subscribable-things/build/es2019/types/mutations-function.js", "../../subscribable-things/build/es2019/types/observer-parameters.js", "../../subscribable-things/build/es2019/types/online-factory.js", "../../subscribable-things/build/es2019/types/online-function.js", "../../subscribable-things/build/es2019/types/on-factory.js", "../../subscribable-things/build/es2019/types/on-function.js", "../../subscribable-things/build/es2019/types/optional-unsubscribe-function.js", "../../subscribable-things/build/es2019/types/permission-state-factory.js", "../../subscribable-things/build/es2019/types/permission-state-function.js", "../../subscribable-things/build/es2019/types/release-event-handler.js", "../../subscribable-things/build/es2019/types/reports-factory.js", "../../subscribable-things/build/es2019/types/reports-function.js", "../../subscribable-things/build/es2019/types/resize-observer-box-options.js", "../../subscribable-things/build/es2019/types/resizes-factory.js", "../../subscribable-things/build/es2019/types/resizes-function.js", "../../subscribable-things/build/es2019/types/subscribable-thing.js", "../../subscribable-things/build/es2019/types/subscribe-function.js", "../../subscribable-things/build/es2019/types/unhandled-rejection-factory.js", "../../subscribable-things/build/es2019/types/unhandled-rejection-function.js", "../../subscribable-things/build/es2019/types/unsubscribe-function.js", "../../subscribable-things/build/es2019/types/video-frame-factory.js", "../../subscribable-things/build/es2019/types/video-frame-function.js", "../../subscribable-things/build/es2019/types/video-frame-request-callback.js", "../../subscribable-things/build/es2019/types/wake-lock-factory.js", "../../subscribable-things/build/es2019/types/wake-lock-function.js", "../../subscribable-things/build/es2019/types/wake-lock-type.js", "../../subscribable-things/build/es2019/types/window.js", "../../subscribable-things/build/es2019/types/window-factory.js", "../../subscribable-things/build/es2019/types/wrap-subscribe-function-factory.js", "../../subscribable-things/build/es2019/types/wrap-subscribe-function-function.js", "../../subscribable-things/src/types/index.ts", "../../subscribable-things/src/module.ts", "../../dashify/index.js", "../../indefinite-article/indefinite-article.js", "../../compilerr/build/es2019/interfaces/augmented-error.js", "../../compilerr/build/es2019/interfaces/aws-error.js", "../../compilerr/build/es2019/interfaces/error-template.js", "../../compilerr/build/es2019/interfaces/param-object.js", "../../compilerr/build/es2019/interfaces/variable.js", "../../compilerr/src/interfaces/index.ts", "../../compilerr/build/es2019/types/render-function.js", "../../compilerr/src/types/index.ts", "../../compilerr/src/module.ts", "../../recorder-audio-worklet/node_modules/worker-factory/src/helpers/error-renderers.ts", "../../recorder-audio-worklet/node_modules/worker-factory/src/helpers/create-message-handler.ts", "../../recorder-audio-worklet/node_modules/worker-factory/src/helpers/is-supporting-transferables.ts", "../../recorder-audio-worklet/node_modules/worker-factory/src/helpers/extend-worker-implementation.ts", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/broker-event.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/broker-message.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/default-worker-definition.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/error.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/error-notification.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/error-response.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/notification.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/receiver.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/request.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/value-array.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/value-map.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/worker-definition.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/worker-error-message.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/interfaces/worker-result-message.js", "../../recorder-audio-worklet/node_modules/worker-factory/src/interfaces/index.ts", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/destroy-worker-function.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/message.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/message-receiver.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/message-receiver-with-params.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/message-receiver-without-params.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/typed-array.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/value.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/value-map.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/worker-definition.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/worker-implementation.js", "../../recorder-audio-worklet/node_modules/worker-factory/build/es2019/types/worker-message.js", "../../recorder-audio-worklet/node_modules/worker-factory/src/types/index.ts", "../../recorder-audio-worklet/node_modules/worker-factory/src/module.ts", "../../recorder-audio-worklet/src/factories/add-recorder-audio-worklet-module.ts", "../../recorder-audio-worklet/src/factories/listener.ts", "../../recorder-audio-worklet/src/factories/post-message-factory.ts", "../../recorder-audio-worklet/src/factories/recorder-audio-worklet-node-factory.ts", "../../recorder-audio-worklet/src/functions/validate-state.ts", "../../recorder-audio-worklet/src/worklet/worklet.ts", "../../recorder-audio-worklet/build/es2019/interfaces/native-recorder-audio-worklet-node.js", "../../recorder-audio-worklet/build/es2019/interfaces/recorder-audio-worklet-node.js", "../../recorder-audio-worklet/src/interfaces/index.ts", "../../recorder-audio-worklet/build/es2019/types/any-recorder-audio-worklet-node-options.js", "../../recorder-audio-worklet/build/es2019/types/native-recorder-audio-worklet-node-options.js", "../../recorder-audio-worklet/build/es2019/types/recorder-audio-worklet-node-options.js", "../../recorder-audio-worklet/build/es2019/types/state.js", "../../recorder-audio-worklet/src/types/index.ts", "../../recorder-audio-worklet/src/module.ts", "../../automation-events/src/functions/create-extended-exponential-ramp-to-value-automation-event.ts", "../../automation-events/src/functions/create-extended-linear-ramp-to-value-automation-event.ts", "../../automation-events/src/functions/create-set-value-automation-event.ts", "../../automation-events/src/functions/create-set-value-curve-automation-event.ts", "../../automation-events/src/functions/get-target-value-at-time.ts", "../../automation-events/src/guards/exponential-ramp-to-value-automation-event.ts", "../../automation-events/src/guards/linear-ramp-to-value-automation-event.ts", "../../automation-events/src/guards/any-ramp-to-value-automation-event.ts", "../../automation-events/src/guards/set-value-automation-event.ts", "../../automation-events/src/guards/set-value-curve-automation-event.ts", "../../automation-events/src/functions/get-value-of-automation-event-at-index-at-time.ts", "../../automation-events/src/functions/get-end-time-and-value-of-previous-automation-event.ts", "../../automation-events/src/guards/cancel-and-hold-automation-event.ts", "../../automation-events/src/guards/cancel-scheduled-values-automation-event.ts", "../../automation-events/src/functions/get-event-time.ts", "../../automation-events/src/functions/get-exponential-ramp-value-at-time.ts", "../../automation-events/src/functions/get-linear-ramp-value-at-time.ts", "../../automation-events/src/functions/interpolate-value.ts", "../../automation-events/src/functions/get-value-curve-value-at-time.ts", "../../automation-events/src/guards/set-target-automation-event.ts", "../../automation-events/src/classes/automation-event-list.ts", "../../automation-events/src/functions/create-cancel-and-hold-automation-event.ts", "../../automation-events/src/functions/create-cancel-scheduled-values-automation-event.ts", "../../automation-events/src/functions/create-exponential-ramp-to-value-automation-event.ts", "../../automation-events/src/functions/create-linear-ramp-to-value-automation-event.ts", "../../automation-events/src/functions/create-set-target-automation-event.ts", "../../automation-events/build/es2019/interfaces/cancel-and-hold-automation-event.js", "../../automation-events/build/es2019/interfaces/cancel-scheduled-values-automation-event.js", "../../automation-events/build/es2019/interfaces/exponential-ramp-to-value-automation-event.js", "../../automation-events/build/es2019/interfaces/extended-exponential-ramp-to-value-automation-event.js", "../../automation-events/build/es2019/interfaces/extended-linear-ramp-to-value-automation-event.js", "../../automation-events/build/es2019/interfaces/linear-ramp-to-value-automation-event.js", "../../automation-events/build/es2019/interfaces/set-value-automation-event.js", "../../automation-events/build/es2019/interfaces/set-target-automation-event.js", "../../automation-events/build/es2019/interfaces/set-value-curve-automation-event.js", "../../automation-events/src/interfaces/index.ts", "../../automation-events/build/es2019/types/automation-event.js", "../../automation-events/build/es2019/types/persistent-automation-event.js", "../../automation-events/src/types/index.ts", "../../automation-events/src/module.ts", "../../standardized-audio-context/src/factories/abort-error.ts", "../../standardized-audio-context/src/factories/add-active-input-connection-to-audio-node.ts", "../../standardized-audio-context/src/factories/add-audio-node-connections.ts", "../../standardized-audio-context/src/factories/add-audio-param-connections.ts", "../../standardized-audio-context/src/globals.ts", "../../standardized-audio-context/src/helpers/is-constructible.ts", "../../standardized-audio-context/src/helpers/split-import-statements.ts", "../../standardized-audio-context/src/factories/add-audio-worklet-module.ts", "../../standardized-audio-context/src/helpers/get-value-for-key.ts", "../../standardized-audio-context/src/helpers/pick-element-from-set.ts", "../../standardized-audio-context/src/helpers/delete-passive-input-connection-to-audio-node.ts", "../../standardized-audio-context/src/helpers/get-event-listeners-of-audio-node.ts", "../../standardized-audio-context/src/helpers/set-internal-state-to-active.ts", "../../standardized-audio-context/src/guards/audio-worklet-node.ts", "../../standardized-audio-context/src/helpers/set-internal-state-to-passive.ts", "../../standardized-audio-context/src/helpers/set-internal-state-to-passive-when-necessary.ts", "../../standardized-audio-context/src/factories/add-connection-to-audio-node.ts", "../../standardized-audio-context/src/factories/add-passive-input-connection-to-audio-node.ts", "../../standardized-audio-context/src/factories/add-silent-connection.ts", "../../standardized-audio-context/src/factories/add-unrendered-audio-worklet-node.ts", "../../standardized-audio-context/src/factories/analyser-node-constructor.ts", "../../standardized-audio-context/src/helpers/is-owned-by-context.ts", "../../standardized-audio-context/src/factories/analyser-node-renderer-factory.ts", "../../standardized-audio-context/src/helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support.ts", "../../standardized-audio-context/src/factories/index-size-error.ts", "../../standardized-audio-context/src/helpers/wrap-audio-buffer-get-channel-data-method.ts", "../../standardized-audio-context/src/factories/audio-buffer-constructor.ts", "../../standardized-audio-context/src/constants.ts", "../../standardized-audio-context/src/helpers/is-active-audio-node.ts", "../../standardized-audio-context/src/factories/audio-buffer-source-node-constructor.ts", "../../standardized-audio-context/src/factories/audio-buffer-source-node-renderer-factory.ts", "../../standardized-audio-context/src/guards/audio-buffer-source-node.ts", "../../standardized-audio-context/src/guards/biquad-filter-node.ts", "../../standardized-audio-context/src/guards/constant-source-node.ts", "../../standardized-audio-context/src/guards/gain-node.ts", "../../standardized-audio-context/src/guards/oscillator-node.ts", "../../standardized-audio-context/src/guards/stereo-panner-node.ts", "../../standardized-audio-context/src/helpers/get-audio-node-connections.ts", "../../standardized-audio-context/src/helpers/get-audio-param-connections.ts", "../../standardized-audio-context/src/helpers/deactivate-active-audio-node-input-connections.ts", "../../standardized-audio-context/src/helpers/deactivate-audio-graph.ts", "../../standardized-audio-context/src/helpers/is-valid-latency-hint.ts", "../../standardized-audio-context/src/factories/audio-context-constructor.ts", "../../standardized-audio-context/src/factories/audio-destination-node-constructor.ts", "../../standardized-audio-context/src/factories/audio-destination-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/audio-listener-factory.ts", "../../standardized-audio-context/src/guards/audio-node.ts", "../../standardized-audio-context/src/guards/audio-node-output-connection.ts", "../../standardized-audio-context/src/helpers/insert-element-in-set.ts", "../../standardized-audio-context/src/helpers/add-active-input-connection-to-audio-param.ts", "../../standardized-audio-context/src/helpers/add-passive-input-connection-to-audio-param.ts", "../../standardized-audio-context/src/guards/native-audio-node-faker.ts", "../../standardized-audio-context/src/helpers/connect-native-audio-node-to-native-audio-node.ts", "../../standardized-audio-context/src/helpers/delete-active-input-connection.ts", "../../standardized-audio-context/src/helpers/delete-active-input-connection-to-audio-param.ts", "../../standardized-audio-context/src/helpers/delete-event-listeners-of-audio-node.ts", "../../standardized-audio-context/src/helpers/delete-passive-input-connection-to-audio-param.ts", "../../standardized-audio-context/src/helpers/disconnect-native-audio-node-from-native-audio-node.ts", "../../standardized-audio-context/src/helpers/get-native-audio-node.ts", "../../standardized-audio-context/src/helpers/get-native-audio-param.ts", "../../standardized-audio-context/src/helpers/is-part-of-a-cycle.ts", "../../standardized-audio-context/src/helpers/is-passive-audio-node.ts", "../../standardized-audio-context/src/helpers/test-audio-node-disconnect-method-support.ts", "../../standardized-audio-context/src/helpers/visit-each-audio-node-once.ts", "../../standardized-audio-context/src/guards/native-audio-node.ts", "../../standardized-audio-context/src/helpers/wrap-audio-node-disconnect-method.ts", "../../standardized-audio-context/src/factories/audio-node-constructor.ts", "../../standardized-audio-context/src/factories/audio-param-factory.ts", "../../standardized-audio-context/src/factories/audio-param-renderer.ts", "../../standardized-audio-context/src/read-only-map.ts", "../../standardized-audio-context/src/factories/audio-worklet-node-constructor.ts", "../../standardized-audio-context/src/helpers/copy-from-channel.ts", "../../standardized-audio-context/src/helpers/copy-to-channel.ts", "../../standardized-audio-context/src/helpers/create-nested-arrays.ts", "../../standardized-audio-context/src/helpers/get-audio-worklet-processor.ts", "../../standardized-audio-context/src/factories/audio-worklet-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/base-audio-context-constructor.ts", "../../standardized-audio-context/src/factories/biquad-filter-node-constructor.ts", "../../standardized-audio-context/src/factories/biquad-filter-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/cache-test-result.ts", "../../standardized-audio-context/src/factories/channel-merger-node-constructor.ts", "../../standardized-audio-context/src/factories/channel-merger-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/channel-splitter-node-constructor.ts", "../../standardized-audio-context/src/factories/channel-splitter-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/connect-audio-param.ts", "../../standardized-audio-context/src/factories/connect-multiple-outputs.ts", "../../standardized-audio-context/src/factories/connected-native-audio-buffer-source-node-factory.ts", "../../standardized-audio-context/src/factories/constant-source-node-constructor.ts", "../../standardized-audio-context/src/factories/constant-source-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/convert-number-to-unsigned-long.ts", "../../standardized-audio-context/src/factories/convolver-node-constructor.ts", "../../standardized-audio-context/src/factories/convolver-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/create-native-offline-audio-context.ts", "../../standardized-audio-context/src/factories/data-clone-error.ts", "../../standardized-audio-context/src/helpers/detach-array-buffer.ts", "../../standardized-audio-context/src/factories/decode-audio-data.ts", "../../standardized-audio-context/src/factories/decrement-cycle-counter.ts", "../../standardized-audio-context/src/factories/delay-node-constructor.ts", "../../standardized-audio-context/src/factories/delay-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/delete-active-input-connection-to-audio-node.ts", "../../standardized-audio-context/src/factories/delete-unrendered-audio-worklet-node.ts", "../../standardized-audio-context/src/guards/delay-node.ts", "../../standardized-audio-context/src/factories/detect-cycles.ts", "../../standardized-audio-context/src/factories/disconnect-multiple-outputs.ts", "../../standardized-audio-context/src/factories/dynamics-compressor-node-constructor.ts", "../../standardized-audio-context/src/factories/dynamics-compressor-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/encoding-error.ts", "../../standardized-audio-context/src/factories/evaluate-source.ts", "../../standardized-audio-context/src/factories/event-target-constructor.ts", "../../standardized-audio-context/src/factories/expose-current-frame-and-current-time.ts", "../../standardized-audio-context/src/factories/fetch-source.ts", "../../standardized-audio-context/src/factories/gain-node-constructor.ts", "../../standardized-audio-context/src/factories/gain-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/get-active-audio-worklet-node-inputs.ts", "../../standardized-audio-context/src/factories/get-audio-node-renderer.ts", "../../standardized-audio-context/src/factories/get-audio-node-tail-time.ts", "../../standardized-audio-context/src/factories/get-audio-param-renderer.ts", "../../standardized-audio-context/src/factories/get-backup-offline-audio-context.ts", "../../standardized-audio-context/src/factories/invalid-state-error.ts", "../../standardized-audio-context/src/factories/get-native-context.ts", "../../standardized-audio-context/src/factories/get-or-create-backup-offline-audio-context.ts", "../../standardized-audio-context/src/factories/get-unrendered-audio-worklet-nodes.ts", "../../standardized-audio-context/src/factories/invalid-access-error.ts", "../../standardized-audio-context/src/helpers/wrap-iir-filter-node-get-frequency-response-method.ts", "../../standardized-audio-context/src/factories/iir-filter-node-constructor.ts", "../../standardized-audio-context/src/helpers/filter-buffer.ts", "../../standardized-audio-context/src/factories/iir-filter-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/increment-cycle-counter-factory.ts", "../../standardized-audio-context/src/factories/is-any-audio-context.ts", "../../standardized-audio-context/src/factories/is-any-audio-node.ts", "../../standardized-audio-context/src/factories/is-any-audio-param.ts", "../../standardized-audio-context/src/factories/is-any-offline-audio-context.ts", "../../standardized-audio-context/src/factories/is-native-audio-context.ts", "../../standardized-audio-context/src/factories/is-native-audio-node.ts", "../../standardized-audio-context/src/factories/is-native-audio-param.ts", "../../standardized-audio-context/src/factories/is-native-context.ts", "../../standardized-audio-context/src/factories/is-native-offline-audio-context.ts", "../../standardized-audio-context/src/factories/is-secure-context.ts", "../../standardized-audio-context/src/factories/is-supported-promise.ts", "../../standardized-audio-context/src/factories/media-element-audio-source-node-constructor.ts", "../../standardized-audio-context/src/factories/media-stream-audio-destination-node-constructor.ts", "../../standardized-audio-context/src/factories/media-stream-audio-source-node-constructor.ts", "../../standardized-audio-context/src/factories/media-stream-track-audio-source-node-constructor.ts", "../../standardized-audio-context/src/factories/minimal-audio-context-constructor.ts", "../../standardized-audio-context/src/factories/minimal-base-audio-context-constructor.ts", "../../standardized-audio-context/src/helpers/test-promise-support.ts", "../../standardized-audio-context/src/factories/minimal-offline-audio-context-constructor.ts", "../../standardized-audio-context/src/factories/monitor-connections.ts", "../../standardized-audio-context/src/helpers/assign-native-audio-node-option.ts", "../../standardized-audio-context/src/helpers/assign-native-audio-node-options.ts", "../../standardized-audio-context/src/helpers/test-analyser-node-get-float-time-domain-data-method-support.ts", "../../standardized-audio-context/src/helpers/wrap-analyser-node-get-float-time-domain-data-method.ts", "../../standardized-audio-context/src/factories/native-analyser-node-factory.ts", "../../standardized-audio-context/src/factories/native-audio-buffer-constructor.ts", "../../standardized-audio-context/src/helpers/assign-native-audio-node-audio-param-value.ts", "../../standardized-audio-context/src/helpers/wrap-audio-buffer-source-node-start-method-consecutive-calls.ts", "../../standardized-audio-context/src/helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters.ts", "../../standardized-audio-context/src/helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters.ts", "../../standardized-audio-context/src/factories/native-audio-buffer-source-node-factory.ts", "../../standardized-audio-context/src/factories/native-audio-context-constructor.ts", "../../standardized-audio-context/src/factories/native-audio-destination-node.ts", "../../standardized-audio-context/src/factories/native-audio-worklet-node-constructor.ts", "../../standardized-audio-context/src/helpers/test-clonability-of-audio-worklet-node-options.ts", "../../standardized-audio-context/src/factories/native-audio-worklet-node-factory.ts", "../../standardized-audio-context/src/helpers/compute-buffer-size.ts", "../../standardized-audio-context/src/helpers/clone-audio-worklet-node-options.ts", "../../standardized-audio-context/src/helpers/create-audio-worklet-processor-promise.ts", "../../standardized-audio-context/src/helpers/create-audio-worklet-processor.ts", "../../standardized-audio-context/src/factories/native-audio-worklet-node-faker-factory.ts", "../../standardized-audio-context/src/factories/native-biquad-filter-node.ts", "../../standardized-audio-context/src/factories/native-channel-merger-node-factory.ts", "../../standardized-audio-context/src/helpers/wrap-channel-splitter-node.ts", "../../standardized-audio-context/src/factories/native-channel-splitter-node.ts", "../../standardized-audio-context/src/factories/native-constant-source-node-factory.ts", "../../standardized-audio-context/src/helpers/intercept-connections.ts", "../../standardized-audio-context/src/factories/native-constant-source-node-faker-factory.ts", "../../standardized-audio-context/src/factories/native-convolver-node-factory.ts", "../../standardized-audio-context/src/factories/native-delay-node.ts", "../../standardized-audio-context/src/factories/native-dynamics-compressor-node-factory.ts", "../../standardized-audio-context/src/factories/native-gain-node.ts", "../../standardized-audio-context/src/factories/native-iir-filter-node-factory.ts", "../../standardized-audio-context/src/factories/native-iir-filter-node-faker-factory.ts", "../../standardized-audio-context/src/factories/native-media-element-audio-source-node.ts", "../../standardized-audio-context/src/factories/native-media-stream-audio-destination-node.ts", "../../standardized-audio-context/src/factories/native-media-stream-audio-source-node.ts", "../../standardized-audio-context/src/factories/native-media-stream-track-audio-source-node-factory.ts", "../../standardized-audio-context/src/factories/native-offline-audio-context-constructor.ts", "../../standardized-audio-context/src/factories/native-oscillator-node-factory.ts", "../../standardized-audio-context/src/factories/native-panner-node-factory.ts", "../../standardized-audio-context/src/factories/native-panner-node-faker-factory.ts", "../../standardized-audio-context/src/factories/native-periodic-wave-factory.ts", "../../standardized-audio-context/src/factories/native-script-processor-node.ts", "../../standardized-audio-context/src/factories/native-stereo-panner-node-factory.ts", "../../standardized-audio-context/src/factories/native-stereo-panner-node-faker-factory.ts", "../../standardized-audio-context/src/factories/native-wave-shaper-node-factory.ts", "../../standardized-audio-context/src/factories/native-wave-shaper-node-faker-factory.ts", "../../standardized-audio-context/src/factories/not-supported-error.ts", "../../standardized-audio-context/src/factories/offline-audio-context-constructor.ts", "../../standardized-audio-context/src/factories/oscillator-node-constructor.ts", "../../standardized-audio-context/src/factories/oscillator-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/panner-node-constructor.ts", "../../standardized-audio-context/src/factories/panner-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/periodic-wave-constructor.ts", "../../standardized-audio-context/src/factories/render-automation.ts", "../../standardized-audio-context/src/factories/render-inputs-of-audio-node.ts", "../../standardized-audio-context/src/factories/render-inputs-of-audio-param.ts", "../../standardized-audio-context/src/factories/render-native-offline-audio-context.ts", "../../standardized-audio-context/src/factories/set-active-audio-worklet-node-inputs.ts", "../../standardized-audio-context/src/factories/set-audio-node-tail-time.ts", "../../standardized-audio-context/src/factories/start-rendering.ts", "../../standardized-audio-context/src/factories/stereo-panner-node-constructor.ts", "../../standardized-audio-context/src/factories/stereo-panner-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/test-audio-buffer-constructor-support.ts", "../../standardized-audio-context/src/factories/test-audio-buffer-copy-channel-methods-subarray-support.ts", "../../standardized-audio-context/src/factories/test-audio-context-close-method-support.ts", "../../standardized-audio-context/src/factories/test-audio-context-decode-audio-data-method-type-error-support.ts", "../../standardized-audio-context/src/factories/test-audio-context-options-support.ts", "../../standardized-audio-context/src/factories/test-audio-node-connect-method-support.ts", "../../standardized-audio-context/src/factories/test-audio-worklet-processor-no-outputs-support.ts", "../../standardized-audio-context/src/factories/test-audio-worklet-processor-post-message-support.ts", "../../standardized-audio-context/src/factories/test-channel-merger-node-channel-count-support.ts", "../../standardized-audio-context/src/factories/test-constant-source-node-accurate-scheduling-support.ts", "../../standardized-audio-context/src/factories/test-convolver-node-buffer-reassignability-support.ts", "../../standardized-audio-context/src/factories/test-convolver-node-channel-count-support.ts", "../../standardized-audio-context/src/factories/test-is-secure-context-support.ts", "../../standardized-audio-context/src/factories/test-media-stream-audio-source-node-media-stream-without-audio-track-support.ts", "../../standardized-audio-context/src/factories/test-offline-audio-context-current-time-support.ts", "../../standardized-audio-context/src/factories/test-stereo-panner-node-default-value-support.ts", "../../standardized-audio-context/src/factories/unknown-error.ts", "../../standardized-audio-context/src/factories/wave-shaper-node-constructor.ts", "../../standardized-audio-context/src/factories/wave-shaper-node-renderer-factory.ts", "../../standardized-audio-context/src/factories/window.ts", "../../standardized-audio-context/src/factories/wrap-audio-buffer-copy-channel-methods.ts", "../../standardized-audio-context/src/factories/wrap-audio-buffer-copy-channel-methods-out-of-bounds.ts", "../../standardized-audio-context/src/factories/wrap-audio-buffer-source-node-stop-method-nullified-buffer.ts", "../../standardized-audio-context/src/factories/wrap-channel-merger-node.ts", "../../standardized-audio-context/src/helpers/get-first-sample.ts", "../../standardized-audio-context/src/helpers/is-dc-curve.ts", "../../standardized-audio-context/src/helpers/overwrite-accessors.ts", "../../standardized-audio-context/src/helpers/sanitize-audio-worklet-node-options.ts", "../../standardized-audio-context/src/helpers/sanitize-channel-splitter-options.ts", "../../standardized-audio-context/src/helpers/sanitize-periodic-wave-options.ts", "../../standardized-audio-context/src/helpers/set-value-at-time-until-possible.ts", "../../standardized-audio-context/src/helpers/test-audio-buffer-source-node-start-method-consecutive-calls-support.ts", "../../standardized-audio-context/src/helpers/test-audio-buffer-source-node-start-method-offset-clamping-support.ts", "../../standardized-audio-context/src/helpers/test-audio-buffer-source-node-stop-method-nullified-buffer-support.ts", "../../standardized-audio-context/src/helpers/test-audio-scheduled-source-node-start-method-negative-parameters-support.ts", "../../standardized-audio-context/src/helpers/test-audio-scheduled-source-node-stop-method-consecutive-calls-support.ts", "../../standardized-audio-context/src/helpers/test-audio-scheduled-source-node-stop-method-negative-parameters-support.ts", "../../standardized-audio-context/src/helpers/test-audio-worklet-node-options-clonability.ts", "../../standardized-audio-context/src/helpers/test-dom-exception-constructor-support.ts", "../../standardized-audio-context/src/helpers/test-transferables-support.ts", "../../standardized-audio-context/src/helpers/wrap-audio-buffer-source-node-start-method-offset-clamping.ts", "../../standardized-audio-context/src/helpers/wrap-audio-scheduled-source-node-stop-method-consecutive-calls.ts", "../../standardized-audio-context/src/helpers/wrap-event-listener.ts", "../../standardized-audio-context/build/es2019/interfaces/analyser-node.js", "../../standardized-audio-context/build/es2019/interfaces/analyser-options.js", "../../standardized-audio-context/build/es2019/interfaces/audio-buffer.js", "../../standardized-audio-context/build/es2019/interfaces/audio-buffer-options.js", "../../standardized-audio-context/build/es2019/interfaces/audio-buffer-source-node.js", "../../standardized-audio-context/build/es2019/interfaces/audio-buffer-source-node-renderer.js", "../../standardized-audio-context/build/es2019/interfaces/audio-buffer-source-options.js", "../../standardized-audio-context/build/es2019/interfaces/audio-context.js", "../../standardized-audio-context/build/es2019/interfaces/audio-context-options.js", "../../standardized-audio-context/build/es2019/interfaces/audio-destination-node.js", "../../standardized-audio-context/build/es2019/interfaces/audio-listener.js", "../../standardized-audio-context/build/es2019/interfaces/audio-node.js", "../../standardized-audio-context/build/es2019/interfaces/audio-node-options.js", "../../standardized-audio-context/build/es2019/interfaces/audio-node-renderer.js", "../../standardized-audio-context/build/es2019/interfaces/audio-param.js", "../../standardized-audio-context/build/es2019/interfaces/audio-param-descriptor.js", "../../standardized-audio-context/build/es2019/interfaces/audio-param-renderer.js", "../../standardized-audio-context/build/es2019/interfaces/audio-scheduled-source-node.js", "../../standardized-audio-context/build/es2019/interfaces/audio-scheduled-source-node-event-map.js", "../../standardized-audio-context/build/es2019/interfaces/audio-worklet.js", "../../standardized-audio-context/build/es2019/interfaces/audio-worklet-node.js", "../../standardized-audio-context/build/es2019/interfaces/audio-worklet-node-event-map.js", "../../standardized-audio-context/build/es2019/interfaces/audio-worklet-node-options.js", "../../standardized-audio-context/build/es2019/interfaces/audio-worklet-processor.js", "../../standardized-audio-context/build/es2019/interfaces/audio-worklet-processor-constructor.js", "../../standardized-audio-context/build/es2019/interfaces/automation.js", "../../standardized-audio-context/build/es2019/interfaces/base-audio-context.js", "../../standardized-audio-context/build/es2019/interfaces/biquad-filter-node.js", "../../standardized-audio-context/build/es2019/interfaces/biquad-filter-options.js", "../../standardized-audio-context/build/es2019/interfaces/channel-merger-options.js", "../../standardized-audio-context/build/es2019/interfaces/channel-splitter-options.js", "../../standardized-audio-context/build/es2019/interfaces/common-audio-context.js", "../../standardized-audio-context/build/es2019/interfaces/common-offline-audio-context.js", "../../standardized-audio-context/build/es2019/interfaces/constant-source-node.js", "../../standardized-audio-context/build/es2019/interfaces/constant-source-node-renderer.js", "../../standardized-audio-context/build/es2019/interfaces/constant-source-options.js", "../../standardized-audio-context/build/es2019/interfaces/convolver-node.js", "../../standardized-audio-context/build/es2019/interfaces/convolver-options.js", "../../standardized-audio-context/build/es2019/interfaces/delay-node.js", "../../standardized-audio-context/build/es2019/interfaces/delay-options.js", "../../standardized-audio-context/build/es2019/interfaces/dynamics-compressor-node.js", "../../standardized-audio-context/build/es2019/interfaces/dynamics-compressor-options.js", "../../standardized-audio-context/build/es2019/interfaces/event-target.js", "../../standardized-audio-context/build/es2019/interfaces/gain-node.js", "../../standardized-audio-context/build/es2019/interfaces/gain-options.js", "../../standardized-audio-context/build/es2019/interfaces/iir-filter-node.js", "../../standardized-audio-context/build/es2019/interfaces/iir-filter-options.js", "../../standardized-audio-context/build/es2019/interfaces/media-element-audio-source-node.js", "../../standardized-audio-context/build/es2019/interfaces/media-element-audio-source-options.js", "../../standardized-audio-context/build/es2019/interfaces/media-stream-audio-destination-node.js", "../../standardized-audio-context/build/es2019/interfaces/media-stream-audio-source-node.js", "../../standardized-audio-context/build/es2019/interfaces/media-stream-audio-source-options.js", "../../standardized-audio-context/build/es2019/interfaces/media-stream-track-audio-source-node.js", "../../standardized-audio-context/build/es2019/interfaces/media-stream-track-audio-source-options.js", "../../standardized-audio-context/build/es2019/interfaces/minimal-audio-context.js", "../../standardized-audio-context/build/es2019/interfaces/minimal-base-audio-context.js", "../../standardized-audio-context/build/es2019/interfaces/minimal-base-audio-context-event-map.js", "../../standardized-audio-context/build/es2019/interfaces/minimal-offline-audio-context.js", "../../standardized-audio-context/build/es2019/interfaces/native-audio-node-faker.js", "../../standardized-audio-context/build/es2019/interfaces/native-audio-worklet-node-faker.js", "../../standardized-audio-context/build/es2019/interfaces/native-constant-source-node-faker.js", "../../standardized-audio-context/build/es2019/interfaces/native-convolver-node-faker.js", "../../standardized-audio-context/build/es2019/interfaces/native-iir-filter-node-faker.js", "../../standardized-audio-context/build/es2019/interfaces/native-panner-node-faker.js", "../../standardized-audio-context/build/es2019/interfaces/native-stereo-panner-node-faker.js", "../../standardized-audio-context/build/es2019/interfaces/native-wave-shaper-node-faker.js", "../../standardized-audio-context/build/es2019/interfaces/offline-audio-completion-event.js", "../../standardized-audio-context/build/es2019/interfaces/offline-audio-context.js", "../../standardized-audio-context/build/es2019/interfaces/offline-audio-context-constructor.js", "../../standardized-audio-context/build/es2019/interfaces/offline-audio-context-options.js", "../../standardized-audio-context/build/es2019/interfaces/oscillator-node.js", "../../standardized-audio-context/build/es2019/interfaces/oscillator-node-renderer.js", "../../standardized-audio-context/build/es2019/interfaces/oscillator-options.js", "../../standardized-audio-context/build/es2019/interfaces/panner-node.js", "../../standardized-audio-context/build/es2019/interfaces/panner-options.js", "../../standardized-audio-context/build/es2019/interfaces/periodic-wave.js", "../../standardized-audio-context/build/es2019/interfaces/periodic-wave-constraints.js", "../../standardized-audio-context/build/es2019/interfaces/periodic-wave-options.js", "../../standardized-audio-context/build/es2019/interfaces/read-only-map.js", "../../standardized-audio-context/build/es2019/interfaces/stereo-panner-node.js", "../../standardized-audio-context/build/es2019/interfaces/stereo-panner-options.js", "../../standardized-audio-context/build/es2019/interfaces/wave-shaper-node.js", "../../standardized-audio-context/build/es2019/interfaces/wave-shaper-options.js", "../../standardized-audio-context/src/interfaces/worklet-options.ts", "../../standardized-audio-context/src/interfaces/index.ts", "../../standardized-audio-context/build/es2019/types/abort-error-factory.js", "../../standardized-audio-context/build/es2019/types/active-audio-worklet-node-inputs-store.js", "../../standardized-audio-context/build/es2019/types/active-input-connection.js", "../../standardized-audio-context/build/es2019/types/add-active-input-connection-to-audio-node-factory.js", "../../standardized-audio-context/build/es2019/types/add-active-input-connection-to-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/add-audio-node-connections-factory.js", "../../standardized-audio-context/build/es2019/types/add-audio-node-connections-function.js", "../../standardized-audio-context/build/es2019/types/add-audio-param-connections-factory.js", "../../standardized-audio-context/build/es2019/types/add-audio-param-connections-function.js", "../../standardized-audio-context/build/es2019/types/add-audio-worklet-module-factory.js", "../../standardized-audio-context/build/es2019/types/add-audio-worklet-module-function.js", "../../standardized-audio-context/build/es2019/types/add-connection-to-audio-node-factory.js", "../../standardized-audio-context/build/es2019/types/add-connection-to-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/add-passive-input-connection-to-audio-node-factory.js", "../../standardized-audio-context/build/es2019/types/add-passive-input-connection-to-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/add-silent-connection-factory.js", "../../standardized-audio-context/build/es2019/types/add-silent-connection-function.js", "../../standardized-audio-context/build/es2019/types/add-unrendered-audio-worklet-node-factory.js", "../../standardized-audio-context/build/es2019/types/add-unrendered-audio-worklet-node-function.js", "../../standardized-audio-context/build/es2019/types/analyser-node-constructor.js", "../../standardized-audio-context/build/es2019/types/analyser-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/analyser-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/analyser-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/any-audio-buffer.js", "../../standardized-audio-context/build/es2019/types/any-context.js", "../../standardized-audio-context/build/es2019/types/audio-buffer-constructor.js", "../../standardized-audio-context/build/es2019/types/audio-buffer-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/audio-buffer-source-node-constructor.js", "../../standardized-audio-context/build/es2019/types/audio-buffer-source-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/audio-buffer-source-node-renderer.js", "../../standardized-audio-context/build/es2019/types/audio-buffer-source-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/audio-buffer-source-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/audio-buffer-store.js", "../../standardized-audio-context/build/es2019/types/audio-context-constructor.js", "../../standardized-audio-context/build/es2019/types/audio-context-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/audio-context-latency-category.js", "../../standardized-audio-context/build/es2019/types/audio-context-state.js", "../../standardized-audio-context/build/es2019/types/audio-destination-node-constructor.js", "../../standardized-audio-context/build/es2019/types/audio-destination-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/audio-destination-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/audio-listener-factory.js", "../../standardized-audio-context/build/es2019/types/audio-listener-factory-factory.js", "../../standardized-audio-context/build/es2019/types/audio-node-connections.js", "../../standardized-audio-context/build/es2019/types/audio-node-connections-store.js", "../../standardized-audio-context/build/es2019/types/audio-node-constructor.js", "../../standardized-audio-context/build/es2019/types/audio-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/audio-node-output-connection.js", "../../standardized-audio-context/build/es2019/types/audio-node-renderer.js", "../../standardized-audio-context/build/es2019/types/audio-node-store.js", "../../standardized-audio-context/build/es2019/types/audio-node-tail-time-store.js", "../../standardized-audio-context/build/es2019/types/audio-param-audio-node-store.js", "../../standardized-audio-context/build/es2019/types/audio-param-connections.js", "../../standardized-audio-context/build/es2019/types/audio-param-connections-store.js", "../../standardized-audio-context/build/es2019/types/audio-param-factory.js", "../../standardized-audio-context/build/es2019/types/audio-param-factory-factory.js", "../../standardized-audio-context/build/es2019/types/audio-param-map.js", "../../standardized-audio-context/build/es2019/types/audio-param-output-connection.js", "../../standardized-audio-context/build/es2019/types/audio-param-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/audio-param-store.js", "../../standardized-audio-context/build/es2019/types/audio-worklet-node-constructor.js", "../../standardized-audio-context/build/es2019/types/audio-worklet-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/audio-worklet-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/audio-worklet-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/backup-offline-audio-context-store.js", "../../standardized-audio-context/build/es2019/types/base-audio-context-constructor.js", "../../standardized-audio-context/build/es2019/types/base-audio-context-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/biquad-filter-node-constructor.js", "../../standardized-audio-context/build/es2019/types/biquad-filter-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/biquad-filter-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/biquad-filter-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/biquad-filter-type.js", "../../standardized-audio-context/build/es2019/types/channel-count-mode.js", "../../standardized-audio-context/build/es2019/types/channel-interpretation.js", "../../standardized-audio-context/build/es2019/types/channel-merger-node-constructor.js", "../../standardized-audio-context/build/es2019/types/channel-merger-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/channel-merger-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/channel-merger-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/channel-splitter-node-constructor.js", "../../standardized-audio-context/build/es2019/types/channel-splitter-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/channel-splitter-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/channel-splitter-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/cache-test-result-factory.js", "../../standardized-audio-context/build/es2019/types/cache-test-result-function.js", "../../standardized-audio-context/build/es2019/types/connect-audio-param-factory.js", "../../standardized-audio-context/build/es2019/types/connect-audio-param-function.js", "../../standardized-audio-context/build/es2019/types/connect-multiple-outputs-factory.js", "../../standardized-audio-context/build/es2019/types/connect-multiple-outputs-function.js", "../../standardized-audio-context/build/es2019/types/connect-native-audio-node-to-native-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/connected-native-audio-buffer-source-node-factory.js", "../../standardized-audio-context/build/es2019/types/connected-native-audio-buffer-source-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/constant-source-node-constructor.js", "../../standardized-audio-context/build/es2019/types/constant-source-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/constant-source-node-renderer.js", "../../standardized-audio-context/build/es2019/types/constant-source-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/constant-source-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/constructor.js", "../../standardized-audio-context/build/es2019/types/context.js", "../../standardized-audio-context/build/es2019/types/context-store.js", "../../standardized-audio-context/build/es2019/types/convert-number-to-unsigned-long-factory.js", "../../standardized-audio-context/build/es2019/types/convert-number-to-unsigned-long-function.js", "../../standardized-audio-context/build/es2019/types/convolver-node-constructor.js", "../../standardized-audio-context/build/es2019/types/convolver-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/convolver-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/convolver-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/create-native-offline-audio-context-factory.js", "../../standardized-audio-context/build/es2019/types/create-native-offline-audio-context-function.js", "../../standardized-audio-context/build/es2019/types/cycle-counters.js", "../../standardized-audio-context/build/es2019/types/data-clone-error-factory.js", "../../standardized-audio-context/build/es2019/types/decode-audio-data-factory.js", "../../standardized-audio-context/build/es2019/types/decode-audio-data-function.js", "../../standardized-audio-context/build/es2019/types/decode-error-callback.js", "../../standardized-audio-context/build/es2019/types/decode-success-callback.js", "../../standardized-audio-context/build/es2019/types/decrement-cycle-counter-factory.js", "../../standardized-audio-context/build/es2019/types/decrement-cycle-counter-function.js", "../../standardized-audio-context/build/es2019/types/delay-node-constructor.js", "../../standardized-audio-context/build/es2019/types/delay-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/delay-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/delay-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/delete-active-input-connection-to-audio-node-factory.js", "../../standardized-audio-context/build/es2019/types/delete-active-input-connection-to-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/delete-unrendered-audio-worklet-node-factory.js", "../../standardized-audio-context/build/es2019/types/delete-unrendered-audio-worklet-node-function.js", "../../standardized-audio-context/build/es2019/types/detect-cycles-factory.js", "../../standardized-audio-context/build/es2019/types/detect-cycles-function.js", "../../standardized-audio-context/build/es2019/types/disconnect-multiple-outputs-factory.js", "../../standardized-audio-context/build/es2019/types/disconnect-multiple-outputs-function.js", "../../standardized-audio-context/build/es2019/types/disconnect-native-audio-node-from-native-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/distance-model-type.js", "../../standardized-audio-context/build/es2019/types/dynamics-compressor-node-constructor.js", "../../standardized-audio-context/build/es2019/types/dynamics-compressor-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/dynamics-compressor-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/dynamics-compressor-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/encoding-error-factory.js", "../../standardized-audio-context/build/es2019/types/error-event-handler.js", "../../standardized-audio-context/build/es2019/types/evaluate-audio-worklet-global-scope-function.js", "../../standardized-audio-context/build/es2019/types/evaluate-source-factory.js", "../../standardized-audio-context/build/es2019/types/evaluate-source-function.js", "../../standardized-audio-context/build/es2019/types/event-handler.js", "../../standardized-audio-context/build/es2019/types/event-target-constructor.js", "../../standardized-audio-context/build/es2019/types/event-target-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/expose-current-frame-and-current-time-factory.js", "../../standardized-audio-context/build/es2019/types/expose-current-frame-and-current-time-function.js", "../../standardized-audio-context/build/es2019/types/fetch-source-factory.js", "../../standardized-audio-context/build/es2019/types/fetch-source-function.js", "../../standardized-audio-context/build/es2019/types/gain-node-constructor.js", "../../standardized-audio-context/build/es2019/types/gain-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/gain-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/gain-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/get-active-audio-worklet-node-inputs-factory.js", "../../standardized-audio-context/build/es2019/types/get-active-audio-worklet-node-inputs-function.js", "../../standardized-audio-context/build/es2019/types/get-audio-node-connections-function.js", "../../standardized-audio-context/build/es2019/types/get-audio-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/get-audio-node-renderer-function.js", "../../standardized-audio-context/build/es2019/types/get-audio-node-tail-time-factory.js", "../../standardized-audio-context/build/es2019/types/get-audio-node-tail-time-function.js", "../../standardized-audio-context/build/es2019/types/get-audio-param-connections-function.js", "../../standardized-audio-context/build/es2019/types/get-audio-param-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/get-audio-param-renderer-function.js", "../../standardized-audio-context/build/es2019/types/get-backup-offline-audio-context-factory.js", "../../standardized-audio-context/build/es2019/types/get-backup-offline-audio-context-function.js", "../../standardized-audio-context/build/es2019/types/get-event-listeners-of-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/get-first-sample-function.js", "../../standardized-audio-context/build/es2019/types/get-native-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/get-native-audio-param-function.js", "../../standardized-audio-context/build/es2019/types/get-native-context-factory.js", "../../standardized-audio-context/build/es2019/types/get-native-context-function.js", "../../standardized-audio-context/build/es2019/types/get-or-create-backup-offline-audio-context-factory.js", "../../standardized-audio-context/build/es2019/types/get-or-create-backup-offline-audio-context-function.js", "../../standardized-audio-context/build/es2019/types/get-unrendered-audio-worklet-nodes-factory.js", "../../standardized-audio-context/build/es2019/types/get-unrendered-audio-worklet-nodes-function.js", "../../standardized-audio-context/build/es2019/types/get-value-for-key-function.js", "../../standardized-audio-context/build/es2019/types/iir-filter-node-constructor.js", "../../standardized-audio-context/build/es2019/types/iir-filter-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/iir-filter-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/iir-filter-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/increment-cycle-counter-factory.js", "../../standardized-audio-context/build/es2019/types/increment-cycle-counter-factory-factory.js", "../../standardized-audio-context/build/es2019/types/increment-cycle-counter-function.js", "../../standardized-audio-context/build/es2019/types/index-size-error-factory.js", "../../standardized-audio-context/build/es2019/types/insert-element-in-set-function.js", "../../standardized-audio-context/build/es2019/types/internal-state-event-listener.js", "../../standardized-audio-context/build/es2019/types/invalid-access-error-factory.js", "../../standardized-audio-context/build/es2019/types/invalid-state-error-factory.js", "../../standardized-audio-context/build/es2019/types/is-active-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/is-any-audio-context-factory.js", "../../standardized-audio-context/build/es2019/types/is-any-audio-context-function.js", "../../standardized-audio-context/build/es2019/types/is-any-audio-node-factory.js", "../../standardized-audio-context/build/es2019/types/is-any-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/is-any-audio-param-factory.js", "../../standardized-audio-context/build/es2019/types/is-any-audio-param-function.js", "../../standardized-audio-context/build/es2019/types/is-any-offline-audio-context-factory.js", "../../standardized-audio-context/build/es2019/types/is-any-offline-audio-context-function.js", "../../standardized-audio-context/build/es2019/types/is-dc-curve-function.js", "../../standardized-audio-context/build/es2019/types/is-native-audio-context-factory.js", "../../standardized-audio-context/build/es2019/types/is-native-audio-context-function.js", "../../standardized-audio-context/build/es2019/types/is-native-audio-node-factory.js", "../../standardized-audio-context/build/es2019/types/is-native-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/is-native-audio-param-factory.js", "../../standardized-audio-context/build/es2019/types/is-native-audio-param-function.js", "../../standardized-audio-context/build/es2019/types/is-native-context-factory.js", "../../standardized-audio-context/build/es2019/types/is-native-context-function.js", "../../standardized-audio-context/build/es2019/types/is-native-offline-audio-context-factory.js", "../../standardized-audio-context/build/es2019/types/is-native-offline-audio-context-function.js", "../../standardized-audio-context/build/es2019/types/is-part-of-a-cycle-function.js", "../../standardized-audio-context/build/es2019/types/is-passive-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/is-secure-context-factory.js", "../../standardized-audio-context/build/es2019/types/is-supported-promise-factory.js", "../../standardized-audio-context/build/es2019/types/media-element-audio-source-node-constructor.js", "../../standardized-audio-context/build/es2019/types/media-element-audio-source-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/media-stream-audio-destination-node-constructor.js", "../../standardized-audio-context/build/es2019/types/media-stream-audio-destination-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/media-stream-audio-source-node-constructor.js", "../../standardized-audio-context/build/es2019/types/media-stream-audio-source-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/media-stream-track-audio-source-node-constructor.js", "../../standardized-audio-context/build/es2019/types/media-stream-track-audio-source-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/minimal-audio-context-constructor.js", "../../standardized-audio-context/build/es2019/types/minimal-audio-context-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/minimal-base-audio-context-constructor.js", "../../standardized-audio-context/build/es2019/types/minimal-base-audio-context-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/minimal-offline-audio-context-constructor.js", "../../standardized-audio-context/build/es2019/types/minimal-offline-audio-context-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/monitor-connections-factory.js", "../../standardized-audio-context/build/es2019/types/monitor-connections-function.js", "../../standardized-audio-context/build/es2019/types/native-analyser-node.js", "../../standardized-audio-context/build/es2019/types/native-analyser-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-analyser-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-buffer.js", "../../standardized-audio-context/build/es2019/types/native-audio-buffer-constructor.js", "../../standardized-audio-context/build/es2019/types/native-audio-buffer-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-buffer-source-node.js", "../../standardized-audio-context/build/es2019/types/native-audio-buffer-source-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-buffer-source-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-context.js", "../../standardized-audio-context/build/es2019/types/native-audio-context-constructor.js", "../../standardized-audio-context/build/es2019/types/native-audio-context-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-destination-node.js", "../../standardized-audio-context/build/es2019/types/native-audio-destination-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-destination-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-listener.js", "../../standardized-audio-context/build/es2019/types/native-audio-node.js", "../../standardized-audio-context/build/es2019/types/native-audio-param.js", "../../standardized-audio-context/build/es2019/types/native-audio-param-map.js", "../../standardized-audio-context/build/es2019/types/native-audio-worklet.js", "../../standardized-audio-context/build/es2019/types/native-audio-worklet-node.js", "../../standardized-audio-context/build/es2019/types/native-audio-worklet-node-constructor.js", "../../standardized-audio-context/build/es2019/types/native-audio-worklet-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-worklet-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-worklet-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-worklet-node-faker-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-worklet-node-faker-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-audio-worklet-node-options.js", "../../standardized-audio-context/build/es2019/types/native-biquad-filter-node.js", "../../standardized-audio-context/build/es2019/types/native-biquad-filter-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-channel-merger-node.js", "../../standardized-audio-context/build/es2019/types/native-channel-merger-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-channel-merger-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-channel-splitter-node.js", "../../standardized-audio-context/build/es2019/types/native-channel-splitter-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-constant-source-node.js", "../../standardized-audio-context/build/es2019/types/native-constant-source-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-constant-source-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-constant-source-node-faker-factory.js", "../../standardized-audio-context/build/es2019/types/native-constant-source-node-faker-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-context.js", "../../standardized-audio-context/build/es2019/types/native-convolver-node.js", "../../standardized-audio-context/build/es2019/types/native-convolver-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-convolver-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-delay-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-delay-node.js", "../../standardized-audio-context/build/es2019/types/native-dynamics-compressor-node.js", "../../standardized-audio-context/build/es2019/types/native-dynamics-compressor-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-dynamics-compressor-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-event-target.js", "../../standardized-audio-context/build/es2019/types/native-gain-node.js", "../../standardized-audio-context/build/es2019/types/native-gain-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-iir-filter-node.js", "../../standardized-audio-context/build/es2019/types/native-iir-filter-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-iir-filter-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-iir-filter-node-faker-factory.js", "../../standardized-audio-context/build/es2019/types/native-iir-filter-node-faker-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-media-element-audio-source-node.js", "../../standardized-audio-context/build/es2019/types/native-media-element-audio-source-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-media-stream-audio-destination-node.js", "../../standardized-audio-context/build/es2019/types/native-media-stream-audio-destination-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-media-stream-audio-source-node.js", "../../standardized-audio-context/build/es2019/types/native-media-stream-audio-source-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-media-stream-track-audio-source-node.js", "../../standardized-audio-context/build/es2019/types/native-media-stream-track-audio-source-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-media-stream-track-audio-source-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-offline-audio-context.js", "../../standardized-audio-context/build/es2019/types/native-offline-audio-context-constructor.js", "../../standardized-audio-context/build/es2019/types/native-offline-audio-context-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/native-oscillator-node.js", "../../standardized-audio-context/build/es2019/types/native-oscillator-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-oscillator-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-panner-node.js", "../../standardized-audio-context/build/es2019/types/native-panner-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-panner-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-panner-node-faker-factory.js", "../../standardized-audio-context/build/es2019/types/native-panner-node-faker-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-periodic-wave.js", "../../standardized-audio-context/build/es2019/types/native-periodic-wave-factory.js", "../../standardized-audio-context/build/es2019/types/native-periodic-wave-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-script-processor-node.js", "../../standardized-audio-context/build/es2019/types/native-script-processor-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-stereo-panner-node.js", "../../standardized-audio-context/build/es2019/types/native-stereo-panner-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-stereo-panner-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-stereo-panner-node-faker-factory.js", "../../standardized-audio-context/build/es2019/types/native-stereo-panner-node-faker-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-wave-shaper-node.js", "../../standardized-audio-context/build/es2019/types/native-wave-shaper-node-factory.js", "../../standardized-audio-context/build/es2019/types/native-wave-shaper-node-factory-factory.js", "../../standardized-audio-context/build/es2019/types/native-wave-shaper-node-faker-factory.js", "../../standardized-audio-context/build/es2019/types/native-wave-shaper-node-faker-factory-factory.js", "../../standardized-audio-context/build/es2019/types/not-supported-error-factory.js", "../../standardized-audio-context/build/es2019/types/offline-audio-context-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/oscillator-node-constructor.js", "../../standardized-audio-context/build/es2019/types/oscillator-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/oscillator-node-renderer.js", "../../standardized-audio-context/build/es2019/types/oscillator-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/oscillator-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/oscillator-type.js", "../../standardized-audio-context/build/es2019/types/output-connection.js", "../../standardized-audio-context/build/es2019/types/over-sample-type.js", "../../standardized-audio-context/build/es2019/types/overwrite-accessors-function.js", "../../standardized-audio-context/build/es2019/types/panner-node-constructor.js", "../../standardized-audio-context/build/es2019/types/panner-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/panner-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/panner-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/panning-model-type.js", "../../standardized-audio-context/build/es2019/types/passive-audio-node-input-connection.js", "../../standardized-audio-context/build/es2019/types/passive-audio-param-input-connection.js", "../../standardized-audio-context/build/es2019/types/periodic-wave-constructor.js", "../../standardized-audio-context/build/es2019/types/periodic-wave-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/pick-element-from-set-function.js", "../../standardized-audio-context/build/es2019/types/render-automation-factory.js", "../../standardized-audio-context/build/es2019/types/render-automation-function.js", "../../standardized-audio-context/build/es2019/types/render-inputs-of-audio-node-factory.js", "../../standardized-audio-context/build/es2019/types/render-inputs-of-audio-node-function.js", "../../standardized-audio-context/build/es2019/types/render-inputs-of-audio-param-factory.js", "../../standardized-audio-context/build/es2019/types/render-inputs-of-audio-param-function.js", "../../standardized-audio-context/build/es2019/types/render-native-offline-audio-context-factory.js", "../../standardized-audio-context/build/es2019/types/render-native-offline-audio-context-function.js", "../../standardized-audio-context/build/es2019/types/sanitize-audio-worklet-node-options-function.js", "../../standardized-audio-context/build/es2019/types/sanitize-channel-splitter-options-function.js", "../../standardized-audio-context/build/es2019/types/sanitize-periodic-wave-options-function.js", "../../standardized-audio-context/build/es2019/types/set-active-audio-worklet-node-inputs-factory.js", "../../standardized-audio-context/build/es2019/types/set-active-audio-worklet-node-inputs-function.js", "../../standardized-audio-context/build/es2019/types/set-audio-node-tail-time-factory.js", "../../standardized-audio-context/build/es2019/types/set-audio-node-tail-time-function.js", "../../standardized-audio-context/build/es2019/types/set-value-at-time-until-possible-function.js", "../../standardized-audio-context/build/es2019/types/start-rendering-factory.js", "../../standardized-audio-context/build/es2019/types/start-rendering-function.js", "../../standardized-audio-context/build/es2019/types/stereo-panner-node-constructor.js", "../../standardized-audio-context/build/es2019/types/stereo-panner-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/stereo-panner-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/stereo-panner-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/test-audio-buffer-copy-channel-methods-subarray-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-audio-buffer-constructor-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-audio-context-close-method-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-audio-context-decode-audio-data-method-type-error-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-audio-context-options-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-audio-node-connect-method-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-audio-worklet-node-options-clonability-function.js", "../../standardized-audio-context/build/es2019/types/test-audio-worklet-processor-no-outputs-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-audio-worklet-processor-post-message-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-channel-merger-node-channel-count-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-constant-source-node-accurate-scheduling-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-convolver-node-buffer-reassignability-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-convolver-node-channel-count-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-is-secure-context-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-media-stream-audio-source-node-media-stream-without-audio-track-support.js", "../../standardized-audio-context/build/es2019/types/test-offline-audio-context-current-time-support-factory.js", "../../standardized-audio-context/build/es2019/types/test-stereo-panner-node-default-value-support-factory.js", "../../standardized-audio-context/build/es2019/types/unknown-error-factory.js", "../../standardized-audio-context/build/es2019/types/unrendered-audio-worklet-node-store.js", "../../standardized-audio-context/build/es2019/types/unrendered-audio-worklet-nodes.js", "../../standardized-audio-context/build/es2019/types/wave-shaper-node-constructor.js", "../../standardized-audio-context/build/es2019/types/wave-shaper-node-constructor-factory.js", "../../standardized-audio-context/build/es2019/types/wave-shaper-node-renderer-factory-factory.js", "../../standardized-audio-context/build/es2019/types/wave-shaper-node-renderer-factory.js", "../../standardized-audio-context/build/es2019/types/window.js", "../../standardized-audio-context/build/es2019/types/window-factory.js", "../../standardized-audio-context/build/es2019/types/wrap-audio-buffer-copy-channel-methods-factory.js", "../../standardized-audio-context/build/es2019/types/wrap-audio-buffer-copy-channel-methods-function.js", "../../standardized-audio-context/build/es2019/types/wrap-audio-buffer-copy-channel-methods-out-of-bounds-factory.js", "../../standardized-audio-context/build/es2019/types/wrap-audio-buffer-copy-channel-methods-out-of-bounds-function.js", "../../standardized-audio-context/build/es2019/types/wrap-audio-buffer-source-node-start-method-offset-clamping-function.js", "../../standardized-audio-context/build/es2019/types/wrap-audio-buffer-source-node-stop-method-nullified-buffer-factory.js", "../../standardized-audio-context/build/es2019/types/wrap-audio-buffer-source-node-stop-method-nullified-buffer-function.js", "../../standardized-audio-context/build/es2019/types/wrap-audio-scheduled-source-node-stop-method-consecutive-calls-function.js", "../../standardized-audio-context/build/es2019/types/wrap-channel-merger-node-factory.js", "../../standardized-audio-context/build/es2019/types/wrap-channel-merger-node-function.js", "../../standardized-audio-context/build/es2019/types/wrap-event-listener-function.js", "../../standardized-audio-context/src/types/index.ts", "../../standardized-audio-context/src/module.ts", "../../extendable-media-recorder/src/factories/web-audio-media-recorder.ts", "../../multi-buffer-data-view/src/classes/multi-buffer-data-view.ts", "../../multi-buffer-data-view/src/module.ts", "../../extendable-media-recorder/src/factories/webm-pcm-media-recorder.ts", "../../extendable-media-recorder/src/factories/window.ts", "../../extendable-media-recorder/src/functions/read-variable-size-integer-length.ts", "../../extendable-media-recorder/src/functions/wrap-event-listener.ts", "../../extendable-media-recorder/build/es2019/interfaces/audio-nodes-and-encoder-id.js", "../../extendable-media-recorder/build/es2019/interfaces/blob-event.js", "../../extendable-media-recorder/build/es2019/interfaces/blob-event-init.js", "../../extendable-media-recorder/build/es2019/interfaces/event-target.js", "../../extendable-media-recorder/build/es2019/interfaces/media-recorder.js", "../../extendable-media-recorder/build/es2019/interfaces/media-recorder-constructor.js", "../../extendable-media-recorder/build/es2019/interfaces/media-recorder-event-map.js", "../../extendable-media-recorder/build/es2019/interfaces/media-recorder-options.js", "../../extendable-media-recorder/src/interfaces/index.ts", "../../extendable-media-recorder/build/es2019/types/blob-event-constructor.js", "../../extendable-media-recorder/build/es2019/types/blob-event-handler.js", "../../extendable-media-recorder/build/es2019/types/blob-event-factory.js", "../../extendable-media-recorder/build/es2019/types/blob-event-factory-factory.js", "../../extendable-media-recorder/build/es2019/types/decode-web-m-chunk-factory.js", "../../extendable-media-recorder/build/es2019/types/decode-web-m-chunk-function.js", "../../extendable-media-recorder/build/es2019/types/element-type.js", "../../extendable-media-recorder/build/es2019/types/error-event-handler.js", "../../extendable-media-recorder/build/es2019/types/event-handler.js", "../../extendable-media-recorder/build/es2019/types/event-target-constructor.js", "../../extendable-media-recorder/build/es2019/types/event-target-constructor-factory.js", "../../extendable-media-recorder/build/es2019/types/event-target-factory.js", "../../extendable-media-recorder/build/es2019/types/event-target-factory-factory.js", "../../extendable-media-recorder/build/es2019/types/invalid-modification-error-factory.js", "../../extendable-media-recorder/build/es2019/types/invalid-state-error-factory.js", "../../extendable-media-recorder/build/es2019/types/is-supported-promise-factory.js", "../../extendable-media-recorder/build/es2019/types/media-recorder-constructor-factory.js", "../../extendable-media-recorder/build/es2019/types/native-blob-event-factory.js", "../../extendable-media-recorder/build/es2019/types/native-event-target.js", "../../extendable-media-recorder/build/es2019/types/native-media-recorder-constructor-factory.js", "../../extendable-media-recorder/build/es2019/types/native-media-recorder-factory.js", "../../extendable-media-recorder/build/es2019/types/native-media-recorder-factory-factory.js", "../../extendable-media-recorder/build/es2019/types/not-supported-error-factory.js", "../../extendable-media-recorder/build/es2019/types/promised-data-view-element-type-encoder-id-and-port.js", "../../extendable-media-recorder/build/es2019/types/read-element-content-factory.js", "../../extendable-media-recorder/build/es2019/types/read-element-content-function.js", "../../extendable-media-recorder/build/es2019/types/read-element-type-factory.js", "../../extendable-media-recorder/build/es2019/types/read-element-type-function.js", "../../extendable-media-recorder/build/es2019/types/read-variable-size-integer-factory.js", "../../extendable-media-recorder/build/es2019/types/read-variable-size-integer-function.js", "../../extendable-media-recorder/build/es2019/types/read-variable-size-integer-length-function.js", "../../extendable-media-recorder/build/es2019/types/recording-state.js", "../../extendable-media-recorder/build/es2019/types/web-audio-media-recorder-factory.js", "../../extendable-media-recorder/build/es2019/types/web-audio-media-recorder-factory-factory.js", "../../extendable-media-recorder/build/es2019/types/webm-pcm-media-recorder-factory.js", "../../extendable-media-recorder/build/es2019/types/webm-pcm-media-recorder-factory-factory.js", "../../extendable-media-recorder/build/es2019/types/window.js", "../../extendable-media-recorder/build/es2019/types/window-factory.js", "../../extendable-media-recorder/build/es2019/types/wrap-event-listener-function.js", "../../extendable-media-recorder/src/types/index.ts", "../../extendable-media-recorder/src/module.ts", "../../extendable-media-recorder-wav-encoder-broker/build/es2019/interfaces/extendable-media-recorder-wav-encoder-broker-definition.js", "../../extendable-media-recorder-wav-encoder-broker/src/interfaces/index.ts", "../../extendable-media-recorder-wav-encoder-broker/build/es2019/types/extendable-media-recorder-wav-encoder-broker-loader.js", "../../extendable-media-recorder-wav-encoder-broker/build/es2019/types/extendable-media-recorder-wav-encoder-broker-wrapper.js", "../../extendable-media-recorder-wav-encoder-broker/build/es2019/types/typed-array.js", "../../extendable-media-recorder-wav-encoder-broker/src/types/index.ts", "../../extendable-media-recorder-wav-encoder-broker/src/module.ts", "../../extendable-media-recorder-wav-encoder/src/worker/worker.ts", "../../extendable-media-recorder-wav-encoder/src/module.ts", "../../react-media-recorder/lib/index.js", "../../react-media-recorder/index.js"],
  "sourcesContent": ["import type { createGenerateUniqueNumber } from './generate-unique-number';\r\n\r\nexport const createAddUniqueNumber = (generateUniqueNumber: ReturnType<typeof createGenerateUniqueNumber>) => {\r\n    return (set: Set<number>) => {\r\n        const number = generateUniqueNumber(set);\r\n\r\n        set.add(number);\r\n\r\n        return number;\r\n    };\r\n};\r\n", "export const createCache = (lastNumberWeakMap: WeakMap<Map<number, any> | Set<number>, number>) => {\r\n    return (collection: Map<number, any> | Set<number>, nextNumber: number) => {\r\n        lastNumberWeakMap.set(collection, nextNumber);\r\n\r\n        return nextNumber;\r\n    };\r\n};\r\n", "import type { createCache } from './cache';\r\n\r\n/*\r\n * The value of the constant Number.MAX_SAFE_INTEGER equals (2 ** 53 - 1) but it\r\n * is fairly new.\r\n */\r\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER === undefined ? 9007199254740991 : Number.MAX_SAFE_INTEGER;\r\nconst TWO_TO_THE_POWER_OF_TWENTY_NINE = 536870912;\r\nconst TWO_TO_THE_POWER_OF_THIRTY = TWO_TO_THE_POWER_OF_TWENTY_NINE * 2;\r\n\r\nexport const createGenerateUniqueNumber = (\r\n    cache: ReturnType<typeof createCache>,\r\n    lastNumberWeakMap: WeakMap<Map<number, any> | Set<number>, number>\r\n) => {\r\n    return (collection: Map<number, any> | Set<number>) => {\r\n        const lastNumber = lastNumberWeakMap.get(collection);\r\n\r\n        /*\r\n         * Let's try the cheapest algorithm first. It might fail to produce a new\r\n         * number, but it is so cheap that it is okay to take the risk. Just\r\n         * increase the last number by one or reset it to 0 if we reached the upper\r\n         * bound of SMIs (which stands for small integers). When the last number is\r\n         * unknown it is assumed that the collection contains zero based consecutive\r\n         * numbers.\r\n         */\r\n        let nextNumber = lastNumber === undefined ? collection.size : lastNumber < TWO_TO_THE_POWER_OF_THIRTY ? lastNumber + 1 : 0;\r\n\r\n        if (!collection.has(nextNumber)) {\r\n            return cache(collection, nextNumber);\r\n        }\r\n\r\n        /*\r\n         * If there are less than half of 2 ** 30 numbers stored in the collection,\r\n         * the chance to generate a new random number in the range from 0 to 2 ** 30\r\n         * is at least 50%. It's benifitial to use only SMIs because they perform\r\n         * much better in any environment based on V8.\r\n         */\r\n        if (collection.size < TWO_TO_THE_POWER_OF_TWENTY_NINE) {\r\n            while (collection.has(nextNumber)) {\r\n                nextNumber = Math.floor(Math.random() * TWO_TO_THE_POWER_OF_THIRTY);\r\n            }\r\n\r\n            return cache(collection, nextNumber);\r\n        }\r\n\r\n        // Quickly check if there is a theoretical chance to generate a new number.\r\n        if (collection.size > MAX_SAFE_INTEGER) {\r\n            throw new Error('Congratulations, you created a collection of unique numbers which uses all available integers!');\r\n        }\r\n\r\n        // Otherwise use the full scale of safely usable integers.\r\n        while (collection.has(nextNumber)) {\r\n            nextNumber = Math.floor(Math.random() * MAX_SAFE_INTEGER);\r\n        }\r\n\r\n        return cache(collection, nextNumber);\r\n    };\r\n};\r\n", "import { createAddUniqueNumber } from './factories/add-unique-number';\r\nimport { createCache } from './factories/cache';\r\nimport { createGenerateUniqueNumber } from './factories/generate-unique-number';\r\n\r\nconst LAST_NUMBER_WEAK_MAP = new WeakMap<Map<number, any> | Set<number>, number>();\r\n\r\nconst cache = createCache(LAST_NUMBER_WEAK_MAP);\r\nconst generateUniqueNumber = createGenerateUniqueNumber(cache, LAST_NUMBER_WEAK_MAP);\r\nconst addUniqueNumber = createAddUniqueNumber(generateUniqueNumber);\r\n\r\nexport { addUniqueNumber, generateUniqueNumber };\r\n", "export const isMessagePort = (sender: MessagePort | Worker): sender is MessagePort => {\r\n    return typeof (<MessagePort>sender).start === 'function';\r\n};\r\n", "export const PORT_MAP: WeakMap<MessagePort, number> = new WeakMap();\r\n", "import { IWorkerDefinition } from 'worker-factory';\r\nimport { IBrokerDefinition, IDefaultBrokerDefinition } from '../interfaces';\r\nimport { TBrokerImplementation } from '../types';\r\nimport { PORT_MAP } from './port-map';\r\n\r\nexport const extendBrokerImplementation = <T extends IBrokerDefinition, U extends IWorkerDefinition>(\r\n    partialBrokerImplementation: TBrokerImplementation<T, U>\r\n): TBrokerImplementation<T & IDefaultBrokerDefinition, U> =>\r\n    <TBrokerImplementation<T & IDefaultBrokerDefinition, U>>{\r\n        ...partialBrokerImplementation,\r\n        connect: ({ call }) => {\r\n            return async (): Promise<MessagePort> => {\r\n                const { port1, port2 } = new MessageChannel();\r\n\r\n                const portId = <number>await call('connect', { port: port1 }, [port1]);\r\n\r\n                PORT_MAP.set(port2, portId);\r\n\r\n                return port2;\r\n            };\r\n        },\r\n        disconnect: ({ call }) => {\r\n            return async (port: MessagePort): Promise<void> => {\r\n                const portId = PORT_MAP.get(port);\r\n\r\n                if (portId === undefined) {\r\n                    throw new Error('The given port is not connected.');\r\n                }\r\n\r\n                await call('disconnect', { portId });\r\n            };\r\n        },\r\n        isSupported: ({ call }) => {\r\n            return () => call('isSupported');\r\n        }\r\n    };\r\n", "export {};\r\n//# sourceMappingURL=broker-actions.js.map", "export {};\r\n//# sourceMappingURL=broker-definition.js.map", "export {};\r\n//# sourceMappingURL=default-broker-definition.js.map", "export {};\r\n//# sourceMappingURL=worker-event.js.map", "export * from './broker-actions';\r\nexport * from './broker-definition';\r\nexport * from './default-broker-definition';\r\nexport * from './worker-event';\r\n", "export {};\r\n//# sourceMappingURL=broker-implementation.js.map", "export * from './broker-implementation';\r\n", "import { generateUniqueNumber } from 'fast-unique-numbers';\r\nimport { IWorkerDefinition, IWorkerErrorMessage, IWorkerResultMessage } from 'worker-factory';\r\nimport { isMessagePort } from './guards/message-port';\r\nimport { extendBrokerImplementation } from './helpers/extend-broker-implementation';\r\nimport { IBrokerDefinition, IDefaultBrokerDefinition, IWorkerEvent } from './interfaces';\r\nimport { TBrokerImplementation } from './types';\r\n\r\n/*\r\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\r\n * isolatedModules compiler option.\r\n */\r\nexport * from './interfaces/index';\r\nexport * from './types/index';\r\n\r\nconst ONGOING_REQUESTS = new WeakMap<MessagePort | Worker, Map<number, { reject: Function; resolve: Function }>>();\r\n\r\nconst createOrGetOngoingRequests = (sender: MessagePort | Worker): Map<number, { reject: Function; resolve: Function }> => {\r\n    if (ONGOING_REQUESTS.has(sender)) {\r\n        // @todo TypeScript needs to be convinced that has() works as expected.\r\n        return <Map<number, { reject: Function; resolve: Function }>>ONGOING_REQUESTS.get(sender);\r\n    }\r\n\r\n    const ongoingRequests: Map<number, { reject: Function; resolve: Function }> = new Map();\r\n\r\n    ONGOING_REQUESTS.set(sender, ongoingRequests);\r\n\r\n    return ongoingRequests;\r\n};\r\n\r\nexport const createBroker = <T extends IBrokerDefinition, U extends IWorkerDefinition>(\r\n    brokerImplementation: TBrokerImplementation<T, U>\r\n): ((sender: MessagePort | Worker) => T & IDefaultBrokerDefinition) => {\r\n    const fullBrokerImplementation = extendBrokerImplementation(brokerImplementation);\r\n\r\n    return (sender: MessagePort | Worker) => {\r\n        const ongoingRequests = createOrGetOngoingRequests(sender);\r\n\r\n        sender.addEventListener('message', <EventListener>(({ data: message }: IWorkerEvent) => {\r\n            const { id } = message;\r\n\r\n            if (id !== null && ongoingRequests.has(id)) {\r\n                const { reject, resolve } = <{ reject: Function; resolve: Function }>ongoingRequests.get(id);\r\n\r\n                ongoingRequests.delete(id);\r\n\r\n                if ((<IWorkerErrorMessage>message).error === undefined) {\r\n                    resolve((<IWorkerResultMessage>message).result);\r\n                } else {\r\n                    reject(new Error((<IWorkerErrorMessage>message).error.message));\r\n                }\r\n            }\r\n        }));\r\n\r\n        if (isMessagePort(sender)) {\r\n            sender.start();\r\n        }\r\n\r\n        const call = <V extends keyof U>(method: V, params: U[V]['params'] = null, transferables: U[V]['transferables'] = []) => {\r\n            return new Promise<U[V]['response']['result']>((resolve, reject) => {\r\n                const id = generateUniqueNumber(ongoingRequests);\r\n\r\n                ongoingRequests.set(id, { reject, resolve });\r\n\r\n                if (params === null) {\r\n                    sender.postMessage({ id, method }, <Transferable[]>transferables);\r\n                } else {\r\n                    sender.postMessage({ id, method, params }, <Transferable[]>transferables);\r\n                }\r\n            });\r\n        };\r\n        const notify = <V extends keyof U>(method: V, params: U[V]['params'], transferables: U[V]['transferables'] = []) => {\r\n            sender.postMessage({ id: null, method, params }, <Transferable[]>transferables);\r\n        };\r\n\r\n        let functions: object = {};\r\n\r\n        for (const [key, handler] of Object.entries(fullBrokerImplementation)) {\r\n            functions = { ...functions, [key]: handler({ call, notify }) };\r\n        }\r\n\r\n        return <T & IDefaultBrokerDefinition>{ ...functions };\r\n    };\r\n};\r\n", "export {};\r\n//# sourceMappingURL=media-encoder-host-broker-definition.js.map", "export * from './media-encoder-host-broker-definition';\r\n", "export {};\r\n//# sourceMappingURL=media-encoder-host-broker-loader.js.map", "export {};\r\n//# sourceMappingURL=media-encoder-host-broker-wrapper.js.map", "export * from './media-encoder-host-broker-loader';\r\nexport * from './media-encoder-host-broker-wrapper';\r\n", "import { createBroker } from 'broker-factory';\r\nimport { addUniqueNumber } from 'fast-unique-numbers';\r\nimport { TMediaEncoderHostWorkerDefinition } from 'media-encoder-host-worker';\r\nimport { IMediaEncoderHostBrokerDefinition } from './interfaces';\r\nimport { TMediaEncoderHostBrokerLoader, TMediaEncoderHostBrokerWrapper } from './types';\r\n\r\n/*\r\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\r\n * isolatedModules compiler option.\r\n */\r\nexport * from './interfaces/index';\r\nexport * from './types/index';\r\n\r\nconst encoderIds: Set<number> = new Set();\r\n\r\nexport const wrap: TMediaEncoderHostBrokerWrapper = createBroker<IMediaEncoderHostBrokerDefinition, TMediaEncoderHostWorkerDefinition>({\r\n    deregister: ({ call }) => {\r\n        return (port) => {\r\n            return call('deregister', { port }, [port]);\r\n        };\r\n    },\r\n    encode: ({ call }) => {\r\n        return async (encoderId, timeslice) => {\r\n            const arrayBuffers = await call('encode', { encoderId, timeslice });\r\n\r\n            encoderIds.delete(encoderId);\r\n\r\n            return arrayBuffers;\r\n        };\r\n    },\r\n    instantiate: ({ call }) => {\r\n        return async (mimeType, sampleRate) => {\r\n            const encoderId = addUniqueNumber(encoderIds);\r\n            const port = await call('instantiate', { encoderId, mimeType, sampleRate });\r\n\r\n            return { encoderId, port };\r\n        };\r\n    },\r\n    register: ({ call }) => {\r\n        return (port) => {\r\n            return call('register', { port }, [port]);\r\n        };\r\n    }\r\n});\r\n\r\nexport const load: TMediaEncoderHostBrokerLoader = (url: string) => {\r\n    const worker = new Worker(url);\r\n\r\n    return wrap(worker);\r\n};\r\n", "// This is the minified and stringified code of the media-encoder-host-worker package.\r\nexport const worker = `(()=>{var e={455:function(e,t){!function(e){\"use strict\";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,s=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<s?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*s);return e(r,i)}if(r.size>n)throw new Error(\"Congratulations, you created a collection of unique numbers which uses all available integers!\");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,c=r(i),l=a(c,i),d=t(l);e.addUniqueNumber=d,e.generateUniqueNumber=l}(t)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(()=>{\"use strict\";var e=r(455);const t=new WeakMap,n=new WeakMap,o=(r=>{const o=(s=r,{...s,connect:e=>{let{call:r}=e;return async()=>{const{port1:e,port2:n}=new MessageChannel,o=await r(\"connect\",{port:e},[e]);return t.set(n,o),n}},disconnect:e=>{let{call:r}=e;return async e=>{const n=t.get(e);if(void 0===n)throw new Error(\"The given port is not connected.\");await r(\"disconnect\",{portId:n})}},isSupported:e=>{let{call:t}=e;return()=>t(\"isSupported\")}});var s;return t=>{const r=(e=>{if(n.has(e))return n.get(e);const t=new Map;return n.set(e,t),t})(t);t.addEventListener(\"message\",(e=>{let{data:t}=e;const{id:n}=t;if(null!==n&&r.has(n)){const{reject:e,resolve:o}=r.get(n);r.delete(n),void 0===t.error?o(t.result):e(new Error(t.error.message))}})),(e=>\"function\"==typeof e.start)(t)&&t.start();const s=function(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise(((a,i)=>{const c=(0,e.generateUniqueNumber)(r);r.set(c,{reject:i,resolve:a}),null===o?t.postMessage({id:c,method:n},s):t.postMessage({id:c,method:n,params:o},s)}))},a=function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];t.postMessage({id:null,method:e,params:r},n)};let i={};for(const[e,t]of Object.entries(o))i={...i,[e]:t({call:s,notify:a})};return{...i}}})({characterize:e=>{let{call:t}=e;return()=>t(\"characterize\")},encode:e=>{let{call:t}=e;return(e,r)=>t(\"encode\",{recordingId:e,timeslice:r})},record:e=>{let{call:t}=e;return async(e,r,n)=>{await t(\"record\",{recordingId:e,sampleRate:r,typedArrays:n},n.map((e=>{let{buffer:t}=e;return t})))}}}),s=-32603,a=-32602,i=-32601,c=(e,t)=>Object.assign(new Error(e),{status:t}),l=e=>c('The handler of the method called \"'.concat(e,'\" returned an unexpected result.'),s),d=(e,t)=>async r=>{let{data:{id:n,method:o,params:a}}=r;const d=t[o];try{if(void 0===d)throw(e=>c('The requested method called \"'.concat(e,'\" is not supported.'),i))(o);const t=void 0===a?d():d(a);if(void 0===t)throw(e=>c('The handler of the method called \"'.concat(e,'\" returned no required result.'),s))(o);const r=t instanceof Promise?await t:t;if(null===n){if(void 0!==r.result)throw l(o)}else{if(void 0===r.result)throw l(o);const{result:t,transferables:s=[]}=r;e.postMessage({id:n,result:t},s)}}catch(t){const{message:r,status:o=-32603}=t;e.postMessage({error:{code:o,message:r},id:n})}},u=new Map,h=(t,r,n)=>({...r,connect:n=>{let{port:o}=n;o.start();const s=t(o,r),a=(0,e.generateUniqueNumber)(u);return u.set(a,(()=>{s(),o.close(),u.delete(a)})),{result:a}},disconnect:e=>{let{portId:t}=e;const r=u.get(t);if(void 0===r)throw(e=>c('The specified parameter called \"portId\" with the given value \"'.concat(e,'\" does not identify a port connected to this worker.'),a))(t);return r(),{result:null}},isSupported:async()=>{if(await new Promise((e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=t=>{let{data:r}=t;return e(null!==r)},n.postMessage(t,[t])}))){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),f=function(e,t){const r=h(f,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0),n=d(e,r);return e.addEventListener(\"message\",n),()=>e.removeEventListener(\"message\",n)},p=e=>{e.onmessage=null,e.close()},w=new Map,m=new WeakMap,g=((e,t)=>r=>{const n=t.get(r);if(void 0===n)throw new Error(\"There is no encoder stored which wraps this port.\");e.delete(n),t.delete(r)})(w,m),v=new Map,y=(e=>t=>{const r=e.get(t);if(void 0===r)throw new Error(\"There was no instance of an encoder stored with the given id.\");return r})(v),M=((e,t)=>r=>{const n=t(r);return e.delete(r),n})(v,y),E=((e,t)=>r=>{const[n,o,s,a]=t(r);return s?new Promise((t=>{o.onmessage=s=>{let{data:i}=s;0===i.length?(e(o),t(n.encode(r,null))):n.record(r,a,i)}})):n.encode(r,null)})(p,M),b=(e=>t=>{for(const[r,n]of Array.from(e.values()))if(r.test(t))return n;throw new Error(\"There is no encoder registered which could handle the given mimeType.\")})(w),T=((e,t,r)=>(n,o,s)=>{if(t.has(n))throw new Error('There is already an encoder registered with an id called \"'.concat(n,'\".'));const a=r(o),{port1:i,port2:c}=new MessageChannel,l=[a,i,!0,s];return t.set(n,l),i.onmessage=t=>{let{data:r}=t;0===r.length?(e(i),l[2]=!1):a.record(n,s,r.map((e=>\"number\"==typeof e?new Float32Array(e):e)))},c})(p,v,b),I=((e,t,r)=>async n=>{const o=r(n),s=await o.characterize(),a=s.toString();if(e.has(a)||t.has(n))throw new Error(\"There is already an encoder stored which handles exactly the same mime types.\");return e.set(a,[s,o]),t.set(n,a),s})(w,m,o),A=(e=>(t,r)=>{const[n]=e(t);return n.encode(t,r)})(y);f(self,{deregister:async e=>{let{port:t}=e;return{result:g(t)}},encode:async e=>{let{encoderId:t,timeslice:r}=e;const n=null===r?await E(t):await A(t,r);return{result:n,transferables:n}},instantiate:e=>{let{encoderId:t,mimeType:r,sampleRate:n}=e;const o=T(t,r,n);return{result:o,transferables:[o]}},register:async e=>{let{port:t}=e;return{result:await I(t)}}})})()})();`; // tslint:disable-line:max-line-length\r\n", "import { load as loadWorker } from 'media-encoder-host-broker';\r\nimport { worker } from './worker/worker';\r\n\r\nconst blob: Blob = new Blob([worker], { type: 'application/javascript; charset=utf-8' });\r\n\r\nconst url: string = URL.createObjectURL(blob);\r\n\r\nconst mediaEncoderHost = loadWorker(url);\r\n\r\nexport const connect = mediaEncoderHost.connect;\r\n\r\nexport const deregister = mediaEncoderHost.deregister;\r\n\r\nexport const disconnect = mediaEncoderHost.disconnect;\r\n\r\nexport const encode = mediaEncoderHost.encode;\r\n\r\nexport const instantiate = mediaEncoderHost.instantiate;\r\n\r\nexport const isSupported = mediaEncoderHost.isSupported;\r\n\r\nexport const register = mediaEncoderHost.register;\r\n\r\nURL.revokeObjectURL(url);\r\n", "import { IBlobEvent } from '../interfaces';\r\nimport { TBlobEventFactoryFactory } from '../types';\r\n\r\nexport const createBlobEventFactory: TBlobEventFactoryFactory = (nativeBlobEventConstructor) => {\r\n    return (type, blobEventInit) => {\r\n        // Bug #14: Safari does not yet support the BlobEvent.\r\n        if (nativeBlobEventConstructor === null) {\r\n            const { data, ...eventInit } = blobEventInit;\r\n            const fakeBlobEvent = <IBlobEvent>new Event(type, eventInit);\r\n\r\n            (<Omit<IBlobEvent, 'data'> & { -readonly [P in 'data']: IBlobEvent[P] }>fakeBlobEvent).data = data;\r\n\r\n            return fakeBlobEvent;\r\n        }\r\n\r\n        return new nativeBlobEventConstructor(type, blobEventInit);\r\n    };\r\n};\r\n", "import { TDecodeWebMChunkFactory } from '../types';\r\n\r\nexport const createDecodeWebMChunk: TDecodeWebMChunkFactory = (readElementContent, readElementType) => {\r\n    return (dataView, elementType, channelCount) => {\r\n        const contents: (readonly Float32Array[])[] = [];\r\n\r\n        let currentElementType = elementType;\r\n        let offset = 0;\r\n\r\n        while (offset < dataView.byteLength) {\r\n            if (currentElementType === null) {\r\n                const lengthAndType = readElementType(dataView, offset);\r\n\r\n                if (lengthAndType === null) {\r\n                    break;\r\n                }\r\n\r\n                const { length, type } = lengthAndType;\r\n\r\n                currentElementType = type;\r\n                offset += length;\r\n            } else {\r\n                const contentAndLength = readElementContent(dataView, offset, currentElementType, channelCount);\r\n\r\n                if (contentAndLength === null) {\r\n                    break;\r\n                }\r\n\r\n                const { content, length } = contentAndLength;\r\n\r\n                currentElementType = null;\r\n                offset += length;\r\n\r\n                if (content !== null) {\r\n                    contents.push(content);\r\n                }\r\n            }\r\n        }\r\n\r\n        return { contents, currentElementType, offset };\r\n    };\r\n};\r\n", "import { IEventTarget } from '../interfaces';\r\nimport { TEventHandler, TEventTargetConstructorFactory, TNativeEventTarget } from '../types';\r\n\r\nexport const createEventTargetConstructor: TEventTargetConstructorFactory = (createEventTarget, wrapEventListener) => {\r\n    return class EventTarget<EventMap extends Record<string, Event>> implements IEventTarget<EventMap> {\r\n        private _listeners: WeakMap<EventListenerOrEventListenerObject, EventListenerOrEventListenerObject>;\r\n\r\n        private _nativeEventTarget: TNativeEventTarget;\r\n\r\n        constructor(nativeEventTarget: null | TNativeEventTarget = null) {\r\n            this._listeners = new WeakMap();\r\n            this._nativeEventTarget = nativeEventTarget === null ? createEventTarget() : nativeEventTarget;\r\n        }\r\n\r\n        public addEventListener(\r\n            type: string,\r\n            listener: null | TEventHandler<this> | EventListenerOrEventListenerObject,\r\n            options?: boolean | AddEventListenerOptions\r\n        ): void {\r\n            if (listener !== null) {\r\n                let wrappedEventListener = this._listeners.get(listener);\r\n\r\n                if (wrappedEventListener === undefined) {\r\n                    wrappedEventListener = wrapEventListener(this, listener);\r\n\r\n                    if (typeof listener === 'function') {\r\n                        this._listeners.set(listener, wrappedEventListener);\r\n                    }\r\n                }\r\n\r\n                this._nativeEventTarget.addEventListener(type, wrappedEventListener, options);\r\n            }\r\n        }\r\n\r\n        public dispatchEvent(event: Event): boolean {\r\n            return this._nativeEventTarget.dispatchEvent(event);\r\n        }\r\n\r\n        public removeEventListener(\r\n            type: string,\r\n            listener: null | TEventHandler<this> | EventListenerOrEventListenerObject,\r\n            options?: boolean | EventListenerOptions\r\n        ): void {\r\n            const wrappedEventListener = listener === null ? undefined : this._listeners.get(listener);\r\n\r\n            this._nativeEventTarget.removeEventListener(type, wrappedEventListener === undefined ? null : wrappedEventListener, options);\r\n        }\r\n    };\r\n};\r\n", "import { TEventTargetFactoryFactory } from '../types';\r\n\r\nexport const createEventTargetFactory: TEventTargetFactoryFactory = (window) => {\r\n    return () => {\r\n        if (window === null) {\r\n            throw new Error('A native EventTarget could not be created.');\r\n        }\r\n\r\n        return window.document.createElement('p');\r\n    };\r\n};\r\n", "import { TInvalidModificationErrorFactory } from '../types';\r\n\r\nexport const createInvalidModificationError: TInvalidModificationErrorFactory = (message = '') => {\r\n    try {\r\n        return new DOMException(message, 'InvalidModificationError');\r\n    } catch (err) {\r\n        // @todo Edge is the only browser that does not yet allow to construct a DOMException.\r\n        err.code = 13;\r\n        err.message = message;\r\n        err.name = 'InvalidModificationError';\r\n\r\n        return err;\r\n    }\r\n};\r\n", "import { TInvalidStateErrorFactory } from '../types';\r\n\r\nexport const createInvalidStateError: TInvalidStateErrorFactory = () => {\r\n    try {\r\n        return new DOMException('', 'InvalidStateError');\r\n    } catch (err) {\r\n        // Bug #122: Edge is the only browser that does not yet allow to construct a DOMException.\r\n        err.code = 11;\r\n        err.name = 'InvalidStateError';\r\n\r\n        return err;\r\n    }\r\n};\r\n", "import { TIsSupportedPromiseFactory } from '../types';\r\n\r\nexport const createIsSupportedPromise: TIsSupportedPromiseFactory = (window) => {\r\n    if (\r\n        window !== null &&\r\n        window.MediaStream !== undefined &&\r\n        /*\r\n         * Bug #10: An early experimental implemenation in Safari did not provide the isTypeSupported() function.\r\n         */\r\n        (window.MediaRecorder === undefined || window.MediaRecorder.isTypeSupported !== undefined)\r\n    ) {\r\n        /*\r\n         * Bug #5: Up until v70 Firefox did emit a blob of type video/webm when asked to encode a MediaStream with a video track into an\r\n         * audio codec.\r\n         */\r\n        return new Promise((resolve) => {\r\n            // Bug #11 Safari does not yet support the MediaRecorder but that isn't tested here.\r\n            if (window.MediaRecorder === undefined) {\r\n                return resolve(true);\r\n            }\r\n\r\n            // @todo captureStream() is not defined yet.\r\n            const canvasElement: HTMLCanvasElement & { captureStream?(): MediaStream } = document.createElement('canvas');\r\n\r\n            // @todo https://bugzilla.mozilla.org/show_bug.cgi?id=1388974\r\n            canvasElement.getContext('2d');\r\n\r\n            if (typeof canvasElement.captureStream !== 'function') {\r\n                return resolve(false);\r\n            }\r\n\r\n            const mediaStream = canvasElement.captureStream();\r\n            const mimeType = 'audio/webm';\r\n\r\n            try {\r\n                const mediaRecorder = new window.MediaRecorder(mediaStream, { mimeType });\r\n\r\n                mediaRecorder.addEventListener('dataavailable', ({ data }) => resolve(data.type === mimeType));\r\n                mediaRecorder.start();\r\n\r\n                setTimeout(() => mediaRecorder.stop(), 10);\r\n            } catch (err) {\r\n                resolve(err.name === 'NotSupportedError');\r\n            }\r\n        });\r\n    }\r\n\r\n    return Promise.resolve(false);\r\n};\r\n", "import { IMediaRecorder, IMediaRecorderEventMap, IMediaRecorderOptions } from '../interfaces';\r\nimport {\r\n    TBlobEventHandler,\r\n    TErrorEventHandler,\r\n    TEventHandler,\r\n    TMediaRecorderConstructorFactory,\r\n    TNativeEventTarget,\r\n    TRecordingState\r\n} from '../types';\r\n\r\nexport const createMediaRecorderConstructor: TMediaRecorderConstructorFactory = (\r\n    createNativeMediaRecorder,\r\n    createNotSupportedError,\r\n    createWebAudioMediaRecorder,\r\n    createWebmPcmMediaRecorder,\r\n    encoderRegexes,\r\n    eventTargetConstructor,\r\n    nativeMediaRecorderConstructor\r\n) => {\r\n    return class MediaRecorder extends eventTargetConstructor<IMediaRecorderEventMap> implements IMediaRecorder {\r\n        private _internalMediaRecorder: Omit<\r\n            IMediaRecorder,\r\n            'ondataavailable' | 'onerror' | 'onpause' | 'onresume' | 'onstart' | 'onstop' | keyof TNativeEventTarget\r\n        >;\r\n\r\n        private _ondataavailable: null | [TBlobEventHandler<this>, TBlobEventHandler<this>];\r\n\r\n        private _onerror: null | [TErrorEventHandler<this>, TErrorEventHandler<this>];\r\n\r\n        private _onpause: null | [TEventHandler<this>, TEventHandler<this>];\r\n\r\n        private _onresume: null | [TEventHandler<this>, TEventHandler<this>];\r\n\r\n        private _onstart: null | [TEventHandler<this>, TEventHandler<this>];\r\n\r\n        private _onstop: null | [TEventHandler<this>, TEventHandler<this>];\r\n\r\n        constructor(stream: MediaStream, options: IMediaRecorderOptions = {}) {\r\n            const { mimeType } = options;\r\n\r\n            if (\r\n                nativeMediaRecorderConstructor !== null &&\r\n                // Bug #10: Safari does not yet implement the isTypeSupported() method.\r\n                (mimeType === undefined ||\r\n                    (nativeMediaRecorderConstructor.isTypeSupported !== undefined &&\r\n                        nativeMediaRecorderConstructor.isTypeSupported(mimeType)))\r\n            ) {\r\n                const internalMediaRecorder = createNativeMediaRecorder(nativeMediaRecorderConstructor, stream, options);\r\n\r\n                super(internalMediaRecorder);\r\n\r\n                this._internalMediaRecorder = internalMediaRecorder;\r\n            } else if (mimeType !== undefined && encoderRegexes.some((regex) => regex.test(mimeType))) {\r\n                super();\r\n\r\n                // Bug #10: Safari does not yet implement the isTypeSupported() method.\r\n                if (\r\n                    nativeMediaRecorderConstructor !== null &&\r\n                    nativeMediaRecorderConstructor.isTypeSupported !== undefined &&\r\n                    nativeMediaRecorderConstructor.isTypeSupported('audio/webm;codecs=pcm')\r\n                ) {\r\n                    this._internalMediaRecorder = createWebmPcmMediaRecorder(this, nativeMediaRecorderConstructor, stream, mimeType);\r\n                } else {\r\n                    this._internalMediaRecorder = createWebAudioMediaRecorder(this, stream, mimeType);\r\n                }\r\n            } else {\r\n                // This is creating a native MediaRecorder just to provoke it to throw an error.\r\n                if (nativeMediaRecorderConstructor !== null) {\r\n                    createNativeMediaRecorder(nativeMediaRecorderConstructor, stream, options);\r\n                }\r\n\r\n                throw createNotSupportedError();\r\n            }\r\n\r\n            this._ondataavailable = null;\r\n            this._onerror = null;\r\n            this._onpause = null;\r\n            this._onresume = null;\r\n            this._onstart = null;\r\n            this._onstop = null;\r\n        }\r\n\r\n        get mimeType(): string {\r\n            return this._internalMediaRecorder.mimeType;\r\n        }\r\n\r\n        get ondataavailable(): null | TBlobEventHandler<this> {\r\n            return this._ondataavailable === null ? this._ondataavailable : this._ondataavailable[0];\r\n        }\r\n\r\n        set ondataavailable(value) {\r\n            if (this._ondataavailable !== null) {\r\n                this.removeEventListener('dataavailable', this._ondataavailable[1]);\r\n            }\r\n\r\n            if (typeof value === 'function') {\r\n                const boundListener = value.bind(this);\r\n\r\n                this.addEventListener('dataavailable', boundListener);\r\n\r\n                this._ondataavailable = [value, boundListener];\r\n            } else {\r\n                this._ondataavailable = null;\r\n            }\r\n        }\r\n\r\n        get onerror(): null | TErrorEventHandler<this> {\r\n            return this._onerror === null ? this._onerror : this._onerror[0];\r\n        }\r\n\r\n        set onerror(value) {\r\n            if (this._onerror !== null) {\r\n                this.removeEventListener('error', this._onerror[1]);\r\n            }\r\n\r\n            if (typeof value === 'function') {\r\n                const boundListener = value.bind(this);\r\n\r\n                this.addEventListener('error', boundListener);\r\n\r\n                this._onerror = [value, boundListener];\r\n            } else {\r\n                this._onerror = null;\r\n            }\r\n        }\r\n\r\n        get onpause(): null | TEventHandler<this> {\r\n            return this._onpause === null ? this._onpause : this._onpause[0];\r\n        }\r\n\r\n        set onpause(value) {\r\n            if (this._onpause !== null) {\r\n                this.removeEventListener('pause', this._onpause[1]);\r\n            }\r\n\r\n            if (typeof value === 'function') {\r\n                const boundListener = value.bind(this);\r\n\r\n                this.addEventListener('pause', boundListener);\r\n\r\n                this._onpause = [value, boundListener];\r\n            } else {\r\n                this._onpause = null;\r\n            }\r\n        }\r\n\r\n        get onresume(): null | TEventHandler<this> {\r\n            return this._onresume === null ? this._onresume : this._onresume[0];\r\n        }\r\n\r\n        set onresume(value) {\r\n            if (this._onresume !== null) {\r\n                this.removeEventListener('resume', this._onresume[1]);\r\n            }\r\n\r\n            if (typeof value === 'function') {\r\n                const boundListener = value.bind(this);\r\n\r\n                this.addEventListener('resume', boundListener);\r\n\r\n                this._onresume = [value, boundListener];\r\n            } else {\r\n                this._onresume = null;\r\n            }\r\n        }\r\n\r\n        get onstart(): null | TEventHandler<this> {\r\n            return this._onstart === null ? this._onstart : this._onstart[0];\r\n        }\r\n\r\n        set onstart(value) {\r\n            if (this._onstart !== null) {\r\n                this.removeEventListener('start', this._onstart[1]);\r\n            }\r\n\r\n            if (typeof value === 'function') {\r\n                const boundListener = value.bind(this);\r\n\r\n                this.addEventListener('start', boundListener);\r\n\r\n                this._onstart = [value, boundListener];\r\n            } else {\r\n                this._onstart = null;\r\n            }\r\n        }\r\n\r\n        get onstop(): null | TEventHandler<this> {\r\n            return this._onstop === null ? this._onstop : this._onstop[0];\r\n        }\r\n\r\n        set onstop(value) {\r\n            if (this._onstop !== null) {\r\n                this.removeEventListener('stop', this._onstop[1]);\r\n            }\r\n\r\n            if (typeof value === 'function') {\r\n                const boundListener = value.bind(this);\r\n\r\n                this.addEventListener('stop', boundListener);\r\n\r\n                this._onstop = [value, boundListener];\r\n            } else {\r\n                this._onstop = null;\r\n            }\r\n        }\r\n\r\n        get state(): TRecordingState {\r\n            return this._internalMediaRecorder.state;\r\n        }\r\n\r\n        public pause(): void {\r\n            return this._internalMediaRecorder.pause();\r\n        }\r\n\r\n        public resume(): void {\r\n            return this._internalMediaRecorder.resume();\r\n        }\r\n\r\n        public start(timeslice?: number): void {\r\n            return this._internalMediaRecorder.start(timeslice);\r\n        }\r\n\r\n        public stop(): void {\r\n            return this._internalMediaRecorder.stop();\r\n        }\r\n\r\n        public static isTypeSupported(mimeType: string): boolean {\r\n            return (\r\n                (nativeMediaRecorderConstructor !== null &&\r\n                    // Bug #10: Safari does not yet implement the isTypeSupported() method.\r\n                    nativeMediaRecorderConstructor.isTypeSupported !== undefined &&\r\n                    nativeMediaRecorderConstructor.isTypeSupported(mimeType)) ||\r\n                encoderRegexes.some((regex) => regex.test(mimeType))\r\n            );\r\n        }\r\n    };\r\n};\r\n", "import { TNativeBlobEventConstructorFactory } from '../types';\r\n\r\nexport const createNativeBlobEventConstructor: TNativeBlobEventConstructorFactory = (window) => {\r\n    if (window !== null && window.BlobEvent !== undefined) {\r\n        return window.BlobEvent;\r\n    }\r\n\r\n    return null;\r\n};\r\n", "import { IBlobEvent, IMediaRecorder } from '../interfaces';\r\nimport { TEventHandler, TNativeMediaRecorderFactoryFactory } from '../types';\r\n\r\nexport const createNativeMediaRecorderFactory: TNativeMediaRecorderFactoryFactory = (\r\n    createInvalidModificationError,\r\n    createNotSupportedError\r\n) => {\r\n    return (nativeMediaRecorderConstructor, stream, mediaRecorderOptions) => {\r\n        const bufferedBlobs: Blob[] = [];\r\n        const dataAvailableListeners = new WeakMap<EventListener, (this: IMediaRecorder, event: IBlobEvent) => void>();\r\n        const errorListeners = new WeakMap<EventListener, (this: IMediaRecorder, event: ErrorEvent) => void>();\r\n        const nativeMediaRecorder = new nativeMediaRecorderConstructor(stream, mediaRecorderOptions);\r\n        const stopListeners = new WeakMap<EventListener, (this: IMediaRecorder, event: Event) => void>();\r\n\r\n        let isActive = true;\r\n\r\n        nativeMediaRecorder.addEventListener = ((addEventListener) => {\r\n            return (\r\n                type: string,\r\n                listener: null | TEventHandler<IMediaRecorder> | EventListenerOrEventListenerObject,\r\n                options?: boolean | AddEventListenerOptions\r\n            ) => {\r\n                let patchedEventListener = listener;\r\n\r\n                if (typeof listener === 'function') {\r\n                    if (type === 'dataavailable') {\r\n                        // Bug #7 & #8: Chrome fires the dataavailable and stop events before it fires the error event.\r\n                        patchedEventListener = (event: IBlobEvent) => {\r\n                            setTimeout(() => {\r\n                                if (isActive && nativeMediaRecorder.state === 'inactive') {\r\n                                    bufferedBlobs.push(event.data);\r\n                                } else {\r\n                                    if (bufferedBlobs.length > 0) {\r\n                                        const blob = event.data;\r\n\r\n                                        Object.defineProperty(event, 'data', {\r\n                                            value: new Blob([...bufferedBlobs, blob], { type: blob.type })\r\n                                        });\r\n\r\n                                        bufferedBlobs.length = 0;\r\n                                    }\r\n\r\n                                    listener.call(nativeMediaRecorder, event);\r\n                                }\r\n                            });\r\n                        };\r\n\r\n                        dataAvailableListeners.set(listener, patchedEventListener);\r\n                    } else if (type === 'error') {\r\n                        // Bug #12 & #13: Firefox fires a regular event with an error property.\r\n                        patchedEventListener = (event: ErrorEvent | (Event & { error?: Error })) => {\r\n                            // Bug #3 & #4: Chrome throws an error event without any error.\r\n                            if (event.error === undefined) {\r\n                                listener.call(nativeMediaRecorder, new ErrorEvent('error', { error: createInvalidModificationError() }));\r\n                                // Bug #1 & #2: Firefox throws an error event with an UnknownError.\r\n                            } else if (event.error.name === 'UnknownError') {\r\n                                const message = event.error.message;\r\n\r\n                                listener.call(\r\n                                    nativeMediaRecorder,\r\n                                    new ErrorEvent('error', { error: createInvalidModificationError(message) })\r\n                                );\r\n                            } else if (event instanceof ErrorEvent) {\r\n                                listener.call(nativeMediaRecorder, event);\r\n                            } else {\r\n                                listener.call(nativeMediaRecorder, new ErrorEvent('error', { error: event.error }));\r\n                            }\r\n                        };\r\n\r\n                        errorListeners.set(listener, patchedEventListener);\r\n                    } else if (type === 'stop') {\r\n                        // Bug #7 & #8: Chrome fires the dataavailable and stop events before it fires the error event.\r\n                        patchedEventListener = (event: Event) => {\r\n                            isActive = false;\r\n\r\n                            setTimeout(() => listener.call(nativeMediaRecorder, event));\r\n                        };\r\n\r\n                        stopListeners.set(listener, patchedEventListener);\r\n                    }\r\n                }\r\n\r\n                return addEventListener.call(nativeMediaRecorder, type, patchedEventListener, options);\r\n            };\r\n        })(nativeMediaRecorder.addEventListener);\r\n\r\n        nativeMediaRecorder.dispatchEvent = ((dispatchEvent) => {\r\n            // Bug #7 & #8: Chrome fires the dataavailable and stop events before it fires the error event.\r\n            return (event: Event) => {\r\n                let wasActive: boolean;\r\n\r\n                setTimeout(() => {\r\n                    wasActive = isActive;\r\n                    isActive = false;\r\n                });\r\n\r\n                const returnValue = dispatchEvent.call(nativeMediaRecorder, event);\r\n\r\n                setTimeout(() => (isActive = wasActive));\r\n\r\n                return returnValue;\r\n            };\r\n        })(nativeMediaRecorder.dispatchEvent);\r\n\r\n        nativeMediaRecorder.removeEventListener = ((removeEventListener) => {\r\n            return (\r\n                type: string,\r\n                listener: null | TEventHandler<IMediaRecorder> | EventListenerOrEventListenerObject,\r\n                options?: boolean | EventListenerOptions\r\n            ) => {\r\n                let patchedEventListener = listener;\r\n\r\n                if (typeof listener === 'function') {\r\n                    if (type === 'dataavailable') {\r\n                        const dataAvailableListener = dataAvailableListeners.get(listener);\r\n\r\n                        if (dataAvailableListener !== undefined) {\r\n                            patchedEventListener = dataAvailableListener;\r\n                        }\r\n                    } else if (type === 'error') {\r\n                        const errorListener = errorListeners.get(listener);\r\n\r\n                        if (errorListener !== undefined) {\r\n                            patchedEventListener = errorListener;\r\n                        }\r\n                    } else if (type === 'stop') {\r\n                        const stopListener = stopListeners.get(listener);\r\n\r\n                        if (stopListener !== undefined) {\r\n                            patchedEventListener = stopListener;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return removeEventListener.call(nativeMediaRecorder, type, patchedEventListener, options);\r\n            };\r\n        })(nativeMediaRecorder.removeEventListener);\r\n\r\n        nativeMediaRecorder.start = ((start) => {\r\n            return (timeslice?: number) => {\r\n                /*\r\n                 * Bug #6: Chrome will emit a blob without any data when asked to encode a MediaStream with a video track into an audio\r\n                 * codec.\r\n                 */\r\n                if (\r\n                    mediaRecorderOptions.mimeType !== undefined &&\r\n                    mediaRecorderOptions.mimeType.startsWith('audio/') &&\r\n                    stream.getVideoTracks().length > 0\r\n                ) {\r\n                    throw createNotSupportedError();\r\n                }\r\n\r\n                isActive = timeslice !== undefined;\r\n\r\n                return timeslice === undefined ? start.call(nativeMediaRecorder) : start.call(nativeMediaRecorder, timeslice);\r\n            };\r\n        })(nativeMediaRecorder.start);\r\n\r\n        return nativeMediaRecorder;\r\n    };\r\n};\r\n", "import { TNativeMediaRecorderConstructorFactory } from '../types';\r\n\r\nexport const createNativeMediaRecorderConstructor: TNativeMediaRecorderConstructorFactory = (window) => {\r\n    if (window === null) {\r\n        return null;\r\n    }\r\n\r\n    return window.MediaRecorder === undefined ? null : window.MediaRecorder;\r\n};\r\n", "import { TNotSupportedErrorFactory } from '../types';\r\n\r\nexport const createNotSupportedError: TNotSupportedErrorFactory = () => {\r\n    try {\r\n        return new DOMException('', 'NotSupportedError');\r\n    } catch (err) {\r\n        // @todo Edge is the only browser that does not yet allow to construct a DOMException.\r\n        err.code = 9;\r\n        err.name = 'NotSupportedError';\r\n\r\n        return err;\r\n    }\r\n};\r\n", "import { TReadElementContentFactory } from '../types';\r\n\r\nexport const createReadElementContent: TReadElementContentFactory = (readVariableSizeInteger) => {\r\n    return (dataView, offset, type, channelCount = 2) => {\r\n        const lengthAndValue = readVariableSizeInteger(dataView, offset);\r\n\r\n        if (lengthAndValue === null) {\r\n            return lengthAndValue;\r\n        }\r\n\r\n        const { length, value } = lengthAndValue;\r\n\r\n        if (type === 'master') {\r\n            return { content: null, length };\r\n        }\r\n\r\n        if (offset + length + value > dataView.byteLength) {\r\n            return null;\r\n        }\r\n\r\n        if (type === 'binary') {\r\n            const numberOfSamples = (value / Float32Array.BYTES_PER_ELEMENT - 1) / channelCount;\r\n            const content = Array.from({ length: channelCount }, () => new Float32Array(numberOfSamples));\r\n\r\n            for (let i = 0; i < numberOfSamples; i += 1) {\r\n                const elementOffset = i * channelCount + 1;\r\n\r\n                for (let j = 0; j < channelCount; j += 1) {\r\n                    content[j][i] = dataView.getFloat32(offset + length + (elementOffset + j) * Float32Array.BYTES_PER_ELEMENT, true);\r\n                }\r\n            }\r\n\r\n            return { content, length: length + value };\r\n        }\r\n\r\n        return { content: null, length: length + value };\r\n    };\r\n};\r\n", "import { TReadElementTypeFactory } from '../types';\r\n\r\nexport const createReadElementType: TReadElementTypeFactory = (readVariableSizeInteger) => {\r\n    return (dataView, offset) => {\r\n        const lengthAndValue = readVariableSizeInteger(dataView, offset);\r\n\r\n        if (lengthAndValue === null) {\r\n            return lengthAndValue;\r\n        }\r\n\r\n        const { length, value } = lengthAndValue;\r\n\r\n        if (value === 35) {\r\n            return { length, type: 'binary' };\r\n        }\r\n\r\n        if (\r\n            value === 46 ||\r\n            value === 97 ||\r\n            value === 88713574 ||\r\n            value === 106212971 ||\r\n            value === 139690087 ||\r\n            value === 172351395 ||\r\n            value === 256095861\r\n        ) {\r\n            return { length, type: 'master' };\r\n        }\r\n\r\n        return { length, type: 'unknown' };\r\n    };\r\n};\r\n", "import { TReadVariableSizeIntegerFactory } from '../types';\r\n\r\nexport const createReadVariableSizeInteger: TReadVariableSizeIntegerFactory = (readVariableSizeIntegerLength) => {\r\n    return (dataView, offset) => {\r\n        const length = readVariableSizeIntegerLength(dataView, offset);\r\n\r\n        if (length === null) {\r\n            return length;\r\n        }\r\n\r\n        const firstDataByteOffset = offset + Math.floor((length - 1) / 8);\r\n\r\n        if (firstDataByteOffset + length > dataView.byteLength) {\r\n            return null;\r\n        }\r\n\r\n        const firstDataByte = dataView.getUint8(firstDataByteOffset);\r\n\r\n        let value = firstDataByte & ((1 << (8 - (length % 8))) - 1); // tslint:disable-line:no-bitwise\r\n\r\n        for (let i = 1; i < length; i += 1) {\r\n            value = (value << 8) + dataView.getUint8(firstDataByteOffset + i); // tslint:disable-line:no-bitwise\r\n        }\r\n\r\n        return { length, value };\r\n    };\r\n};\r\n", "import { TAddUniqueNumberFactory } from '../types';\r\n\r\nexport const createAddUniqueNumber: TAddUniqueNumberFactory = (generateUniqueNumber) => {\r\n    return (set) => {\r\n        const number = generateUniqueNumber(set);\r\n\r\n        set.add(number);\r\n\r\n        return number;\r\n    };\r\n};\r\n", "import { TCacheFactory } from '../types';\r\n\r\nexport const createCache: TCacheFactory = (lastNumberWeakMap) => {\r\n    return (collection, nextNumber) => {\r\n        lastNumberWeakMap.set(collection, nextNumber);\r\n\r\n        return nextNumber;\r\n    };\r\n};\r\n", "import { TGenerateUniqueNumberFactory } from '../types';\r\n\r\n/*\r\n * The value of the constant Number.MAX_SAFE_INTEGER equals (2 ** 53 - 1) but it\r\n * is fairly new.\r\n */\r\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER === undefined ? 9007199254740991 : Number.MAX_SAFE_INTEGER;\r\nconst TWO_TO_THE_POWER_OF_TWENTY_NINE = 536870912;\r\nconst TWO_TO_THE_POWER_OF_THIRTY = TWO_TO_THE_POWER_OF_TWENTY_NINE * 2;\r\n\r\nexport const createGenerateUniqueNumber: TGenerateUniqueNumberFactory = (cache, lastNumberWeakMap) => {\r\n    return (collection) => {\r\n        const lastNumber = lastNumberWeakMap.get(collection);\r\n\r\n        /*\r\n         * Let's try the cheapest algorithm first. It might fail to produce a new\r\n         * number, but it is so cheap that it is okay to take the risk. Just\r\n         * increase the last number by one or reset it to 0 if we reached the upper\r\n         * bound of SMIs (which stands for small integers). When the last number is\r\n         * unknown it is assumed that the collection contains zero based consecutive\r\n         * numbers.\r\n         */\r\n        let nextNumber = lastNumber === undefined ? collection.size : lastNumber < TWO_TO_THE_POWER_OF_THIRTY ? lastNumber + 1 : 0;\r\n\r\n        if (!collection.has(nextNumber)) {\r\n            return cache(collection, nextNumber);\r\n        }\r\n\r\n        /*\r\n         * If there are less than half of 2 ** 30 numbers stored in the collection,\r\n         * the chance to generate a new random number in the range from 0 to 2 ** 30\r\n         * is at least 50%. It's benifitial to use only SMIs because they perform\r\n         * much better in any environment based on V8.\r\n         */\r\n        if (collection.size < TWO_TO_THE_POWER_OF_TWENTY_NINE) {\r\n            while (collection.has(nextNumber)) {\r\n                nextNumber = Math.floor(Math.random() * TWO_TO_THE_POWER_OF_THIRTY);\r\n            }\r\n\r\n            return cache(collection, nextNumber);\r\n        }\r\n\r\n        // Quickly check if there is a theoretical chance to generate a new number.\r\n        if (collection.size > MAX_SAFE_INTEGER) {\r\n            throw new Error('Congratulations, you created a collection of unique numbers which uses all available integers!');\r\n        }\r\n\r\n        // Otherwise use the full scale of safely usable integers.\r\n        while (collection.has(nextNumber)) {\r\n            nextNumber = Math.floor(Math.random() * MAX_SAFE_INTEGER);\r\n        }\r\n\r\n        return cache(collection, nextNumber);\r\n    };\r\n};\r\n", "export {};\r\n//# sourceMappingURL=add-unique-number-factory.js.map", "export {};\r\n//# sourceMappingURL=add-unique-number-function.js.map", "export {};\r\n//# sourceMappingURL=cache-factory.js.map", "export {};\r\n//# sourceMappingURL=cache-function.js.map", "export {};\r\n//# sourceMappingURL=generate-unique-number-factory.js.map", "export {};\r\n//# sourceMappingURL=generate-unique-number-function.js.map", "export * from './add-unique-number-factory';\r\nexport * from './add-unique-number-function';\r\nexport * from './cache-factory';\r\nexport * from './cache-function';\r\nexport * from './generate-unique-number-factory';\r\nexport * from './generate-unique-number-function';\r\n", "import { createAddUniqueNumber } from './factories/add-unique-number';\r\nimport { createCache } from './factories/cache';\r\nimport { createGenerateUniqueNumber } from './factories/generate-unique-number';\r\n\r\n/*\r\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\r\n * isolatedModules compiler option.\r\n */\r\nexport * from './types/index';\r\n\r\nconst LAST_NUMBER_WEAK_MAP = new WeakMap<Map<number, any> | Set<number>, number>();\r\n\r\nconst cache = createCache(LAST_NUMBER_WEAK_MAP);\r\nconst generateUniqueNumber = createGenerateUniqueNumber(cache, LAST_NUMBER_WEAK_MAP);\r\nconst addUniqueNumber = createAddUniqueNumber(generateUniqueNumber);\r\n\r\nexport { addUniqueNumber, generateUniqueNumber };\r\n", "/**\r\n * @license Use of this source code is governed by an MIT-style license that\r\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-interop\r\n */\r\n\r\ndeclare global {\r\n  interface SymbolConstructor {\r\n    readonly observable: symbol;\r\n  }\r\n}\r\n\r\nexport const observable = Symbol.observable || \"@@observable\";\r\n", "/**\r\n * @license Use of this source code is governed by an MIT-style license that\r\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-interop\r\n */\r\n\r\nimport { observable } from \"./symbols\";\r\nimport { InteropObservable } from \"./types\";\r\n\r\nexport function patch<T extends InteropObservable<any>>(instance: T): T;\r\nexport function patch<T extends new (...args: any[]) => InteropObservable<any>>(\r\n  constructor: T\r\n): T;\r\nexport function patch(\r\n  arg: InteropObservable<any> | (new (...args: any[]) => InteropObservable<any>)\r\n): InteropObservable<any> | (new (...args: any[]) => InteropObservable<any>) {\r\n  if (!Symbol.observable) {\r\n    if (\r\n      typeof arg === \"function\" &&\r\n      arg.prototype &&\r\n      arg.prototype[Symbol.observable]\r\n    ) {\r\n      (arg.prototype as any)[observable] = arg.prototype[Symbol.observable];\r\n      delete arg.prototype[Symbol.observable];\r\n    } else {\r\n      (arg as any)[observable] = arg[Symbol.observable];\r\n      delete arg[Symbol.observable];\r\n    }\r\n  }\r\n  return arg;\r\n}\r\n", "/**\r\n * @license Use of this source code is governed by an MIT-style license that\r\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-interop\r\n */\r\n\r\nimport { Observer, PartialObserver } from \"./types\";\r\n\r\nconst noop = () => {};\r\nconst rethrow = (error: unknown) => {\r\n  /* eslint-disable-next-line etc/throw-error */\r\n  throw error;\r\n};\r\n\r\nexport function toObserver<T>(observer?: PartialObserver<T>): Observer<T> {\r\n  if (observer) {\r\n    if (observer.next && observer.error && observer.complete) {\r\n      return observer as Observer<T>;\r\n    }\r\n    return {\r\n      complete: (observer.complete ?? noop).bind(observer),\r\n      error: (observer.error ?? rethrow).bind(observer),\r\n      next: (observer.next ?? noop).bind(observer),\r\n    };\r\n  }\r\n  return {\r\n    complete: noop,\r\n    error: rethrow,\r\n    next: noop,\r\n  };\r\n}\r\n", "export {};\r\n//# sourceMappingURL=types.js.map", "/**\r\n * @license Use of this source code is governed by an MIT-style license that\r\n * can be found in the LICENSE file at https://github.com/cartant/rxjs-interop\r\n */\r\n\r\nexport * from \"./patch\";\r\nexport * from \"./symbols\";\r\nexport * from \"./to-observer\";\r\nexport * from \"./types\";\r\n", "import { TAnimationFrameFactory } from '../types';\r\n\r\nexport const createAnimationFrame: TAnimationFrameFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\r\n    return () =>\r\n        wrapSubscribeFunction((observer) => {\r\n            if (window === null || window.cancelAnimationFrame === undefined || window.requestAnimationFrame === undefined) {\r\n                return emitNotSupportedError(observer);\r\n            }\r\n\r\n            let animationFrameHandle = window.requestAnimationFrame(function animationFrameCallback(timestamp): void {\r\n                animationFrameHandle = window.requestAnimationFrame(animationFrameCallback);\r\n\r\n                observer.next(timestamp);\r\n            });\r\n\r\n            return () => window.cancelAnimationFrame(animationFrameHandle);\r\n        });\r\n};\r\n", "import { TSubscribableThing } from '../types';\r\nimport type { createMapSubscribableThing } from './map-subscribable-thing';\r\nimport type { createMutations } from './mutations';\r\nimport type { createPrependSubscribableThing } from './prepend-subscribable-thing';\r\n\r\nexport const createAttribute = (\r\n    mapSubscribableThing: ReturnType<typeof createMapSubscribableThing>,\r\n    mutations: ReturnType<typeof createMutations>,\r\n    prependSubscribableThing: ReturnType<typeof createPrependSubscribableThing>\r\n) => {\r\n    return (htmlElement: HTMLElement, name: string): TSubscribableThing<null | string> => {\r\n        const getAttribute = () => htmlElement.getAttribute(name);\r\n\r\n        return prependSubscribableThing(\r\n            mapSubscribableThing(\r\n                mutations(htmlElement, {\r\n                    attributeFilter: [name],\r\n                    childList: false,\r\n                    subtree: false\r\n                }),\r\n                () => getAttribute()\r\n            ),\r\n            getAttribute()\r\n        );\r\n    };\r\n};\r\n", "import { TEmitNotSupportedErrorFunction, TSubscribableThing, TWindow, TWrapSubscribeFunctionFunction } from '../types';\r\n\r\nexport const createGeolocation = (\r\n    emitNotSupportedError: TEmitNotSupportedErrorFunction,\r\n    window: null | TWindow,\r\n    wrapSubscribeFunction: TWrapSubscribeFunctionFunction\r\n) => {\r\n    return (options?: PositionOptions): TSubscribableThing<GeolocationPosition> =>\r\n        wrapSubscribeFunction((observer) => {\r\n            if (\r\n                window === null ||\r\n                window.navigator === undefined ||\r\n                window.navigator.geolocation === undefined ||\r\n                window.navigator.geolocation.clearWatch === undefined ||\r\n                window.navigator.geolocation.watchPosition === undefined\r\n            ) {\r\n                return emitNotSupportedError(observer);\r\n            }\r\n\r\n            const watchId = window.navigator.geolocation.watchPosition(\r\n                (position) => observer.next(position),\r\n                (err) => observer.error(err),\r\n                options\r\n            );\r\n\r\n            return () => window.navigator.geolocation.clearWatch(watchId);\r\n        });\r\n};\r\n", "import { TIntersectionsFactory } from '../types';\r\n\r\nexport const createIntersections: TIntersectionsFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\r\n    return (htmlElement, options) =>\r\n        wrapSubscribeFunction((observer) => {\r\n            if (window === null || window.IntersectionObserver === undefined) {\r\n                return emitNotSupportedError(observer);\r\n            }\r\n\r\n            const intersectionObserverObserver = new window.IntersectionObserver((entries) => observer.next(entries), options);\r\n\r\n            try {\r\n                intersectionObserverObserver.observe(htmlElement);\r\n            } catch (err) {\r\n                observer.error(err);\r\n            }\r\n\r\n            return () => intersectionObserverObserver.disconnect();\r\n        });\r\n};\r\n", "import { TSubscribableThing, TWrapSubscribeFunctionFunction } from '../types';\r\n\r\nexport const createMapSubscribableThing =\r\n    (wrapSubscribeFunction: TWrapSubscribeFunctionFunction) =>\r\n    <TValue, TMappedValue>(\r\n        subscribableThing: TSubscribableThing<TValue>,\r\n        map: (value: TValue) => TMappedValue\r\n    ): TSubscribableThing<TMappedValue> =>\r\n        wrapSubscribeFunction((observer) => subscribableThing({ ...observer, next: (value) => observer.next(map(value)) }));\r\n", "import { TMediaDevicesFactory } from '../types';\r\n\r\nexport const createMediaDevices: TMediaDevicesFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\r\n    return () =>\r\n        wrapSubscribeFunction((observer) => {\r\n            if (\r\n                window === null ||\r\n                window.navigator === undefined ||\r\n                window.navigator.mediaDevices === undefined ||\r\n                window.navigator.mediaDevices.enumerateDevices === undefined\r\n            ) {\r\n                return emitNotSupportedError(observer);\r\n            }\r\n\r\n            let isActive = true;\r\n\r\n            const enumerateDevices = () => {\r\n                window.navigator.mediaDevices.enumerateDevices().then(\r\n                    (mediaDevices) => {\r\n                        if (isActive) {\r\n                            observer.next(mediaDevices);\r\n                        }\r\n                    },\r\n                    (err) => {\r\n                        if (isActive) {\r\n                            unsubscribe();\r\n\r\n                            observer.error(err);\r\n                        }\r\n                    }\r\n                );\r\n            };\r\n            const unsubscribe = () => {\r\n                isActive = false;\r\n                window.navigator.mediaDevices.removeEventListener('devicechange', enumerateDevices);\r\n            };\r\n\r\n            enumerateDevices();\r\n            window.navigator.mediaDevices.addEventListener('devicechange', enumerateDevices);\r\n\r\n            return unsubscribe;\r\n        });\r\n};\r\n", "import { TMediaQueryMatchFactory } from '../types';\r\n\r\nexport const createMediaQueryMatch: TMediaQueryMatchFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\r\n    return (mediaQueryString) =>\r\n        wrapSubscribeFunction((observer) => {\r\n            if (window === null || window.matchMedia === undefined) {\r\n                return emitNotSupportedError(observer);\r\n            }\r\n\r\n            const mediaQueryList = window.matchMedia(mediaQueryString);\r\n\r\n            observer.next(mediaQueryList.matches);\r\n\r\n            mediaQueryList.onchange = () => observer.next(mediaQueryList.matches);\r\n\r\n            return () => {\r\n                mediaQueryList.onchange = null;\r\n            };\r\n        });\r\n};\r\n", "import { TMetricsFactory } from '../types';\r\n\r\nexport const createMetrics: TMetricsFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\r\n    return (options) =>\r\n        wrapSubscribeFunction((observer) => {\r\n            if (window === null || window.PerformanceObserver === undefined) {\r\n                return emitNotSupportedError(observer);\r\n            }\r\n\r\n            const performanceObserver = new window.PerformanceObserver((entryList) => observer.next(entryList.getEntries()));\r\n\r\n            try {\r\n                performanceObserver.observe(options);\r\n            } catch (err) {\r\n                observer.error(err);\r\n            }\r\n\r\n            return () => performanceObserver.disconnect();\r\n        });\r\n};\r\n", "import { TMidiInputsFactory } from '../types';\r\n\r\nexport const createMidiInputs: TMidiInputsFactory = (wrapSubscribeFunction) => {\r\n    return (midiAccess) =>\r\n        wrapSubscribeFunction((observer) => {\r\n            let midiInputs = Array.from(midiAccess.inputs.values());\r\n\r\n            const emitMidiInputs = () => {\r\n                const midiAccessInputs = midiAccess.inputs;\r\n\r\n                if (midiInputs.length !== midiAccessInputs.size || midiInputs.some(({ id }) => !midiAccessInputs.has(id))) {\r\n                    midiInputs = Array.from(midiAccessInputs.values());\r\n\r\n                    observer.next(midiInputs);\r\n                }\r\n            };\r\n\r\n            observer.next(midiInputs);\r\n            midiAccess.addEventListener('statechange', emitMidiInputs);\r\n\r\n            return () => midiAccess.removeEventListener('statechange', emitMidiInputs);\r\n        });\r\n};\r\n", "import { TMidiOutputsFactory } from '../types';\r\n\r\nexport const createMidiOutputs: TMidiOutputsFactory = (wrapSubscribeFunction) => {\r\n    return (midiAccess) =>\r\n        wrapSubscribeFunction((observer) => {\r\n            let midiOutputs = Array.from(midiAccess.outputs.values());\r\n\r\n            const emitMidiOutputs = () => {\r\n                const midiAccessOutputs = midiAccess.outputs;\r\n\r\n                if (midiOutputs.length !== midiAccessOutputs.size || midiOutputs.some(({ id }) => !midiAccessOutputs.has(id))) {\r\n                    midiOutputs = Array.from(midiAccessOutputs.values());\r\n\r\n                    observer.next(midiOutputs);\r\n                }\r\n            };\r\n\r\n            observer.next(midiOutputs);\r\n            midiAccess.addEventListener('statechange', emitMidiOutputs);\r\n\r\n            return () => midiAccess.removeEventListener('statechange', emitMidiOutputs);\r\n        });\r\n};\r\n", "import { TMutationsFactory } from '../types';\r\n\r\nexport const createMutations: TMutationsFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\r\n    return (htmlElement, options) =>\r\n        wrapSubscribeFunction((observer) => {\r\n            if (window === null || window.MutationObserver === undefined) {\r\n                return emitNotSupportedError(observer);\r\n            }\r\n\r\n            const mutationObserver = new window.MutationObserver((records) => observer.next(records));\r\n\r\n            try {\r\n                mutationObserver.observe(htmlElement, options);\r\n            } catch (err) {\r\n                observer.error(err);\r\n            }\r\n\r\n            return () => mutationObserver.disconnect();\r\n        });\r\n};\r\n", "import { TEventHandler, TEventType, TOnFactory } from '../types';\r\n\r\nexport const createOn: TOnFactory = (wrapSubscribeFunction) => {\r\n    return (target, type, options) =>\r\n        wrapSubscribeFunction((observer) => {\r\n            const listener: TEventHandler<typeof target> = (event) => observer.next(<TEventType<typeof target, typeof type>>event);\r\n\r\n            target.addEventListener(type, listener, options);\r\n\r\n            return () => target.removeEventListener(type, listener, options);\r\n        });\r\n};\r\n", "import { TOnlineFactory } from '../types';\r\n\r\nexport const createOnline: TOnlineFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\r\n    return () =>\r\n        wrapSubscribeFunction((observer) => {\r\n            if (window === null || window.navigator === undefined || window.navigator.onLine === undefined) {\r\n                return emitNotSupportedError(observer);\r\n            }\r\n\r\n            const emitFalse = () => observer.next(false);\r\n            const emitTrue = () => observer.next(true);\r\n\r\n            window.addEventListener('offline', emitFalse);\r\n            window.addEventListener('online', emitTrue);\r\n\r\n            observer.next(window.navigator.onLine);\r\n\r\n            return () => {\r\n                window.removeEventListener('offline', emitFalse);\r\n                window.removeEventListener('online', emitTrue);\r\n            };\r\n        });\r\n};\r\n", "import { TPermissionStateFactory } from '../types';\r\n\r\nexport const createPermissionState: TPermissionStateFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\r\n    return (permissionDescriptor) =>\r\n        wrapSubscribeFunction((observer) => {\r\n            if (\r\n                window === null ||\r\n                window.navigator === undefined ||\r\n                window.navigator.permissions === undefined ||\r\n                window.navigator.permissions.query === undefined\r\n            ) {\r\n                return emitNotSupportedError(observer);\r\n            }\r\n\r\n            let isActive = true;\r\n            let unsubscribe = () => {\r\n                isActive = false;\r\n            };\r\n\r\n            window.navigator.permissions.query(permissionDescriptor).then(\r\n                (permissionStatus) => {\r\n                    if (isActive) {\r\n                        observer.next(permissionStatus.state);\r\n                    }\r\n\r\n                    if (isActive) {\r\n                        permissionStatus.onchange = () => observer.next(permissionStatus.state);\r\n\r\n                        unsubscribe = () => {\r\n                            permissionStatus.onchange = null;\r\n                        };\r\n                    }\r\n                },\r\n                (err) => {\r\n                    if (isActive) {\r\n                        observer.error(err);\r\n                    }\r\n                }\r\n            );\r\n\r\n            return () => unsubscribe();\r\n        });\r\n};\r\n", "import { TSubscribableThing, TWrapSubscribeFunctionFunction } from '../types';\r\n\r\nexport const createPrependSubscribableThing =\r\n    (wrapSubscribeFunction: TWrapSubscribeFunctionFunction) =>\r\n    <TValue, TPrependedValue>(\r\n        subscribableThing: TSubscribableThing<TValue>,\r\n        prependedValue: TPrependedValue\r\n    ): TSubscribableThing<TPrependedValue | TValue> =>\r\n        wrapSubscribeFunction((observer) => {\r\n            observer.next(prependedValue);\r\n\r\n            return subscribableThing(observer);\r\n        });\r\n", "import { TReportsFactory } from '../types';\r\n\r\nexport const createReports: TReportsFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\r\n    return (options) =>\r\n        wrapSubscribeFunction((observer) => {\r\n            if (window === null || window.ReportingObserver === undefined) {\r\n                return emitNotSupportedError(observer);\r\n            }\r\n\r\n            const reportingObserver = new window.ReportingObserver((reportList) => observer.next(reportList), options);\r\n\r\n            reportingObserver.observe();\r\n\r\n            return () => reportingObserver.disconnect();\r\n        });\r\n};\r\n", "import { IResizeObserverEntry } from '../interfaces';\r\nimport { TResizesFactory } from '../types';\r\n\r\nexport const createResizes: TResizesFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\r\n    return (htmlElement, options) =>\r\n        wrapSubscribeFunction((observer) => {\r\n            if (window === null || window.ResizeObserver === undefined) {\r\n                return emitNotSupportedError(observer);\r\n            }\r\n\r\n            const resizeObserver = new window.ResizeObserver((entries) => observer.next(<IResizeObserverEntry[]>entries));\r\n\r\n            try {\r\n                resizeObserver.observe(htmlElement, options);\r\n            } catch (err) {\r\n                observer.error(err);\r\n            }\r\n\r\n            return () => resizeObserver.disconnect();\r\n        });\r\n};\r\n", "import { TUnhandledRejectionFactory } from '../types';\r\n\r\nexport const createUnhandledRejection: TUnhandledRejectionFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\r\n    return (coolingOffPeriod) =>\r\n        wrapSubscribeFunction((observer) => {\r\n            if (window === null || window.clearInterval === undefined || window.setInterval === undefined) {\r\n                return emitNotSupportedError(observer);\r\n            }\r\n\r\n            const possiblyUnhandledRejections = new Map<Promise<any>, { reason: any; timestamp: number }>();\r\n\r\n            let intervalId: null | number = null;\r\n\r\n            const deletePossiblyUnhandledRejection = ({ promise }: PromiseRejectionEvent) => possiblyUnhandledRejections.delete(promise);\r\n            const emitUnhandledRejection = () => {\r\n                const latestTimestampToEmit = Date.now() - coolingOffPeriod;\r\n\r\n                possiblyUnhandledRejections.forEach(({ reason, timestamp }, promise) => {\r\n                    if (timestamp > latestTimestampToEmit) {\r\n                        return;\r\n                    }\r\n\r\n                    possiblyUnhandledRejections.delete(promise);\r\n                    observer.next(reason);\r\n                });\r\n\r\n                if (intervalId !== null && possiblyUnhandledRejections.size === 0) {\r\n                    window.clearInterval(intervalId);\r\n                    intervalId = null;\r\n                }\r\n            };\r\n            const registerPossiblyUnhandledRejection = (event: PromiseRejectionEvent) => {\r\n                event.preventDefault();\r\n\r\n                possiblyUnhandledRejections.set(event.promise, {\r\n                    reason: event.reason,\r\n                    timestamp: Date.now()\r\n                });\r\n\r\n                if (intervalId === null) {\r\n                    intervalId = window.setInterval(emitUnhandledRejection, coolingOffPeriod / 2);\r\n                }\r\n            };\r\n\r\n            window.addEventListener('rejectionhandled', deletePossiblyUnhandledRejection);\r\n            window.addEventListener('unhandledrejection', registerPossiblyUnhandledRejection);\r\n\r\n            return () => {\r\n                if (intervalId !== null) {\r\n                    window.clearInterval(intervalId);\r\n                }\r\n\r\n                window.removeEventListener('rejectionhandled', deletePossiblyUnhandledRejection);\r\n                window.removeEventListener('unhandledrejection', registerPossiblyUnhandledRejection);\r\n            };\r\n        });\r\n};\r\n", "import { TVideoFrameFactory } from '../types';\r\n\r\nexport const createVideoFrame: TVideoFrameFactory = (emitNotSupportedError, wrapSubscribeFunction) => {\r\n    return (videoElement) =>\r\n        wrapSubscribeFunction((observer) => {\r\n            if (videoElement.cancelVideoFrameCallback === undefined || videoElement.requestVideoFrameCallback === undefined) {\r\n                return emitNotSupportedError(observer);\r\n            }\r\n\r\n            let videoFrameHandle = videoElement.requestVideoFrameCallback(function videoFrameCallback(now, metadata): void {\r\n                videoFrameHandle = videoElement.requestVideoFrameCallback(videoFrameCallback);\r\n\r\n                observer.next({ ...metadata, now });\r\n            });\r\n\r\n            return () => videoElement.cancelVideoFrameCallback(videoFrameHandle);\r\n        });\r\n};\r\n", "import { IWakeLockSentinel } from '../interfaces';\r\nimport { TWakeLockFactory } from '../types';\r\n\r\nexport const createWakeLock: TWakeLockFactory = (emitNotSupportedError, window, wrapSubscribeFunction) => {\r\n    return (type) =>\r\n        wrapSubscribeFunction((observer) => {\r\n            if (window === null || window.navigator === undefined || window.navigator.wakeLock === undefined) {\r\n                return emitNotSupportedError(observer);\r\n            }\r\n\r\n            const releaseWakeLock = (wakeLockSentinel: IWakeLockSentinel) =>\r\n                wakeLockSentinel.release().catch(() => {\r\n                    // Ignore errors.\r\n                });\r\n            const removeReleaseEventListener = (wakeLockSentinel: IWakeLockSentinel) => {\r\n                wakeLockSentinel.onrelease = null;\r\n            };\r\n\r\n            let isActive = true;\r\n\r\n            const unsubscribeWhileRequesting = () => {\r\n                isActive = false;\r\n            };\r\n\r\n            let unsubscribe = unsubscribeWhileRequesting;\r\n\r\n            const requestWakeLock = () =>\r\n                window.navigator.wakeLock.request(type).then(\r\n                    (wakeLockSentinel) => {\r\n                        if (isActive) {\r\n                            observer.next(true);\r\n                        }\r\n\r\n                        if (isActive) {\r\n                            wakeLockSentinel.onrelease = () => {\r\n                                observer.next(false);\r\n\r\n                                unsubscribe = unsubscribeWhileRequesting;\r\n\r\n                                removeReleaseEventListener(wakeLockSentinel);\r\n                                requestWakeLock();\r\n                            };\r\n\r\n                            unsubscribe = () => {\r\n                                removeReleaseEventListener(wakeLockSentinel);\r\n                                releaseWakeLock(wakeLockSentinel);\r\n                            };\r\n                        } else {\r\n                            releaseWakeLock(wakeLockSentinel);\r\n                        }\r\n                    },\r\n                    (err) => {\r\n                        if (isActive) {\r\n                            observer.error(err);\r\n                        }\r\n                    }\r\n                );\r\n\r\n            requestWakeLock();\r\n\r\n            return () => unsubscribe();\r\n        });\r\n};\r\n", "import { TWindow, TWindowFactory } from '../types';\r\n\r\n// @todo TypeScript does not include type definitions for the Reporting API yet.\r\nexport const createWindow: TWindowFactory = () => (typeof window === 'undefined' ? null : <TWindow>window);\r\n", "import { Observer, Subscribable } from 'rxjs-interop';\r\nimport { TObserverParameters, TSubscribableThing, TSubscribeFunction, TWrapSubscribeFunctionFactory } from '../types';\r\n\r\nexport const createWrapSubscribeFunction: TWrapSubscribeFunctionFactory = (patch, toObserver) => {\r\n    const emptyFunction = () => {}; // tslint:disable-line:no-empty\r\n    const isNextFunction = <T>(args: TObserverParameters<T>): args is [Observer<T>['next']] => typeof args[0] === 'function';\r\n\r\n    return <T>(innerSubscribe: TSubscribeFunction<T>) => {\r\n        const subscribe = <TSubscribableThing<T>>((...args: TObserverParameters<T>) => {\r\n            const unsubscribe = innerSubscribe(isNextFunction(args) ? toObserver({ next: args[0] }) : toObserver(...args));\r\n\r\n            if (unsubscribe !== undefined) {\r\n                return unsubscribe;\r\n            }\r\n\r\n            return emptyFunction;\r\n        });\r\n\r\n        subscribe[Symbol.observable] = () => ({\r\n            subscribe: (...args: Parameters<Subscribable<T>['subscribe']>) => ({ unsubscribe: subscribe(...args) })\r\n        });\r\n\r\n        return patch(subscribe);\r\n    };\r\n};\r\n", "import { TEmitNotSupportedErrorFunction } from '../types';\r\n\r\nexport const emitNotSupportedError: TEmitNotSupportedErrorFunction = (observer) => {\r\n    observer.error(new Error('The required browser API seems to be not supported.'));\r\n\r\n    return () => {}; // tslint:disable-line:no-empty\r\n};\r\n", "export {};\r\n//# sourceMappingURL=html-video-element.js.map", "export {};\r\n//# sourceMappingURL=midi-access.js.map", "export {};\r\n//# sourceMappingURL=midi-connection-event.js.map", "export {};\r\n//# sourceMappingURL=midi-input.js.map", "export {};\r\n//# sourceMappingURL=midi-input-event-map.js.map", "export {};\r\n//# sourceMappingURL=midi-message-event.js.map", "export {};\r\n//# sourceMappingURL=midi-output.js.map", "export {};\r\n//# sourceMappingURL=midi-output-event-map.js.map", "export {};\r\n//# sourceMappingURL=midi-port.js.map", "export {};\r\n//# sourceMappingURL=report.js.map", "export {};\r\n//# sourceMappingURL=report-body.js.map", "export {};\r\n//# sourceMappingURL=reporting-observer.js.map", "export {};\r\n//# sourceMappingURL=reporting-observer-options.js.map", "export {};\r\n//# sourceMappingURL=resize-observer.js.map", "export {};\r\n//# sourceMappingURL=resize-observer-entry.js.map", "export {};\r\n//# sourceMappingURL=resize-observer-options.js.map", "export {};\r\n//# sourceMappingURL=resize-observer-size.js.map", "export {};\r\n//# sourceMappingURL=video-frame-metadata.js.map", "export {};\r\n//# sourceMappingURL=wake-lock.js.map", "export {};\r\n//# sourceMappingURL=wake-lock-sentinel.js.map", "export {};\r\n//# sourceMappingURL=wake-lock-sentinel-event-map.js.map", "export * from './html-video-element';\r\nexport * from './midi-access';\r\nexport * from './midi-connection-event';\r\nexport * from './midi-input';\r\nexport * from './midi-input-event-map';\r\nexport * from './midi-message-event';\r\nexport * from './midi-output';\r\nexport * from './midi-output-event-map';\r\nexport * from './midi-port';\r\nexport * from './report';\r\nexport * from './report-body';\r\nexport * from './reporting-observer';\r\nexport * from './reporting-observer-options';\r\nexport * from './resize-observer';\r\nexport * from './resize-observer-entry';\r\nexport * from './resize-observer-options';\r\nexport * from './resize-observer-size';\r\nexport * from './video-frame-metadata';\r\nexport * from './wake-lock';\r\nexport * from './wake-lock-sentinel';\r\nexport * from './wake-lock-sentinel-event-map';\r\n", "export {};\r\n//# sourceMappingURL=animation-frame-factory.js.map", "export {};\r\n//# sourceMappingURL=animation-frame-function.js.map", "export {};\r\n//# sourceMappingURL=emit-not-supported-error-function.js.map", "export {};\r\n//# sourceMappingURL=event-handler.js.map", "export {};\r\n//# sourceMappingURL=event-target-with-property-handler.js.map", "export {};\r\n//# sourceMappingURL=event-type.js.map", "export {};\r\n//# sourceMappingURL=flexible-subscribe-function.js.map", "export {};\r\n//# sourceMappingURL=intersections-factory.js.map", "export {};\r\n//# sourceMappingURL=intersections-function.js.map", "export {};\r\n//# sourceMappingURL=media-devices-factory.js.map", "export {};\r\n//# sourceMappingURL=media-devices-function.js.map", "export {};\r\n//# sourceMappingURL=media-query-match-factory.js.map", "export {};\r\n//# sourceMappingURL=media-query-match-function.js.map", "export {};\r\n//# sourceMappingURL=metrics-factory.js.map", "export {};\r\n//# sourceMappingURL=metrics-function.js.map", "export {};\r\n//# sourceMappingURL=midi-connection-event-handler.js.map", "export {};\r\n//# sourceMappingURL=midi-inputs-factory.js.map", "export {};\r\n//# sourceMappingURL=midi-inputs-function.js.map", "export {};\r\n//# sourceMappingURL=midi-message-event-handler.js.map", "export {};\r\n//# sourceMappingURL=midi-outputs-factory.js.map", "export {};\r\n//# sourceMappingURL=midi-outputs-function.js.map", "export {};\r\n//# sourceMappingURL=midi-port-connection-state.js.map", "export {};\r\n//# sourceMappingURL=midi-port-device-state.js.map", "export {};\r\n//# sourceMappingURL=midi-port-type.js.map", "export {};\r\n//# sourceMappingURL=mutations-factory.js.map", "export {};\r\n//# sourceMappingURL=mutations-function.js.map", "export {};\r\n//# sourceMappingURL=observer-parameters.js.map", "export {};\r\n//# sourceMappingURL=online-factory.js.map", "export {};\r\n//# sourceMappingURL=online-function.js.map", "export {};\r\n//# sourceMappingURL=on-factory.js.map", "export {};\r\n//# sourceMappingURL=on-function.js.map", "export {};\r\n//# sourceMappingURL=optional-unsubscribe-function.js.map", "export {};\r\n//# sourceMappingURL=permission-state-factory.js.map", "export {};\r\n//# sourceMappingURL=permission-state-function.js.map", "export {};\r\n//# sourceMappingURL=release-event-handler.js.map", "export {};\r\n//# sourceMappingURL=reports-factory.js.map", "export {};\r\n//# sourceMappingURL=reports-function.js.map", "export {};\r\n//# sourceMappingURL=resize-observer-box-options.js.map", "export {};\r\n//# sourceMappingURL=resizes-factory.js.map", "export {};\r\n//# sourceMappingURL=resizes-function.js.map", "export {};\r\n//# sourceMappingURL=subscribable-thing.js.map", "export {};\r\n//# sourceMappingURL=subscribe-function.js.map", "export {};\r\n//# sourceMappingURL=unhandled-rejection-factory.js.map", "export {};\r\n//# sourceMappingURL=unhandled-rejection-function.js.map", "export {};\r\n//# sourceMappingURL=unsubscribe-function.js.map", "export {};\r\n//# sourceMappingURL=video-frame-factory.js.map", "export {};\r\n//# sourceMappingURL=video-frame-function.js.map", "export {};\r\n//# sourceMappingURL=video-frame-request-callback.js.map", "export {};\r\n//# sourceMappingURL=wake-lock-factory.js.map", "export {};\r\n//# sourceMappingURL=wake-lock-function.js.map", "export {};\r\n//# sourceMappingURL=wake-lock-type.js.map", "export {};\r\n//# sourceMappingURL=window.js.map", "export {};\r\n//# sourceMappingURL=window-factory.js.map", "export {};\r\n//# sourceMappingURL=wrap-subscribe-function-factory.js.map", "export {};\r\n//# sourceMappingURL=wrap-subscribe-function-function.js.map", "export * from './animation-frame-factory';\r\nexport * from './animation-frame-function';\r\nexport * from './emit-not-supported-error-function';\r\nexport * from './event-handler';\r\nexport * from './event-target-with-property-handler';\r\nexport * from './event-type';\r\nexport * from './flexible-subscribe-function';\r\nexport * from './intersections-factory';\r\nexport * from './intersections-function';\r\nexport * from './media-devices-factory';\r\nexport * from './media-devices-function';\r\nexport * from './media-query-match-factory';\r\nexport * from './media-query-match-function';\r\nexport * from './metrics-factory';\r\nexport * from './metrics-function';\r\nexport * from './midi-connection-event-handler';\r\nexport * from './midi-inputs-factory';\r\nexport * from './midi-inputs-function';\r\nexport * from './midi-message-event-handler';\r\nexport * from './midi-outputs-factory';\r\nexport * from './midi-outputs-function';\r\nexport * from './midi-port-connection-state';\r\nexport * from './midi-port-device-state';\r\nexport * from './midi-port-type';\r\nexport * from './mutations-factory';\r\nexport * from './mutations-function';\r\nexport * from './observer-parameters';\r\nexport * from './online-factory';\r\nexport * from './online-function';\r\nexport * from './on-factory';\r\nexport * from './on-function';\r\nexport * from './optional-unsubscribe-function';\r\nexport * from './permission-state-factory';\r\nexport * from './permission-state-function';\r\nexport * from './release-event-handler';\r\nexport * from './reports-factory';\r\nexport * from './reports-function';\r\nexport * from './resize-observer-box-options';\r\nexport * from './resizes-factory';\r\nexport * from './resizes-function';\r\nexport * from './subscribable-thing';\r\nexport * from './subscribe-function';\r\nexport * from './unhandled-rejection-factory';\r\nexport * from './unhandled-rejection-function';\r\nexport * from './unsubscribe-function';\r\nexport * from './video-frame-factory';\r\nexport * from './video-frame-function';\r\nexport * from './video-frame-request-callback';\r\nexport * from './wake-lock-factory';\r\nexport * from './wake-lock-function';\r\nexport * from './wake-lock-type';\r\nexport * from './window';\r\nexport * from './window-factory';\r\nexport * from './wrap-subscribe-function-factory';\r\nexport * from './wrap-subscribe-function-function';\r\n", "import { patch, toObserver } from 'rxjs-interop';\r\nimport { createAnimationFrame } from './factories/animation-frame';\r\nimport { createAttribute } from './factories/attribute';\r\nimport { createGeolocation } from './factories/geolocation';\r\nimport { createIntersections } from './factories/intersections';\r\nimport { createMapSubscribableThing } from './factories/map-subscribable-thing';\r\nimport { createMediaDevices } from './factories/media-devices';\r\nimport { createMediaQueryMatch } from './factories/media-query-match';\r\nimport { createMetrics } from './factories/metrics';\r\nimport { createMidiInputs } from './factories/midi-inputs';\r\nimport { createMidiOutputs } from './factories/midi-outputs';\r\nimport { createMutations } from './factories/mutations';\r\nimport { createOn } from './factories/on';\r\nimport { createOnline } from './factories/online';\r\nimport { createPermissionState } from './factories/permission-state';\r\nimport { createPrependSubscribableThing } from './factories/prepend-subscribable-thing';\r\nimport { createReports } from './factories/reports';\r\nimport { createResizes } from './factories/resizes';\r\nimport { createUnhandledRejection } from './factories/unhandled-rejection';\r\nimport { createVideoFrame } from './factories/video-frame';\r\nimport { createWakeLock } from './factories/wake-lock';\r\nimport { createWindow } from './factories/window';\r\nimport { createWrapSubscribeFunction } from './factories/wrap-subscribe-function';\r\nimport { emitNotSupportedError } from './functions/emit-not-supported-error';\r\n\r\n/*\r\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\r\n * isolatedModules compiler option.\r\n */\r\nexport * from './interfaces/index';\r\nexport * from './types/index';\r\n\r\nconst window = createWindow();\r\nconst wrapSubscribeFunction = createWrapSubscribeFunction(patch, toObserver);\r\n\r\nexport const animationFrame = createAnimationFrame(emitNotSupportedError, window, wrapSubscribeFunction);\r\n\r\nexport const mutations = createMutations(emitNotSupportedError, window, wrapSubscribeFunction);\r\n\r\nconst mapSubscribableThing = createMapSubscribableThing(wrapSubscribeFunction);\r\nconst prependSubscribableThing = createPrependSubscribableThing(wrapSubscribeFunction);\r\n\r\nexport const attribute = createAttribute(mapSubscribableThing, mutations, prependSubscribableThing);\r\n\r\nexport const geolocation = createGeolocation(emitNotSupportedError, window, wrapSubscribeFunction);\r\n\r\nexport const intersections = createIntersections(emitNotSupportedError, window, wrapSubscribeFunction);\r\n\r\nexport const mediaDevices = createMediaDevices(emitNotSupportedError, window, wrapSubscribeFunction);\r\n\r\nexport const mediaQueryMatch = createMediaQueryMatch(emitNotSupportedError, window, wrapSubscribeFunction);\r\n\r\nexport const metrics = createMetrics(emitNotSupportedError, window, wrapSubscribeFunction);\r\n\r\nexport const midiInputs = createMidiInputs(wrapSubscribeFunction);\r\n\r\nexport const midiOutputs = createMidiOutputs(wrapSubscribeFunction);\r\n\r\nexport const on = createOn(wrapSubscribeFunction);\r\n\r\nexport const online = createOnline(emitNotSupportedError, window, wrapSubscribeFunction);\r\n\r\nexport const permissionState = createPermissionState(emitNotSupportedError, window, wrapSubscribeFunction);\r\n\r\nexport const reports = createReports(emitNotSupportedError, window, wrapSubscribeFunction);\r\n\r\nexport const resizes = createResizes(emitNotSupportedError, window, wrapSubscribeFunction);\r\n\r\nexport const unhandledRejection = createUnhandledRejection(emitNotSupportedError, window, wrapSubscribeFunction);\r\n\r\nexport const videoFrame = createVideoFrame(emitNotSupportedError, wrapSubscribeFunction);\r\n\r\nexport const wakeLock = createWakeLock(emitNotSupportedError, window, wrapSubscribeFunction);\r\n", "/*!\r\n * dashify <https://github.com/jonschlinkert/dashify>\r\n *\r\n * Copyright (c) 2015-2017, Jon Schlinkert.\r\n * Released under the MIT License.\r\n */\r\n\r\n'use strict';\r\n\r\nmodule.exports = (str, options) => {\r\n  if (typeof str !== 'string') throw new TypeError('expected a string');\r\n  return str.trim()\r\n    .replace(/([a-z])([A-Z])/g, '$1-$2')\r\n    .replace(/\\W/g, m => /[-]/.test(m) ? m : '-')\r\n    .replace(/^-+|-+$/g, '')\r\n    .replace(/-{2,}/g, m => options && options.condense ? '-' : m)\r\n    .toLowerCase();\r\n};\r\n", "/*\r\n * indefinite-article.js v1.0.0, 12-18-2011\r\n *\r\n * @author: Rodrigo Neri (@rigoneri)\r\n *\r\n * (The MIT License)\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n */\r\n\r\nvar indefiniteArticle = function(phrase) {\r\n    var i, word;\r\n\r\n    // Getting the first word\r\n    var match = /\\w+/.exec(phrase);\r\n    if (match)\r\n        word = match[0];\r\n    else\r\n        return \"an\";\r\n\r\n    var l_word = word.toLowerCase();\r\n    // Specific start of words that should be preceeded by 'an'\r\n    var alt_cases = [\"honest\", \"hour\", \"hono\"];\r\n    for (i in alt_cases) {\r\n        if (l_word.indexOf(alt_cases[i]) == 0)\r\n            return \"an\";\r\n    }\r\n\r\n    // Single letter word which should be preceeded by 'an'\r\n    if (l_word.length == 1) {\r\n        if (\"aedhilmnorsx\".indexOf(l_word) >= 0)\r\n            return \"an\";\r\n        else\r\n            return \"a\";\r\n    }\r\n\r\n    // Capital words which should likely be preceeded by 'an'\r\n    if (word.match(/(?!FJO|[HLMNS]Y.|RY[EO]|SQU|(F[LR]?|[HL]|MN?|N|RH?|S[CHKLMNPTVW]?|X(YL)?)[AEIOU])[FHLMNRSX][A-Z]/)) {\r\n        return \"an\";\r\n    }\r\n\r\n    // Special cases where a word that begins with a vowel should be preceeded by 'a'\r\n    var regexes = [/^e[uw]/, /^onc?e\\b/, /^uni([^nmd]|mo)/, /^u[bcfhjkqrst][aeiou]/];\r\n    for (i = 0; i < regexes.length; i++) {\r\n        if (l_word.match(regexes[i]))\r\n            return \"a\"\r\n    }\r\n\r\n    // Special capital words (UK, UN)\r\n    if (word.match(/^U[NK][AIEO]/)) {\r\n        return \"a\";\r\n    }\r\n    else if (word == word.toUpperCase()) {\r\n        if (\"aedhilmnorsx\".indexOf(l_word[0]) >= 0)\r\n            return \"an\";\r\n        else\r\n            return \"a\";\r\n    }\r\n\r\n    // Basic method of words that begin with a vowel being preceeded by 'an'\r\n    if (\"aeiou\".indexOf(l_word[0]) >= 0)\r\n        return \"an\";\r\n\r\n    // Instances where y follwed by specific letters is preceeded by 'an'\r\n    if (l_word.match(/^y(b[lor]|cl[ea]|fere|gg|p[ios]|rou|tt)/))\r\n        return \"an\";\r\n\r\n    return \"a\";\r\n};\r\n\r\nif ((typeof module !== 'undefined') && (typeof module.exports !== 'undefined')) {\r\n    module.exports = indefiniteArticle;\r\n} else {\r\n    window.indefiniteArticle = indefiniteArticle;\r\n}\r\n", "export {};\r\n//# sourceMappingURL=augmented-error.js.map", "export {};\r\n//# sourceMappingURL=aws-error.js.map", "export {};\r\n//# sourceMappingURL=error-template.js.map", "export {};\r\n//# sourceMappingURL=param-object.js.map", "export {};\r\n//# sourceMappingURL=variable.js.map", "export * from './augmented-error';\r\nexport * from './aws-error';\r\nexport * from './error-template';\r\nexport * from './param-object';\r\nexport * from './variable';\r\n", "export {};\r\n//# sourceMappingURL=render-function.js.map", "export * from './render-function';\r\n", "import dashify from 'dashify';\r\nimport indefiniteArticle from 'indefinite-article';\r\nimport { IAWSError, IAugmentedError, IErrorTemplate, IParameterObject, IVariable } from './interfaces';\r\nimport { TRenderFunction } from './types';\r\n\r\n/*\r\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\r\n * isolatedModules compiler option.\r\n */\r\nexport * from './interfaces/index';\r\nexport * from './types/index';\r\n\r\nconst applyModifiers = (name: string, modifiers: string[]) => {\r\n    if (modifiers === undefined) {\r\n        return name;\r\n    }\r\n\r\n    return modifiers.reduce((modifiedName, modifier) => {\r\n        if (modifier === 'capitalize') {\r\n            const head = modifiedName.charAt(0).toUpperCase();\r\n            const tail = modifiedName.slice(1);\r\n\r\n            return `${head}${tail}`;\r\n        }\r\n\r\n        if (modifier === 'dashify') {\r\n            return dashify(modifiedName);\r\n        }\r\n\r\n        if (modifier === 'prependIndefiniteArticle') {\r\n            return `${indefiniteArticle(modifiedName)} ${modifiedName}`;\r\n        }\r\n\r\n        return modifiedName;\r\n    }, name);\r\n};\r\n\r\nconst buildRegex = (variable: IVariable) => {\r\n    const expression = variable.name + variable.modifiers.map((modifier) => `\\\\.${modifier}\\\\(\\\\)`).join('');\r\n\r\n    return new RegExp(`\\\\$\\\\{${expression}}`, 'g');\r\n};\r\n\r\nconst preRenderString = (string: string, parameters: IParameterObject) => {\r\n    const expressionRegex = /\\${([^.}]+)((\\.[^(]+\\(\\))*)}/g;\r\n\r\n    const variables: IVariable[] = [];\r\n\r\n    let expressionResult = expressionRegex.exec(string);\r\n\r\n    while (expressionResult !== null) {\r\n        const variable: IVariable = {\r\n            modifiers: [],\r\n            name: expressionResult[1]\r\n        };\r\n\r\n        if (expressionResult[3] !== undefined) {\r\n            const modifiersRegex = /\\.[^(]+\\(\\)/g;\r\n\r\n            let modifiersRegexResult = modifiersRegex.exec(expressionResult[2]);\r\n\r\n            while (modifiersRegexResult !== null) {\r\n                variable.modifiers.push(modifiersRegexResult[0].slice(1, -2));\r\n\r\n                modifiersRegexResult = modifiersRegex.exec(expressionResult[2]);\r\n            }\r\n        }\r\n\r\n        variables.push(variable);\r\n\r\n        expressionResult = expressionRegex.exec(string);\r\n    }\r\n\r\n    const preRenderedParts = variables.reduce(\r\n        (parts: (string | TRenderFunction)[], variable: IVariable) =>\r\n            parts\r\n                .map((part) => {\r\n                    if (typeof part === 'string') {\r\n                        return part.split(buildRegex(variable)).reduce((prts: (string | TRenderFunction)[], prt: string, index: number) => {\r\n                            if (index === 0) {\r\n                                return [prt];\r\n                            }\r\n\r\n                            if (variable.name in parameters) {\r\n                                return [...prts, applyModifiers(parameters[variable.name], variable.modifiers), prt];\r\n                            }\r\n\r\n                            return [...prts, (prmtrs: IParameterObject) => applyModifiers(prmtrs[variable.name], variable.modifiers), prt];\r\n                        }, []);\r\n                    }\r\n\r\n                    return [part];\r\n                })\r\n                .reduce((prts: (string | TRenderFunction)[], part: (string | TRenderFunction)[]) => [...prts, ...part], []),\r\n        [string]\r\n    );\r\n\r\n    return (missingParameters: IParameterObject) =>\r\n        preRenderedParts\r\n            .reduce((renderedParts: string[], preRenderedPart: string | TRenderFunction) => {\r\n                if (typeof preRenderedPart === 'string') {\r\n                    return [...renderedParts, preRenderedPart];\r\n                }\r\n\r\n                return [...renderedParts, preRenderedPart(missingParameters)];\r\n            }, [])\r\n            .join('');\r\n};\r\n\r\nexport const compile = (template: IErrorTemplate, knownParameters: IParameterObject = {}) => {\r\n    const renderCode = template.code === undefined ? undefined : preRenderString(template.code, knownParameters);\r\n    const renderMessage = template.message === undefined ? undefined : preRenderString(template.message, knownParameters);\r\n\r\n    function render(missingParameters: IParameterObject, cause?: Error | IAWSError): IAugmentedError;\r\n    function render(cause: Error | IAWSError): IAugmentedError;\r\n    function render(\r\n        causeOrMissingParameters: Error | IAWSError | IParameterObject = {},\r\n        optionalCause?: Error | IAWSError\r\n    ): IAugmentedError {\r\n        const hasNoOptionalCause =\r\n            optionalCause === undefined &&\r\n            (causeOrMissingParameters instanceof Error ||\r\n                ((<IAWSError>causeOrMissingParameters).code !== undefined &&\r\n                    (<IAWSError>causeOrMissingParameters).code.slice(-9) === 'Exception'));\r\n        const { cause, missingParameters } = hasNoOptionalCause\r\n            ? {\r\n                  cause: <Error | IAWSError>causeOrMissingParameters,\r\n                  missingParameters: {}\r\n              }\r\n            : {\r\n                  cause: <Error | IAWSError>optionalCause,\r\n                  missingParameters: <IParameterObject>causeOrMissingParameters\r\n              };\r\n\r\n        const err: IAugmentedError = <IAugmentedError>(\r\n            (renderMessage === undefined ? new Error() : new Error(renderMessage(<IParameterObject>missingParameters)))\r\n        );\r\n\r\n        if (cause !== null) {\r\n            err.cause = cause;\r\n        }\r\n\r\n        if (renderCode !== undefined) {\r\n            err.code = renderCode(missingParameters);\r\n        }\r\n\r\n        if (template.status !== undefined) {\r\n            err.status = template.status;\r\n        }\r\n\r\n        return err;\r\n    }\r\n\r\n    return render;\r\n};\r\n", "import { IAugmentedError, IParameterObject, compile } from 'compilerr';\r\n\r\nconst JSON_RPC_ERROR_CODES = { INTERNAL_ERROR: -32603, INVALID_PARAMS: -32602, METHOD_NOT_FOUND: -32601 };\r\n\r\nexport const renderMethodNotFoundError: (missingParameters: IParameterObject) => IAugmentedError = compile({\r\n    message: 'The requested method called \"${method}\" is not supported.',\r\n    status: JSON_RPC_ERROR_CODES.METHOD_NOT_FOUND\r\n});\r\n\r\nexport const renderMissingResponseError: (missingParameters: IParameterObject) => IAugmentedError = compile({\r\n    message: 'The handler of the method called \"${method}\" returned no required result.',\r\n    status: JSON_RPC_ERROR_CODES.INTERNAL_ERROR\r\n});\r\n\r\nexport const renderUnexpectedResultError: (missingParameters: IParameterObject) => IAugmentedError = compile({\r\n    message: 'The handler of the method called \"${method}\" returned an unexpected result.',\r\n    status: JSON_RPC_ERROR_CODES.INTERNAL_ERROR\r\n});\r\n\r\nexport const renderUnknownPortIdError: (missingParameters: IParameterObject) => IAugmentedError = compile({\r\n    message: 'The specified parameter called \"portId\" with the given value \"${portId}\" does not identify a port connected to this worker.',\r\n    status: JSON_RPC_ERROR_CODES.INVALID_PARAMS\r\n});\r\n", "import { IAugmentedError } from 'compilerr';\r\nimport { IBrokerEvent, IErrorNotification, IErrorResponse, IReceiver, IRequest, IWorkerDefinition } from '../interfaces';\r\nimport { TMessageReceiverWithParams, TMessageReceiverWithoutParams, TWorkerImplementation } from '../types';\r\nimport { renderMethodNotFoundError, renderMissingResponseError, renderUnexpectedResultError } from './error-renderers';\r\n\r\nexport const createMessageHandler = <T extends IWorkerDefinition>(receiver: IReceiver, workerImplementation: TWorkerImplementation<T>) => {\r\n    return async ({ data: { id, method, params } }: IBrokerEvent<T>) => {\r\n        const messageHandler = workerImplementation[method];\r\n\r\n        try {\r\n            if (messageHandler === undefined) {\r\n                throw renderMethodNotFoundError({ method });\r\n            }\r\n\r\n            const response =\r\n                params === undefined\r\n                    ? (messageHandler as TMessageReceiverWithoutParams<T[typeof method]['response']>)()\r\n                    : (messageHandler as TMessageReceiverWithParams<T[typeof method]['params'], T[typeof method]['response']>)(params);\r\n\r\n            if (response === undefined) {\r\n                throw renderMissingResponseError({ method });\r\n            }\r\n\r\n            const synchronousResponse = response instanceof Promise ? await response : response;\r\n\r\n            if (id === null) {\r\n                if (synchronousResponse.result !== undefined) {\r\n                    throw renderUnexpectedResultError({ method });\r\n                }\r\n            } else {\r\n                if (synchronousResponse.result === undefined) {\r\n                    throw renderUnexpectedResultError({ method });\r\n                }\r\n\r\n                const { result, transferables = [] } = <IRequest['response']>synchronousResponse;\r\n\r\n                receiver.postMessage({ id, result }, transferables);\r\n            }\r\n        } catch (err) {\r\n            const { message, status = -32603 } = <IAugmentedError>err;\r\n\r\n            receiver.postMessage(<IErrorNotification | IErrorResponse>{ error: { code: status, message }, id });\r\n        }\r\n    };\r\n};\r\n", "// Bug #1: Safari does currently not support to use transferables.\r\n\r\nexport const isSupportingTransferables = () =>\r\n    new Promise<boolean>((resolve) => {\r\n        const arrayBuffer = new ArrayBuffer(0);\r\n        const { port1, port2 } = new MessageChannel();\r\n\r\n        port1.onmessage = ({ data }) => resolve(data !== null);\r\n        port2.postMessage(arrayBuffer, [arrayBuffer]);\r\n    });\r\n", "import { generateUniqueNumber } from 'fast-unique-numbers';\r\nimport { IDefaultWorkerDefinition, IReceiver, IWorkerDefinition } from '../interfaces';\r\nimport { TDestroyWorkerFunction, TWorkerImplementation } from '../types';\r\nimport { renderUnknownPortIdError } from './error-renderers';\r\nimport { isSupportingTransferables } from './is-supporting-transferables';\r\n\r\nconst DESTROY_WORKER_FUNCTIONS: Map<number, TDestroyWorkerFunction> = new Map();\r\n\r\nexport const extendWorkerImplementation = <T extends IWorkerDefinition>(\r\n    createWorker: (receiver: IReceiver, workerImplementation: TWorkerImplementation<T>) => TDestroyWorkerFunction,\r\n    partialWorkerImplementation: TWorkerImplementation<T>,\r\n    isSupportedFunction: () => boolean | Promise<boolean>\r\n): TWorkerImplementation<T> & TWorkerImplementation<IDefaultWorkerDefinition> => ({\r\n    ...partialWorkerImplementation,\r\n    connect: ({ port }) => {\r\n        port.start();\r\n\r\n        const destroyWorker = createWorker(port, partialWorkerImplementation);\r\n        const portId = generateUniqueNumber(DESTROY_WORKER_FUNCTIONS);\r\n\r\n        DESTROY_WORKER_FUNCTIONS.set(portId, () => {\r\n            destroyWorker();\r\n            port.close();\r\n            DESTROY_WORKER_FUNCTIONS.delete(portId);\r\n        });\r\n\r\n        return { result: portId };\r\n    },\r\n    disconnect: ({ portId }) => {\r\n        const destroyWorker = DESTROY_WORKER_FUNCTIONS.get(portId);\r\n\r\n        if (destroyWorker === undefined) {\r\n            throw renderUnknownPortIdError({ portId: portId.toString() });\r\n        }\r\n\r\n        destroyWorker();\r\n\r\n        return { result: null };\r\n    },\r\n    isSupported: async () => {\r\n        const isSelfSupported = await isSupportingTransferables();\r\n\r\n        if (isSelfSupported) {\r\n            const result = isSupportedFunction();\r\n            const synchronousResult = result instanceof Promise ? await result : result;\r\n\r\n            return { result: synchronousResult };\r\n        }\r\n\r\n        return { result: false };\r\n    }\r\n});\r\n", "export {};\r\n//# sourceMappingURL=broker-event.js.map", "export {};\r\n//# sourceMappingURL=broker-message.js.map", "export {};\r\n//# sourceMappingURL=default-worker-definition.js.map", "export {};\r\n//# sourceMappingURL=error.js.map", "export {};\r\n//# sourceMappingURL=error-notification.js.map", "export {};\r\n//# sourceMappingURL=error-response.js.map", "export {};\r\n//# sourceMappingURL=notification.js.map", "export {};\r\n//# sourceMappingURL=receiver.js.map", "export {};\r\n//# sourceMappingURL=request.js.map", "export {};\r\n//# sourceMappingURL=value-array.js.map", "export {};\r\n//# sourceMappingURL=value-map.js.map", "export {};\r\n//# sourceMappingURL=worker-definition.js.map", "export {};\r\n//# sourceMappingURL=worker-error-message.js.map", "export {};\r\n//# sourceMappingURL=worker-result-message.js.map", "export * from './broker-event';\r\nexport * from './broker-message';\r\nexport * from './default-worker-definition';\r\nexport * from './error';\r\nexport * from './error-notification';\r\nexport * from './error-response';\r\nexport * from './notification';\r\nexport * from './receiver';\r\nexport * from './request';\r\nexport * from './value-array';\r\nexport * from './value-map';\r\nexport * from './worker-definition';\r\nexport * from './worker-error-message';\r\nexport * from './worker-result-message';\r\n", "export {};\r\n//# sourceMappingURL=destroy-worker-function.js.map", "export {};\r\n//# sourceMappingURL=message.js.map", "export {};\r\n//# sourceMappingURL=message-receiver.js.map", "export {};\r\n//# sourceMappingURL=message-receiver-with-params.js.map", "export {};\r\n//# sourceMappingURL=message-receiver-without-params.js.map", "export {};\r\n//# sourceMappingURL=typed-array.js.map", "export {};\r\n//# sourceMappingURL=value.js.map", "export {};\r\n//# sourceMappingURL=value-map.js.map", "export {};\r\n//# sourceMappingURL=worker-definition.js.map", "export {};\r\n//# sourceMappingURL=worker-implementation.js.map", "export {};\r\n//# sourceMappingURL=worker-message.js.map", "export * from './destroy-worker-function';\r\nexport * from './message';\r\nexport * from './message-receiver';\r\nexport * from './message-receiver-with-params';\r\nexport * from './message-receiver-without-params';\r\nexport * from './typed-array';\r\nexport * from './value';\r\nexport * from './value-map';\r\nexport * from './worker-definition';\r\nexport * from './worker-implementation';\r\nexport * from './worker-message';\r\n", "import { createMessageHandler } from './helpers/create-message-handler';\r\nimport { extendWorkerImplementation } from './helpers/extend-worker-implementation';\r\nimport { isSupportingTransferables } from './helpers/is-supporting-transferables';\r\nimport { IReceiver, IWorkerDefinition } from './interfaces';\r\nimport { TDestroyWorkerFunction, TWorkerImplementation } from './types';\r\n\r\n/*\r\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\r\n * isolatedModules compiler option.\r\n */\r\nexport * from './interfaces/index';\r\nexport * from './types/index';\r\n\r\nexport const createWorker = <T extends IWorkerDefinition>(\r\n    receiver: IReceiver,\r\n    workerImplementation: TWorkerImplementation<T>,\r\n    isSupportedFunction: () => boolean | Promise<boolean> = () => true\r\n): TDestroyWorkerFunction => {\r\n    const fullWorkerImplementation = extendWorkerImplementation<T>(createWorker, workerImplementation, isSupportedFunction);\r\n    const messageHandler = createMessageHandler(receiver, fullWorkerImplementation);\r\n\r\n    receiver.addEventListener('message', messageHandler);\r\n\r\n    return () => receiver.removeEventListener('message', messageHandler);\r\n};\r\n\r\nexport { isSupportingTransferables as isSupported };\r\n", "export const createAddRecorderAudioWorkletModule = (blobConstructor: typeof Blob, urlConstructor: typeof URL, worklet: string) => {\r\n    return async (addAudioWorkletModule: (url: string) => Promise<void>) => {\r\n        const blob = new blobConstructor([worklet], { type: 'application/javascript; charset=utf-8' });\r\n        const url = urlConstructor.createObjectURL(blob);\r\n\r\n        try {\r\n            await addAudioWorkletModule(url);\r\n        } finally {\r\n            urlConstructor.revokeObjectURL(url);\r\n        }\r\n    };\r\n};\r\n", "import type { IWorkerEvent } from 'broker-factory';\r\nimport type { IWorkerErrorMessage, IWorkerResultMessage } from 'worker-factory';\r\n\r\nexport const createListener = (ongoingRequests: Map<number, { reject: Function; resolve: Function }>) => {\r\n    return ({ data: message }: IWorkerEvent) => {\r\n        const { id } = message;\r\n\r\n        if (id !== null) {\r\n            const ongoingRequest = ongoingRequests.get(id);\r\n\r\n            if (ongoingRequest !== undefined) {\r\n                const { reject, resolve } = ongoingRequest;\r\n\r\n                ongoingRequests.delete(id);\r\n\r\n                if ((<IWorkerErrorMessage>message).error === undefined) {\r\n                    resolve((<IWorkerResultMessage>message).result);\r\n                } else {\r\n                    reject(new Error((<IWorkerErrorMessage>message).error.message));\r\n                }\r\n            }\r\n        }\r\n    };\r\n};\r\n", "import type { generateUniqueNumber as generateUniqueNumberFunction } from 'fast-unique-numbers';\r\n\r\nexport const createPostMessageFactory = (generateUniqueNumber: typeof generateUniqueNumberFunction) => {\r\n    return (ongoingRequests: Map<number, { reject: Function; resolve: Function }>, port: MessagePort) => {\r\n        return (message: { method: string; params?: object }, transferables: Transferable[] = []): Promise<void> => {\r\n            return new Promise((resolve, reject) => {\r\n                const id = generateUniqueNumber(ongoingRequests);\r\n\r\n                ongoingRequests.set(id, { reject, resolve });\r\n\r\n                port.postMessage({ id, ...message }, transferables);\r\n            });\r\n        };\r\n    };\r\n};\r\n", "import type {\r\n    IAudioWorkletNode,\r\n    TAudioWorkletNodeConstructor,\r\n    TContext,\r\n    TNativeAudioWorkletNode,\r\n    TNativeAudioWorkletNodeConstructor,\r\n    TNativeContext\r\n} from 'standardized-audio-context';\r\nimport type { on as onFunction } from 'subscribable-things';\r\nimport type { validateState as validateStateFunction } from '../functions/validate-state';\r\nimport { INativeRecorderAudioWorkletNode, IRecorderAudioWorkletNode } from '../interfaces';\r\nimport { TAnyRecorderAudioWorkletNodeOptions, TState } from '../types';\r\nimport type { createListener as createListenerFunction } from './listener';\r\nimport type { createPostMessageFactory } from './post-message-factory';\r\n\r\nexport const createRecorderAudioWorkletNodeFactory = (\r\n    createListener: typeof createListenerFunction,\r\n    createPostMessage: ReturnType<typeof createPostMessageFactory>,\r\n    on: typeof onFunction,\r\n    validateState: typeof validateStateFunction\r\n) => {\r\n    return <T extends TContext | TNativeContext>(\r\n        audioWorkletNodeConstructor: T extends TContext ? TAudioWorkletNodeConstructor : TNativeAudioWorkletNodeConstructor,\r\n        context: T,\r\n        options: Partial<TAnyRecorderAudioWorkletNodeOptions<T>> = {}\r\n    ): T extends TContext ? IRecorderAudioWorkletNode<T> : INativeRecorderAudioWorkletNode => {\r\n        type TAnyAudioWorkletNode = T extends TContext ? IAudioWorkletNode<T> : TNativeAudioWorkletNode;\r\n        type TAnyRecorderAudioWorkletNode = T extends TContext ? IRecorderAudioWorkletNode<T> : INativeRecorderAudioWorkletNode;\r\n\r\n        const audioWorkletNode: TAnyAudioWorkletNode = new (<any>audioWorkletNodeConstructor)(context, 'recorder-audio-worklet-processor', {\r\n            ...options,\r\n            channelCountMode: 'explicit',\r\n            numberOfInputs: 1,\r\n            numberOfOutputs: 0\r\n        });\r\n        const ongoingRequests: Map<number, { reject: Function; resolve: Function }> = new Map();\r\n        const postMessage = createPostMessage(ongoingRequests, audioWorkletNode.port);\r\n        const unsubscribe = on(audioWorkletNode.port, 'message')(createListener(ongoingRequests));\r\n\r\n        audioWorkletNode.port.start();\r\n\r\n        let state: TState = 'inactive';\r\n\r\n        Object.defineProperties(audioWorkletNode, {\r\n            pause: {\r\n                get(): TAnyRecorderAudioWorkletNode['pause'] {\r\n                    return async () => {\r\n                        validateState(['recording'], state);\r\n\r\n                        state = 'paused';\r\n\r\n                        return postMessage({\r\n                            method: 'pause'\r\n                        });\r\n                    };\r\n                }\r\n            },\r\n            port: {\r\n                get(): TAnyRecorderAudioWorkletNode['port'] {\r\n                    throw new Error(\"The port of a RecorderAudioWorkletNode can't be accessed.\");\r\n                }\r\n            },\r\n            record: {\r\n                get(): TAnyRecorderAudioWorkletNode['record'] {\r\n                    return async (encoderPort: MessagePort) => {\r\n                        validateState(['inactive'], state);\r\n\r\n                        state = 'recording';\r\n\r\n                        return postMessage(\r\n                            {\r\n                                method: 'record',\r\n                                params: { encoderPort }\r\n                            },\r\n                            [encoderPort]\r\n                        );\r\n                    };\r\n                }\r\n            },\r\n            resume: {\r\n                get(): TAnyRecorderAudioWorkletNode['resume'] {\r\n                    return async () => {\r\n                        validateState(['paused'], state);\r\n\r\n                        state = 'recording';\r\n\r\n                        return postMessage({\r\n                            method: 'resume'\r\n                        });\r\n                    };\r\n                }\r\n            },\r\n            stop: {\r\n                get(): TAnyRecorderAudioWorkletNode['stop'] {\r\n                    return async () => {\r\n                        validateState(['paused', 'recording'], state);\r\n\r\n                        state = 'stopped';\r\n\r\n                        try {\r\n                            await postMessage({ method: 'stop' });\r\n                        } finally {\r\n                            unsubscribe();\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n        });\r\n\r\n        return <TAnyRecorderAudioWorkletNode>audioWorkletNode;\r\n    };\r\n};\r\n", "import { TState } from '../types';\r\n\r\nexport const validateState = (expectedStates: TState[], currentState: TState): void => {\r\n    if (!expectedStates.includes(currentState)) {\r\n        throw new Error(\r\n            `Expected the state to be ${expectedStates\r\n                .map((expectedState) => `\"${expectedState}\"`)\r\n                .join(' or ')} but it was \"${currentState}\".`\r\n        );\r\n    }\r\n};\r\n", "// This is the minified and stringified code of the recorder-audio-worklet-processor package.\r\nexport const worklet = `(()=>{\"use strict\";class e extends AudioWorkletProcessor{constructor(){super(),this._encoderPort=null,this._state=\"inactive\",this.port.onmessage=e=>{let{data:t}=e;\"pause\"===t.method?\"active\"===this._state||\"recording\"===this._state?(this._state=\"paused\",this._sendAcknowledgement(t.id)):this._sendUnexpectedStateError(t.id):\"record\"===t.method?\"inactive\"===this._state?(this._encoderPort=t.params.encoderPort,this._state=\"active\",this._sendAcknowledgement(t.id)):this._sendUnexpectedStateError(t.id):\"resume\"===t.method?\"paused\"===this._state?(this._state=\"active\",this._sendAcknowledgement(t.id)):this._sendUnexpectedStateError(t.id):\"stop\"===t.method?\"active\"!==this._state&&\"paused\"!==this._state&&\"recording\"!==this._state||null===this._encoderPort?this._sendUnexpectedStateError(t.id):(this._stop(this._encoderPort),this._sendAcknowledgement(t.id)):\"number\"==typeof t.id&&this.port.postMessage({error:{code:-32601,message:\"The requested method is not supported.\"},id:t.id})}}process(e){let[t]=e;if(\"inactive\"===this._state||\"paused\"===this._state)return!0;if(\"active\"===this._state){if(void 0===t)throw new Error(\"No channelData was received for the first input.\");if(0===t.length)return!0;this._state=\"recording\"}if(\"recording\"===this._state&&null!==this._encoderPort){if(void 0===t)throw new Error(\"No channelData was received for the first input.\");if(0!==t.length)return this._encoderPort.postMessage(t,t.map((e=>{let{buffer:t}=e;return t}))),!0;this._stop(this._encoderPort)}return!1}_sendAcknowledgement(e){this.port.postMessage({id:e,result:null})}_sendUnexpectedStateError(e){this.port.postMessage({error:{code:-32603,message:\"The internal state does not allow to process the given message.\"},id:e})}_stop(e){e.postMessage([]),e.close(),this._encoderPort=null,this._state=\"stopped\"}}e.parameterDescriptors=[],registerProcessor(\"recorder-audio-worklet-processor\",e)})();`; // tslint:disable-line:max-line-length\r\n", "export {};\r\n//# sourceMappingURL=native-recorder-audio-worklet-node.js.map", "export {};\r\n//# sourceMappingURL=recorder-audio-worklet-node.js.map", "export * from './native-recorder-audio-worklet-node';\r\nexport * from './recorder-audio-worklet-node';\r\n", "export {};\r\n//# sourceMappingURL=any-recorder-audio-worklet-node-options.js.map", "export {};\r\n//# sourceMappingURL=native-recorder-audio-worklet-node-options.js.map", "export {};\r\n//# sourceMappingURL=recorder-audio-worklet-node-options.js.map", "export {};\r\n//# sourceMappingURL=state.js.map", "export * from './any-recorder-audio-worklet-node-options';\r\nexport * from './native-recorder-audio-worklet-node-options';\r\nexport * from './recorder-audio-worklet-node-options';\r\nexport * from './state';\r\n", "import { generateUniqueNumber } from 'fast-unique-numbers';\r\nimport { on } from 'subscribable-things';\r\nimport { isSupported } from 'worker-factory';\r\nimport { createAddRecorderAudioWorkletModule } from './factories/add-recorder-audio-worklet-module';\r\nimport { createListener } from './factories/listener';\r\nimport { createPostMessageFactory } from './factories/post-message-factory';\r\nimport { createRecorderAudioWorkletNodeFactory } from './factories/recorder-audio-worklet-node-factory';\r\nimport { validateState } from './functions/validate-state';\r\nimport { worklet } from './worklet/worklet';\r\n\r\n/*\r\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\r\n * isolatedModules compiler option.\r\n */\r\nexport * from './interfaces/index';\r\nexport * from './types/index';\r\n\r\nexport const addRecorderAudioWorkletModule = createAddRecorderAudioWorkletModule(Blob, URL, worklet);\r\n\r\nexport const createRecorderAudioWorkletNode = createRecorderAudioWorkletNodeFactory(\r\n    createListener,\r\n    createPostMessageFactory(generateUniqueNumber),\r\n    on,\r\n    validateState\r\n);\r\n\r\nexport { isSupported };\r\n", "import { IExtendedExponentialRampToValueAutomationEvent } from '../interfaces';\r\n\r\nexport const createExtendedExponentialRampToValueAutomationEvent = (\r\n    value: number,\r\n    endTime: number,\r\n    insertTime: number\r\n): IExtendedExponentialRampToValueAutomationEvent => {\r\n    return { endTime, insertTime, type: 'exponentialRampToValue', value };\r\n};\r\n", "import { IExtendedLinearRampToValueAutomationEvent } from '../interfaces';\r\n\r\nexport const createExtendedLinearRampToValueAutomationEvent = (\r\n    value: number,\r\n    endTime: number,\r\n    insertTime: number\r\n): IExtendedLinearRampToValueAutomationEvent => {\r\n    return { endTime, insertTime, type: 'linearRampToValue', value };\r\n};\r\n", "import { ISetValueAutomationEvent } from '../interfaces';\r\n\r\nexport const createSetValueAutomationEvent = (value: number, startTime: number): ISetValueAutomationEvent => {\r\n    return { startTime, type: 'setValue', value };\r\n};\r\n", "import { ISetValueCurveAutomationEvent } from '../interfaces';\r\n\r\nexport const createSetValueCurveAutomationEvent = (\r\n    values: number[] | Float32Array,\r\n    startTime: number,\r\n    duration: number\r\n): ISetValueCurveAutomationEvent => {\r\n    return { duration, startTime, type: 'setValueCurve', values };\r\n};\r\n", "import { ISetTargetAutomationEvent } from '../interfaces';\r\n\r\nexport const getTargetValueAtTime = (\r\n    time: number,\r\n    valueAtStartTime: number,\r\n    { startTime, target, timeConstant }: ISetTargetAutomationEvent\r\n): number => {\r\n    return target + (valueAtStartTime - target) * Math.exp((startTime - time) / timeConstant);\r\n};\r\n", "import { IExponentialRampToValueAutomationEvent } from '../interfaces';\r\nimport { TAutomationEvent } from '../types';\r\n\r\nexport const isExponentialRampToValueAutomationEvent = (\r\n    automationEvent: TAutomationEvent\r\n): automationEvent is IExponentialRampToValueAutomationEvent => {\r\n    return automationEvent.type === 'exponentialRampToValue';\r\n};\r\n", "import { ILinearRampToValueAutomationEvent } from '../interfaces';\r\nimport { TAutomationEvent } from '../types';\r\n\r\nexport const isLinearRampToValueAutomationEvent = (\r\n    automationEvent: TAutomationEvent\r\n): automationEvent is ILinearRampToValueAutomationEvent => {\r\n    return automationEvent.type === 'linearRampToValue';\r\n};\r\n", "import { IExponentialRampToValueAutomationEvent, ILinearRampToValueAutomationEvent } from '../interfaces';\r\nimport { TAutomationEvent } from '../types';\r\nimport { isExponentialRampToValueAutomationEvent } from './exponential-ramp-to-value-automation-event';\r\nimport { isLinearRampToValueAutomationEvent } from './linear-ramp-to-value-automation-event';\r\n\r\nexport const isAnyRampToValueAutomationEvent = (\r\n    automationEvent: TAutomationEvent\r\n): automationEvent is IExponentialRampToValueAutomationEvent | ILinearRampToValueAutomationEvent => {\r\n    return isExponentialRampToValueAutomationEvent(automationEvent) || isLinearRampToValueAutomationEvent(automationEvent);\r\n};\r\n", "import { ISetValueAutomationEvent } from '../interfaces';\r\nimport { TAutomationEvent } from '../types';\r\n\r\nexport const isSetValueAutomationEvent = (automationEvent: TAutomationEvent): automationEvent is ISetValueAutomationEvent => {\r\n    return automationEvent.type === 'setValue';\r\n};\r\n", "import { ISetValueCurveAutomationEvent } from '../interfaces';\r\nimport { TAutomationEvent } from '../types';\r\n\r\nexport const isSetValueCurveAutomationEvent = (automationEvent: TAutomationEvent): automationEvent is ISetValueCurveAutomationEvent => {\r\n    return automationEvent.type === 'setValueCurve';\r\n};\r\n", "import { getTargetValueAtTime } from '../functions/get-target-value-at-time';\r\nimport { isAnyRampToValueAutomationEvent } from '../guards/any-ramp-to-value-automation-event';\r\nimport { isSetValueAutomationEvent } from '../guards/set-value-automation-event';\r\nimport { isSetValueCurveAutomationEvent } from '../guards/set-value-curve-automation-event';\r\nimport { TPersistentAutomationEvent } from '../types';\r\n\r\nexport const getValueOfAutomationEventAtIndexAtTime = (\r\n    automationEvents: TPersistentAutomationEvent[],\r\n    index: number,\r\n    time: number,\r\n    defaultValue: number\r\n): number => {\r\n    const automationEvent = automationEvents[index];\r\n\r\n    return automationEvent === undefined\r\n        ? defaultValue\r\n        : isAnyRampToValueAutomationEvent(automationEvent) || isSetValueAutomationEvent(automationEvent)\r\n        ? automationEvent.value\r\n        : isSetValueCurveAutomationEvent(automationEvent)\r\n        ? automationEvent.values[automationEvent.values.length - 1]\r\n        : getTargetValueAtTime(\r\n              time,\r\n              getValueOfAutomationEventAtIndexAtTime(automationEvents, index - 1, automationEvent.startTime, defaultValue),\r\n              automationEvent\r\n          );\r\n};\r\n", "import { getValueOfAutomationEventAtIndexAtTime } from '../functions/get-value-of-automation-event-at-index-at-time';\r\nimport { isAnyRampToValueAutomationEvent } from '../guards/any-ramp-to-value-automation-event';\r\nimport { isSetValueAutomationEvent } from '../guards/set-value-automation-event';\r\nimport { isSetValueCurveAutomationEvent } from '../guards/set-value-curve-automation-event';\r\nimport { IExtendedExponentialRampToValueAutomationEvent, IExtendedLinearRampToValueAutomationEvent } from '../interfaces';\r\nimport { TPersistentAutomationEvent } from '../types';\r\n\r\nexport const getEndTimeAndValueOfPreviousAutomationEvent = (\r\n    automationEvents: TPersistentAutomationEvent[],\r\n    index: number,\r\n    currentAutomationEvent: TPersistentAutomationEvent,\r\n    nextAutomationEvent: IExtendedExponentialRampToValueAutomationEvent | IExtendedLinearRampToValueAutomationEvent,\r\n    defaultValue: number\r\n): [number, number] => {\r\n    return currentAutomationEvent === undefined\r\n        ? [nextAutomationEvent.insertTime, defaultValue]\r\n        : isAnyRampToValueAutomationEvent(currentAutomationEvent)\r\n        ? [currentAutomationEvent.endTime, currentAutomationEvent.value]\r\n        : isSetValueAutomationEvent(currentAutomationEvent)\r\n        ? [currentAutomationEvent.startTime, currentAutomationEvent.value]\r\n        : isSetValueCurveAutomationEvent(currentAutomationEvent)\r\n        ? [\r\n              currentAutomationEvent.startTime + currentAutomationEvent.duration,\r\n              currentAutomationEvent.values[currentAutomationEvent.values.length - 1]\r\n          ]\r\n        : [\r\n              currentAutomationEvent.startTime,\r\n              getValueOfAutomationEventAtIndexAtTime(automationEvents, index - 1, currentAutomationEvent.startTime, defaultValue)\r\n          ];\r\n};\r\n", "import { ICancelAndHoldAutomationEvent } from '../interfaces';\r\nimport { TAutomationEvent } from '../types';\r\n\r\nexport const isCancelAndHoldAutomationEvent = (automationEvent: TAutomationEvent): automationEvent is ICancelAndHoldAutomationEvent => {\r\n    return automationEvent.type === 'cancelAndHold';\r\n};\r\n", "import { ICancelScheduledValuesAutomationEvent } from '../interfaces';\r\nimport { TAutomationEvent } from '../types';\r\n\r\nexport const isCancelScheduledValuesAutomationEvent = (\r\n    automationEvent: TAutomationEvent\r\n): automationEvent is ICancelScheduledValuesAutomationEvent => {\r\n    return automationEvent.type === 'cancelScheduledValues';\r\n};\r\n", "import { isCancelAndHoldAutomationEvent } from '../guards/cancel-and-hold-automation-event';\r\nimport { isCancelScheduledValuesAutomationEvent } from '../guards/cancel-scheduled-values-automation-event';\r\nimport { isExponentialRampToValueAutomationEvent } from '../guards/exponential-ramp-to-value-automation-event';\r\nimport { isLinearRampToValueAutomationEvent } from '../guards/linear-ramp-to-value-automation-event';\r\nimport { TAutomationEvent } from '../types';\r\n\r\nexport const getEventTime = (automationEvent: TAutomationEvent): number => {\r\n    if (isCancelAndHoldAutomationEvent(automationEvent) || isCancelScheduledValuesAutomationEvent(automationEvent)) {\r\n        return automationEvent.cancelTime;\r\n    }\r\n\r\n    if (isExponentialRampToValueAutomationEvent(automationEvent) || isLinearRampToValueAutomationEvent(automationEvent)) {\r\n        return automationEvent.endTime;\r\n    }\r\n\r\n    return automationEvent.startTime;\r\n};\r\n", "import { IExponentialRampToValueAutomationEvent } from '../interfaces';\r\n\r\nexport const getExponentialRampValueAtTime = (\r\n    time: number,\r\n    startTime: number,\r\n    valueAtStartTime: number,\r\n    { endTime, value }: IExponentialRampToValueAutomationEvent\r\n) => {\r\n    if (valueAtStartTime === value) {\r\n        return value;\r\n    }\r\n\r\n    if ((0 < valueAtStartTime && 0 < value) || (valueAtStartTime < 0 && value < 0)) {\r\n        return valueAtStartTime * (value / valueAtStartTime) ** ((time - startTime) / (endTime - startTime));\r\n    }\r\n\r\n    return 0;\r\n};\r\n", "import { ILinearRampToValueAutomationEvent } from '../interfaces';\r\n\r\nexport const getLinearRampValueAtTime = (\r\n    time: number,\r\n    startTime: number,\r\n    valueAtStartTime: number,\r\n    { endTime, value }: ILinearRampToValueAutomationEvent\r\n) => {\r\n    return valueAtStartTime + ((time - startTime) / (endTime - startTime)) * (value - valueAtStartTime);\r\n};\r\n", "export const interpolateValue = (values: number[] | Float32Array, theoreticIndex: number) => {\r\n    const lowerIndex = Math.floor(theoreticIndex);\r\n    const upperIndex = Math.ceil(theoreticIndex);\r\n\r\n    if (lowerIndex === upperIndex) {\r\n        return values[lowerIndex];\r\n    }\r\n\r\n    return (1 - (theoreticIndex - lowerIndex)) * values[lowerIndex] + (1 - (upperIndex - theoreticIndex)) * values[upperIndex];\r\n};\r\n", "import { ISetValueCurveAutomationEvent } from '../interfaces';\r\nimport { interpolateValue } from './interpolate-value';\r\n\r\nexport const getValueCurveValueAtTime = (time: number, { duration, startTime, values }: ISetValueCurveAutomationEvent): number => {\r\n    const theoreticIndex = ((time - startTime) / duration) * (values.length - 1);\r\n\r\n    return interpolateValue(values, theoreticIndex);\r\n};\r\n", "import { ISetTargetAutomationEvent } from '../interfaces';\r\nimport { TAutomationEvent } from '../types';\r\n\r\nexport const isSetTargetAutomationEvent = (automationEvent: TAutomationEvent): automationEvent is ISetTargetAutomationEvent => {\r\n    return automationEvent.type === 'setTarget';\r\n};\r\n", "import { createExtendedExponentialRampToValueAutomationEvent } from '../functions/create-extended-exponential-ramp-to-value-automation-event';\r\nimport { createExtendedLinearRampToValueAutomationEvent } from '../functions/create-extended-linear-ramp-to-value-automation-event';\r\nimport { createSetValueAutomationEvent } from '../functions/create-set-value-automation-event';\r\nimport { createSetValueCurveAutomationEvent } from '../functions/create-set-value-curve-automation-event';\r\nimport { getEndTimeAndValueOfPreviousAutomationEvent } from '../functions/get-end-time-and-value-of-previous-automation-event';\r\nimport { getEventTime } from '../functions/get-event-time';\r\nimport { getExponentialRampValueAtTime } from '../functions/get-exponential-ramp-value-at-time';\r\nimport { getLinearRampValueAtTime } from '../functions/get-linear-ramp-value-at-time';\r\nimport { getTargetValueAtTime } from '../functions/get-target-value-at-time';\r\nimport { getValueCurveValueAtTime } from '../functions/get-value-curve-value-at-time';\r\nimport { getValueOfAutomationEventAtIndexAtTime } from '../functions/get-value-of-automation-event-at-index-at-time';\r\nimport { isAnyRampToValueAutomationEvent } from '../guards/any-ramp-to-value-automation-event';\r\nimport { isCancelAndHoldAutomationEvent } from '../guards/cancel-and-hold-automation-event';\r\nimport { isCancelScheduledValuesAutomationEvent } from '../guards/cancel-scheduled-values-automation-event';\r\nimport { isExponentialRampToValueAutomationEvent } from '../guards/exponential-ramp-to-value-automation-event';\r\nimport { isLinearRampToValueAutomationEvent } from '../guards/linear-ramp-to-value-automation-event';\r\nimport { isSetTargetAutomationEvent } from '../guards/set-target-automation-event';\r\nimport { isSetValueAutomationEvent } from '../guards/set-value-automation-event';\r\nimport { isSetValueCurveAutomationEvent } from '../guards/set-value-curve-automation-event';\r\nimport { TAutomationEvent, TPersistentAutomationEvent } from '../types';\r\n\r\nexport class AutomationEventList {\r\n    private _automationEvents: TPersistentAutomationEvent[];\r\n\r\n    private _currenTime: number;\r\n\r\n    private _defaultValue: number;\r\n\r\n    constructor(defaultValue: number) {\r\n        this._automationEvents = [];\r\n        this._currenTime = 0;\r\n        this._defaultValue = defaultValue;\r\n    }\r\n\r\n    public [Symbol.iterator](): Iterator<TPersistentAutomationEvent> {\r\n        return this._automationEvents[Symbol.iterator]();\r\n    }\r\n\r\n    public add(automationEvent: TAutomationEvent): boolean {\r\n        const eventTime = getEventTime(automationEvent);\r\n\r\n        if (isCancelAndHoldAutomationEvent(automationEvent) || isCancelScheduledValuesAutomationEvent(automationEvent)) {\r\n            const index = this._automationEvents.findIndex((currentAutomationEvent) => {\r\n                if (isCancelScheduledValuesAutomationEvent(automationEvent) && isSetValueCurveAutomationEvent(currentAutomationEvent)) {\r\n                    return currentAutomationEvent.startTime + currentAutomationEvent.duration >= eventTime;\r\n                }\r\n\r\n                return getEventTime(currentAutomationEvent) >= eventTime;\r\n            });\r\n            const removedAutomationEvent = this._automationEvents[index];\r\n\r\n            if (index !== -1) {\r\n                this._automationEvents = this._automationEvents.slice(0, index);\r\n            }\r\n\r\n            if (isCancelAndHoldAutomationEvent(automationEvent)) {\r\n                const lastAutomationEvent = this._automationEvents[this._automationEvents.length - 1];\r\n\r\n                if (removedAutomationEvent !== undefined && isAnyRampToValueAutomationEvent(removedAutomationEvent)) {\r\n                    if (lastAutomationEvent !== undefined && isSetTargetAutomationEvent(lastAutomationEvent)) {\r\n                        throw new Error('The internal list is malformed.');\r\n                    }\r\n\r\n                    const startTime =\r\n                        lastAutomationEvent === undefined\r\n                            ? removedAutomationEvent.insertTime\r\n                            : isSetValueCurveAutomationEvent(lastAutomationEvent)\r\n                            ? lastAutomationEvent.startTime + lastAutomationEvent.duration\r\n                            : getEventTime(lastAutomationEvent);\r\n                    const startValue =\r\n                        lastAutomationEvent === undefined\r\n                            ? this._defaultValue\r\n                            : isSetValueCurveAutomationEvent(lastAutomationEvent)\r\n                            ? lastAutomationEvent.values[lastAutomationEvent.values.length - 1]\r\n                            : lastAutomationEvent.value;\r\n                    const value = isExponentialRampToValueAutomationEvent(removedAutomationEvent)\r\n                        ? getExponentialRampValueAtTime(eventTime, startTime, startValue, removedAutomationEvent)\r\n                        : getLinearRampValueAtTime(eventTime, startTime, startValue, removedAutomationEvent);\r\n                    const truncatedAutomationEvent = isExponentialRampToValueAutomationEvent(removedAutomationEvent)\r\n                        ? createExtendedExponentialRampToValueAutomationEvent(value, eventTime, this._currenTime)\r\n                        : createExtendedLinearRampToValueAutomationEvent(value, eventTime, this._currenTime);\r\n\r\n                    this._automationEvents.push(truncatedAutomationEvent);\r\n                }\r\n\r\n                if (lastAutomationEvent !== undefined && isSetTargetAutomationEvent(lastAutomationEvent)) {\r\n                    this._automationEvents.push(createSetValueAutomationEvent(this.getValue(eventTime), eventTime));\r\n                }\r\n\r\n                if (\r\n                    lastAutomationEvent !== undefined &&\r\n                    isSetValueCurveAutomationEvent(lastAutomationEvent) &&\r\n                    lastAutomationEvent.startTime + lastAutomationEvent.duration > eventTime\r\n                ) {\r\n                    const duration = eventTime - lastAutomationEvent.startTime;\r\n                    const ratio = (lastAutomationEvent.values.length - 1) / lastAutomationEvent.duration;\r\n                    const length = Math.max(2, 1 + Math.ceil(duration * ratio));\r\n                    const fraction = (duration / (length - 1)) * ratio;\r\n                    const values = lastAutomationEvent.values.slice(0, length);\r\n\r\n                    if (fraction < 1) {\r\n                        for (let i = 1; i < length; i += 1) {\r\n                            const factor = (fraction * i) % 1;\r\n\r\n                            values[i] = lastAutomationEvent.values[i - 1] * (1 - factor) + lastAutomationEvent.values[i] * factor;\r\n                        }\r\n                    }\r\n\r\n                    this._automationEvents[this._automationEvents.length - 1] = createSetValueCurveAutomationEvent(\r\n                        values,\r\n                        lastAutomationEvent.startTime,\r\n                        duration\r\n                    );\r\n                }\r\n            }\r\n        } else {\r\n            const index = this._automationEvents.findIndex((currentAutomationEvent) => getEventTime(currentAutomationEvent) > eventTime);\r\n\r\n            const previousAutomationEvent =\r\n                index === -1 ? this._automationEvents[this._automationEvents.length - 1] : this._automationEvents[index - 1];\r\n\r\n            if (\r\n                previousAutomationEvent !== undefined &&\r\n                isSetValueCurveAutomationEvent(previousAutomationEvent) &&\r\n                getEventTime(previousAutomationEvent) + previousAutomationEvent.duration > eventTime\r\n            ) {\r\n                return false;\r\n            }\r\n\r\n            const persistentAutomationEvent = isExponentialRampToValueAutomationEvent(automationEvent)\r\n                ? createExtendedExponentialRampToValueAutomationEvent(automationEvent.value, automationEvent.endTime, this._currenTime)\r\n                : isLinearRampToValueAutomationEvent(automationEvent)\r\n                ? createExtendedLinearRampToValueAutomationEvent(automationEvent.value, eventTime, this._currenTime)\r\n                : automationEvent;\r\n\r\n            if (index === -1) {\r\n                this._automationEvents.push(persistentAutomationEvent);\r\n            } else {\r\n                if (\r\n                    isSetValueCurveAutomationEvent(automationEvent) &&\r\n                    eventTime + automationEvent.duration > getEventTime(this._automationEvents[index])\r\n                ) {\r\n                    return false;\r\n                }\r\n\r\n                this._automationEvents.splice(index, 0, persistentAutomationEvent);\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    public flush(time: number): void {\r\n        const index = this._automationEvents.findIndex((currentAutomationEvent) => getEventTime(currentAutomationEvent) > time);\r\n\r\n        if (index > 1) {\r\n            const remainingAutomationEvents = this._automationEvents.slice(index - 1);\r\n            const firstRemainingAutomationEvent = remainingAutomationEvents[0];\r\n\r\n            if (isSetTargetAutomationEvent(firstRemainingAutomationEvent)) {\r\n                remainingAutomationEvents.unshift(\r\n                    createSetValueAutomationEvent(\r\n                        getValueOfAutomationEventAtIndexAtTime(\r\n                            this._automationEvents,\r\n                            index - 2,\r\n                            firstRemainingAutomationEvent.startTime,\r\n                            this._defaultValue\r\n                        ),\r\n                        firstRemainingAutomationEvent.startTime\r\n                    )\r\n                );\r\n            }\r\n\r\n            this._automationEvents = remainingAutomationEvents;\r\n        }\r\n    }\r\n\r\n    public getValue(time: number): number {\r\n        if (this._automationEvents.length === 0) {\r\n            return this._defaultValue;\r\n        }\r\n\r\n        const indexOfNextEvent = this._automationEvents.findIndex((automationEvent) => getEventTime(automationEvent) > time);\r\n        const nextAutomationEvent = this._automationEvents[indexOfNextEvent];\r\n        const indexOfCurrentEvent = (indexOfNextEvent === -1 ? this._automationEvents.length : indexOfNextEvent) - 1;\r\n        const currentAutomationEvent = this._automationEvents[indexOfCurrentEvent];\r\n\r\n        if (\r\n            currentAutomationEvent !== undefined &&\r\n            isSetTargetAutomationEvent(currentAutomationEvent) &&\r\n            (nextAutomationEvent === undefined ||\r\n                !isAnyRampToValueAutomationEvent(nextAutomationEvent) ||\r\n                nextAutomationEvent.insertTime > time)\r\n        ) {\r\n            return getTargetValueAtTime(\r\n                time,\r\n                getValueOfAutomationEventAtIndexAtTime(\r\n                    this._automationEvents,\r\n                    indexOfCurrentEvent - 1,\r\n                    currentAutomationEvent.startTime,\r\n                    this._defaultValue\r\n                ),\r\n                currentAutomationEvent\r\n            );\r\n        }\r\n\r\n        if (\r\n            currentAutomationEvent !== undefined &&\r\n            isSetValueAutomationEvent(currentAutomationEvent) &&\r\n            (nextAutomationEvent === undefined || !isAnyRampToValueAutomationEvent(nextAutomationEvent))\r\n        ) {\r\n            return currentAutomationEvent.value;\r\n        }\r\n\r\n        if (\r\n            currentAutomationEvent !== undefined &&\r\n            isSetValueCurveAutomationEvent(currentAutomationEvent) &&\r\n            (nextAutomationEvent === undefined ||\r\n                !isAnyRampToValueAutomationEvent(nextAutomationEvent) ||\r\n                currentAutomationEvent.startTime + currentAutomationEvent.duration > time)\r\n        ) {\r\n            if (time < currentAutomationEvent.startTime + currentAutomationEvent.duration) {\r\n                return getValueCurveValueAtTime(time, currentAutomationEvent);\r\n            }\r\n\r\n            return currentAutomationEvent.values[currentAutomationEvent.values.length - 1];\r\n        }\r\n\r\n        if (\r\n            currentAutomationEvent !== undefined &&\r\n            isAnyRampToValueAutomationEvent(currentAutomationEvent) &&\r\n            (nextAutomationEvent === undefined || !isAnyRampToValueAutomationEvent(nextAutomationEvent))\r\n        ) {\r\n            return currentAutomationEvent.value;\r\n        }\r\n\r\n        if (nextAutomationEvent !== undefined && isExponentialRampToValueAutomationEvent(nextAutomationEvent)) {\r\n            const [startTime, value] = getEndTimeAndValueOfPreviousAutomationEvent(\r\n                this._automationEvents,\r\n                indexOfCurrentEvent,\r\n                currentAutomationEvent,\r\n                nextAutomationEvent,\r\n                this._defaultValue\r\n            );\r\n\r\n            return getExponentialRampValueAtTime(time, startTime, value, nextAutomationEvent);\r\n        }\r\n\r\n        if (nextAutomationEvent !== undefined && isLinearRampToValueAutomationEvent(nextAutomationEvent)) {\r\n            const [startTime, value] = getEndTimeAndValueOfPreviousAutomationEvent(\r\n                this._automationEvents,\r\n                indexOfCurrentEvent,\r\n                currentAutomationEvent,\r\n                nextAutomationEvent,\r\n                this._defaultValue\r\n            );\r\n\r\n            return getLinearRampValueAtTime(time, startTime, value, nextAutomationEvent);\r\n        }\r\n\r\n        return this._defaultValue;\r\n    }\r\n}\r\n", "import { ICancelAndHoldAutomationEvent } from '../interfaces';\r\n\r\nexport const createCancelAndHoldAutomationEvent = (cancelTime: number): ICancelAndHoldAutomationEvent => {\r\n    return { cancelTime, type: 'cancelAndHold' };\r\n};\r\n", "import { ICancelScheduledValuesAutomationEvent } from '../interfaces';\r\n\r\nexport const createCancelScheduledValuesAutomationEvent = (cancelTime: number): ICancelScheduledValuesAutomationEvent => {\r\n    return { cancelTime, type: 'cancelScheduledValues' };\r\n};\r\n", "import { IExponentialRampToValueAutomationEvent } from '../interfaces';\r\n\r\nexport const createExponentialRampToValueAutomationEvent = (value: number, endTime: number): IExponentialRampToValueAutomationEvent => {\r\n    return { endTime, type: 'exponentialRampToValue', value };\r\n};\r\n", "import { ILinearRampToValueAutomationEvent } from '../interfaces';\r\n\r\nexport const createLinearRampToValueAutomationEvent = (value: number, endTime: number): ILinearRampToValueAutomationEvent => {\r\n    return { endTime, type: 'linearRampToValue', value };\r\n};\r\n", "import { ISetTargetAutomationEvent } from '../interfaces';\r\n\r\nexport const createSetTargetAutomationEvent = (target: number, startTime: number, timeConstant: number): ISetTargetAutomationEvent => {\r\n    return { startTime, target, timeConstant, type: 'setTarget' };\r\n};\r\n", "export {};\r\n//# sourceMappingURL=cancel-and-hold-automation-event.js.map", "export {};\r\n//# sourceMappingURL=cancel-scheduled-values-automation-event.js.map", "export {};\r\n//# sourceMappingURL=exponential-ramp-to-value-automation-event.js.map", "export {};\r\n//# sourceMappingURL=extended-exponential-ramp-to-value-automation-event.js.map", "export {};\r\n//# sourceMappingURL=extended-linear-ramp-to-value-automation-event.js.map", "export {};\r\n//# sourceMappingURL=linear-ramp-to-value-automation-event.js.map", "export {};\r\n//# sourceMappingURL=set-value-automation-event.js.map", "export {};\r\n//# sourceMappingURL=set-target-automation-event.js.map", "export {};\r\n//# sourceMappingURL=set-value-curve-automation-event.js.map", "export * from './cancel-and-hold-automation-event';\r\nexport * from './cancel-scheduled-values-automation-event';\r\nexport * from './exponential-ramp-to-value-automation-event';\r\nexport * from './extended-exponential-ramp-to-value-automation-event';\r\nexport * from './extended-linear-ramp-to-value-automation-event';\r\nexport * from './linear-ramp-to-value-automation-event';\r\nexport * from './set-value-automation-event';\r\nexport * from './set-target-automation-event';\r\nexport * from './set-value-curve-automation-event';\r\n", "export {};\r\n//# sourceMappingURL=automation-event.js.map", "export {};\r\n//# sourceMappingURL=persistent-automation-event.js.map", "export * from './automation-event';\r\nexport * from './persistent-automation-event';\r\n", "import { AutomationEventList } from './classes/automation-event-list';\r\nimport { createCancelAndHoldAutomationEvent } from './functions/create-cancel-and-hold-automation-event';\r\nimport { createCancelScheduledValuesAutomationEvent } from './functions/create-cancel-scheduled-values-automation-event';\r\nimport { createExponentialRampToValueAutomationEvent } from './functions/create-exponential-ramp-to-value-automation-event';\r\nimport { createLinearRampToValueAutomationEvent } from './functions/create-linear-ramp-to-value-automation-event';\r\nimport { createSetTargetAutomationEvent } from './functions/create-set-target-automation-event';\r\nimport { createSetValueAutomationEvent } from './functions/create-set-value-automation-event';\r\nimport { createSetValueCurveAutomationEvent } from './functions/create-set-value-curve-automation-event';\r\n\r\n/*\r\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\r\n * isolatedModules compiler option.\r\n */\r\nexport * from './interfaces/index';\r\nexport * from './types/index';\r\n\r\nexport { AutomationEventList };\r\n\r\nexport { createCancelAndHoldAutomationEvent };\r\n\r\nexport { createCancelScheduledValuesAutomationEvent };\r\n\r\nexport { createExponentialRampToValueAutomationEvent };\r\n\r\nexport { createLinearRampToValueAutomationEvent };\r\n\r\nexport { createSetTargetAutomationEvent };\r\n\r\nexport { createSetValueAutomationEvent };\r\n\r\nexport { createSetValueCurveAutomationEvent };\r\n", "import { TAbortErrorFactory } from '../types';\r\n\r\nexport const createAbortError: TAbortErrorFactory = () => new DOMException('', 'AbortError');\r\n", "import { TAddActiveInputConnectionToAudioNodeFactory } from '../types/add-active-input-connection-to-audio-node-factory';\r\n\r\nexport const createAddActiveInputConnectionToAudioNode: TAddActiveInputConnectionToAudioNodeFactory = (insertElementInSet) => {\r\n    return (activeInputs, source, [output, input, eventListener], ignoreDuplicates) => {\r\n        insertElementInSet(\r\n            activeInputs[input],\r\n            [source, output, eventListener],\r\n            (activeInputConnection) => activeInputConnection[0] === source && activeInputConnection[1] === output,\r\n            ignoreDuplicates\r\n        );\r\n    };\r\n};\r\n", "import { IAudioNode, IAudioNodeRenderer, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport { TActiveInputConnection, TAddAudioNodeConnectionsFactory, TContext, TNativeAudioNode } from '../types';\r\n\r\nexport const createAddAudioNodeConnections: TAddAudioNodeConnectionsFactory = (audioNodeConnectionsStore) => {\r\n    return <T extends TContext>(\r\n        audioNode: IAudioNode<T>,\r\n        audioNodeRenderer: T extends IMinimalOfflineAudioContext | IOfflineAudioContext ? IAudioNodeRenderer<T, IAudioNode<T>> : null,\r\n        nativeAudioNode: TNativeAudioNode\r\n    ) => {\r\n        const activeInputs = [];\r\n\r\n        for (let i = 0; i < nativeAudioNode.numberOfInputs; i += 1) {\r\n            activeInputs.push(new Set<TActiveInputConnection<T>>());\r\n        }\r\n\r\n        audioNodeConnectionsStore.set(audioNode, {\r\n            activeInputs,\r\n            outputs: new Set(),\r\n            passiveInputs: new WeakMap(),\r\n            renderer: audioNodeRenderer\r\n        });\r\n    };\r\n};\r\n", "import { IAudioParam, IAudioParamRenderer, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport { TAddAudioParamConnectionsFactory, TContext } from '../types';\r\n\r\nexport const createAddAudioParamConnections: TAddAudioParamConnectionsFactory = (audioParamConnectionsStore) => {\r\n    return <T extends TContext>(\r\n        audioParam: IAudioParam,\r\n        audioParamRenderer: T extends IMinimalOfflineAudioContext | IOfflineAudioContext ? IAudioParamRenderer : null\r\n    ) => {\r\n        audioParamConnectionsStore.set(audioParam, { activeInputs: new Set(), passiveInputs: new WeakMap(), renderer: audioParamRenderer });\r\n    };\r\n};\r\n", "import { IAudioNode, IAudioWorkletProcessor, IAudioWorkletProcessorConstructor } from './interfaces';\r\nimport {\r\n    TAudioNodeConnectionsStore,\r\n    TAudioNodeStore,\r\n    TAudioParamConnectionsStore,\r\n    TAudioParamStore,\r\n    TContext,\r\n    TContextStore,\r\n    TCycleCounters,\r\n    TInternalStateEventListener,\r\n    TNativeAudioWorkletNode,\r\n    TNativeContext\r\n} from './types';\r\n\r\nexport const ACTIVE_AUDIO_NODE_STORE: WeakSet<IAudioNode<TContext>> = new WeakSet();\r\n\r\nexport const AUDIO_NODE_CONNECTIONS_STORE: TAudioNodeConnectionsStore = new WeakMap();\r\n\r\nexport const AUDIO_NODE_STORE: TAudioNodeStore = new WeakMap();\r\n\r\nexport const AUDIO_PARAM_CONNECTIONS_STORE: TAudioParamConnectionsStore = new WeakMap();\r\n\r\nexport const AUDIO_PARAM_STORE: TAudioParamStore = new WeakMap();\r\n\r\nexport const CONTEXT_STORE: TContextStore = new WeakMap();\r\n\r\nexport const EVENT_LISTENERS: WeakMap<IAudioNode<TContext>, Set<TInternalStateEventListener>> = new WeakMap();\r\n\r\nexport const CYCLE_COUNTERS: TCycleCounters = new WeakMap();\r\n\r\n// This clunky name is borrowed from the spec. :-)\r\nexport const NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS: WeakMap<\r\n    TNativeContext,\r\n    Map<string, IAudioWorkletProcessorConstructor>\r\n> = new WeakMap();\r\n\r\nexport const NODE_TO_PROCESSOR_MAPS: WeakMap<\r\n    TNativeContext,\r\n    WeakMap<TNativeAudioWorkletNode, Promise<IAudioWorkletProcessor>>\r\n> = new WeakMap();\r\n", "import { TConstructor } from '../types';\r\n\r\nconst handler = {\r\n    construct(): any {\r\n        return handler;\r\n    }\r\n};\r\n\r\nexport const isConstructible = (constructible: TConstructor): boolean => {\r\n    try {\r\n        const proxy = new Proxy(constructible, handler);\r\n\r\n        new proxy(); // tslint:disable-line:no-unused-expression\r\n    } catch {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n};\r\n", "/*\r\n * This massive regex tries to cover all the following cases.\r\n *\r\n * import './path';\r\n * import defaultImport from './path';\r\n * import { namedImport } from './path';\r\n * import { namedImport as renamendImport } from './path';\r\n * import * as namespaceImport from './path';\r\n * import defaultImport, { namedImport } from './path';\r\n * import defaultImport, { namedImport as renamendImport } from './path';\r\n * import defaultImport, * as namespaceImport from './path';\r\n */\r\nconst IMPORT_STATEMENT_REGEX = /^import(?:(?:[\\s]+[\\w]+|(?:[\\s]+[\\w]+[\\s]*,)?[\\s]*\\{[\\s]*[\\w]+(?:[\\s]+as[\\s]+[\\w]+)?(?:[\\s]*,[\\s]*[\\w]+(?:[\\s]+as[\\s]+[\\w]+)?)*[\\s]*}|(?:[\\s]+[\\w]+[\\s]*,)?[\\s]*\\*[\\s]+as[\\s]+[\\w]+)[\\s]+from)?(?:[\\s]*)(\"([^\"\\\\]|\\\\.)+\"|'([^'\\\\]|\\\\.)+')(?:[\\s]*);?/; // tslint:disable-line:max-line-length\r\n\r\nexport const splitImportStatements = (source: string, url: string): [string, string] => {\r\n    const importStatements = [];\r\n\r\n    let sourceWithoutImportStatements = source.replace(/^[\\s]+/, '');\r\n    let result = sourceWithoutImportStatements.match(IMPORT_STATEMENT_REGEX);\r\n\r\n    while (result !== null) {\r\n        const unresolvedUrl = result[1].slice(1, -1);\r\n\r\n        const importStatementWithResolvedUrl = result[0]\r\n            .replace(/([\\s]+)?;?$/, '')\r\n            .replace(unresolvedUrl, new URL(unresolvedUrl, url).toString());\r\n        importStatements.push(importStatementWithResolvedUrl);\r\n\r\n        sourceWithoutImportStatements = sourceWithoutImportStatements.slice(result[0].length).replace(/^[\\s]+/, '');\r\n        result = sourceWithoutImportStatements.match(IMPORT_STATEMENT_REGEX);\r\n    }\r\n\r\n    return [importStatements.join(';'), sourceWithoutImportStatements];\r\n};\r\n", "import { NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS } from '../globals';\r\nimport { isConstructible } from '../helpers/is-constructible';\r\nimport { splitImportStatements } from '../helpers/split-import-statements';\r\nimport { IAudioWorkletProcessorConstructor } from '../interfaces';\r\nimport { TAddAudioWorkletModuleFactory, TEvaluateAudioWorkletGlobalScopeFunction } from '../types';\r\n\r\nconst verifyParameterDescriptors = (parameterDescriptors: IAudioWorkletProcessorConstructor['parameterDescriptors']) => {\r\n    if (parameterDescriptors !== undefined && !Array.isArray(parameterDescriptors)) {\r\n        throw new TypeError('The parameterDescriptors property of given value for processorCtor is not an array.');\r\n    }\r\n};\r\n\r\nconst verifyProcessorCtor = <T extends IAudioWorkletProcessorConstructor>(processorCtor: T) => {\r\n    if (!isConstructible(processorCtor)) {\r\n        throw new TypeError('The given value for processorCtor should be a constructor.');\r\n    }\r\n\r\n    if (processorCtor.prototype === null || typeof processorCtor.prototype !== 'object') {\r\n        throw new TypeError('The given value for processorCtor should have a prototype.');\r\n    }\r\n};\r\n\r\nexport const createAddAudioWorkletModule: TAddAudioWorkletModuleFactory = (\r\n    cacheTestResult,\r\n    createNotSupportedError,\r\n    evaluateSource,\r\n    exposeCurrentFrameAndCurrentTime,\r\n    fetchSource,\r\n    getNativeContext,\r\n    getOrCreateBackupOfflineAudioContext,\r\n    isNativeOfflineAudioContext,\r\n    nativeAudioWorkletNodeConstructor,\r\n    ongoingRequests,\r\n    resolvedRequests,\r\n    testAudioWorkletProcessorPostMessageSupport,\r\n    window\r\n) => {\r\n    let index = 0;\r\n\r\n    return (context, moduleURL, options = { credentials: 'omit' }) => {\r\n        const resolvedRequestsOfContext = resolvedRequests.get(context);\r\n\r\n        if (resolvedRequestsOfContext !== undefined && resolvedRequestsOfContext.has(moduleURL)) {\r\n            return Promise.resolve();\r\n        }\r\n\r\n        const ongoingRequestsOfContext = ongoingRequests.get(context);\r\n\r\n        if (ongoingRequestsOfContext !== undefined) {\r\n            const promiseOfOngoingRequest = ongoingRequestsOfContext.get(moduleURL);\r\n\r\n            if (promiseOfOngoingRequest !== undefined) {\r\n                return promiseOfOngoingRequest;\r\n            }\r\n        }\r\n\r\n        const nativeContext = getNativeContext(context);\r\n\r\n        // Bug #59: Safari does not implement the audioWorklet property.\r\n        const promise =\r\n            nativeContext.audioWorklet === undefined\r\n                ? fetchSource(moduleURL)\r\n                      .then(([source, absoluteUrl]) => {\r\n                          const [importStatements, sourceWithoutImportStatements] = splitImportStatements(source, absoluteUrl);\r\n\r\n                          /*\r\n                           * This is the unminified version of the code used below:\r\n                           *\r\n                           * ```js\r\n                           * ${ importStatements };\r\n                           * ((a, b) => {\r\n                           *     (a[b] = a[b] || [ ]).push(\r\n                           *         (AudioWorkletProcessor, global, registerProcessor, sampleRate, self, window) => {\r\n                           *             ${ sourceWithoutImportStatements }\r\n                           *         }\r\n                           *     );\r\n                           * })(window, '_AWGS');\r\n                           * ```\r\n                           */\r\n                          // tslint:disable-next-line:max-line-length\r\n                          const wrappedSource = `${importStatements};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${sourceWithoutImportStatements}\r\n})})(window,'_AWGS')`;\r\n\r\n                          // @todo Evaluating the given source code is a possible security problem.\r\n                          return evaluateSource(wrappedSource);\r\n                      })\r\n                      .then(() => {\r\n                          const evaluateAudioWorkletGlobalScope = (<TEvaluateAudioWorkletGlobalScopeFunction[]>(<any>window)._AWGS).pop();\r\n\r\n                          if (evaluateAudioWorkletGlobalScope === undefined) {\r\n                              // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\r\n                              throw new SyntaxError();\r\n                          }\r\n\r\n                          exposeCurrentFrameAndCurrentTime(nativeContext.currentTime, nativeContext.sampleRate, () =>\r\n                              evaluateAudioWorkletGlobalScope(\r\n                                  class AudioWorkletProcessor {},\r\n                                  undefined,\r\n                                  (name, processorCtor) => {\r\n                                      if (name.trim() === '') {\r\n                                          throw createNotSupportedError();\r\n                                      }\r\n\r\n                                      const nodeNameToProcessorConstructorMap = NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(nativeContext);\r\n\r\n                                      if (nodeNameToProcessorConstructorMap !== undefined) {\r\n                                          if (nodeNameToProcessorConstructorMap.has(name)) {\r\n                                              throw createNotSupportedError();\r\n                                          }\r\n\r\n                                          verifyProcessorCtor(processorCtor);\r\n                                          verifyParameterDescriptors(processorCtor.parameterDescriptors);\r\n\r\n                                          nodeNameToProcessorConstructorMap.set(name, processorCtor);\r\n                                      } else {\r\n                                          verifyProcessorCtor(processorCtor);\r\n                                          verifyParameterDescriptors(processorCtor.parameterDescriptors);\r\n\r\n                                          NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.set(nativeContext, new Map([[name, processorCtor]]));\r\n                                      }\r\n                                  },\r\n                                  nativeContext.sampleRate,\r\n                                  undefined,\r\n                                  undefined\r\n                              )\r\n                          );\r\n                      })\r\n                : Promise.all([\r\n                      fetchSource(moduleURL),\r\n                      Promise.resolve(\r\n                          cacheTestResult(testAudioWorkletProcessorPostMessageSupport, testAudioWorkletProcessorPostMessageSupport)\r\n                      )\r\n                  ]).then(([[source, absoluteUrl], isSupportingPostMessage]) => {\r\n                      const currentIndex = index + 1;\r\n\r\n                      index = currentIndex;\r\n\r\n                      const [importStatements, sourceWithoutImportStatements] = splitImportStatements(source, absoluteUrl);\r\n                      /*\r\n                       * Bug #179: Firefox does not allow to transfer any buffer which has been passed to the process() method as an argument.\r\n                       *\r\n                       * This is the unminified version of the code used below.\r\n                       *\r\n                       * ```js\r\n                       * class extends AudioWorkletProcessor {\r\n                       *\r\n                       *     __buffers = new WeakSet();\r\n                       *\r\n                       *     constructor () {\r\n                       *         super();\r\n                       *\r\n                       *         this.port.postMessage = ((postMessage) => {\r\n                       *             return (message, transferables) => {\r\n                       *                 const filteredTransferables = (transferables)\r\n                       *                     ? transferables.filter((transferable) => !this.__buffers.has(transferable))\r\n                       *                     : transferables;\r\n                       *\r\n                       *                 return postMessage.call(this.port, message, filteredTransferables);\r\n                       *              };\r\n                       *         })(this.port.postMessage);\r\n                       *     }\r\n                       * }\r\n                       * ```\r\n                       */\r\n                      const patchedAudioWorkletProcessor = isSupportingPostMessage\r\n                          ? 'AudioWorkletProcessor'\r\n                          : 'class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}';\r\n                      /*\r\n                       * Bug #170: Chrome and Edge do call process() with an array with empty channelData for each input if no input is connected.\r\n                       *\r\n                       * Bug #179: Firefox does not allow to transfer any buffer which has been passed to the process() method as an argument.\r\n                       *\r\n                       * Bug #190: Safari doesn't throw an error when loading an unparsable module.\r\n                       *\r\n                       * This is the unminified version of the code used below:\r\n                       *\r\n                       * ```js\r\n                       * `${ importStatements };\r\n                       * ((AudioWorkletProcessor, registerProcessor) => {${ sourceWithoutImportStatements }\r\n                       * })(\r\n                       *     ${patchedAudioWorkletProcessor },\r\n                       *     (name, processorCtor) => registerProcessor(name, class extends processorCtor {\r\n                       *\r\n                       *         __collectBuffers = (array) => {\r\n                       *             array.forEach((element) => this.__buffers.add(element.buffer));\r\n                       *         };\r\n                       *\r\n                       *         process (inputs, outputs, parameters) {\r\n                       *             inputs.forEach(this.__collectBuffers);\r\n                       *             outputs.forEach(this.__collectBuffers);\r\n                       *             this.__collectBuffers(Object.values(parameters));\r\n                       *\r\n                       *             return super.process(\r\n                       *                 (inputs.map((input) => input.some((channelData) => channelData.length === 0)) ? [ ] : input),\r\n                       *                 outputs,\r\n                       *                 parameters\r\n                       *             );\r\n                       *         }\r\n                       *\r\n                       *     })\r\n                       * );\r\n                       *\r\n                       * registerProcessor(`__sac${currentIndex}`, class extends AudioWorkletProcessor{\r\n                       *\r\n                       *     process () {\r\n                       *         return false;\r\n                       *     }\r\n                       *\r\n                       * })`\r\n                       * ```\r\n                       */\r\n                      const memberDefinition = isSupportingPostMessage ? '' : '__c = (a) => a.forEach(e=>this.__b.add(e.buffer));';\r\n                      const bufferRegistration = isSupportingPostMessage\r\n                          ? ''\r\n                          : 'i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));';\r\n                      const wrappedSource = `${importStatements};((AudioWorkletProcessor,registerProcessor)=>{${sourceWithoutImportStatements}\r\n})(${patchedAudioWorkletProcessor},(n,p)=>registerProcessor(n,class extends p{${memberDefinition}process(i,o,p){${bufferRegistration}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${currentIndex}',class extends AudioWorkletProcessor{process(){return !1}})`;\r\n                      const blob = new Blob([wrappedSource], { type: 'application/javascript; charset=utf-8' });\r\n                      const url = URL.createObjectURL(blob);\r\n\r\n                      return nativeContext.audioWorklet\r\n                          .addModule(url, options)\r\n                          .then(() => {\r\n                              if (isNativeOfflineAudioContext(nativeContext)) {\r\n                                  return nativeContext;\r\n                              }\r\n\r\n                              // Bug #186: Chrome and Edge do not allow to create an AudioWorkletNode on a closed AudioContext.\r\n                              const backupOfflineAudioContext = getOrCreateBackupOfflineAudioContext(nativeContext);\r\n\r\n                              return backupOfflineAudioContext.audioWorklet.addModule(url, options).then(() => backupOfflineAudioContext);\r\n                          })\r\n                          .then((nativeContextOrBackupOfflineAudioContext) => {\r\n                              if (nativeAudioWorkletNodeConstructor === null) {\r\n                                  throw new SyntaxError();\r\n                              }\r\n\r\n                              try {\r\n                                  // Bug #190: Safari doesn't throw an error when loading an unparsable module.\r\n                                  new nativeAudioWorkletNodeConstructor(nativeContextOrBackupOfflineAudioContext, `__sac${currentIndex}`); // tslint:disable-line:no-unused-expression\r\n                              } catch {\r\n                                  throw new SyntaxError();\r\n                              }\r\n                          })\r\n                          .finally(() => URL.revokeObjectURL(url));\r\n                  });\r\n\r\n        if (ongoingRequestsOfContext === undefined) {\r\n            ongoingRequests.set(context, new Map([[moduleURL, promise]]));\r\n        } else {\r\n            ongoingRequestsOfContext.set(moduleURL, promise);\r\n        }\r\n\r\n        promise\r\n            .then(() => {\r\n                const updatedResolvedRequestsOfContext = resolvedRequests.get(context);\r\n\r\n                if (updatedResolvedRequestsOfContext === undefined) {\r\n                    resolvedRequests.set(context, new Set([moduleURL]));\r\n                } else {\r\n                    updatedResolvedRequestsOfContext.add(moduleURL);\r\n                }\r\n            })\r\n            .finally(() => {\r\n                const updatedOngoingRequestsOfContext = ongoingRequests.get(context);\r\n\r\n                if (updatedOngoingRequestsOfContext !== undefined) {\r\n                    updatedOngoingRequestsOfContext.delete(moduleURL);\r\n                }\r\n            });\r\n\r\n        return promise;\r\n    };\r\n};\r\n", "import { TGetValueForKeyFunction } from '../types';\r\n\r\nexport const getValueForKey: TGetValueForKeyFunction = (map, key) => {\r\n    const value = map.get(key);\r\n\r\n    if (value === undefined) {\r\n        throw new Error('A value with the given key could not be found.');\r\n    }\r\n\r\n    return value;\r\n};\r\n", "import { TPickElementFromSetFunction } from '../types';\r\n\r\nexport const pickElementFromSet: TPickElementFromSetFunction = (set, predicate) => {\r\n    const matchingElements = Array.from(set).filter(predicate);\r\n\r\n    if (matchingElements.length > 1) {\r\n        throw Error('More than one element was found.');\r\n    }\r\n\r\n    if (matchingElements.length === 0) {\r\n        throw Error('No element was found.');\r\n    }\r\n\r\n    const [matchingElement] = matchingElements;\r\n\r\n    set.delete(matchingElement);\r\n\r\n    return matchingElement;\r\n};\r\n", "import { IAudioNode } from '../interfaces';\r\nimport { TContext, TPassiveAudioNodeInputConnection } from '../types';\r\nimport { getValueForKey } from './get-value-for-key';\r\nimport { pickElementFromSet } from './pick-element-from-set';\r\n\r\nexport const deletePassiveInputConnectionToAudioNode = <T extends TContext>(\r\n    passiveInputs: WeakMap<IAudioNode<T>, Set<TPassiveAudioNodeInputConnection>>,\r\n    source: IAudioNode<T>,\r\n    output: number,\r\n    input: number\r\n) => {\r\n    const passiveInputConnections = getValueForKey(passiveInputs, source);\r\n    const matchingConnection = pickElementFromSet(\r\n        passiveInputConnections,\r\n        (passiveInputConnection) => passiveInputConnection[0] === output && passiveInputConnection[1] === input\r\n    );\r\n\r\n    if (passiveInputConnections.size === 0) {\r\n        passiveInputs.delete(source);\r\n    }\r\n\r\n    return matchingConnection;\r\n};\r\n", "import { EVENT_LISTENERS } from '../globals';\r\nimport { TGetEventListenersOfAudioNodeFunction } from '../types';\r\nimport { getValueForKey } from './get-value-for-key';\r\n\r\nexport const getEventListenersOfAudioNode: TGetEventListenersOfAudioNodeFunction = (audioNode) => {\r\n    return getValueForKey(EVENT_LISTENERS, audioNode);\r\n};\r\n", "import { ACTIVE_AUDIO_NODE_STORE } from '../globals';\r\nimport { IAudioNode } from '../interfaces';\r\nimport { TContext } from '../types';\r\nimport { getEventListenersOfAudioNode } from './get-event-listeners-of-audio-node';\r\n\r\nexport const setInternalStateToActive = <T extends TContext>(audioNode: IAudioNode<T>) => {\r\n    if (ACTIVE_AUDIO_NODE_STORE.has(audioNode)) {\r\n        throw new Error('The AudioNode is already stored.');\r\n    }\r\n\r\n    ACTIVE_AUDIO_NODE_STORE.add(audioNode);\r\n\r\n    getEventListenersOfAudioNode(audioNode).forEach((eventListener) => eventListener(true));\r\n};\r\n", "import { IAudioNode, IAudioWorkletNode } from '../interfaces';\r\nimport { TContext } from '../types';\r\n\r\nexport const isAudioWorkletNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IAudioWorkletNode<T> => {\r\n    return 'port' in audioNode;\r\n};\r\n", "import { ACTIVE_AUDIO_NODE_STORE } from '../globals';\r\nimport { IAudioNode } from '../interfaces';\r\nimport { TContext } from '../types';\r\nimport { getEventListenersOfAudioNode } from './get-event-listeners-of-audio-node';\r\n\r\nexport const setInternalStateToPassive = <T extends TContext>(audioNode: IAudioNode<T>) => {\r\n    if (!ACTIVE_AUDIO_NODE_STORE.has(audioNode)) {\r\n        throw new Error('The AudioNode is not stored.');\r\n    }\r\n\r\n    ACTIVE_AUDIO_NODE_STORE.delete(audioNode);\r\n\r\n    getEventListenersOfAudioNode(audioNode).forEach((eventListener) => eventListener(false));\r\n};\r\n", "import { isAudioWorkletNode } from '../guards/audio-worklet-node';\r\nimport { IAudioNode } from '../interfaces';\r\nimport { TActiveInputConnection, TContext } from '../types';\r\nimport { setInternalStateToPassive } from './set-internal-state-to-passive';\r\n\r\n// Set the internalState of the audioNode to 'passive' if it is not an AudioWorkletNode and if it has no 'active' input connections.\r\nexport const setInternalStateToPassiveWhenNecessary = <T extends TContext>(\r\n    audioNode: IAudioNode<T>,\r\n    activeInputs: Set<TActiveInputConnection<T>>[]\r\n) => {\r\n    if (!isAudioWorkletNode(audioNode) && activeInputs.every((connections) => connections.size === 0)) {\r\n        setInternalStateToPassive(audioNode);\r\n    }\r\n};\r\n", "import { deletePassiveInputConnectionToAudioNode } from '../helpers/delete-passive-input-connection-to-audio-node';\r\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\r\nimport { setInternalStateToPassiveWhenNecessary } from '../helpers/set-internal-state-to-passive-when-necessary';\r\nimport { IAudioNode } from '../interfaces';\r\nimport { TAddConnectionToAudioNodeFactory, TContext, TInternalStateEventListener } from '../types';\r\n\r\nexport const createAddConnectionToAudioNode: TAddConnectionToAudioNodeFactory = (\r\n    addActiveInputConnectionToAudioNode,\r\n    addPassiveInputConnectionToAudioNode,\r\n    connectNativeAudioNodeToNativeAudioNode,\r\n    deleteActiveInputConnectionToAudioNode,\r\n    disconnectNativeAudioNodeFromNativeAudioNode,\r\n    getAudioNodeConnections,\r\n    getAudioNodeTailTime,\r\n    getEventListenersOfAudioNode,\r\n    getNativeAudioNode,\r\n    insertElementInSet,\r\n    isActiveAudioNode,\r\n    isPartOfACycle,\r\n    isPassiveAudioNode\r\n) => {\r\n    const tailTimeTimeoutIds = new WeakMap<IAudioNode<TContext>, number>();\r\n\r\n    return (source, destination, output, input, isOffline) => {\r\n        const { activeInputs, passiveInputs } = getAudioNodeConnections(destination);\r\n        const { outputs } = getAudioNodeConnections(source);\r\n        const eventListeners = getEventListenersOfAudioNode(source);\r\n\r\n        const eventListener: TInternalStateEventListener = (isActive) => {\r\n            const nativeDestinationAudioNode = getNativeAudioNode(destination);\r\n            const nativeSourceAudioNode = getNativeAudioNode(source);\r\n\r\n            if (isActive) {\r\n                const partialConnection = deletePassiveInputConnectionToAudioNode(passiveInputs, source, output, input);\r\n\r\n                addActiveInputConnectionToAudioNode(activeInputs, source, partialConnection, false);\r\n\r\n                if (!isOffline && !isPartOfACycle(source)) {\r\n                    connectNativeAudioNodeToNativeAudioNode(nativeSourceAudioNode, nativeDestinationAudioNode, output, input);\r\n                }\r\n\r\n                if (isPassiveAudioNode(destination)) {\r\n                    setInternalStateToActive(destination);\r\n                }\r\n            } else {\r\n                const partialConnection = deleteActiveInputConnectionToAudioNode(activeInputs, source, output, input);\r\n\r\n                addPassiveInputConnectionToAudioNode(passiveInputs, input, partialConnection, false);\r\n\r\n                if (!isOffline && !isPartOfACycle(source)) {\r\n                    disconnectNativeAudioNodeFromNativeAudioNode(nativeSourceAudioNode, nativeDestinationAudioNode, output, input);\r\n                }\r\n\r\n                const tailTime = getAudioNodeTailTime(destination);\r\n\r\n                if (tailTime === 0) {\r\n                    if (isActiveAudioNode(destination)) {\r\n                        setInternalStateToPassiveWhenNecessary(destination, activeInputs);\r\n                    }\r\n                } else {\r\n                    const tailTimeTimeoutId = tailTimeTimeoutIds.get(destination);\r\n\r\n                    if (tailTimeTimeoutId !== undefined) {\r\n                        clearTimeout(tailTimeTimeoutId);\r\n                    }\r\n\r\n                    tailTimeTimeoutIds.set(\r\n                        destination,\r\n                        setTimeout(() => {\r\n                            if (isActiveAudioNode(destination)) {\r\n                                setInternalStateToPassiveWhenNecessary(destination, activeInputs);\r\n                            }\r\n                        }, tailTime * 1000)\r\n                    );\r\n                }\r\n            }\r\n        };\r\n\r\n        if (\r\n            insertElementInSet(\r\n                outputs,\r\n                [destination, output, input],\r\n                (outputConnection) =>\r\n                    outputConnection[0] === destination && outputConnection[1] === output && outputConnection[2] === input,\r\n                true\r\n            )\r\n        ) {\r\n            eventListeners.add(eventListener);\r\n\r\n            if (isActiveAudioNode(source)) {\r\n                addActiveInputConnectionToAudioNode(activeInputs, source, [output, input, eventListener], true);\r\n            } else {\r\n                addPassiveInputConnectionToAudioNode(passiveInputs, input, [source, output, eventListener], true);\r\n            }\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    };\r\n};\r\n", "import { TAddPassiveInputConnectionToAudioNodeFactory } from '../types';\r\n\r\nexport const createAddPassiveInputConnectionToAudioNode: TAddPassiveInputConnectionToAudioNodeFactory = (insertElementInSet) => {\r\n    return (passiveInputs, input, [source, output, eventListener], ignoreDuplicates) => {\r\n        const passiveInputConnections = passiveInputs.get(source);\r\n\r\n        if (passiveInputConnections === undefined) {\r\n            passiveInputs.set(source, new Set([[output, input, eventListener]]));\r\n        } else {\r\n            insertElementInSet(\r\n                passiveInputConnections,\r\n                [output, input, eventListener],\r\n                (passiveInputConnection) => passiveInputConnection[0] === output && passiveInputConnection[1] === input,\r\n                ignoreDuplicates\r\n            );\r\n        }\r\n    };\r\n};\r\n", "import { TAddSilentConnectionFactory } from '../types';\r\n\r\nexport const createAddSilentConnection: TAddSilentConnectionFactory = (createNativeGainNode) => {\r\n    return (nativeContext, nativeAudioScheduledSourceNode) => {\r\n        const nativeGainNode = createNativeGainNode(nativeContext, {\r\n            channelCount: 1,\r\n            channelCountMode: 'explicit',\r\n            channelInterpretation: 'discrete',\r\n            gain: 0\r\n        });\r\n\r\n        nativeAudioScheduledSourceNode.connect(nativeGainNode).connect(nativeContext.destination);\r\n\r\n        const disconnect = () => {\r\n            nativeAudioScheduledSourceNode.removeEventListener('ended', disconnect);\r\n            nativeAudioScheduledSourceNode.disconnect(nativeGainNode);\r\n            nativeGainNode.disconnect();\r\n        };\r\n\r\n        nativeAudioScheduledSourceNode.addEventListener('ended', disconnect);\r\n    };\r\n};\r\n", "import { TAddUnrenderedAudioWorkletNodeFactory } from '../types';\r\n\r\nexport const createAddUnrenderedAudioWorkletNode: TAddUnrenderedAudioWorkletNodeFactory = (getUnrenderedAudioWorkletNodes) => {\r\n    return (nativeContext, audioWorkletNode) => {\r\n        getUnrenderedAudioWorkletNodes(nativeContext).add(audioWorkletNode);\r\n    };\r\n};\r\n", "import { IAnalyserNode, IAnalyserOptions } from '../interfaces';\r\nimport { TAnalyserNodeConstructorFactory, TAudioNodeRenderer, TContext, TNativeAnalyserNode } from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    channelCount: 2,\r\n    channelCountMode: 'max',\r\n    channelInterpretation: 'speakers',\r\n    fftSize: 2048,\r\n    maxDecibels: -30,\r\n    minDecibels: -100,\r\n    smoothingTimeConstant: 0.8\r\n} as const;\r\n\r\nexport const createAnalyserNodeConstructor: TAnalyserNodeConstructorFactory = (\r\n    audionNodeConstructor,\r\n    createAnalyserNodeRenderer,\r\n    createIndexSizeError,\r\n    createNativeAnalyserNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext\r\n) => {\r\n    return class AnalyserNode<T extends TContext> extends audionNodeConstructor<T> implements IAnalyserNode<T> {\r\n        private _nativeAnalyserNode: TNativeAnalyserNode;\r\n\r\n        constructor(context: T, options?: Partial<IAnalyserOptions>) {\r\n            const nativeContext = getNativeContext(context);\r\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\r\n            const nativeAnalyserNode = createNativeAnalyserNode(nativeContext, mergedOptions);\r\n            const analyserNodeRenderer = <TAudioNodeRenderer<T, this>>(\r\n                (isNativeOfflineAudioContext(nativeContext) ? createAnalyserNodeRenderer() : null)\r\n            );\r\n\r\n            super(context, false, nativeAnalyserNode, analyserNodeRenderer);\r\n\r\n            this._nativeAnalyserNode = nativeAnalyserNode;\r\n        }\r\n\r\n        get fftSize(): number {\r\n            return this._nativeAnalyserNode.fftSize;\r\n        }\r\n\r\n        set fftSize(value) {\r\n            this._nativeAnalyserNode.fftSize = value;\r\n        }\r\n\r\n        get frequencyBinCount(): number {\r\n            return this._nativeAnalyserNode.frequencyBinCount;\r\n        }\r\n\r\n        get maxDecibels(): number {\r\n            return this._nativeAnalyserNode.maxDecibels;\r\n        }\r\n\r\n        set maxDecibels(value) {\r\n            // Bug #118: Safari does not throw an error if maxDecibels is not more than minDecibels.\r\n            const maxDecibels = this._nativeAnalyserNode.maxDecibels;\r\n\r\n            this._nativeAnalyserNode.maxDecibels = value;\r\n\r\n            if (!(value > this._nativeAnalyserNode.minDecibels)) {\r\n                this._nativeAnalyserNode.maxDecibels = maxDecibels;\r\n\r\n                throw createIndexSizeError();\r\n            }\r\n        }\r\n\r\n        get minDecibels(): number {\r\n            return this._nativeAnalyserNode.minDecibels;\r\n        }\r\n\r\n        set minDecibels(value) {\r\n            // Bug #118: Safari does not throw an error if maxDecibels is not more than minDecibels.\r\n            const minDecibels = this._nativeAnalyserNode.minDecibels;\r\n\r\n            this._nativeAnalyserNode.minDecibels = value;\r\n\r\n            if (!(this._nativeAnalyserNode.maxDecibels > value)) {\r\n                this._nativeAnalyserNode.minDecibels = minDecibels;\r\n\r\n                throw createIndexSizeError();\r\n            }\r\n        }\r\n\r\n        get smoothingTimeConstant(): number {\r\n            return this._nativeAnalyserNode.smoothingTimeConstant;\r\n        }\r\n\r\n        set smoothingTimeConstant(value) {\r\n            this._nativeAnalyserNode.smoothingTimeConstant = value;\r\n        }\r\n\r\n        public getByteFrequencyData(array: Uint8Array): void {\r\n            this._nativeAnalyserNode.getByteFrequencyData(array);\r\n        }\r\n\r\n        public getByteTimeDomainData(array: Uint8Array): void {\r\n            this._nativeAnalyserNode.getByteTimeDomainData(array);\r\n        }\r\n\r\n        public getFloatFrequencyData(array: Float32Array): void {\r\n            this._nativeAnalyserNode.getFloatFrequencyData(array);\r\n        }\r\n\r\n        public getFloatTimeDomainData(array: Float32Array): void {\r\n            this._nativeAnalyserNode.getFloatTimeDomainData(array);\r\n        }\r\n    };\r\n};\r\n", "import { TNativeAudioNode, TNativeContext } from '../types';\r\n\r\nexport const isOwnedByContext = (nativeAudioNode: TNativeAudioNode, nativeContext: TNativeContext): boolean => {\r\n    return nativeAudioNode.context === nativeContext;\r\n};\r\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\r\nimport { IAnalyserNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport { TAnalyserNodeRendererFactoryFactory, TNativeAnalyserNode, TNativeOfflineAudioContext } from '../types';\r\n\r\nexport const createAnalyserNodeRendererFactory: TAnalyserNodeRendererFactoryFactory = (\r\n    createNativeAnalyserNode,\r\n    getNativeAudioNode,\r\n    renderInputsOfAudioNode\r\n) => {\r\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\r\n        const renderedNativeAnalyserNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAnalyserNode>();\r\n\r\n        const createAnalyserNode = async (proxy: IAnalyserNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\r\n            let nativeAnalyserNode = getNativeAudioNode<T, TNativeAnalyserNode>(proxy);\r\n\r\n            // If the initially used nativeAnalyserNode was not constructed on the same OfflineAudioContext it needs to be created again.\r\n            const nativeAnalyserNodeIsOwnedByContext = isOwnedByContext(nativeAnalyserNode, nativeOfflineAudioContext);\r\n\r\n            if (!nativeAnalyserNodeIsOwnedByContext) {\r\n                const options = {\r\n                    channelCount: nativeAnalyserNode.channelCount,\r\n                    channelCountMode: nativeAnalyserNode.channelCountMode,\r\n                    channelInterpretation: nativeAnalyserNode.channelInterpretation,\r\n                    fftSize: nativeAnalyserNode.fftSize,\r\n                    maxDecibels: nativeAnalyserNode.maxDecibels,\r\n                    minDecibels: nativeAnalyserNode.minDecibels,\r\n                    smoothingTimeConstant: nativeAnalyserNode.smoothingTimeConstant\r\n                };\r\n\r\n                nativeAnalyserNode = createNativeAnalyserNode(nativeOfflineAudioContext, options);\r\n            }\r\n\r\n            renderedNativeAnalyserNodes.set(nativeOfflineAudioContext, nativeAnalyserNode);\r\n\r\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAnalyserNode);\r\n\r\n            return nativeAnalyserNode;\r\n        };\r\n\r\n        return {\r\n            render(proxy: IAnalyserNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeAnalyserNode> {\r\n                const renderedNativeAnalyserNode = renderedNativeAnalyserNodes.get(nativeOfflineAudioContext);\r\n\r\n                if (renderedNativeAnalyserNode !== undefined) {\r\n                    return Promise.resolve(renderedNativeAnalyserNode);\r\n                }\r\n\r\n                return createAnalyserNode(proxy, nativeOfflineAudioContext);\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import { TNativeAudioBuffer } from '../types';\r\n\r\nexport const testAudioBufferCopyChannelMethodsOutOfBoundsSupport = (nativeAudioBuffer: TNativeAudioBuffer): boolean => {\r\n    try {\r\n        nativeAudioBuffer.copyToChannel(new Float32Array(1), 0, -1);\r\n    } catch {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n};\r\n", "import { TIndexSizeErrorFactory } from '../types';\r\n\r\nexport const createIndexSizeError: TIndexSizeErrorFactory = () => new DOMException('', 'IndexSizeError');\r\n", "import { createIndexSizeError } from '../factories/index-size-error';\r\nimport { TNativeAudioBuffer } from '../types';\r\n\r\nexport const wrapAudioBufferGetChannelDataMethod = (audioBuffer: TNativeAudioBuffer): void => {\r\n    audioBuffer.getChannelData = ((getChannelData) => {\r\n        return (channel: number) => {\r\n            try {\r\n                return getChannelData.call(audioBuffer, channel);\r\n            } catch (err) {\r\n                if (err.code === 12) {\r\n                    throw createIndexSizeError();\r\n                }\r\n\r\n                throw err;\r\n            }\r\n        };\r\n    })(audioBuffer.getChannelData);\r\n};\r\n", "import { testAudioBufferCopyChannelMethodsOutOfBoundsSupport } from '../helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support';\r\nimport { wrapAudioBufferGetChannelDataMethod } from '../helpers/wrap-audio-buffer-get-channel-data-method';\r\nimport { IAudioBuffer, IAudioBufferOptions } from '../interfaces';\r\nimport { TAudioBufferConstructorFactory, TNativeOfflineAudioContext } from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    numberOfChannels: 1\r\n} as const;\r\n\r\nexport const createAudioBufferConstructor: TAudioBufferConstructorFactory = (\r\n    audioBufferStore,\r\n    cacheTestResult,\r\n    createNotSupportedError,\r\n    nativeAudioBufferConstructor,\r\n    nativeOfflineAudioContextConstructor,\r\n    testNativeAudioBufferConstructorSupport,\r\n    wrapAudioBufferCopyChannelMethods,\r\n    wrapAudioBufferCopyChannelMethodsOutOfBounds\r\n) => {\r\n    let nativeOfflineAudioContext: null | TNativeOfflineAudioContext = null;\r\n\r\n    return class AudioBuffer implements IAudioBuffer {\r\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\r\n        public copyFromChannel!: (destination: Float32Array, channelNumber: number, bufferOffset?: number) => void;\r\n\r\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\r\n        public copyToChannel!: (source: Float32Array, channelNumber: number, bufferOffset?: number) => void;\r\n\r\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\r\n        public duration!: number;\r\n\r\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\r\n        public getChannelData!: (channel: number) => Float32Array;\r\n\r\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\r\n        public length!: number;\r\n\r\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\r\n        public numberOfChannels!: number;\r\n\r\n        // This field needs to be defined to convince TypeScript that the IAudioBuffer will be implemented.\r\n        public sampleRate!: number;\r\n\r\n        constructor(options: IAudioBufferOptions) {\r\n            if (nativeOfflineAudioContextConstructor === null) {\r\n                throw new Error('Missing the native OfflineAudioContext constructor.');\r\n            }\r\n\r\n            const { length, numberOfChannels, sampleRate } = { ...DEFAULT_OPTIONS, ...options };\r\n\r\n            if (nativeOfflineAudioContext === null) {\r\n                nativeOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\r\n            }\r\n\r\n            /*\r\n             * Bug #99: Firefox does not throw a NotSupportedError when the numberOfChannels is zero. But it only does it when using the\r\n             * factory function. But since Firefox also supports the constructor everything should be fine.\r\n             */\r\n            const audioBuffer =\r\n                nativeAudioBufferConstructor !== null &&\r\n                cacheTestResult(testNativeAudioBufferConstructorSupport, testNativeAudioBufferConstructorSupport)\r\n                    ? new nativeAudioBufferConstructor({ length, numberOfChannels, sampleRate })\r\n                    : nativeOfflineAudioContext.createBuffer(numberOfChannels, length, sampleRate);\r\n\r\n            // Bug #99: Safari does not throw an error when the numberOfChannels is zero.\r\n            if (audioBuffer.numberOfChannels === 0) {\r\n                throw createNotSupportedError();\r\n            }\r\n\r\n            // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\r\n            // Bug #100: Safari does throw a wrong error when calling getChannelData() with an out-of-bounds value.\r\n            if (typeof audioBuffer.copyFromChannel !== 'function') {\r\n                wrapAudioBufferCopyChannelMethods(audioBuffer);\r\n                wrapAudioBufferGetChannelDataMethod(audioBuffer);\r\n                // Bug #157: Firefox does not allow the bufferOffset to be out-of-bounds.\r\n            } else if (\r\n                !cacheTestResult(testAudioBufferCopyChannelMethodsOutOfBoundsSupport, () =>\r\n                    testAudioBufferCopyChannelMethodsOutOfBoundsSupport(audioBuffer)\r\n                )\r\n            ) {\r\n                wrapAudioBufferCopyChannelMethodsOutOfBounds(audioBuffer);\r\n            }\r\n\r\n            audioBufferStore.add(audioBuffer);\r\n\r\n            /*\r\n             * This does violate all good pratices but it is necessary to allow this AudioBuffer to be used with native\r\n             * (Offline)AudioContexts.\r\n             */\r\n            return audioBuffer;\r\n        }\r\n\r\n        public static [Symbol.hasInstance](instance: unknown): boolean {\r\n            return (\r\n                (instance !== null && typeof instance === 'object' && Object.getPrototypeOf(instance) === AudioBuffer.prototype) ||\r\n                audioBufferStore.has(<any>instance)\r\n            );\r\n        }\r\n    };\r\n};\r\n", "export const MOST_NEGATIVE_SINGLE_FLOAT = -3.4028234663852886e38;\r\n\r\nexport const MOST_POSITIVE_SINGLE_FLOAT = -MOST_NEGATIVE_SINGLE_FLOAT;\r\n", "import { ACTIVE_AUDIO_NODE_STORE } from '../globals';\r\nimport { TIsActiveAudioNodeFunction } from '../types';\r\n\r\nexport const isActiveAudioNode: TIsActiveAudioNodeFunction = (audioNode) => ACTIVE_AUDIO_NODE_STORE.has(audioNode);\r\n", "import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\r\nimport { isActiveAudioNode } from '../helpers/is-active-audio-node';\r\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\r\nimport { setInternalStateToPassive } from '../helpers/set-internal-state-to-passive';\r\nimport { IAudioBufferSourceNode, IAudioBufferSourceOptions, IAudioParam, IAudioScheduledSourceNodeEventMap } from '../interfaces';\r\nimport {\r\n    TAnyAudioBuffer,\r\n    TAudioBufferSourceNodeConstructorFactory,\r\n    TAudioBufferSourceNodeRenderer,\r\n    TContext,\r\n    TEventHandler,\r\n    TNativeAudioBufferSourceNode\r\n} from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    buffer: null,\r\n    channelCount: 2,\r\n    channelCountMode: 'max',\r\n    channelInterpretation: 'speakers',\r\n    // Bug #149: Safari does not yet support the detune AudioParam.\r\n    loop: false,\r\n    loopEnd: 0,\r\n    loopStart: 0,\r\n    playbackRate: 1\r\n} as const;\r\n\r\nexport const createAudioBufferSourceNodeConstructor: TAudioBufferSourceNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createAudioBufferSourceNodeRenderer,\r\n    createAudioParam,\r\n    createInvalidStateError,\r\n    createNativeAudioBufferSourceNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    wrapEventListener\r\n) => {\r\n    return class AudioBufferSourceNode<T extends TContext>\r\n        extends audioNodeConstructor<T, IAudioScheduledSourceNodeEventMap>\r\n        implements IAudioBufferSourceNode<T>\r\n    {\r\n        private _audioBufferSourceNodeRenderer: TAudioBufferSourceNodeRenderer<T>;\r\n\r\n        private _isBufferNullified: boolean;\r\n\r\n        private _isBufferSet: boolean;\r\n\r\n        private _nativeAudioBufferSourceNode: TNativeAudioBufferSourceNode;\r\n\r\n        private _onended: null | TEventHandler<this>;\r\n\r\n        private _playbackRate: IAudioParam;\r\n\r\n        constructor(context: T, options?: Partial<IAudioBufferSourceOptions>) {\r\n            const nativeContext = getNativeContext(context);\r\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\r\n            const nativeAudioBufferSourceNode = createNativeAudioBufferSourceNode(nativeContext, mergedOptions);\r\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\r\n            const audioBufferSourceNodeRenderer = <TAudioBufferSourceNodeRenderer<T>>(\r\n                (isOffline ? createAudioBufferSourceNodeRenderer() : null)\r\n            );\r\n\r\n            super(context, false, nativeAudioBufferSourceNode, audioBufferSourceNodeRenderer);\r\n\r\n            this._audioBufferSourceNodeRenderer = audioBufferSourceNodeRenderer;\r\n            this._isBufferNullified = false;\r\n            this._isBufferSet = mergedOptions.buffer !== null;\r\n            this._nativeAudioBufferSourceNode = nativeAudioBufferSourceNode;\r\n            this._onended = null;\r\n            // Bug #73: Safari does not export the correct values for maxValue and minValue.\r\n            this._playbackRate = createAudioParam(\r\n                this,\r\n                isOffline,\r\n                nativeAudioBufferSourceNode.playbackRate,\r\n                MOST_POSITIVE_SINGLE_FLOAT,\r\n                MOST_NEGATIVE_SINGLE_FLOAT\r\n            );\r\n        }\r\n\r\n        get buffer(): null | TAnyAudioBuffer {\r\n            if (this._isBufferNullified) {\r\n                return null;\r\n            }\r\n\r\n            return this._nativeAudioBufferSourceNode.buffer;\r\n        }\r\n\r\n        set buffer(value) {\r\n            this._nativeAudioBufferSourceNode.buffer = value;\r\n\r\n            // Bug #72: Only Chrome & Edge do not allow to reassign the buffer yet.\r\n            if (value !== null) {\r\n                if (this._isBufferSet) {\r\n                    throw createInvalidStateError();\r\n                }\r\n\r\n                this._isBufferSet = true;\r\n            }\r\n        }\r\n\r\n        get loop(): boolean {\r\n            return this._nativeAudioBufferSourceNode.loop;\r\n        }\r\n\r\n        set loop(value) {\r\n            this._nativeAudioBufferSourceNode.loop = value;\r\n        }\r\n\r\n        get loopEnd(): number {\r\n            return this._nativeAudioBufferSourceNode.loopEnd;\r\n        }\r\n\r\n        set loopEnd(value) {\r\n            this._nativeAudioBufferSourceNode.loopEnd = value;\r\n        }\r\n\r\n        get loopStart(): number {\r\n            return this._nativeAudioBufferSourceNode.loopStart;\r\n        }\r\n\r\n        set loopStart(value) {\r\n            this._nativeAudioBufferSourceNode.loopStart = value;\r\n        }\r\n\r\n        get onended(): null | TEventHandler<this> {\r\n            return this._onended;\r\n        }\r\n\r\n        set onended(value) {\r\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, value) : null;\r\n\r\n            this._nativeAudioBufferSourceNode.onended = wrappedListener;\r\n\r\n            const nativeOnEnded = this._nativeAudioBufferSourceNode.onended;\r\n\r\n            this._onended = nativeOnEnded !== null && nativeOnEnded === wrappedListener ? value : nativeOnEnded;\r\n        }\r\n\r\n        get playbackRate(): IAudioParam {\r\n            return this._playbackRate;\r\n        }\r\n\r\n        public start(when = 0, offset = 0, duration?: number): void {\r\n            this._nativeAudioBufferSourceNode.start(when, offset, duration);\r\n\r\n            if (this._audioBufferSourceNodeRenderer !== null) {\r\n                this._audioBufferSourceNodeRenderer.start = duration === undefined ? [when, offset] : [when, offset, duration];\r\n            }\r\n\r\n            if (this.context.state !== 'closed') {\r\n                setInternalStateToActive(this);\r\n\r\n                const resetInternalStateToPassive = () => {\r\n                    this._nativeAudioBufferSourceNode.removeEventListener('ended', resetInternalStateToPassive);\r\n\r\n                    if (isActiveAudioNode(this)) {\r\n                        setInternalStateToPassive(this);\r\n                    }\r\n                };\r\n\r\n                this._nativeAudioBufferSourceNode.addEventListener('ended', resetInternalStateToPassive);\r\n            }\r\n        }\r\n\r\n        public stop(when = 0): void {\r\n            this._nativeAudioBufferSourceNode.stop(when);\r\n\r\n            if (this._audioBufferSourceNodeRenderer !== null) {\r\n                this._audioBufferSourceNodeRenderer.stop = when;\r\n            }\r\n        }\r\n    };\r\n};\r\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\r\nimport { IAudioBufferSourceNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport { TAudioBufferSourceNodeRendererFactoryFactory, TNativeAudioBufferSourceNode, TNativeOfflineAudioContext } from '../types';\r\n\r\nexport const createAudioBufferSourceNodeRendererFactory: TAudioBufferSourceNodeRendererFactoryFactory = (\r\n    connectAudioParam,\r\n    createNativeAudioBufferSourceNode,\r\n    getNativeAudioNode,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode\r\n) => {\r\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\r\n        const renderedNativeAudioBufferSourceNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAudioBufferSourceNode>();\r\n\r\n        let start: null | [number, number] | [number, number, number] = null;\r\n        let stop: null | number = null;\r\n\r\n        const createAudioBufferSourceNode = async (\r\n            proxy: IAudioBufferSourceNode<T>,\r\n            nativeOfflineAudioContext: TNativeOfflineAudioContext\r\n        ) => {\r\n            let nativeAudioBufferSourceNode = getNativeAudioNode<T, TNativeAudioBufferSourceNode>(proxy);\r\n\r\n            /*\r\n             * If the initially used nativeAudioBufferSourceNode was not constructed on the same OfflineAudioContext it needs to be created\r\n             * again.\r\n             */\r\n            const nativeAudioBufferSourceNodeIsOwnedByContext = isOwnedByContext(nativeAudioBufferSourceNode, nativeOfflineAudioContext);\r\n\r\n            if (!nativeAudioBufferSourceNodeIsOwnedByContext) {\r\n                const options = {\r\n                    buffer: nativeAudioBufferSourceNode.buffer,\r\n                    channelCount: nativeAudioBufferSourceNode.channelCount,\r\n                    channelCountMode: nativeAudioBufferSourceNode.channelCountMode,\r\n                    channelInterpretation: nativeAudioBufferSourceNode.channelInterpretation,\r\n                    // Bug #149: Safari does not yet support the detune AudioParam.\r\n                    loop: nativeAudioBufferSourceNode.loop,\r\n                    loopEnd: nativeAudioBufferSourceNode.loopEnd,\r\n                    loopStart: nativeAudioBufferSourceNode.loopStart,\r\n                    playbackRate: nativeAudioBufferSourceNode.playbackRate.value\r\n                };\r\n\r\n                nativeAudioBufferSourceNode = createNativeAudioBufferSourceNode(nativeOfflineAudioContext, options);\r\n\r\n                if (start !== null) {\r\n                    nativeAudioBufferSourceNode.start(...start);\r\n                }\r\n\r\n                if (stop !== null) {\r\n                    nativeAudioBufferSourceNode.stop(stop);\r\n                }\r\n            }\r\n\r\n            renderedNativeAudioBufferSourceNodes.set(nativeOfflineAudioContext, nativeAudioBufferSourceNode);\r\n\r\n            if (!nativeAudioBufferSourceNodeIsOwnedByContext) {\r\n                // Bug #149: Safari does not yet support the detune AudioParam.\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.playbackRate, nativeAudioBufferSourceNode.playbackRate);\r\n            } else {\r\n                // Bug #149: Safari does not yet support the detune AudioParam.\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.playbackRate, nativeAudioBufferSourceNode.playbackRate);\r\n            }\r\n\r\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioBufferSourceNode);\r\n\r\n            return nativeAudioBufferSourceNode;\r\n        };\r\n\r\n        return {\r\n            set start(value: [number, number] | [number, number, number]) {\r\n                start = value;\r\n            },\r\n            set stop(value: number) {\r\n                stop = value;\r\n            },\r\n            render(\r\n                proxy: IAudioBufferSourceNode<T>,\r\n                nativeOfflineAudioContext: TNativeOfflineAudioContext\r\n            ): Promise<TNativeAudioBufferSourceNode> {\r\n                const renderedNativeAudioBufferSourceNode = renderedNativeAudioBufferSourceNodes.get(nativeOfflineAudioContext);\r\n\r\n                if (renderedNativeAudioBufferSourceNode !== undefined) {\r\n                    return Promise.resolve(renderedNativeAudioBufferSourceNode);\r\n                }\r\n\r\n                return createAudioBufferSourceNode(proxy, nativeOfflineAudioContext);\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import { IAudioBufferSourceNode, IAudioNode } from '../interfaces';\r\nimport { TContext } from '../types';\r\n\r\nexport const isAudioBufferSourceNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IAudioBufferSourceNode<T> => {\r\n    return 'playbackRate' in audioNode;\r\n};\r\n", "import { IAudioNode, IBiquadFilterNode } from '../interfaces';\r\nimport { TContext } from '../types';\r\n\r\nexport const isBiquadFilterNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IBiquadFilterNode<T> => {\r\n    return 'frequency' in audioNode && 'gain' in audioNode;\r\n};\r\n", "import { IAudioNode, IConstantSourceNode } from '../interfaces';\r\nimport { TContext } from '../types';\r\n\r\nexport const isConstantSourceNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IConstantSourceNode<T> => {\r\n    return 'offset' in audioNode;\r\n};\r\n", "import { IAudioNode, IGainNode } from '../interfaces';\r\nimport { TContext } from '../types';\r\n\r\nexport const isGainNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IGainNode<T> => {\r\n    return !('frequency' in audioNode) && 'gain' in audioNode;\r\n};\r\n", "import { IAudioNode, IOscillatorNode } from '../interfaces';\r\nimport { TContext } from '../types';\r\n\r\nexport const isOscillatorNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IOscillatorNode<T> => {\r\n    return 'detune' in audioNode && 'frequency' in audioNode && !('gain' in audioNode);\r\n};\r\n", "import { IAudioNode, IStereoPannerNode } from '../interfaces';\r\nimport { TContext } from '../types';\r\n\r\nexport const isStereoPannerNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IStereoPannerNode<T> => {\r\n    return 'pan' in audioNode;\r\n};\r\n", "import { AUDIO_NODE_CONNECTIONS_STORE } from '../globals';\r\nimport { IAudioNode } from '../interfaces';\r\nimport { TAudioNodeConnections, TContext, TGetAudioNodeConnectionsFunction } from '../types';\r\nimport { getValueForKey } from './get-value-for-key';\r\n\r\nexport const getAudioNodeConnections: TGetAudioNodeConnectionsFunction = <T extends TContext>(\r\n    audioNode: IAudioNode<T>\r\n): TAudioNodeConnections<T> => {\r\n    return <TAudioNodeConnections<T>>getValueForKey(AUDIO_NODE_CONNECTIONS_STORE, audioNode);\r\n};\r\n", "import { AUDIO_PARAM_CONNECTIONS_STORE } from '../globals';\r\nimport { IAudioParam } from '../interfaces';\r\nimport { TAudioParamConnections, TContext, TGetAudioParamConnectionsFunction } from '../types';\r\nimport { getValueForKey } from './get-value-for-key';\r\n\r\nexport const getAudioParamConnections: TGetAudioParamConnectionsFunction = <T extends TContext>(\r\n    audioParam: IAudioParam\r\n): TAudioParamConnections<T> => {\r\n    return <TAudioParamConnections<T>>getValueForKey(AUDIO_PARAM_CONNECTIONS_STORE, audioParam);\r\n};\r\n", "import { isAudioBufferSourceNode } from '../guards/audio-buffer-source-node';\r\nimport { isAudioWorkletNode } from '../guards/audio-worklet-node';\r\nimport { isBiquadFilterNode } from '../guards/biquad-filter-node';\r\nimport { isConstantSourceNode } from '../guards/constant-source-node';\r\nimport { isGainNode } from '../guards/gain-node';\r\nimport { isOscillatorNode } from '../guards/oscillator-node';\r\nimport { isStereoPannerNode } from '../guards/stereo-panner-node';\r\nimport { IAudioNode } from '../interfaces';\r\nimport { TContext } from '../types';\r\nimport { getAudioNodeConnections } from './get-audio-node-connections';\r\nimport { getAudioParamConnections } from './get-audio-param-connections';\r\nimport { isActiveAudioNode } from './is-active-audio-node';\r\nimport { setInternalStateToPassive } from './set-internal-state-to-passive';\r\n\r\nexport const deactivateActiveAudioNodeInputConnections = <T extends TContext>(\r\n    audioNode: IAudioNode<T>,\r\n    trace: readonly IAudioNode<T>[]\r\n) => {\r\n    const { activeInputs } = getAudioNodeConnections(audioNode);\r\n\r\n    activeInputs.forEach((connections) =>\r\n        connections.forEach(([source]) => {\r\n            if (!trace.includes(audioNode)) {\r\n                deactivateActiveAudioNodeInputConnections(source, [...trace, audioNode]);\r\n            }\r\n        })\r\n    );\r\n\r\n    const audioParams = isAudioBufferSourceNode(audioNode)\r\n        ? [\r\n              // Bug #149: Safari does not yet support the detune AudioParam.\r\n              audioNode.playbackRate\r\n          ]\r\n        : isAudioWorkletNode(audioNode)\r\n        ? Array.from(audioNode.parameters.values())\r\n        : isBiquadFilterNode(audioNode)\r\n        ? [audioNode.Q, audioNode.detune, audioNode.frequency, audioNode.gain]\r\n        : isConstantSourceNode(audioNode)\r\n        ? [audioNode.offset]\r\n        : isGainNode(audioNode)\r\n        ? [audioNode.gain]\r\n        : isOscillatorNode(audioNode)\r\n        ? [audioNode.detune, audioNode.frequency]\r\n        : isStereoPannerNode(audioNode)\r\n        ? [audioNode.pan]\r\n        : [];\r\n\r\n    for (const audioParam of audioParams) {\r\n        const audioParamConnections = getAudioParamConnections<T>(audioParam);\r\n\r\n        if (audioParamConnections !== undefined) {\r\n            audioParamConnections.activeInputs.forEach(([source]) => deactivateActiveAudioNodeInputConnections(source, trace));\r\n        }\r\n    }\r\n\r\n    if (isActiveAudioNode(audioNode)) {\r\n        setInternalStateToPassive(audioNode);\r\n    }\r\n};\r\n", "import { IAudioDestinationNode } from '../interfaces';\r\nimport { TContext } from '../types';\r\nimport { deactivateActiveAudioNodeInputConnections } from './deactivate-active-audio-node-input-connections';\r\n\r\nexport const deactivateAudioGraph = <T extends TContext>(context: T): void => {\r\n    deactivateActiveAudioNodeInputConnections(<IAudioDestinationNode<T>>context.destination, []);\r\n};\r\n", "import { IAudioContextOptions } from '../interfaces';\r\n\r\nexport const isValidLatencyHint = (latencyHint: IAudioContextOptions['latencyHint']) => {\r\n    return (\r\n        latencyHint === undefined ||\r\n        typeof latencyHint === 'number' ||\r\n        (typeof latencyHint === 'string' && (latencyHint === 'balanced' || latencyHint === 'interactive' || latencyHint === 'playback'))\r\n    );\r\n};\r\n", "import { deactivateAudioGraph } from '../helpers/deactivate-audio-graph';\r\nimport { isValidLatencyHint } from '../helpers/is-valid-latency-hint';\r\nimport {\r\n    IAudioContext,\r\n    IAudioContextOptions,\r\n    IMediaElementAudioSourceNode,\r\n    IMediaStreamAudioDestinationNode,\r\n    IMediaStreamAudioSourceNode,\r\n    IMediaStreamTrackAudioSourceNode\r\n} from '../interfaces';\r\nimport { TAudioContextConstructorFactory, TAudioContextState, TNativeAudioContext, TNativeGainNode, TNativeOscillatorNode } from '../types';\r\n\r\nexport const createAudioContextConstructor: TAudioContextConstructorFactory = (\r\n    baseAudioContextConstructor,\r\n    createInvalidStateError,\r\n    createNotSupportedError,\r\n    createUnknownError,\r\n    mediaElementAudioSourceNodeConstructor,\r\n    mediaStreamAudioDestinationNodeConstructor,\r\n    mediaStreamAudioSourceNodeConstructor,\r\n    mediaStreamTrackAudioSourceNodeConstructor,\r\n    nativeAudioContextConstructor\r\n) => {\r\n    return class AudioContext extends baseAudioContextConstructor<IAudioContext> implements IAudioContext {\r\n        private _baseLatency: number;\r\n\r\n        private _nativeAudioContext: TNativeAudioContext;\r\n\r\n        private _nativeGainNode: null | TNativeGainNode;\r\n\r\n        private _nativeOscillatorNode: null | TNativeOscillatorNode;\r\n\r\n        private _state: null | 'suspended';\r\n\r\n        constructor(options: IAudioContextOptions = {}) {\r\n            if (nativeAudioContextConstructor === null) {\r\n                throw new Error('Missing the native AudioContext constructor.');\r\n            }\r\n\r\n            let nativeAudioContext: TNativeAudioContext;\r\n\r\n            try {\r\n                nativeAudioContext = new nativeAudioContextConstructor(options);\r\n            } catch (err) {\r\n                // Bug #192 Safari does throw a SyntaxError if the sampleRate is not supported.\r\n                if (err.code === 12 && err.message === 'sampleRate is not in range') {\r\n                    throw createNotSupportedError();\r\n                }\r\n\r\n                throw err;\r\n            }\r\n\r\n            // Bug #131 Safari returns null when there are four other AudioContexts running already.\r\n            if (nativeAudioContext === null) {\r\n                throw createUnknownError();\r\n            }\r\n\r\n            // Bug #51 Only Chrome and Edge throw an error if the given latencyHint is invalid.\r\n            if (!isValidLatencyHint(options.latencyHint)) {\r\n                throw new TypeError(\r\n                    `The provided value '${options.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`\r\n                );\r\n            }\r\n\r\n            // Bug #150 Safari does not support setting the sampleRate.\r\n            if (options.sampleRate !== undefined && nativeAudioContext.sampleRate !== options.sampleRate) {\r\n                throw createNotSupportedError();\r\n            }\r\n\r\n            super(nativeAudioContext, 2);\r\n\r\n            const { latencyHint } = options;\r\n            const { sampleRate } = nativeAudioContext;\r\n\r\n            // @todo The values for 'balanced', 'interactive' and 'playback' are just copied from Chrome's implementation.\r\n            this._baseLatency =\r\n                typeof nativeAudioContext.baseLatency === 'number'\r\n                    ? nativeAudioContext.baseLatency\r\n                    : latencyHint === 'balanced'\r\n                    ? 512 / sampleRate\r\n                    : latencyHint === 'interactive' || latencyHint === undefined\r\n                    ? 256 / sampleRate\r\n                    : latencyHint === 'playback'\r\n                    ? 1024 / sampleRate\r\n                    : /*\r\n                       * @todo The min (256) and max (16384) values are taken from the allowed bufferSize values of a\r\n                       * ScriptProcessorNode.\r\n                       */\r\n                      (Math.max(2, Math.min(128, Math.round((latencyHint * sampleRate) / 128))) * 128) / sampleRate;\r\n            this._nativeAudioContext = nativeAudioContext;\r\n\r\n            // Bug #188: Safari will set the context's state to 'interrupted' in case the user switches tabs.\r\n            if (nativeAudioContextConstructor.name === 'webkitAudioContext') {\r\n                this._nativeGainNode = nativeAudioContext.createGain();\r\n                this._nativeOscillatorNode = nativeAudioContext.createOscillator();\r\n\r\n                this._nativeGainNode.gain.value = 1e-37;\r\n\r\n                this._nativeOscillatorNode.connect(this._nativeGainNode).connect(nativeAudioContext.destination);\r\n                this._nativeOscillatorNode.start();\r\n            } else {\r\n                this._nativeGainNode = null;\r\n                this._nativeOscillatorNode = null;\r\n            }\r\n\r\n            this._state = null;\r\n\r\n            /*\r\n             * Bug #34: Chrome and Edge pretend to be running right away, but fire an onstatechange event when the state actually changes\r\n             * to 'running'.\r\n             */\r\n            if (nativeAudioContext.state === 'running') {\r\n                this._state = 'suspended';\r\n\r\n                const revokeState = () => {\r\n                    if (this._state === 'suspended') {\r\n                        this._state = null;\r\n                    }\r\n\r\n                    nativeAudioContext.removeEventListener('statechange', revokeState);\r\n                };\r\n\r\n                nativeAudioContext.addEventListener('statechange', revokeState);\r\n            }\r\n        }\r\n\r\n        get baseLatency(): number {\r\n            return this._baseLatency;\r\n        }\r\n\r\n        get state(): TAudioContextState {\r\n            return this._state !== null ? this._state : this._nativeAudioContext.state;\r\n        }\r\n\r\n        public close(): Promise<void> {\r\n            // Bug #35: Firefox does not throw an error if the AudioContext was closed before.\r\n            if (this.state === 'closed') {\r\n                return this._nativeAudioContext.close().then(() => {\r\n                    throw createInvalidStateError();\r\n                });\r\n            }\r\n\r\n            // Bug #34: If the state was set to suspended before it should be revoked now.\r\n            if (this._state === 'suspended') {\r\n                this._state = null;\r\n            }\r\n\r\n            return this._nativeAudioContext.close().then(() => {\r\n                if (this._nativeGainNode !== null && this._nativeOscillatorNode !== null) {\r\n                    this._nativeOscillatorNode.stop();\r\n\r\n                    this._nativeGainNode.disconnect();\r\n                    this._nativeOscillatorNode.disconnect();\r\n                }\r\n\r\n                deactivateAudioGraph(this);\r\n            });\r\n        }\r\n\r\n        public createMediaElementSource(mediaElement: HTMLMediaElement): IMediaElementAudioSourceNode<this> {\r\n            return new mediaElementAudioSourceNodeConstructor(this, { mediaElement });\r\n        }\r\n\r\n        public createMediaStreamDestination(): IMediaStreamAudioDestinationNode<this> {\r\n            return new mediaStreamAudioDestinationNodeConstructor(this);\r\n        }\r\n\r\n        public createMediaStreamSource(mediaStream: MediaStream): IMediaStreamAudioSourceNode<this> {\r\n            return new mediaStreamAudioSourceNodeConstructor(this, { mediaStream });\r\n        }\r\n\r\n        public createMediaStreamTrackSource(mediaStreamTrack: MediaStreamTrack): IMediaStreamTrackAudioSourceNode<this> {\r\n            return new mediaStreamTrackAudioSourceNodeConstructor(this, { mediaStreamTrack });\r\n        }\r\n\r\n        public resume(): Promise<void> {\r\n            if (this._state === 'suspended') {\r\n                return new Promise((resolve, reject) => {\r\n                    const resolvePromise = () => {\r\n                        this._nativeAudioContext.removeEventListener('statechange', resolvePromise);\r\n\r\n                        if (this._nativeAudioContext.state === 'running') {\r\n                            resolve();\r\n                        } else {\r\n                            this.resume().then(resolve, reject);\r\n                        }\r\n                    };\r\n\r\n                    this._nativeAudioContext.addEventListener('statechange', resolvePromise);\r\n                });\r\n            }\r\n\r\n            return this._nativeAudioContext.resume().catch((err) => {\r\n                // Bug #55: Chrome and Edge do throw an InvalidAccessError instead of an InvalidStateError.\r\n                // Bug #56: Safari invokes the catch handler but without an error.\r\n                if (err === undefined || err.code === 15) {\r\n                    throw createInvalidStateError();\r\n                }\r\n\r\n                throw err;\r\n            });\r\n        }\r\n\r\n        public suspend(): Promise<void> {\r\n            return this._nativeAudioContext.suspend().catch((err) => {\r\n                // Bug #56: Safari invokes the catch handler but without an error.\r\n                if (err === undefined) {\r\n                    throw createInvalidStateError();\r\n                }\r\n\r\n                throw err;\r\n            });\r\n        }\r\n    };\r\n};\r\n", "import { IAudioDestinationNode } from '../interfaces';\r\nimport {\r\n    TAudioDestinationNodeConstructorFactory,\r\n    TAudioNodeRenderer,\r\n    TChannelCountMode,\r\n    TContext,\r\n    TNativeAudioDestinationNode\r\n} from '../types';\r\n\r\nexport const createAudioDestinationNodeConstructor: TAudioDestinationNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createAudioDestinationNodeRenderer,\r\n    createIndexSizeError,\r\n    createInvalidStateError,\r\n    createNativeAudioDestinationNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    renderInputsOfAudioNode\r\n) => {\r\n    return class AudioDestinationNode<T extends TContext> extends audioNodeConstructor<T> implements IAudioDestinationNode<T> {\r\n        private _isNodeOfNativeOfflineAudioContext: boolean;\r\n\r\n        private _nativeAudioDestinationNode: TNativeAudioDestinationNode;\r\n\r\n        constructor(context: T, channelCount: number) {\r\n            const nativeContext = getNativeContext(context);\r\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\r\n            const nativeAudioDestinationNode = createNativeAudioDestinationNode(nativeContext, channelCount, isOffline);\r\n            const audioDestinationNodeRenderer = <TAudioNodeRenderer<T, this>>(\r\n                (isOffline ? createAudioDestinationNodeRenderer(renderInputsOfAudioNode) : null)\r\n            );\r\n\r\n            super(context, false, nativeAudioDestinationNode, audioDestinationNodeRenderer);\r\n\r\n            this._isNodeOfNativeOfflineAudioContext = isOffline;\r\n            this._nativeAudioDestinationNode = nativeAudioDestinationNode;\r\n        }\r\n\r\n        get channelCount(): number {\r\n            return this._nativeAudioDestinationNode.channelCount;\r\n        }\r\n\r\n        set channelCount(value) {\r\n            // Bug #52: Chrome, Edge & Safari do not throw an exception at all.\r\n            // Bug #54: Firefox does throw an IndexSizeError.\r\n            if (this._isNodeOfNativeOfflineAudioContext) {\r\n                throw createInvalidStateError();\r\n            }\r\n\r\n            // Bug #47: The AudioDestinationNode in Safari does not initialize the maxChannelCount property correctly.\r\n            if (value > this._nativeAudioDestinationNode.maxChannelCount) {\r\n                throw createIndexSizeError();\r\n            }\r\n\r\n            this._nativeAudioDestinationNode.channelCount = value;\r\n        }\r\n\r\n        get channelCountMode(): TChannelCountMode {\r\n            return this._nativeAudioDestinationNode.channelCountMode;\r\n        }\r\n\r\n        set channelCountMode(value) {\r\n            // Bug #53: No browser does throw an exception yet.\r\n            if (this._isNodeOfNativeOfflineAudioContext) {\r\n                throw createInvalidStateError();\r\n            }\r\n\r\n            this._nativeAudioDestinationNode.channelCountMode = value;\r\n        }\r\n\r\n        get maxChannelCount(): number {\r\n            return this._nativeAudioDestinationNode.maxChannelCount;\r\n        }\r\n    };\r\n};\r\n", "import { IAudioDestinationNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport {\r\n    TAudioDestinationNodeRendererFactory,\r\n    TNativeAudioDestinationNode,\r\n    TNativeOfflineAudioContext,\r\n    TRenderInputsOfAudioNodeFunction\r\n} from '../types';\r\n\r\nexport const createAudioDestinationNodeRenderer: TAudioDestinationNodeRendererFactory = <\r\n    T extends IMinimalOfflineAudioContext | IOfflineAudioContext\r\n>(\r\n    renderInputsOfAudioNode: TRenderInputsOfAudioNodeFunction\r\n) => {\r\n    const renderedNativeAudioDestinationNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAudioDestinationNode>();\r\n\r\n    const createAudioDestinationNode = async (proxy: IAudioDestinationNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\r\n        const nativeAudioDestinationNode = nativeOfflineAudioContext.destination;\r\n\r\n        renderedNativeAudioDestinationNodes.set(nativeOfflineAudioContext, nativeAudioDestinationNode);\r\n\r\n        await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioDestinationNode);\r\n\r\n        return nativeAudioDestinationNode;\r\n    };\r\n\r\n    return {\r\n        render(\r\n            proxy: IAudioDestinationNode<T>,\r\n            nativeOfflineAudioContext: TNativeOfflineAudioContext\r\n        ): Promise<TNativeAudioDestinationNode> {\r\n            const renderedNativeAudioDestinationNode = renderedNativeAudioDestinationNodes.get(nativeOfflineAudioContext);\r\n\r\n            if (renderedNativeAudioDestinationNode !== undefined) {\r\n                return Promise.resolve(renderedNativeAudioDestinationNode);\r\n            }\r\n\r\n            return createAudioDestinationNode(proxy, nativeOfflineAudioContext);\r\n        }\r\n    };\r\n};\r\n", "import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\r\nimport { IAudioParam } from '../interfaces';\r\nimport { TAudioListenerFactoryFactory } from '../types';\r\n\r\nexport const createAudioListenerFactory: TAudioListenerFactoryFactory = (\r\n    createAudioParam,\r\n    createNativeChannelMergerNode,\r\n    createNativeConstantSourceNode,\r\n    createNativeScriptProcessorNode,\r\n    createNotSupportedError,\r\n    getFirstSample,\r\n    isNativeOfflineAudioContext,\r\n    overwriteAccessors\r\n) => {\r\n    return (context, nativeContext) => {\r\n        const nativeListener = nativeContext.listener;\r\n\r\n        // Bug #117: Only Chrome & Edge support the new interface already.\r\n        const createFakeAudioParams = () => {\r\n            const buffer = new Float32Array(1);\r\n            const channelMergerNode = createNativeChannelMergerNode(nativeContext, {\r\n                channelCount: 1,\r\n                channelCountMode: 'explicit',\r\n                channelInterpretation: 'speakers',\r\n                numberOfInputs: 9\r\n            });\r\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\r\n\r\n            let isScriptProcessorNodeCreated = false;\r\n            let lastOrientation: [number, number, number, number, number, number] = [0, 0, -1, 0, 1, 0];\r\n            let lastPosition: [number, number, number] = [0, 0, 0];\r\n\r\n            const createScriptProcessorNode = () => {\r\n                if (isScriptProcessorNodeCreated) {\r\n                    return;\r\n                }\r\n\r\n                isScriptProcessorNodeCreated = true;\r\n\r\n                const scriptProcessorNode = createNativeScriptProcessorNode(nativeContext, 256, 9, 0);\r\n\r\n                // tslint:disable-next-line:deprecation\r\n                scriptProcessorNode.onaudioprocess = ({ inputBuffer }) => {\r\n                    const orientation: [number, number, number, number, number, number] = [\r\n                        getFirstSample(inputBuffer, buffer, 0),\r\n                        getFirstSample(inputBuffer, buffer, 1),\r\n                        getFirstSample(inputBuffer, buffer, 2),\r\n                        getFirstSample(inputBuffer, buffer, 3),\r\n                        getFirstSample(inputBuffer, buffer, 4),\r\n                        getFirstSample(inputBuffer, buffer, 5)\r\n                    ];\r\n\r\n                    if (orientation.some((value, index) => value !== lastOrientation[index])) {\r\n                        nativeListener.setOrientation(...orientation); // tslint:disable-line:deprecation\r\n\r\n                        lastOrientation = orientation;\r\n                    }\r\n\r\n                    const positon: [number, number, number] = [\r\n                        getFirstSample(inputBuffer, buffer, 6),\r\n                        getFirstSample(inputBuffer, buffer, 7),\r\n                        getFirstSample(inputBuffer, buffer, 8)\r\n                    ];\r\n\r\n                    if (positon.some((value, index) => value !== lastPosition[index])) {\r\n                        nativeListener.setPosition(...positon); // tslint:disable-line:deprecation\r\n\r\n                        lastPosition = positon;\r\n                    }\r\n                };\r\n\r\n                channelMergerNode.connect(scriptProcessorNode);\r\n            };\r\n            const createSetOrientation = (index: number) => (value: number) => {\r\n                if (value !== lastOrientation[index]) {\r\n                    lastOrientation[index] = value;\r\n\r\n                    nativeListener.setOrientation(...lastOrientation); // tslint:disable-line:deprecation\r\n                }\r\n            };\r\n            const createSetPosition = (index: number) => (value: number) => {\r\n                if (value !== lastPosition[index]) {\r\n                    lastPosition[index] = value;\r\n\r\n                    nativeListener.setPosition(...lastPosition); // tslint:disable-line:deprecation\r\n                }\r\n            };\r\n            const createFakeAudioParam = (input: number, initialValue: number, setValue: (value: number) => void) => {\r\n                const constantSourceNode = createNativeConstantSourceNode(nativeContext, {\r\n                    channelCount: 1,\r\n                    channelCountMode: 'explicit',\r\n                    channelInterpretation: 'discrete',\r\n                    offset: initialValue\r\n                });\r\n\r\n                constantSourceNode.connect(channelMergerNode, 0, input);\r\n\r\n                // @todo This should be stopped when the context is closed.\r\n                constantSourceNode.start();\r\n\r\n                Object.defineProperty(constantSourceNode.offset, 'defaultValue', {\r\n                    get(): number {\r\n                        return initialValue;\r\n                    }\r\n                });\r\n\r\n                /*\r\n                 * Bug #62 & #74: Safari does not support ConstantSourceNodes and does not export the correct values for maxValue and\r\n                 * minValue for GainNodes.\r\n                 */\r\n                const audioParam = createAudioParam(\r\n                    <any>{ context },\r\n                    isOffline,\r\n                    constantSourceNode.offset,\r\n                    MOST_POSITIVE_SINGLE_FLOAT,\r\n                    MOST_NEGATIVE_SINGLE_FLOAT\r\n                );\r\n\r\n                overwriteAccessors(\r\n                    audioParam,\r\n                    'value',\r\n                    (get) => () => get.call(audioParam),\r\n                    (set) => (value) => {\r\n                        try {\r\n                            set.call(audioParam, value);\r\n                        } catch (err) {\r\n                            if (err.code !== 9) {\r\n                                throw err;\r\n                            }\r\n                        }\r\n\r\n                        createScriptProcessorNode();\r\n\r\n                        if (isOffline) {\r\n                            // Bug #117: Using setOrientation() and setPosition() doesn't work with an OfflineAudioContext.\r\n                            setValue(value);\r\n                        }\r\n                    }\r\n                );\r\n\r\n                audioParam.cancelAndHoldAtTime = ((cancelAndHoldAtTime) => {\r\n                    if (isOffline) {\r\n                        return () => {\r\n                            throw createNotSupportedError();\r\n                        };\r\n                    }\r\n\r\n                    return (...args: Parameters<IAudioParam['cancelAndHoldAtTime']>) => {\r\n                        const value = cancelAndHoldAtTime.apply(audioParam, args);\r\n\r\n                        createScriptProcessorNode();\r\n\r\n                        return value;\r\n                    };\r\n                })(audioParam.cancelAndHoldAtTime);\r\n                audioParam.cancelScheduledValues = ((cancelScheduledValues) => {\r\n                    if (isOffline) {\r\n                        return () => {\r\n                            throw createNotSupportedError();\r\n                        };\r\n                    }\r\n\r\n                    return (...args: Parameters<IAudioParam['cancelScheduledValues']>) => {\r\n                        const value = cancelScheduledValues.apply(audioParam, args);\r\n\r\n                        createScriptProcessorNode();\r\n\r\n                        return value;\r\n                    };\r\n                })(audioParam.cancelScheduledValues);\r\n                audioParam.exponentialRampToValueAtTime = ((exponentialRampToValueAtTime) => {\r\n                    if (isOffline) {\r\n                        return () => {\r\n                            throw createNotSupportedError();\r\n                        };\r\n                    }\r\n\r\n                    return (...args: Parameters<IAudioParam['exponentialRampToValueAtTime']>) => {\r\n                        const value = exponentialRampToValueAtTime.apply(audioParam, args);\r\n\r\n                        createScriptProcessorNode();\r\n\r\n                        return value;\r\n                    };\r\n                })(audioParam.exponentialRampToValueAtTime);\r\n                audioParam.linearRampToValueAtTime = ((linearRampToValueAtTime) => {\r\n                    if (isOffline) {\r\n                        return () => {\r\n                            throw createNotSupportedError();\r\n                        };\r\n                    }\r\n\r\n                    return (...args: Parameters<IAudioParam['linearRampToValueAtTime']>) => {\r\n                        const value = linearRampToValueAtTime.apply(audioParam, args);\r\n\r\n                        createScriptProcessorNode();\r\n\r\n                        return value;\r\n                    };\r\n                })(audioParam.linearRampToValueAtTime);\r\n                audioParam.setTargetAtTime = ((setTargetAtTime) => {\r\n                    if (isOffline) {\r\n                        return () => {\r\n                            throw createNotSupportedError();\r\n                        };\r\n                    }\r\n\r\n                    return (...args: Parameters<IAudioParam['setTargetAtTime']>) => {\r\n                        const value = setTargetAtTime.apply(audioParam, args);\r\n\r\n                        createScriptProcessorNode();\r\n\r\n                        return value;\r\n                    };\r\n                })(audioParam.setTargetAtTime);\r\n                audioParam.setValueAtTime = ((setValueAtTime) => {\r\n                    if (isOffline) {\r\n                        return () => {\r\n                            throw createNotSupportedError();\r\n                        };\r\n                    }\r\n\r\n                    return (...args: Parameters<IAudioParam['setValueAtTime']>) => {\r\n                        const value = setValueAtTime.apply(audioParam, args);\r\n\r\n                        createScriptProcessorNode();\r\n\r\n                        return value;\r\n                    };\r\n                })(audioParam.setValueAtTime);\r\n                audioParam.setValueCurveAtTime = ((setValueCurveAtTime) => {\r\n                    if (isOffline) {\r\n                        return () => {\r\n                            throw createNotSupportedError();\r\n                        };\r\n                    }\r\n\r\n                    return (...args: Parameters<IAudioParam['setValueCurveAtTime']>) => {\r\n                        const value = setValueCurveAtTime.apply(audioParam, args);\r\n\r\n                        createScriptProcessorNode();\r\n\r\n                        return value;\r\n                    };\r\n                })(audioParam.setValueCurveAtTime);\r\n\r\n                return audioParam;\r\n            };\r\n\r\n            return {\r\n                forwardX: createFakeAudioParam(0, 0, createSetOrientation(0)),\r\n                forwardY: createFakeAudioParam(1, 0, createSetOrientation(1)),\r\n                forwardZ: createFakeAudioParam(2, -1, createSetOrientation(2)),\r\n                positionX: createFakeAudioParam(6, 0, createSetPosition(0)),\r\n                positionY: createFakeAudioParam(7, 0, createSetPosition(1)),\r\n                positionZ: createFakeAudioParam(8, 0, createSetPosition(2)),\r\n                upX: createFakeAudioParam(3, 0, createSetOrientation(3)),\r\n                upY: createFakeAudioParam(4, 1, createSetOrientation(4)),\r\n                upZ: createFakeAudioParam(5, 0, createSetOrientation(5))\r\n            };\r\n        };\r\n\r\n        const { forwardX, forwardY, forwardZ, positionX, positionY, positionZ, upX, upY, upZ } =\r\n            nativeListener.forwardX === undefined ? createFakeAudioParams() : nativeListener;\r\n\r\n        return {\r\n            get forwardX(): IAudioParam {\r\n                return forwardX;\r\n            },\r\n            get forwardY(): IAudioParam {\r\n                return forwardY;\r\n            },\r\n            get forwardZ(): IAudioParam {\r\n                return forwardZ;\r\n            },\r\n            get positionX(): IAudioParam {\r\n                return positionX;\r\n            },\r\n            get positionY(): IAudioParam {\r\n                return positionY;\r\n            },\r\n            get positionZ(): IAudioParam {\r\n                return positionZ;\r\n            },\r\n            get upX(): IAudioParam {\r\n                return upX;\r\n            },\r\n            get upY(): IAudioParam {\r\n                return upY;\r\n            },\r\n            get upZ(): IAudioParam {\r\n                return upZ;\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import { IAudioNode, IAudioParam } from '../interfaces';\r\nimport { TContext } from '../types';\r\n\r\nexport const isAudioNode = <T extends TContext>(\r\n    audioNodeOrAudioParam: IAudioNode<T> | IAudioParam\r\n): audioNodeOrAudioParam is IAudioNode<T> => {\r\n    return 'context' in audioNodeOrAudioParam;\r\n};\r\n", "import { TAudioNodeOutputConnection, TContext, TOutputConnection } from '../types';\r\nimport { isAudioNode } from './audio-node';\r\n\r\nexport const isAudioNodeOutputConnection = <T extends TContext>(\r\n    outputConnection: TOutputConnection<T>\r\n): outputConnection is TAudioNodeOutputConnection<T> => {\r\n    return isAudioNode(outputConnection[0]);\r\n};\r\n", "import { TInsertElementInSetFunction } from '../types';\r\n\r\nexport const insertElementInSet: TInsertElementInSetFunction = (set, element, predicate, ignoreDuplicates) => {\r\n    for (const lmnt of set) {\r\n        if (predicate(lmnt)) {\r\n            if (ignoreDuplicates) {\r\n                return false;\r\n            }\r\n\r\n            throw Error('The set contains at least one similar element.');\r\n        }\r\n    }\r\n\r\n    set.add(element);\r\n\r\n    return true;\r\n};\r\n", "import { IAudioNode } from '../interfaces';\r\nimport { TActiveInputConnection, TContext, TPassiveAudioParamInputConnection } from '../types';\r\nimport { insertElementInSet } from './insert-element-in-set';\r\n\r\nexport const addActiveInputConnectionToAudioParam = <T extends TContext>(\r\n    activeInputs: Set<TActiveInputConnection<T>>,\r\n    source: IAudioNode<T>,\r\n    [output, eventListener]: TPassiveAudioParamInputConnection,\r\n    ignoreDuplicates: boolean\r\n) => {\r\n    insertElementInSet(\r\n        activeInputs,\r\n        [source, output, eventListener],\r\n        (activeInputConnection) => activeInputConnection[0] === source && activeInputConnection[1] === output,\r\n        ignoreDuplicates\r\n    );\r\n};\r\n", "import { IAudioNode } from '../interfaces';\r\nimport { TActiveInputConnection, TContext, TPassiveAudioParamInputConnection } from '../types';\r\nimport { insertElementInSet } from './insert-element-in-set';\r\n\r\nexport const addPassiveInputConnectionToAudioParam = <T extends TContext>(\r\n    passiveInputs: WeakMap<IAudioNode<T>, Set<TPassiveAudioParamInputConnection>>,\r\n    [source, output, eventListener]: TActiveInputConnection<T>,\r\n    ignoreDuplicates: boolean\r\n) => {\r\n    const passiveInputConnections = passiveInputs.get(source);\r\n\r\n    if (passiveInputConnections === undefined) {\r\n        passiveInputs.set(source, new Set([[output, eventListener]]));\r\n    } else {\r\n        insertElementInSet(\r\n            passiveInputConnections,\r\n            [output, eventListener],\r\n            (passiveInputConnection) => passiveInputConnection[0] === output,\r\n            ignoreDuplicates\r\n        );\r\n    }\r\n};\r\n", "import { INativeAudioNodeFaker } from '../interfaces';\r\nimport { TNativeAudioNode } from '../types';\r\n\r\nexport const isNativeAudioNodeFaker = (\r\n    nativeAudioNodeOrNativeAudioNodeFaker: TNativeAudioNode | INativeAudioNodeFaker\r\n): nativeAudioNodeOrNativeAudioNodeFaker is INativeAudioNodeFaker => {\r\n    return 'inputs' in nativeAudioNodeOrNativeAudioNodeFaker;\r\n};\r\n", "import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\r\nimport { INativeAudioNodeFaker } from '../interfaces';\r\nimport { TConnectNativeAudioNodeToNativeAudioNodeFunction, TNativeAudioNode } from '../types';\r\n\r\nexport const connectNativeAudioNodeToNativeAudioNode: TConnectNativeAudioNodeToNativeAudioNodeFunction = (\r\n    nativeSourceAudioNode: INativeAudioNodeFaker | TNativeAudioNode,\r\n    nativeDestinationAudioNode: INativeAudioNodeFaker | TNativeAudioNode,\r\n    output: number,\r\n    input: number\r\n): [TNativeAudioNode, number, number] => {\r\n    if (isNativeAudioNodeFaker(nativeDestinationAudioNode)) {\r\n        const fakeNativeDestinationAudioNode = nativeDestinationAudioNode.inputs[input];\r\n\r\n        nativeSourceAudioNode.connect(fakeNativeDestinationAudioNode, output, 0);\r\n\r\n        return [fakeNativeDestinationAudioNode, output, 0];\r\n    }\r\n\r\n    nativeSourceAudioNode.connect(nativeDestinationAudioNode, output, input);\r\n\r\n    return [nativeDestinationAudioNode, output, input];\r\n};\r\n", "import { IAudioNode } from '../interfaces';\r\nimport { TActiveInputConnection, TContext } from '../types';\r\n\r\nexport const deleteActiveInputConnection = <T extends TContext>(\r\n    activeInputConnections: Set<TActiveInputConnection<T>>,\r\n    source: IAudioNode<T>,\r\n    output: number\r\n): null | TActiveInputConnection<T> => {\r\n    for (const activeInputConnection of activeInputConnections) {\r\n        if (activeInputConnection[0] === source && activeInputConnection[1] === output) {\r\n            activeInputConnections.delete(activeInputConnection);\r\n\r\n            return activeInputConnection;\r\n        }\r\n    }\r\n\r\n    return null;\r\n};\r\n", "import { IAudioNode } from '../interfaces';\r\nimport { TActiveInputConnection, TContext } from '../types';\r\nimport { pickElementFromSet } from './pick-element-from-set';\r\n\r\nexport const deleteActiveInputConnectionToAudioParam = <T extends TContext>(\r\n    activeInputs: Set<TActiveInputConnection<T>>,\r\n    source: IAudioNode<T>,\r\n    output: number\r\n) => {\r\n    return pickElementFromSet(\r\n        activeInputs,\r\n        (activeInputConnection) => activeInputConnection[0] === source && activeInputConnection[1] === output\r\n    );\r\n};\r\n", "import { IAudioNode } from '../interfaces';\r\nimport { TContext, TInternalStateEventListener } from '../types';\r\nimport { getEventListenersOfAudioNode } from './get-event-listeners-of-audio-node';\r\n\r\nexport const deleteEventListenerOfAudioNode = <T extends TContext>(\r\n    audioNode: IAudioNode<T>,\r\n    eventListener: TInternalStateEventListener\r\n) => {\r\n    const eventListeners = getEventListenersOfAudioNode(audioNode);\r\n\r\n    if (!eventListeners.delete(eventListener)) {\r\n        throw new Error('Missing the expected event listener.');\r\n    }\r\n};\r\n", "import { IAudioNode } from '../interfaces';\r\nimport { TContext, TPassiveAudioParamInputConnection } from '../types';\r\nimport { getValueForKey } from './get-value-for-key';\r\nimport { pickElementFromSet } from './pick-element-from-set';\r\n\r\nexport const deletePassiveInputConnectionToAudioParam = <T extends TContext>(\r\n    passiveInputs: WeakMap<IAudioNode<T>, Set<TPassiveAudioParamInputConnection>>,\r\n    source: IAudioNode<T>,\r\n    output: number\r\n) => {\r\n    const passiveInputConnections = getValueForKey(passiveInputs, source);\r\n    const matchingConnection = pickElementFromSet(\r\n        passiveInputConnections,\r\n        (passiveInputConnection) => passiveInputConnection[0] === output\r\n    );\r\n\r\n    if (passiveInputConnections.size === 0) {\r\n        passiveInputs.delete(source);\r\n    }\r\n\r\n    return matchingConnection;\r\n};\r\n", "import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\r\nimport { TDisconnectNativeAudioNodeFromNativeAudioNodeFunction } from '../types';\r\n\r\nexport const disconnectNativeAudioNodeFromNativeAudioNode: TDisconnectNativeAudioNodeFromNativeAudioNodeFunction = (\r\n    nativeSourceAudioNode,\r\n    nativeDestinationAudioNode,\r\n    output,\r\n    input\r\n) => {\r\n    if (isNativeAudioNodeFaker(nativeDestinationAudioNode)) {\r\n        nativeSourceAudioNode.disconnect(nativeDestinationAudioNode.inputs[input], output, 0);\r\n    } else {\r\n        nativeSourceAudioNode.disconnect(nativeDestinationAudioNode, output, input);\r\n    }\r\n};\r\n", "import { AUDIO_NODE_STORE } from '../globals';\r\nimport { IAudioNode, INativeAudioNodeFaker } from '../interfaces';\r\nimport { TContext, TGetNativeAudioNodeFunction, TNativeAudioNode } from '../types';\r\nimport { getValueForKey } from './get-value-for-key';\r\n\r\nexport const getNativeAudioNode: TGetNativeAudioNodeFunction = <T extends TContext, U extends TNativeAudioNode | INativeAudioNodeFaker>(\r\n    audioNode: IAudioNode<T>\r\n): U => {\r\n    return <U>getValueForKey(AUDIO_NODE_STORE, audioNode);\r\n};\r\n", "import { AUDIO_PARAM_STORE } from '../globals';\r\nimport { IAudioParam } from '../interfaces';\r\nimport { TNativeAudioParam } from '../types';\r\nimport { getValueForKey } from './get-value-for-key';\r\n\r\nexport const getNativeAudioParam = (audioParam: IAudioParam): TNativeAudioParam => {\r\n    return getValueForKey(AUDIO_PARAM_STORE, audioParam);\r\n};\r\n", "import { CYCLE_COUNTERS } from '../globals';\r\nimport { TIsPartOfACycleFunction } from '../types';\r\n\r\nexport const isPartOfACycle: TIsPartOfACycleFunction = (audioNode) => {\r\n    return CYCLE_COUNTERS.has(audioNode);\r\n};\r\n", "import { ACTIVE_AUDIO_NODE_STORE } from '../globals';\r\nimport { TIsPassiveAudioNodeFunction } from '../types';\r\n\r\nexport const isPassiveAudioNode: TIsPassiveAudioNodeFunction = (audioNode) => {\r\n    return !ACTIVE_AUDIO_NODE_STORE.has(audioNode);\r\n};\r\n", "import { TNativeAudioContext, TNativeAudioWorkletNodeConstructor } from '../types';\r\n\r\nexport const testAudioNodeDisconnectMethodSupport = (\r\n    nativeAudioContext: TNativeAudioContext,\r\n    nativeAudioWorkletNodeConstructor: null | TNativeAudioWorkletNodeConstructor\r\n): Promise<boolean> => {\r\n    return new Promise((resolve) => {\r\n        /*\r\n         * This bug existed in Safari up until v14.0.2. Since AudioWorklets were not supported in Safari until v14.1 the presence of the\r\n         * constructor for an AudioWorkletNode can be used here to skip the test.\r\n         */\r\n        if (nativeAudioWorkletNodeConstructor !== null) {\r\n            resolve(true);\r\n        } else {\r\n            const analyzer = nativeAudioContext.createScriptProcessor(256, 1, 1); // tslint:disable-line deprecation\r\n            const dummy = nativeAudioContext.createGain();\r\n            // Bug #95: Safari does not play one sample buffers.\r\n            const ones = nativeAudioContext.createBuffer(1, 2, 44100);\r\n            const channelData = ones.getChannelData(0);\r\n\r\n            channelData[0] = 1;\r\n            channelData[1] = 1;\r\n\r\n            const source = nativeAudioContext.createBufferSource();\r\n\r\n            source.buffer = ones;\r\n            source.loop = true;\r\n\r\n            source.connect(analyzer).connect(nativeAudioContext.destination);\r\n            source.connect(dummy);\r\n            source.disconnect(dummy);\r\n\r\n            // tslint:disable-next-line:deprecation\r\n            analyzer.onaudioprocess = (event) => {\r\n                const chnnlDt = event.inputBuffer.getChannelData(0); // tslint:disable-line deprecation\r\n\r\n                if (Array.prototype.some.call(chnnlDt, (sample: number) => sample === 1)) {\r\n                    resolve(true);\r\n                } else {\r\n                    resolve(false);\r\n                }\r\n\r\n                source.stop();\r\n\r\n                analyzer.onaudioprocess = null; // tslint:disable-line:deprecation\r\n\r\n                source.disconnect(analyzer);\r\n                analyzer.disconnect(nativeAudioContext.destination);\r\n            };\r\n\r\n            source.start();\r\n        }\r\n    });\r\n};\r\n", "import { IAudioNode } from '../interfaces';\r\nimport { TContext } from '../types';\r\n\r\nexport const visitEachAudioNodeOnce = <T extends TContext>(\r\n    cycles: IAudioNode<T>[][],\r\n    visitor: (audioNode: IAudioNode<T>, count: number) => void\r\n): void => {\r\n    const counts = new Map<IAudioNode<T>, number>();\r\n\r\n    for (const cycle of cycles) {\r\n        for (const audioNode of cycle) {\r\n            const count = counts.get(audioNode);\r\n\r\n            counts.set(audioNode, count === undefined ? 1 : count + 1);\r\n        }\r\n    }\r\n\r\n    counts.forEach((count, audioNode) => visitor(audioNode, count));\r\n};\r\n", "import { TNativeAudioNode, TNativeAudioParam } from '../types';\r\n\r\nexport const isNativeAudioNode = (\r\n    nativeAudioNodeOrAudioParam: TNativeAudioNode | TNativeAudioParam\r\n): nativeAudioNodeOrAudioParam is TNativeAudioNode => {\r\n    return 'context' in nativeAudioNodeOrAudioParam;\r\n};\r\n", "import { isNativeAudioNode } from '../guards/native-audio-node';\r\nimport { TNativeAudioNode, TNativeAudioParam } from '../types';\r\n\r\nexport const wrapAudioNodeDisconnectMethod = (nativeAudioNode: TNativeAudioNode): void => {\r\n    const connections = new Map<TNativeAudioNode | TNativeAudioParam, { input: number; output: number }[]>();\r\n\r\n    nativeAudioNode.connect = <TNativeAudioNode['connect']>((connect) => {\r\n        // tslint:disable-next-line:invalid-void no-inferrable-types\r\n        return (destination: TNativeAudioNode | TNativeAudioParam, output = 0, input: number = 0): void | TNativeAudioNode => {\r\n            const returnValue = isNativeAudioNode(destination) ? connect(destination, output, input) : connect(destination, output);\r\n\r\n            // Save the new connection only if the calls to connect above didn't throw an error.\r\n            const connectionsToDestination = connections.get(destination);\r\n\r\n            if (connectionsToDestination === undefined) {\r\n                connections.set(destination, [{ input, output }]);\r\n            } else {\r\n                if (connectionsToDestination.every((connection) => connection.input !== input || connection.output !== output)) {\r\n                    connectionsToDestination.push({ input, output });\r\n                }\r\n            }\r\n\r\n            return returnValue;\r\n        };\r\n    })(nativeAudioNode.connect.bind(nativeAudioNode));\r\n\r\n    nativeAudioNode.disconnect = ((disconnect) => {\r\n        return (destinationOrOutput?: number | TNativeAudioNode | TNativeAudioParam, output?: number, input?: number): void => {\r\n            disconnect.apply(nativeAudioNode);\r\n\r\n            if (destinationOrOutput === undefined) {\r\n                connections.clear();\r\n            } else if (typeof destinationOrOutput === 'number') {\r\n                for (const [destination, connectionsToDestination] of connections) {\r\n                    const filteredConnections = connectionsToDestination.filter((connection) => connection.output !== destinationOrOutput);\r\n\r\n                    if (filteredConnections.length === 0) {\r\n                        connections.delete(destination);\r\n                    } else {\r\n                        connections.set(destination, filteredConnections);\r\n                    }\r\n                }\r\n            } else if (connections.has(destinationOrOutput)) {\r\n                if (output === undefined) {\r\n                    connections.delete(destinationOrOutput);\r\n                } else {\r\n                    const connectionsToDestination = connections.get(destinationOrOutput);\r\n\r\n                    if (connectionsToDestination !== undefined) {\r\n                        const filteredConnections = connectionsToDestination.filter(\r\n                            (connection) => connection.output !== output && (connection.input !== input || input === undefined)\r\n                        );\r\n\r\n                        if (filteredConnections.length === 0) {\r\n                            connections.delete(destinationOrOutput);\r\n                        } else {\r\n                            connections.set(destinationOrOutput, filteredConnections);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            for (const [destination, connectionsToDestination] of connections) {\r\n                connectionsToDestination.forEach((connection) => {\r\n                    if (isNativeAudioNode(destination)) {\r\n                        nativeAudioNode.connect(destination, connection.output, connection.input);\r\n                    } else {\r\n                        nativeAudioNode.connect(destination, connection.output);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    })(nativeAudioNode.disconnect);\r\n};\r\n", "import { AUDIO_NODE_STORE, EVENT_LISTENERS } from '../globals';\r\nimport { isAudioNode } from '../guards/audio-node';\r\nimport { isAudioNodeOutputConnection } from '../guards/audio-node-output-connection';\r\nimport { addActiveInputConnectionToAudioParam } from '../helpers/add-active-input-connection-to-audio-param';\r\nimport { addPassiveInputConnectionToAudioParam } from '../helpers/add-passive-input-connection-to-audio-param';\r\nimport { connectNativeAudioNodeToNativeAudioNode } from '../helpers/connect-native-audio-node-to-native-audio-node';\r\nimport { deleteActiveInputConnection } from '../helpers/delete-active-input-connection';\r\nimport { deleteActiveInputConnectionToAudioParam } from '../helpers/delete-active-input-connection-to-audio-param';\r\nimport { deleteEventListenerOfAudioNode } from '../helpers/delete-event-listeners-of-audio-node';\r\nimport { deletePassiveInputConnectionToAudioNode } from '../helpers/delete-passive-input-connection-to-audio-node';\r\nimport { deletePassiveInputConnectionToAudioParam } from '../helpers/delete-passive-input-connection-to-audio-param';\r\nimport { disconnectNativeAudioNodeFromNativeAudioNode } from '../helpers/disconnect-native-audio-node-from-native-audio-node';\r\nimport { getAudioNodeConnections } from '../helpers/get-audio-node-connections';\r\nimport { getAudioParamConnections } from '../helpers/get-audio-param-connections';\r\nimport { getEventListenersOfAudioNode } from '../helpers/get-event-listeners-of-audio-node';\r\nimport { getNativeAudioNode } from '../helpers/get-native-audio-node';\r\nimport { getNativeAudioParam } from '../helpers/get-native-audio-param';\r\nimport { insertElementInSet } from '../helpers/insert-element-in-set';\r\nimport { isActiveAudioNode } from '../helpers/is-active-audio-node';\r\nimport { isPartOfACycle } from '../helpers/is-part-of-a-cycle';\r\nimport { isPassiveAudioNode } from '../helpers/is-passive-audio-node';\r\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\r\nimport { setInternalStateToPassiveWhenNecessary } from '../helpers/set-internal-state-to-passive-when-necessary';\r\nimport { testAudioNodeDisconnectMethodSupport } from '../helpers/test-audio-node-disconnect-method-support';\r\nimport { visitEachAudioNodeOnce } from '../helpers/visit-each-audio-node-once';\r\nimport { wrapAudioNodeDisconnectMethod } from '../helpers/wrap-audio-node-disconnect-method';\r\nimport {\r\n    IAudioNode,\r\n    IAudioNodeRenderer,\r\n    IAudioParam,\r\n    IMinimalOfflineAudioContext,\r\n    INativeAudioNodeFaker,\r\n    IOfflineAudioContext\r\n} from '../interfaces';\r\nimport {\r\n    TAudioNodeConstructorFactory,\r\n    TChannelCountMode,\r\n    TChannelInterpretation,\r\n    TContext,\r\n    TInternalStateEventListener,\r\n    TNativeAudioNode,\r\n    TNativeAudioParam\r\n} from '../types';\r\n\r\nconst addConnectionToAudioParamOfAudioContext = <T extends TContext>(\r\n    source: IAudioNode<T>,\r\n    destination: IAudioParam,\r\n    output: number,\r\n    isOffline: boolean\r\n): boolean => {\r\n    const { activeInputs, passiveInputs } = getAudioParamConnections<T>(destination);\r\n    const { outputs } = getAudioNodeConnections(source);\r\n    const eventListeners = getEventListenersOfAudioNode(source);\r\n\r\n    const eventListener: TInternalStateEventListener = (isActive) => {\r\n        const nativeAudioNode = getNativeAudioNode(source);\r\n        const nativeAudioParam = getNativeAudioParam(destination);\r\n\r\n        if (isActive) {\r\n            const partialConnection = deletePassiveInputConnectionToAudioParam(passiveInputs, source, output);\r\n\r\n            addActiveInputConnectionToAudioParam(activeInputs, source, partialConnection, false);\r\n\r\n            if (!isOffline && !isPartOfACycle(source)) {\r\n                nativeAudioNode.connect(nativeAudioParam, output);\r\n            }\r\n        } else {\r\n            const partialConnection = deleteActiveInputConnectionToAudioParam(activeInputs, source, output);\r\n\r\n            addPassiveInputConnectionToAudioParam(passiveInputs, partialConnection, false);\r\n\r\n            if (!isOffline && !isPartOfACycle(source)) {\r\n                nativeAudioNode.disconnect(nativeAudioParam, output);\r\n            }\r\n        }\r\n    };\r\n\r\n    if (\r\n        insertElementInSet(\r\n            outputs,\r\n            [destination, output],\r\n            (outputConnection) => outputConnection[0] === destination && outputConnection[1] === output,\r\n            true\r\n        )\r\n    ) {\r\n        eventListeners.add(eventListener);\r\n\r\n        if (isActiveAudioNode(source)) {\r\n            addActiveInputConnectionToAudioParam(activeInputs, source, [output, eventListener], true);\r\n        } else {\r\n            addPassiveInputConnectionToAudioParam(passiveInputs, [source, output, eventListener], true);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n};\r\n\r\nconst deleteInputConnectionOfAudioNode = <T extends TContext>(\r\n    source: IAudioNode<T>,\r\n    destination: IAudioNode<T>,\r\n    output: number,\r\n    input: number\r\n): [null | TInternalStateEventListener, boolean] => {\r\n    const { activeInputs, passiveInputs } = getAudioNodeConnections(destination);\r\n\r\n    const activeInputConnection = deleteActiveInputConnection(activeInputs[input], source, output);\r\n\r\n    if (activeInputConnection === null) {\r\n        const passiveInputConnection = deletePassiveInputConnectionToAudioNode(passiveInputs, source, output, input);\r\n\r\n        return [passiveInputConnection[2], false];\r\n    }\r\n\r\n    return [activeInputConnection[2], true];\r\n};\r\n\r\nconst deleteInputConnectionOfAudioParam = <T extends TContext>(\r\n    source: IAudioNode<T>,\r\n    destination: IAudioParam,\r\n    output: number\r\n): [null | TInternalStateEventListener, boolean] => {\r\n    const { activeInputs, passiveInputs } = getAudioParamConnections<T>(destination);\r\n\r\n    const activeInputConnection = deleteActiveInputConnection(activeInputs, source, output);\r\n\r\n    if (activeInputConnection === null) {\r\n        const passiveInputConnection = deletePassiveInputConnectionToAudioParam(passiveInputs, source, output);\r\n\r\n        return [passiveInputConnection[1], false];\r\n    }\r\n\r\n    return [activeInputConnection[2], true];\r\n};\r\n\r\nconst deleteInputsOfAudioNode = <T extends TContext>(\r\n    source: IAudioNode<T>,\r\n    isOffline: boolean,\r\n    destination: IAudioNode<T>,\r\n    output: number,\r\n    input: number\r\n) => {\r\n    const [listener, isActive] = deleteInputConnectionOfAudioNode(source, destination, output, input);\r\n\r\n    if (listener !== null) {\r\n        deleteEventListenerOfAudioNode(source, listener);\r\n\r\n        if (isActive && !isOffline && !isPartOfACycle(source)) {\r\n            disconnectNativeAudioNodeFromNativeAudioNode(getNativeAudioNode(source), getNativeAudioNode(destination), output, input);\r\n        }\r\n    }\r\n\r\n    if (isActiveAudioNode(destination)) {\r\n        const { activeInputs } = getAudioNodeConnections(destination);\r\n\r\n        setInternalStateToPassiveWhenNecessary(destination, activeInputs);\r\n    }\r\n};\r\n\r\nconst deleteInputsOfAudioParam = <T extends TContext>(\r\n    source: IAudioNode<T>,\r\n    isOffline: boolean,\r\n    destination: IAudioParam,\r\n    output: number\r\n) => {\r\n    const [listener, isActive] = deleteInputConnectionOfAudioParam(source, destination, output);\r\n\r\n    if (listener !== null) {\r\n        deleteEventListenerOfAudioNode(source, listener);\r\n\r\n        if (isActive && !isOffline && !isPartOfACycle(source)) {\r\n            getNativeAudioNode(source).disconnect(getNativeAudioParam(destination), output);\r\n        }\r\n    }\r\n};\r\n\r\nconst deleteAnyConnection = <T extends TContext>(source: IAudioNode<T>, isOffline: boolean): (IAudioNode<T> | IAudioParam)[] => {\r\n    const audioNodeConnectionsOfSource = getAudioNodeConnections(source);\r\n    const destinations = [];\r\n\r\n    for (const outputConnection of audioNodeConnectionsOfSource.outputs) {\r\n        if (isAudioNodeOutputConnection(outputConnection)) {\r\n            deleteInputsOfAudioNode(source, isOffline, ...outputConnection);\r\n        } else {\r\n            deleteInputsOfAudioParam(source, isOffline, ...outputConnection);\r\n        }\r\n\r\n        destinations.push(outputConnection[0]);\r\n    }\r\n\r\n    audioNodeConnectionsOfSource.outputs.clear();\r\n\r\n    return destinations;\r\n};\r\n\r\nconst deleteConnectionAtOutput = <T extends TContext>(\r\n    source: IAudioNode<T>,\r\n    isOffline: boolean,\r\n    output: number\r\n): (IAudioNode<T> | IAudioParam)[] => {\r\n    const audioNodeConnectionsOfSource = getAudioNodeConnections(source);\r\n    const destinations = [];\r\n\r\n    for (const outputConnection of audioNodeConnectionsOfSource.outputs) {\r\n        if (outputConnection[1] === output) {\r\n            if (isAudioNodeOutputConnection(outputConnection)) {\r\n                deleteInputsOfAudioNode(source, isOffline, ...outputConnection);\r\n            } else {\r\n                deleteInputsOfAudioParam(source, isOffline, ...outputConnection);\r\n            }\r\n\r\n            destinations.push(outputConnection[0]);\r\n            audioNodeConnectionsOfSource.outputs.delete(outputConnection);\r\n        }\r\n    }\r\n\r\n    return destinations;\r\n};\r\n\r\nconst deleteConnectionToDestination = <T extends TContext, U extends TContext>(\r\n    source: IAudioNode<T>,\r\n    isOffline: boolean,\r\n    destination: IAudioNode<U> | IAudioParam,\r\n    output?: number,\r\n    input?: number\r\n): (IAudioNode<T> | IAudioParam)[] => {\r\n    const audioNodeConnectionsOfSource = getAudioNodeConnections(source);\r\n\r\n    return Array.from(audioNodeConnectionsOfSource.outputs)\r\n        .filter(\r\n            (outputConnection) =>\r\n                outputConnection[0] === destination &&\r\n                (output === undefined || outputConnection[1] === output) &&\r\n                (input === undefined || outputConnection[2] === input)\r\n        )\r\n        .map((outputConnection) => {\r\n            if (isAudioNodeOutputConnection(outputConnection)) {\r\n                deleteInputsOfAudioNode(source, isOffline, ...outputConnection);\r\n            } else {\r\n                deleteInputsOfAudioParam(source, isOffline, ...outputConnection);\r\n            }\r\n\r\n            audioNodeConnectionsOfSource.outputs.delete(outputConnection);\r\n\r\n            return outputConnection[0];\r\n        });\r\n};\r\n\r\nexport const createAudioNodeConstructor: TAudioNodeConstructorFactory = (\r\n    addAudioNodeConnections,\r\n    addConnectionToAudioNode,\r\n    cacheTestResult,\r\n    createIncrementCycleCounter,\r\n    createIndexSizeError,\r\n    createInvalidAccessError,\r\n    createNotSupportedError,\r\n    decrementCycleCounter,\r\n    detectCycles,\r\n    eventTargetConstructor,\r\n    getNativeContext,\r\n    isNativeAudioContext,\r\n    isNativeAudioNode,\r\n    isNativeAudioParam,\r\n    isNativeOfflineAudioContext,\r\n    nativeAudioWorkletNodeConstructor\r\n) => {\r\n    return class AudioNode<T extends TContext, EventMap extends Record<string, Event> = {}>\r\n        extends eventTargetConstructor<EventMap>\r\n        implements IAudioNode<T, EventMap>\r\n    {\r\n        private _context: T;\r\n\r\n        private _nativeAudioNode: INativeAudioNodeFaker | TNativeAudioNode;\r\n\r\n        constructor(\r\n            context: T,\r\n            isActive: boolean,\r\n            nativeAudioNode: INativeAudioNodeFaker | TNativeAudioNode,\r\n            audioNodeRenderer: T extends IMinimalOfflineAudioContext | IOfflineAudioContext ? IAudioNodeRenderer<T, IAudioNode<T>> : null\r\n        ) {\r\n            super(nativeAudioNode);\r\n\r\n            this._context = context;\r\n            this._nativeAudioNode = nativeAudioNode;\r\n\r\n            const nativeContext = getNativeContext(context);\r\n\r\n            // Bug #12: Safari does not support to disconnect a specific destination.\r\n            if (\r\n                isNativeAudioContext(nativeContext) &&\r\n                true !==\r\n                    cacheTestResult(testAudioNodeDisconnectMethodSupport, () => {\r\n                        return testAudioNodeDisconnectMethodSupport(nativeContext, nativeAudioWorkletNodeConstructor);\r\n                    })\r\n            ) {\r\n                wrapAudioNodeDisconnectMethod(nativeAudioNode);\r\n            }\r\n\r\n            AUDIO_NODE_STORE.set(this, nativeAudioNode);\r\n            EVENT_LISTENERS.set(this, new Set());\r\n\r\n            if (context.state !== 'closed' && isActive) {\r\n                setInternalStateToActive(this);\r\n            }\r\n\r\n            addAudioNodeConnections(this, audioNodeRenderer, nativeAudioNode);\r\n        }\r\n\r\n        get channelCount(): number {\r\n            return this._nativeAudioNode.channelCount;\r\n        }\r\n\r\n        set channelCount(value) {\r\n            this._nativeAudioNode.channelCount = value;\r\n        }\r\n\r\n        get channelCountMode(): TChannelCountMode {\r\n            return this._nativeAudioNode.channelCountMode;\r\n        }\r\n\r\n        set channelCountMode(value) {\r\n            this._nativeAudioNode.channelCountMode = value;\r\n        }\r\n\r\n        get channelInterpretation(): TChannelInterpretation {\r\n            return this._nativeAudioNode.channelInterpretation;\r\n        }\r\n\r\n        set channelInterpretation(value) {\r\n            this._nativeAudioNode.channelInterpretation = value;\r\n        }\r\n\r\n        get context(): T {\r\n            return this._context;\r\n        }\r\n\r\n        get numberOfInputs(): number {\r\n            return this._nativeAudioNode.numberOfInputs;\r\n        }\r\n\r\n        get numberOfOutputs(): number {\r\n            return this._nativeAudioNode.numberOfOutputs;\r\n        }\r\n\r\n        public connect<U extends TContext, V extends IAudioNode<U>>(destinationNode: V, output?: number, input?: number): V;\r\n        public connect(destinationParam: IAudioParam, output?: number): void;\r\n        // tslint:disable-next-line:invalid-void\r\n        public connect<U extends TContext, V extends IAudioNode<U>>(destination: V | IAudioParam, output = 0, input = 0): void | V {\r\n            // Bug #174: Safari does expose a wrong numberOfOutputs for MediaStreamAudioDestinationNodes.\r\n            if (output < 0 || output >= this._nativeAudioNode.numberOfOutputs) {\r\n                throw createIndexSizeError();\r\n            }\r\n\r\n            const nativeContext = getNativeContext(this._context);\r\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\r\n\r\n            if (isNativeAudioNode(destination) || isNativeAudioParam(destination)) {\r\n                throw createInvalidAccessError();\r\n            }\r\n\r\n            if (isAudioNode(destination)) {\r\n                const nativeDestinationAudioNode = getNativeAudioNode(destination);\r\n\r\n                try {\r\n                    const connection = connectNativeAudioNodeToNativeAudioNode(\r\n                        this._nativeAudioNode,\r\n                        nativeDestinationAudioNode,\r\n                        output,\r\n                        input\r\n                    );\r\n\r\n                    const isPassive = isPassiveAudioNode(this);\r\n\r\n                    if (isOffline || isPassive) {\r\n                        this._nativeAudioNode.disconnect(...connection);\r\n                    }\r\n\r\n                    if (this.context.state !== 'closed' && !isPassive && isPassiveAudioNode(destination)) {\r\n                        setInternalStateToActive(destination);\r\n                    }\r\n                } catch (err) {\r\n                    // Bug #41: Safari does not throw the correct exception so far.\r\n                    if (err.code === 12) {\r\n                        throw createInvalidAccessError();\r\n                    }\r\n\r\n                    throw err;\r\n                }\r\n\r\n                const isNewConnectionToAudioNode = addConnectionToAudioNode(\r\n                    this,\r\n                    <IAudioNode<TContext>>destination,\r\n                    output,\r\n                    input,\r\n                    isOffline\r\n                );\r\n\r\n                // Bug #164: Only Firefox detects cycles so far.\r\n                if (isNewConnectionToAudioNode) {\r\n                    const cycles = detectCycles([this], <IAudioNode<T>>(<unknown>destination));\r\n\r\n                    visitEachAudioNodeOnce(cycles, createIncrementCycleCounter(isOffline));\r\n                }\r\n\r\n                return destination;\r\n            }\r\n\r\n            const nativeAudioParam = getNativeAudioParam(destination);\r\n\r\n            /*\r\n             * Bug #73, #147 & #153: Safari does not support to connect an input signal to the playbackRate AudioParam of an\r\n             * AudioBufferSourceNode. This can't be easily detected and that's why the outdated name property is used here to identify\r\n             * Safari. In addition to that the maxValue property is used to only detect the affected versions below v14.0.2.\r\n             */\r\n            if ((<TNativeAudioParam & { name: string }>nativeAudioParam).name === 'playbackRate' && nativeAudioParam.maxValue === 1024) {\r\n                throw createNotSupportedError();\r\n            }\r\n\r\n            try {\r\n                this._nativeAudioNode.connect(nativeAudioParam, output);\r\n\r\n                if (isOffline || isPassiveAudioNode(this)) {\r\n                    this._nativeAudioNode.disconnect(nativeAudioParam, output);\r\n                }\r\n            } catch (err) {\r\n                // Bug #58: Safari doesn't throw an InvalidAccessError yet.\r\n                if (err.code === 12) {\r\n                    throw createInvalidAccessError();\r\n                }\r\n\r\n                throw err;\r\n            }\r\n\r\n            const isNewConnectionToAudioParam = addConnectionToAudioParamOfAudioContext(this, destination, output, isOffline);\r\n\r\n            // Bug #164: Only Firefox detects cycles so far.\r\n            if (isNewConnectionToAudioParam) {\r\n                const cycles = detectCycles([this], destination);\r\n\r\n                visitEachAudioNodeOnce(cycles, createIncrementCycleCounter(isOffline));\r\n            }\r\n        }\r\n\r\n        public disconnect(output?: number): void;\r\n        public disconnect<U extends TContext>(destinationNode: IAudioNode<U>, output?: number, input?: number): void;\r\n        public disconnect(destinationParam: IAudioParam, output?: number): void;\r\n        public disconnect<U extends TContext>(\r\n            destinationOrOutput?: number | IAudioNode<U> | IAudioParam,\r\n            output?: number,\r\n            input?: number\r\n        ): void {\r\n            let destinations: (IAudioNode<T> | IAudioParam)[];\r\n\r\n            const nativeContext = getNativeContext(this._context);\r\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\r\n\r\n            if (destinationOrOutput === undefined) {\r\n                destinations = deleteAnyConnection(this, isOffline);\r\n            } else if (typeof destinationOrOutput === 'number') {\r\n                if (destinationOrOutput < 0 || destinationOrOutput >= this.numberOfOutputs) {\r\n                    throw createIndexSizeError();\r\n                }\r\n\r\n                destinations = deleteConnectionAtOutput(this, isOffline, destinationOrOutput);\r\n            } else {\r\n                if (output !== undefined && (output < 0 || output >= this.numberOfOutputs)) {\r\n                    throw createIndexSizeError();\r\n                }\r\n\r\n                if (isAudioNode(destinationOrOutput) && input !== undefined && (input < 0 || input >= destinationOrOutput.numberOfInputs)) {\r\n                    throw createIndexSizeError();\r\n                }\r\n\r\n                destinations = deleteConnectionToDestination(this, isOffline, destinationOrOutput, output, input);\r\n\r\n                if (destinations.length === 0) {\r\n                    throw createInvalidAccessError();\r\n                }\r\n            }\r\n\r\n            // Bug #164: Only Firefox detects cycles so far.\r\n            for (const destination of destinations) {\r\n                const cycles = detectCycles([this], destination);\r\n\r\n                visitEachAudioNodeOnce(cycles, decrementCycleCounter);\r\n            }\r\n        }\r\n    };\r\n};\r\n", "import { AutomationEventList } from 'automation-events';\r\nimport { IAudioNode, IAudioParam, IAudioParamRenderer, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport { TAudioParamFactoryFactory, TContext, TNativeAudioParam } from '../types';\r\n\r\nexport const createAudioParamFactory: TAudioParamFactoryFactory = (\r\n    addAudioParamConnections,\r\n    audioParamAudioNodeStore,\r\n    audioParamStore,\r\n    createAudioParamRenderer,\r\n    createCancelAndHoldAutomationEvent,\r\n    createCancelScheduledValuesAutomationEvent,\r\n    createExponentialRampToValueAutomationEvent,\r\n    createLinearRampToValueAutomationEvent,\r\n    createSetTargetAutomationEvent,\r\n    createSetValueAutomationEvent,\r\n    createSetValueCurveAutomationEvent,\r\n    nativeAudioContextConstructor,\r\n    setValueAtTimeUntilPossible\r\n) => {\r\n    return <T extends TContext>(\r\n        audioNode: IAudioNode<T>,\r\n        isAudioParamOfOfflineAudioContext: boolean,\r\n        nativeAudioParam: TNativeAudioParam,\r\n        maxValue: null | number = null,\r\n        minValue: null | number = null\r\n    ): IAudioParam => {\r\n        // Bug #196 Only Safari sets the defaultValue to the initial value.\r\n        const defaultValue = nativeAudioParam.value;\r\n        const automationEventList = new AutomationEventList(defaultValue);\r\n        const audioParamRenderer = isAudioParamOfOfflineAudioContext ? createAudioParamRenderer(automationEventList) : null;\r\n        const audioParam = {\r\n            get defaultValue(): number {\r\n                return defaultValue;\r\n            },\r\n            get maxValue(): number {\r\n                return maxValue === null ? nativeAudioParam.maxValue : maxValue;\r\n            },\r\n            get minValue(): number {\r\n                return minValue === null ? nativeAudioParam.minValue : minValue;\r\n            },\r\n            get value(): number {\r\n                return nativeAudioParam.value;\r\n            },\r\n            set value(value) {\r\n                nativeAudioParam.value = value;\r\n\r\n                // Bug #98: Firefox & Safari do not yet treat the value setter like a call to setValueAtTime().\r\n                audioParam.setValueAtTime(value, audioNode.context.currentTime);\r\n            },\r\n            cancelAndHoldAtTime(cancelTime: number): IAudioParam {\r\n                // Bug #28: Firefox & Safari do not yet implement cancelAndHoldAtTime().\r\n                if (typeof nativeAudioParam.cancelAndHoldAtTime === 'function') {\r\n                    if (audioParamRenderer === null) {\r\n                        automationEventList.flush(audioNode.context.currentTime);\r\n                    }\r\n\r\n                    automationEventList.add(createCancelAndHoldAutomationEvent(cancelTime));\r\n                    nativeAudioParam.cancelAndHoldAtTime(cancelTime);\r\n                } else {\r\n                    const previousLastEvent = Array.from(automationEventList).pop();\r\n\r\n                    if (audioParamRenderer === null) {\r\n                        automationEventList.flush(audioNode.context.currentTime);\r\n                    }\r\n\r\n                    automationEventList.add(createCancelAndHoldAutomationEvent(cancelTime));\r\n\r\n                    const currentLastEvent = Array.from(automationEventList).pop();\r\n\r\n                    nativeAudioParam.cancelScheduledValues(cancelTime);\r\n\r\n                    if (previousLastEvent !== currentLastEvent && currentLastEvent !== undefined) {\r\n                        if (currentLastEvent.type === 'exponentialRampToValue') {\r\n                            nativeAudioParam.exponentialRampToValueAtTime(currentLastEvent.value, currentLastEvent.endTime);\r\n                        } else if (currentLastEvent.type === 'linearRampToValue') {\r\n                            nativeAudioParam.linearRampToValueAtTime(currentLastEvent.value, currentLastEvent.endTime);\r\n                        } else if (currentLastEvent.type === 'setValue') {\r\n                            nativeAudioParam.setValueAtTime(currentLastEvent.value, currentLastEvent.startTime);\r\n                        } else if (currentLastEvent.type === 'setValueCurve') {\r\n                            nativeAudioParam.setValueCurveAtTime(\r\n                                currentLastEvent.values,\r\n                                currentLastEvent.startTime,\r\n                                currentLastEvent.duration\r\n                            );\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return audioParam;\r\n            },\r\n            cancelScheduledValues(cancelTime: number): IAudioParam {\r\n                if (audioParamRenderer === null) {\r\n                    automationEventList.flush(audioNode.context.currentTime);\r\n                }\r\n\r\n                automationEventList.add(createCancelScheduledValuesAutomationEvent(cancelTime));\r\n                nativeAudioParam.cancelScheduledValues(cancelTime);\r\n\r\n                return audioParam;\r\n            },\r\n            exponentialRampToValueAtTime(value: number, endTime: number): IAudioParam {\r\n                // Bug #45: Safari does not throw an error yet.\r\n                if (value === 0) {\r\n                    throw new RangeError();\r\n                }\r\n\r\n                // Bug #187: Safari does not throw an error yet.\r\n                if (!Number.isFinite(endTime) || endTime < 0) {\r\n                    throw new RangeError();\r\n                }\r\n\r\n                const currentTime = audioNode.context.currentTime;\r\n\r\n                if (audioParamRenderer === null) {\r\n                    automationEventList.flush(currentTime);\r\n                }\r\n\r\n                // Bug #194: Firefox does not implicitly call setValueAtTime() if there is no previous event.\r\n                if (Array.from(automationEventList).length === 0) {\r\n                    automationEventList.add(createSetValueAutomationEvent(defaultValue, currentTime));\r\n                    nativeAudioParam.setValueAtTime(defaultValue, currentTime);\r\n                }\r\n\r\n                automationEventList.add(createExponentialRampToValueAutomationEvent(value, endTime));\r\n                nativeAudioParam.exponentialRampToValueAtTime(value, endTime);\r\n\r\n                return audioParam;\r\n            },\r\n            linearRampToValueAtTime(value: number, endTime: number): IAudioParam {\r\n                const currentTime = audioNode.context.currentTime;\r\n\r\n                if (audioParamRenderer === null) {\r\n                    automationEventList.flush(currentTime);\r\n                }\r\n\r\n                // Bug #195: Firefox does not implicitly call setValueAtTime() if there is no previous event.\r\n                if (Array.from(automationEventList).length === 0) {\r\n                    automationEventList.add(createSetValueAutomationEvent(defaultValue, currentTime));\r\n                    nativeAudioParam.setValueAtTime(defaultValue, currentTime);\r\n                }\r\n\r\n                automationEventList.add(createLinearRampToValueAutomationEvent(value, endTime));\r\n                nativeAudioParam.linearRampToValueAtTime(value, endTime);\r\n\r\n                return audioParam;\r\n            },\r\n            setTargetAtTime(target: number, startTime: number, timeConstant: number): IAudioParam {\r\n                if (audioParamRenderer === null) {\r\n                    automationEventList.flush(audioNode.context.currentTime);\r\n                }\r\n\r\n                automationEventList.add(createSetTargetAutomationEvent(target, startTime, timeConstant));\r\n                nativeAudioParam.setTargetAtTime(target, startTime, timeConstant);\r\n\r\n                return audioParam;\r\n            },\r\n            setValueAtTime(value: number, startTime: number): IAudioParam {\r\n                if (audioParamRenderer === null) {\r\n                    automationEventList.flush(audioNode.context.currentTime);\r\n                }\r\n\r\n                automationEventList.add(createSetValueAutomationEvent(value, startTime));\r\n                nativeAudioParam.setValueAtTime(value, startTime);\r\n\r\n                return audioParam;\r\n            },\r\n            setValueCurveAtTime(values: Iterable<number>, startTime: number, duration: number): IAudioParam {\r\n                // Bug 183: Safari only accepts a Float32Array.\r\n                const convertedValues = values instanceof Float32Array ? values : new Float32Array(values);\r\n                /*\r\n                 * Bug #152: Safari does not correctly interpolate the values of the curve.\r\n                 * @todo Unfortunately there is no way to test for this behavior in a synchronous fashion which is why testing for the\r\n                 * existence of the webkitAudioContext is used as a workaround here.\r\n                 */\r\n                if (nativeAudioContextConstructor !== null && nativeAudioContextConstructor.name === 'webkitAudioContext') {\r\n                    const endTime = startTime + duration;\r\n                    const sampleRate = audioNode.context.sampleRate;\r\n                    const firstSample = Math.ceil(startTime * sampleRate);\r\n                    const lastSample = Math.floor(endTime * sampleRate);\r\n                    const numberOfInterpolatedValues = lastSample - firstSample;\r\n                    const interpolatedValues = new Float32Array(numberOfInterpolatedValues);\r\n\r\n                    for (let i = 0; i < numberOfInterpolatedValues; i += 1) {\r\n                        const theoreticIndex = ((convertedValues.length - 1) / duration) * ((firstSample + i) / sampleRate - startTime);\r\n                        const lowerIndex = Math.floor(theoreticIndex);\r\n                        const upperIndex = Math.ceil(theoreticIndex);\r\n\r\n                        interpolatedValues[i] =\r\n                            lowerIndex === upperIndex\r\n                                ? convertedValues[lowerIndex]\r\n                                : (1 - (theoreticIndex - lowerIndex)) * convertedValues[lowerIndex] +\r\n                                  (1 - (upperIndex - theoreticIndex)) * convertedValues[upperIndex];\r\n                    }\r\n\r\n                    if (audioParamRenderer === null) {\r\n                        automationEventList.flush(audioNode.context.currentTime);\r\n                    }\r\n\r\n                    automationEventList.add(createSetValueCurveAutomationEvent(interpolatedValues, startTime, duration));\r\n                    nativeAudioParam.setValueCurveAtTime(interpolatedValues, startTime, duration);\r\n\r\n                    const timeOfLastSample = lastSample / sampleRate;\r\n\r\n                    if (timeOfLastSample < endTime) {\r\n                        setValueAtTimeUntilPossible(audioParam, interpolatedValues[interpolatedValues.length - 1], timeOfLastSample);\r\n                    }\r\n\r\n                    setValueAtTimeUntilPossible(audioParam, convertedValues[convertedValues.length - 1], endTime);\r\n                } else {\r\n                    if (audioParamRenderer === null) {\r\n                        automationEventList.flush(audioNode.context.currentTime);\r\n                    }\r\n\r\n                    automationEventList.add(createSetValueCurveAutomationEvent(convertedValues, startTime, duration));\r\n                    nativeAudioParam.setValueCurveAtTime(convertedValues, startTime, duration);\r\n                }\r\n\r\n                return audioParam;\r\n            }\r\n        };\r\n\r\n        audioParamStore.set(audioParam, nativeAudioParam);\r\n        audioParamAudioNodeStore.set(audioParam, audioNode);\r\n\r\n        addAudioParamConnections(\r\n            audioParam,\r\n            <T extends IMinimalOfflineAudioContext | IOfflineAudioContext ? IAudioParamRenderer : null>audioParamRenderer\r\n        );\r\n\r\n        return audioParam;\r\n    };\r\n};\r\n", "import { TAudioParamRendererFactory, TNativeAudioParam } from '../types';\r\n\r\nexport const createAudioParamRenderer: TAudioParamRendererFactory = (automationEventList) => {\r\n    return {\r\n        replay(audioParam: TNativeAudioParam): void {\r\n            for (const automationEvent of automationEventList) {\r\n                if (automationEvent.type === 'exponentialRampToValue') {\r\n                    const { endTime, value } = automationEvent;\r\n\r\n                    audioParam.exponentialRampToValueAtTime(value, endTime);\r\n                } else if (automationEvent.type === 'linearRampToValue') {\r\n                    const { endTime, value } = automationEvent;\r\n\r\n                    audioParam.linearRampToValueAtTime(value, endTime);\r\n                } else if (automationEvent.type === 'setTarget') {\r\n                    const { startTime, target, timeConstant } = automationEvent;\r\n\r\n                    audioParam.setTargetAtTime(target, startTime, timeConstant);\r\n                } else if (automationEvent.type === 'setValue') {\r\n                    const { startTime, value } = automationEvent;\r\n\r\n                    audioParam.setValueAtTime(value, startTime);\r\n                } else if (automationEvent.type === 'setValueCurve') {\r\n                    const { duration, startTime, values } = automationEvent;\r\n\r\n                    audioParam.setValueCurveAtTime(values, startTime, duration);\r\n                } else {\r\n                    throw new Error(\"Can't apply an unknown automation.\");\r\n                }\r\n            }\r\n        }\r\n    };\r\n};\r\n", "import { IReadOnlyMap } from './interfaces';\r\n\r\nexport class ReadOnlyMap<T, U> implements IReadOnlyMap<T, U> {\r\n    private _map: Map<T, U>;\r\n\r\n    constructor(parameters: [T, U][]) {\r\n        this._map = new Map(parameters);\r\n    }\r\n\r\n    get size(): number {\r\n        return this._map.size;\r\n    }\r\n\r\n    public entries(): IterableIterator<[T, U]> {\r\n        return this._map.entries();\r\n    }\r\n\r\n    public forEach(callback: (audioParam: U, name: T, map: ReadOnlyMap<T, U>) => void, thisArg: any = null): void {\r\n        return this._map.forEach((value: U, key: T) => callback.call(thisArg, value, key, this));\r\n    }\r\n\r\n    public get(name: T): undefined | U {\r\n        return this._map.get(name);\r\n    }\r\n\r\n    public has(name: T): boolean {\r\n        return this._map.has(name);\r\n    }\r\n\r\n    public keys(): IterableIterator<T> {\r\n        return this._map.keys();\r\n    }\r\n\r\n    public values(): IterableIterator<U> {\r\n        return this._map.values();\r\n    }\r\n}\r\n", "import { NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS } from '../globals';\r\nimport {\r\n    IAudioParam,\r\n    IAudioWorkletNode,\r\n    IAudioWorkletNodeEventMap,\r\n    IAudioWorkletNodeOptions,\r\n    IMinimalAudioContext,\r\n    IMinimalOfflineAudioContext,\r\n    IOfflineAudioContext,\r\n    IReadOnlyMap\r\n} from '../interfaces';\r\nimport { ReadOnlyMap } from '../read-only-map';\r\nimport {\r\n    TAudioNodeRenderer,\r\n    TAudioParamMap,\r\n    TAudioWorkletNodeConstructorFactory,\r\n    TContext,\r\n    TErrorEventHandler,\r\n    TNativeAudioContext,\r\n    TNativeAudioParam,\r\n    TNativeAudioWorkletNode\r\n} from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    channelCount: 2,\r\n    // Bug #61: The channelCountMode should be 'max' according to the spec but is set to 'explicit' to achieve consistent behavior.\r\n    channelCountMode: 'explicit',\r\n    channelInterpretation: 'speakers',\r\n    numberOfInputs: 1,\r\n    numberOfOutputs: 1,\r\n    parameterData: {},\r\n    processorOptions: {}\r\n} as const;\r\n\r\nexport const createAudioWorkletNodeConstructor: TAudioWorkletNodeConstructorFactory = (\r\n    addUnrenderedAudioWorkletNode,\r\n    audioNodeConstructor,\r\n    createAudioParam,\r\n    createAudioWorkletNodeRenderer,\r\n    createNativeAudioWorkletNode,\r\n    getAudioNodeConnections,\r\n    getBackupOfflineAudioContext,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    nativeAudioWorkletNodeConstructor,\r\n    sanitizeAudioWorkletNodeOptions,\r\n    setActiveAudioWorkletNodeInputs,\r\n    testAudioWorkletNodeOptionsClonability,\r\n    wrapEventListener\r\n) => {\r\n    return class AudioWorkletNode<T extends TContext>\r\n        extends audioNodeConstructor<T, IAudioWorkletNodeEventMap>\r\n        implements IAudioWorkletNode<T>\r\n    {\r\n        private _nativeAudioWorkletNode: TNativeAudioWorkletNode;\r\n\r\n        private _onprocessorerror: null | TErrorEventHandler<this>;\r\n\r\n        private _parameters: null | TAudioParamMap;\r\n\r\n        constructor(context: T, name: string, options?: Partial<IAudioWorkletNodeOptions>) {\r\n            const nativeContext = getNativeContext(context);\r\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\r\n            const mergedOptions = sanitizeAudioWorkletNodeOptions({ ...DEFAULT_OPTIONS, ...options });\r\n\r\n            // Bug #191: Safari doesn't throw an error if the options aren't clonable.\r\n            testAudioWorkletNodeOptionsClonability(mergedOptions);\r\n\r\n            const nodeNameToProcessorConstructorMap = NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(nativeContext);\r\n            const processorConstructor = nodeNameToProcessorConstructorMap?.get(name);\r\n            // Bug #186: Chrome and Edge do not allow to create an AudioWorkletNode on a closed AudioContext.\r\n            const nativeContextOrBackupOfflineAudioContext =\r\n                isOffline || nativeContext.state !== 'closed'\r\n                    ? nativeContext\r\n                    : getBackupOfflineAudioContext(<TNativeAudioContext>nativeContext) ?? nativeContext;\r\n            const nativeAudioWorkletNode = createNativeAudioWorkletNode(\r\n                nativeContextOrBackupOfflineAudioContext,\r\n                isOffline ? null : (<IMinimalAudioContext>(<any>context)).baseLatency,\r\n                nativeAudioWorkletNodeConstructor,\r\n                name,\r\n                processorConstructor,\r\n                mergedOptions\r\n            );\r\n            const audioWorkletNodeRenderer = <TAudioNodeRenderer<T, this>>(\r\n                (isOffline ? createAudioWorkletNodeRenderer(name, mergedOptions, processorConstructor) : null)\r\n            );\r\n\r\n            /*\r\n             * @todo Add a mechanism to switch an AudioWorkletNode to passive once the process() function of the AudioWorkletProcessor\r\n             * returns false.\r\n             */\r\n            super(context, true, nativeAudioWorkletNode, audioWorkletNodeRenderer);\r\n\r\n            const parameters: [string, IAudioParam][] = [];\r\n\r\n            nativeAudioWorkletNode.parameters.forEach((nativeAudioParam, nm) => {\r\n                const audioParam = createAudioParam(this, isOffline, nativeAudioParam);\r\n\r\n                parameters.push([nm, audioParam]);\r\n            });\r\n\r\n            this._nativeAudioWorkletNode = nativeAudioWorkletNode;\r\n            this._onprocessorerror = null;\r\n            this._parameters = new ReadOnlyMap(parameters);\r\n\r\n            /*\r\n             * Bug #86 & #87: Invoking the renderer of an AudioWorkletNode might be necessary if it has no direct or indirect connection to\r\n             * the destination.\r\n             */\r\n            if (isOffline) {\r\n                addUnrenderedAudioWorkletNode(nativeContext, <IAudioWorkletNode<IMinimalOfflineAudioContext | IOfflineAudioContext>>this);\r\n            }\r\n\r\n            const { activeInputs } = getAudioNodeConnections(this);\r\n\r\n            setActiveAudioWorkletNodeInputs(nativeAudioWorkletNode, activeInputs);\r\n        }\r\n\r\n        get onprocessorerror(): null | TErrorEventHandler<this> {\r\n            return this._onprocessorerror;\r\n        }\r\n\r\n        set onprocessorerror(value) {\r\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, <EventListenerOrEventListenerObject>value) : null;\r\n\r\n            this._nativeAudioWorkletNode.onprocessorerror = wrappedListener;\r\n\r\n            const nativeOnProcessorError = this._nativeAudioWorkletNode.onprocessorerror;\r\n\r\n            this._onprocessorerror =\r\n                nativeOnProcessorError !== null && nativeOnProcessorError === wrappedListener\r\n                    ? value\r\n                    : <null | TErrorEventHandler<this>>nativeOnProcessorError;\r\n        }\r\n\r\n        get parameters(): TAudioParamMap {\r\n            if (this._parameters === null) {\r\n                // @todo The definition that TypeScript uses of the AudioParamMap is lacking many methods.\r\n                return <IReadOnlyMap<string, TNativeAudioParam>>this._nativeAudioWorkletNode.parameters;\r\n            }\r\n\r\n            return this._parameters;\r\n        }\r\n\r\n        get port(): MessagePort {\r\n            return this._nativeAudioWorkletNode.port;\r\n        }\r\n    };\r\n};\r\n", "import { TNativeAudioBuffer } from '../types';\r\n\r\nexport function copyFromChannel(\r\n    audioBuffer: TNativeAudioBuffer,\r\n    parent: { [key: number]: Float32Array },\r\n    key: number,\r\n    channelNumber: number,\r\n    bufferOffset: number\r\n): void;\r\nexport function copyFromChannel(\r\n    audioBuffer: TNativeAudioBuffer,\r\n    parent: { [key: string]: Float32Array },\r\n    key: string,\r\n    channelNumber: number,\r\n    bufferOffset: number\r\n): void;\r\nexport function copyFromChannel(\r\n    audioBuffer: TNativeAudioBuffer,\r\n    // @todo There is currently no way to define something like { [ key: number | string ]: Float32Array }\r\n    parent: any,\r\n    key: number | string,\r\n    channelNumber: number,\r\n    bufferOffset: number\r\n): void {\r\n    if (typeof audioBuffer.copyFromChannel === 'function') {\r\n        // The byteLength will be 0 when the ArrayBuffer was transferred.\r\n        if (parent[key].byteLength === 0) {\r\n            parent[key] = new Float32Array(128);\r\n        }\r\n\r\n        audioBuffer.copyFromChannel(parent[key], channelNumber, bufferOffset);\r\n\r\n        // Bug #5: Safari does not support copyFromChannel().\r\n    } else {\r\n        const channelData = audioBuffer.getChannelData(channelNumber);\r\n\r\n        // The byteLength will be 0 when the ArrayBuffer was transferred.\r\n        if (parent[key].byteLength === 0) {\r\n            parent[key] = channelData.slice(bufferOffset, bufferOffset + 128);\r\n        } else {\r\n            const slicedInput = new Float32Array(channelData.buffer, bufferOffset * Float32Array.BYTES_PER_ELEMENT, 128);\r\n\r\n            parent[key].set(slicedInput);\r\n        }\r\n    }\r\n}\r\n", "import { TNativeAudioBuffer } from '../types';\r\n\r\nexport const copyToChannel = (\r\n    audioBuffer: TNativeAudioBuffer,\r\n    parent: { [key: number]: Float32Array },\r\n    key: number,\r\n    channelNumber: number,\r\n    bufferOffset: number\r\n): void => {\r\n    if (typeof audioBuffer.copyToChannel === 'function') {\r\n        // The byteLength will be 0 when the ArrayBuffer was transferred.\r\n        if (parent[key].byteLength !== 0) {\r\n            audioBuffer.copyToChannel(parent[key], channelNumber, bufferOffset);\r\n        }\r\n\r\n        // Bug #5: Safari does not support copyToChannel().\r\n    } else {\r\n        // The byteLength will be 0 when the ArrayBuffer was transferred.\r\n        if (parent[key].byteLength !== 0) {\r\n            audioBuffer.getChannelData(channelNumber).set(parent[key], bufferOffset);\r\n        }\r\n    }\r\n};\r\n", "export const createNestedArrays = (x: number, y: number | number[]): Float32Array[][] => {\r\n    const arrays: Float32Array[][] = [];\r\n\r\n    for (let i = 0; i < x; i += 1) {\r\n        const array = [];\r\n\r\n        const length = typeof y === 'number' ? y : y[i];\r\n\r\n        for (let j = 0; j < length; j += 1) {\r\n            array.push(new Float32Array(128));\r\n        }\r\n\r\n        arrays.push(array);\r\n    }\r\n\r\n    return arrays;\r\n};\r\n", "import { NODE_TO_PROCESSOR_MAPS } from '../globals';\r\nimport { IAudioNode, IAudioWorkletProcessor } from '../interfaces';\r\nimport { TContext, TNativeAudioWorkletNode, TNativeOfflineAudioContext } from '../types';\r\nimport { getNativeAudioNode } from './get-native-audio-node';\r\nimport { getValueForKey } from './get-value-for-key';\r\n\r\nexport const getAudioWorkletProcessor = <T extends TContext>(\r\n    nativeOfflineAudioContext: TNativeOfflineAudioContext,\r\n    proxy: IAudioNode<T>\r\n): Promise<IAudioWorkletProcessor> => {\r\n    const nodeToProcessorMap = getValueForKey(NODE_TO_PROCESSOR_MAPS, nativeOfflineAudioContext);\r\n    const nativeAudioWorkletNode = getNativeAudioNode<T, TNativeAudioWorkletNode>(proxy);\r\n\r\n    return getValueForKey(nodeToProcessorMap, nativeAudioWorkletNode);\r\n};\r\n", "import { copyFromChannel } from '../helpers/copy-from-channel';\r\nimport { copyToChannel } from '../helpers/copy-to-channel';\r\nimport { createNestedArrays } from '../helpers/create-nested-arrays';\r\nimport { getAudioNodeConnections } from '../helpers/get-audio-node-connections';\r\nimport { getAudioWorkletProcessor } from '../helpers/get-audio-worklet-processor';\r\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\r\nimport {\r\n    IAudioWorkletNode,\r\n    IAudioWorkletNodeOptions,\r\n    IAudioWorkletProcessorConstructor,\r\n    IMinimalOfflineAudioContext,\r\n    IOfflineAudioContext,\r\n    IReadOnlyMap\r\n} from '../interfaces';\r\nimport {\r\n    TAudioWorkletNodeRendererFactoryFactory,\r\n    TExposeCurrentFrameAndCurrentTimeFunction,\r\n    TNativeAudioBuffer,\r\n    TNativeAudioNode,\r\n    TNativeAudioParam,\r\n    TNativeAudioWorkletNode,\r\n    TNativeChannelMergerNode,\r\n    TNativeChannelSplitterNode,\r\n    TNativeGainNode,\r\n    TNativeOfflineAudioContext\r\n} from '../types';\r\n\r\nconst processBuffer = async <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>(\r\n    proxy: IAudioWorkletNode<T>,\r\n    renderedBuffer: null | TNativeAudioBuffer,\r\n    nativeOfflineAudioContext: TNativeOfflineAudioContext,\r\n    options: IAudioWorkletNodeOptions,\r\n    outputChannelCount: number[],\r\n    processorConstructor: undefined | IAudioWorkletProcessorConstructor,\r\n    exposeCurrentFrameAndCurrentTime: TExposeCurrentFrameAndCurrentTimeFunction\r\n): Promise<null | TNativeAudioBuffer> => {\r\n    // Ceil the length to the next full render quantum.\r\n    // Bug #17: Safari does not yet expose the length.\r\n    const length = renderedBuffer === null ? Math.ceil(proxy.context.length / 128) * 128 : renderedBuffer.length;\r\n    const numberOfInputChannels = options.channelCount * options.numberOfInputs;\r\n    const numberOfOutputChannels = outputChannelCount.reduce((sum, value) => sum + value, 0);\r\n    const processedBuffer =\r\n        numberOfOutputChannels === 0\r\n            ? null\r\n            : nativeOfflineAudioContext.createBuffer(numberOfOutputChannels, length, nativeOfflineAudioContext.sampleRate);\r\n\r\n    if (processorConstructor === undefined) {\r\n        throw new Error('Missing the processor constructor.');\r\n    }\r\n\r\n    const audioNodeConnections = getAudioNodeConnections(proxy);\r\n    const audioWorkletProcessor = await getAudioWorkletProcessor(nativeOfflineAudioContext, proxy);\r\n    const inputs = createNestedArrays(options.numberOfInputs, options.channelCount);\r\n    const outputs = createNestedArrays(options.numberOfOutputs, outputChannelCount);\r\n    const parameters: { [name: string]: Float32Array } = Array.from(proxy.parameters.keys()).reduce(\r\n        (prmtrs, name) => ({ ...prmtrs, [name]: new Float32Array(128) }),\r\n        {}\r\n    );\r\n\r\n    for (let i = 0; i < length; i += 128) {\r\n        if (options.numberOfInputs > 0 && renderedBuffer !== null) {\r\n            for (let j = 0; j < options.numberOfInputs; j += 1) {\r\n                for (let k = 0; k < options.channelCount; k += 1) {\r\n                    copyFromChannel(renderedBuffer, inputs[j], k, k, i);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (processorConstructor.parameterDescriptors !== undefined && renderedBuffer !== null) {\r\n            processorConstructor.parameterDescriptors.forEach(({ name }, index) => {\r\n                copyFromChannel(renderedBuffer, parameters, name, numberOfInputChannels + index, i);\r\n            });\r\n        }\r\n\r\n        for (let j = 0; j < options.numberOfInputs; j += 1) {\r\n            for (let k = 0; k < outputChannelCount[j]; k += 1) {\r\n                // The byteLength will be 0 when the ArrayBuffer was transferred.\r\n                if (outputs[j][k].byteLength === 0) {\r\n                    outputs[j][k] = new Float32Array(128);\r\n                }\r\n            }\r\n        }\r\n\r\n        try {\r\n            const potentiallyEmptyInputs = inputs.map((input, index) => {\r\n                if (audioNodeConnections.activeInputs[index].size === 0) {\r\n                    return [];\r\n                }\r\n\r\n                return input;\r\n            });\r\n            const activeSourceFlag = exposeCurrentFrameAndCurrentTime(\r\n                i / nativeOfflineAudioContext.sampleRate,\r\n                nativeOfflineAudioContext.sampleRate,\r\n                () => audioWorkletProcessor.process(potentiallyEmptyInputs, outputs, parameters)\r\n            );\r\n\r\n            if (processedBuffer !== null) {\r\n                for (let j = 0, outputChannelSplitterNodeOutput = 0; j < options.numberOfOutputs; j += 1) {\r\n                    for (let k = 0; k < outputChannelCount[j]; k += 1) {\r\n                        copyToChannel(processedBuffer, outputs[j], k, outputChannelSplitterNodeOutput + k, i);\r\n                    }\r\n\r\n                    outputChannelSplitterNodeOutput += outputChannelCount[j];\r\n                }\r\n            }\r\n\r\n            if (!activeSourceFlag) {\r\n                break;\r\n            }\r\n        } catch (error) {\r\n            proxy.dispatchEvent(\r\n                new ErrorEvent('processorerror', {\r\n                    colno: error.colno,\r\n                    filename: error.filename,\r\n                    lineno: error.lineno,\r\n                    message: error.message\r\n                })\r\n            );\r\n\r\n            break;\r\n        }\r\n    }\r\n\r\n    return processedBuffer;\r\n};\r\n\r\nexport const createAudioWorkletNodeRendererFactory: TAudioWorkletNodeRendererFactoryFactory = (\r\n    connectAudioParam,\r\n    connectMultipleOutputs,\r\n    createNativeAudioBufferSourceNode,\r\n    createNativeChannelMergerNode,\r\n    createNativeChannelSplitterNode,\r\n    createNativeConstantSourceNode,\r\n    createNativeGainNode,\r\n    deleteUnrenderedAudioWorkletNode,\r\n    disconnectMultipleOutputs,\r\n    exposeCurrentFrameAndCurrentTime,\r\n    getNativeAudioNode,\r\n    nativeAudioWorkletNodeConstructor,\r\n    nativeOfflineAudioContextConstructor,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode,\r\n    renderNativeOfflineAudioContext\r\n) => {\r\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>(\r\n        name: string,\r\n        options: IAudioWorkletNodeOptions,\r\n        processorConstructor: undefined | IAudioWorkletProcessorConstructor\r\n    ) => {\r\n        const renderedNativeAudioNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAudioWorkletNode | TNativeGainNode>();\r\n\r\n        let processedBufferPromise: null | Promise<null | TNativeAudioBuffer> = null;\r\n\r\n        const createAudioNode = async (proxy: IAudioWorkletNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\r\n            let nativeAudioWorkletNode = getNativeAudioNode<T, TNativeAudioWorkletNode>(proxy);\r\n            let nativeOutputNodes: null | [TNativeChannelSplitterNode, TNativeChannelMergerNode[], TNativeGainNode] = null;\r\n\r\n            const nativeAudioWorkletNodeIsOwnedByContext = isOwnedByContext(nativeAudioWorkletNode, nativeOfflineAudioContext);\r\n            const outputChannelCount = Array.isArray(options.outputChannelCount)\r\n                ? options.outputChannelCount\r\n                : Array.from(options.outputChannelCount);\r\n\r\n            // Bug #61: Only Chrome, Edge & Firefox have an implementation of the AudioWorkletNode yet.\r\n            if (nativeAudioWorkletNodeConstructor === null) {\r\n                const numberOfOutputChannels = outputChannelCount.reduce((sum, value) => sum + value, 0);\r\n                const outputChannelSplitterNode = createNativeChannelSplitterNode(nativeOfflineAudioContext, {\r\n                    channelCount: Math.max(1, numberOfOutputChannels),\r\n                    channelCountMode: 'explicit',\r\n                    channelInterpretation: 'discrete',\r\n                    numberOfOutputs: Math.max(1, numberOfOutputChannels)\r\n                });\r\n                const outputChannelMergerNodes: TNativeChannelMergerNode[] = [];\r\n\r\n                for (let i = 0; i < proxy.numberOfOutputs; i += 1) {\r\n                    outputChannelMergerNodes.push(\r\n                        createNativeChannelMergerNode(nativeOfflineAudioContext, {\r\n                            channelCount: 1,\r\n                            channelCountMode: 'explicit',\r\n                            channelInterpretation: 'speakers',\r\n                            numberOfInputs: outputChannelCount[i]\r\n                        })\r\n                    );\r\n                }\r\n\r\n                const outputGainNode = createNativeGainNode(nativeOfflineAudioContext, {\r\n                    channelCount: options.channelCount,\r\n                    channelCountMode: options.channelCountMode,\r\n                    channelInterpretation: options.channelInterpretation,\r\n                    gain: 1\r\n                });\r\n\r\n                outputGainNode.connect = <TNativeAudioNode['connect']>connectMultipleOutputs.bind(null, outputChannelMergerNodes);\r\n                outputGainNode.disconnect = <TNativeAudioNode['disconnect']>disconnectMultipleOutputs.bind(null, outputChannelMergerNodes);\r\n\r\n                nativeOutputNodes = [outputChannelSplitterNode, outputChannelMergerNodes, outputGainNode];\r\n            } else if (!nativeAudioWorkletNodeIsOwnedByContext) {\r\n                nativeAudioWorkletNode = new nativeAudioWorkletNodeConstructor(nativeOfflineAudioContext, name);\r\n            }\r\n\r\n            renderedNativeAudioNodes.set(\r\n                nativeOfflineAudioContext,\r\n                nativeOutputNodes === null ? nativeAudioWorkletNode : nativeOutputNodes[2]\r\n            );\r\n\r\n            if (nativeOutputNodes !== null) {\r\n                if (processedBufferPromise === null) {\r\n                    if (processorConstructor === undefined) {\r\n                        throw new Error('Missing the processor constructor.');\r\n                    }\r\n\r\n                    if (nativeOfflineAudioContextConstructor === null) {\r\n                        throw new Error('Missing the native OfflineAudioContext constructor.');\r\n                    }\r\n\r\n                    // Bug #47: The AudioDestinationNode in Safari gets not initialized correctly.\r\n                    const numberOfInputChannels = proxy.channelCount * proxy.numberOfInputs;\r\n                    const numberOfParameters =\r\n                        processorConstructor.parameterDescriptors === undefined ? 0 : processorConstructor.parameterDescriptors.length;\r\n                    const numberOfChannels = numberOfInputChannels + numberOfParameters;\r\n\r\n                    const renderBuffer = async () => {\r\n                        const partialOfflineAudioContext = new nativeOfflineAudioContextConstructor(\r\n                            numberOfChannels,\r\n                            // Ceil the length to the next full render quantum.\r\n                            // Bug #17: Safari does not yet expose the length.\r\n                            Math.ceil(proxy.context.length / 128) * 128,\r\n                            nativeOfflineAudioContext.sampleRate\r\n                        );\r\n                        const gainNodes: TNativeGainNode[] = [];\r\n                        const inputChannelSplitterNodes = [];\r\n\r\n                        for (let i = 0; i < options.numberOfInputs; i += 1) {\r\n                            gainNodes.push(\r\n                                createNativeGainNode(partialOfflineAudioContext, {\r\n                                    channelCount: options.channelCount,\r\n                                    channelCountMode: options.channelCountMode,\r\n                                    channelInterpretation: options.channelInterpretation,\r\n                                    gain: 1\r\n                                })\r\n                            );\r\n                            inputChannelSplitterNodes.push(\r\n                                createNativeChannelSplitterNode(partialOfflineAudioContext, {\r\n                                    channelCount: options.channelCount,\r\n                                    channelCountMode: 'explicit',\r\n                                    channelInterpretation: 'discrete',\r\n                                    numberOfOutputs: options.channelCount\r\n                                })\r\n                            );\r\n                        }\r\n\r\n                        const constantSourceNodes = await Promise.all(\r\n                            Array.from(proxy.parameters.values()).map(async (audioParam) => {\r\n                                const constantSourceNode = createNativeConstantSourceNode(partialOfflineAudioContext, {\r\n                                    channelCount: 1,\r\n                                    channelCountMode: 'explicit',\r\n                                    channelInterpretation: 'discrete',\r\n                                    offset: audioParam.value\r\n                                });\r\n\r\n                                await renderAutomation(partialOfflineAudioContext, audioParam, constantSourceNode.offset);\r\n\r\n                                return constantSourceNode;\r\n                            })\r\n                        );\r\n\r\n                        const inputChannelMergerNode = createNativeChannelMergerNode(partialOfflineAudioContext, {\r\n                            channelCount: 1,\r\n                            channelCountMode: 'explicit',\r\n                            channelInterpretation: 'speakers',\r\n                            numberOfInputs: Math.max(1, numberOfInputChannels + numberOfParameters)\r\n                        });\r\n\r\n                        for (let i = 0; i < options.numberOfInputs; i += 1) {\r\n                            gainNodes[i].connect(inputChannelSplitterNodes[i]);\r\n\r\n                            for (let j = 0; j < options.channelCount; j += 1) {\r\n                                inputChannelSplitterNodes[i].connect(inputChannelMergerNode, j, i * options.channelCount + j);\r\n                            }\r\n                        }\r\n\r\n                        for (const [index, constantSourceNode] of constantSourceNodes.entries()) {\r\n                            constantSourceNode.connect(inputChannelMergerNode, 0, numberOfInputChannels + index);\r\n                            constantSourceNode.start(0);\r\n                        }\r\n\r\n                        inputChannelMergerNode.connect(partialOfflineAudioContext.destination);\r\n\r\n                        await Promise.all(\r\n                            gainNodes.map((gainNode) => renderInputsOfAudioNode(proxy, partialOfflineAudioContext, gainNode))\r\n                        );\r\n\r\n                        return renderNativeOfflineAudioContext(partialOfflineAudioContext);\r\n                    };\r\n\r\n                    processedBufferPromise = processBuffer(\r\n                        proxy,\r\n                        numberOfChannels === 0 ? null : await renderBuffer(),\r\n                        nativeOfflineAudioContext,\r\n                        options,\r\n                        outputChannelCount,\r\n                        processorConstructor,\r\n                        exposeCurrentFrameAndCurrentTime\r\n                    );\r\n                }\r\n\r\n                const processedBuffer = await processedBufferPromise;\r\n                const audioBufferSourceNode = createNativeAudioBufferSourceNode(nativeOfflineAudioContext, {\r\n                    buffer: null,\r\n                    channelCount: 2,\r\n                    channelCountMode: 'max',\r\n                    channelInterpretation: 'speakers',\r\n                    loop: false,\r\n                    loopEnd: 0,\r\n                    loopStart: 0,\r\n                    playbackRate: 1\r\n                });\r\n                const [outputChannelSplitterNode, outputChannelMergerNodes, outputGainNode] = nativeOutputNodes;\r\n\r\n                if (processedBuffer !== null) {\r\n                    audioBufferSourceNode.buffer = processedBuffer;\r\n                    audioBufferSourceNode.start(0);\r\n                }\r\n\r\n                audioBufferSourceNode.connect(outputChannelSplitterNode);\r\n\r\n                for (let i = 0, outputChannelSplitterNodeOutput = 0; i < proxy.numberOfOutputs; i += 1) {\r\n                    const outputChannelMergerNode = outputChannelMergerNodes[i];\r\n\r\n                    for (let j = 0; j < outputChannelCount[i]; j += 1) {\r\n                        outputChannelSplitterNode.connect(outputChannelMergerNode, outputChannelSplitterNodeOutput + j, j);\r\n                    }\r\n\r\n                    outputChannelSplitterNodeOutput += outputChannelCount[i];\r\n                }\r\n\r\n                return outputGainNode;\r\n            }\r\n\r\n            if (!nativeAudioWorkletNodeIsOwnedByContext) {\r\n                for (const [nm, audioParam] of proxy.parameters.entries()) {\r\n                    await renderAutomation(\r\n                        nativeOfflineAudioContext,\r\n                        audioParam,\r\n                        // @todo The definition that TypeScript uses of the AudioParamMap is lacking many methods.\r\n                        <TNativeAudioParam>(<IReadOnlyMap<string, TNativeAudioParam>>nativeAudioWorkletNode.parameters).get(nm)\r\n                    );\r\n                }\r\n            } else {\r\n                for (const [nm, audioParam] of proxy.parameters.entries()) {\r\n                    await connectAudioParam(\r\n                        nativeOfflineAudioContext,\r\n                        audioParam,\r\n                        // @todo The definition that TypeScript uses of the AudioParamMap is lacking many methods.\r\n                        <TNativeAudioParam>(<IReadOnlyMap<string, TNativeAudioParam>>nativeAudioWorkletNode.parameters).get(nm)\r\n                    );\r\n                }\r\n            }\r\n\r\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioWorkletNode);\r\n\r\n            return nativeAudioWorkletNode;\r\n        };\r\n\r\n        return {\r\n            render(\r\n                proxy: IAudioWorkletNode<T>,\r\n                nativeOfflineAudioContext: TNativeOfflineAudioContext\r\n            ): Promise<TNativeAudioWorkletNode | TNativeGainNode> {\r\n                deleteUnrenderedAudioWorkletNode(nativeOfflineAudioContext, proxy);\r\n\r\n                const renderedNativeAudioWorkletNodeOrGainNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\r\n\r\n                if (renderedNativeAudioWorkletNodeOrGainNode !== undefined) {\r\n                    return Promise.resolve(renderedNativeAudioWorkletNodeOrGainNode);\r\n                }\r\n\r\n                return createAudioNode(proxy, nativeOfflineAudioContext);\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import {\r\n    IAnalyserNode,\r\n    IAudioBuffer,\r\n    IAudioBufferSourceNode,\r\n    IAudioNode,\r\n    IAudioWorklet,\r\n    IBaseAudioContext,\r\n    IBiquadFilterNode,\r\n    IConstantSourceNode,\r\n    IConvolverNode,\r\n    IDelayNode,\r\n    IDynamicsCompressorNode,\r\n    IGainNode,\r\n    IIIRFilterNode,\r\n    IOscillatorNode,\r\n    IPannerNode,\r\n    IPeriodicWave,\r\n    IPeriodicWaveConstraints,\r\n    IStereoPannerNode,\r\n    IWaveShaperNode,\r\n    IWorkletOptions\r\n} from '../interfaces';\r\nimport { TBaseAudioContextConstructorFactory, TContext, TDecodeErrorCallback, TDecodeSuccessCallback, TNativeContext } from '../types';\r\n\r\nexport const createBaseAudioContextConstructor: TBaseAudioContextConstructorFactory = (\r\n    addAudioWorkletModule,\r\n    analyserNodeConstructor,\r\n    audioBufferConstructor,\r\n    audioBufferSourceNodeConstructor,\r\n    biquadFilterNodeConstructor,\r\n    channelMergerNodeConstructor,\r\n    channelSplitterNodeConstructor,\r\n    constantSourceNodeConstructor,\r\n    convolverNodeConstructor,\r\n    decodeAudioData,\r\n    delayNodeConstructor,\r\n    dynamicsCompressorNodeConstructor,\r\n    gainNodeConstructor,\r\n    iIRFilterNodeConstructor,\r\n    minimalBaseAudioContextConstructor,\r\n    oscillatorNodeConstructor,\r\n    pannerNodeConstructor,\r\n    periodicWaveConstructor,\r\n    stereoPannerNodeConstructor,\r\n    waveShaperNodeConstructor\r\n) => {\r\n    return class BaseAudioContext<T extends TContext> extends minimalBaseAudioContextConstructor<T> implements IBaseAudioContext<T> {\r\n        private _audioWorklet: undefined | IAudioWorklet;\r\n\r\n        constructor(private _nativeContext: TNativeContext, numberOfChannels: number) {\r\n            super(_nativeContext, numberOfChannels);\r\n\r\n            this._audioWorklet =\r\n                addAudioWorkletModule === undefined\r\n                    ? undefined\r\n                    : {\r\n                          addModule: (moduleURL: string, options?: IWorkletOptions) => {\r\n                              return addAudioWorkletModule(<T>(<unknown>this), moduleURL, options);\r\n                          }\r\n                      };\r\n        }\r\n\r\n        get audioWorklet(): undefined | IAudioWorklet {\r\n            return this._audioWorklet;\r\n        }\r\n\r\n        public createAnalyser(): IAnalyserNode<T> {\r\n            return new analyserNodeConstructor(<T>(<unknown>this));\r\n        }\r\n\r\n        public createBiquadFilter(): IBiquadFilterNode<T> {\r\n            return new biquadFilterNodeConstructor(<T>(<unknown>this));\r\n        }\r\n\r\n        public createBuffer(numberOfChannels: number, length: number, sampleRate: number): IAudioBuffer {\r\n            return new audioBufferConstructor({ length, numberOfChannels, sampleRate });\r\n        }\r\n\r\n        public createBufferSource(): IAudioBufferSourceNode<T> {\r\n            return new audioBufferSourceNodeConstructor(<T>(<unknown>this));\r\n        }\r\n\r\n        public createChannelMerger(numberOfInputs = 6): IAudioNode<T> {\r\n            return new channelMergerNodeConstructor(<T>(<unknown>this), { numberOfInputs });\r\n        }\r\n\r\n        public createChannelSplitter(numberOfOutputs = 6): IAudioNode<T> {\r\n            return new channelSplitterNodeConstructor(<T>(<unknown>this), { numberOfOutputs });\r\n        }\r\n\r\n        public createConstantSource(): IConstantSourceNode<T> {\r\n            return new constantSourceNodeConstructor(<T>(<unknown>this));\r\n        }\r\n\r\n        public createConvolver(): IConvolverNode<T> {\r\n            return new convolverNodeConstructor(<T>(<unknown>this));\r\n        }\r\n\r\n        public createDelay(maxDelayTime = 1): IDelayNode<T> {\r\n            return new delayNodeConstructor(<T>(<unknown>this), { maxDelayTime });\r\n        }\r\n\r\n        public createDynamicsCompressor(): IDynamicsCompressorNode<T> {\r\n            return new dynamicsCompressorNodeConstructor(<T>(<unknown>this));\r\n        }\r\n\r\n        public createGain(): IGainNode<T> {\r\n            return new gainNodeConstructor(<T>(<unknown>this));\r\n        }\r\n\r\n        public createIIRFilter(feedforward: Iterable<number>, feedback: Iterable<number>): IIIRFilterNode<T> {\r\n            return new iIRFilterNodeConstructor(<T>(<unknown>this), { feedback, feedforward });\r\n        }\r\n\r\n        public createOscillator(): IOscillatorNode<T> {\r\n            return new oscillatorNodeConstructor(<T>(<unknown>this));\r\n        }\r\n\r\n        public createPanner(): IPannerNode<T> {\r\n            return new pannerNodeConstructor(<T>(<unknown>this));\r\n        }\r\n\r\n        public createPeriodicWave(\r\n            real: Iterable<number>,\r\n            imag: Iterable<number>,\r\n            constraints: Partial<IPeriodicWaveConstraints> = { disableNormalization: false }\r\n        ): IPeriodicWave {\r\n            return new periodicWaveConstructor(<T>(<unknown>this), { ...constraints, imag, real });\r\n        }\r\n\r\n        public createStereoPanner(): IStereoPannerNode<T> {\r\n            return new stereoPannerNodeConstructor(<T>(<unknown>this));\r\n        }\r\n\r\n        public createWaveShaper(): IWaveShaperNode<T> {\r\n            return new waveShaperNodeConstructor(<T>(<unknown>this));\r\n        }\r\n\r\n        public decodeAudioData(\r\n            audioData: ArrayBuffer,\r\n            successCallback?: TDecodeSuccessCallback,\r\n            errorCallback?: TDecodeErrorCallback\r\n        ): Promise<IAudioBuffer> {\r\n            return decodeAudioData(this._nativeContext, audioData).then(\r\n                (audioBuffer) => {\r\n                    if (typeof successCallback === 'function') {\r\n                        successCallback(audioBuffer);\r\n                    }\r\n\r\n                    return audioBuffer;\r\n                },\r\n                (err) => {\r\n                    if (typeof errorCallback === 'function') {\r\n                        errorCallback(err);\r\n                    }\r\n\r\n                    throw err;\r\n                }\r\n            );\r\n        }\r\n    };\r\n};\r\n", "import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\r\nimport { IAudioParam, IBiquadFilterNode, IBiquadFilterOptions } from '../interfaces';\r\nimport { TAudioNodeRenderer, TBiquadFilterNodeConstructorFactory, TBiquadFilterType, TContext, TNativeBiquadFilterNode } from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    Q: 1,\r\n    channelCount: 2,\r\n    channelCountMode: 'max',\r\n    channelInterpretation: 'speakers',\r\n    detune: 0,\r\n    frequency: 350,\r\n    gain: 0,\r\n    type: 'lowpass'\r\n} as const;\r\n\r\nexport const createBiquadFilterNodeConstructor: TBiquadFilterNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createAudioParam,\r\n    createBiquadFilterNodeRenderer,\r\n    createInvalidAccessError,\r\n    createNativeBiquadFilterNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    setAudioNodeTailTime\r\n) => {\r\n    return class BiquadFilterNode<T extends TContext> extends audioNodeConstructor<T> implements IBiquadFilterNode<T> {\r\n        private _detune: IAudioParam;\r\n\r\n        private _frequency: IAudioParam;\r\n\r\n        private _gain: IAudioParam;\r\n\r\n        private _nativeBiquadFilterNode: TNativeBiquadFilterNode;\r\n\r\n        private _Q: IAudioParam;\r\n\r\n        constructor(context: T, options?: Partial<IBiquadFilterOptions>) {\r\n            const nativeContext = getNativeContext(context);\r\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\r\n            const nativeBiquadFilterNode = createNativeBiquadFilterNode(nativeContext, mergedOptions);\r\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\r\n            const biquadFilterNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createBiquadFilterNodeRenderer() : null);\r\n\r\n            super(context, false, nativeBiquadFilterNode, biquadFilterNodeRenderer);\r\n\r\n            // Bug #80: Safari does not export the correct values for maxValue and minValue.\r\n            this._Q = createAudioParam(this, isOffline, nativeBiquadFilterNode.Q, MOST_POSITIVE_SINGLE_FLOAT, MOST_NEGATIVE_SINGLE_FLOAT);\r\n            // Bug #78: Firefox & Safari do not export the correct values for maxValue and minValue.\r\n            this._detune = createAudioParam(\r\n                this,\r\n                isOffline,\r\n                nativeBiquadFilterNode.detune,\r\n                1200 * Math.log2(MOST_POSITIVE_SINGLE_FLOAT),\r\n                -1200 * Math.log2(MOST_POSITIVE_SINGLE_FLOAT)\r\n            );\r\n            // Bug #77: Firefox & Safari do not export the correct value for minValue.\r\n            this._frequency = createAudioParam(this, isOffline, nativeBiquadFilterNode.frequency, context.sampleRate / 2, 0);\r\n            // Bug #79: Firefox & Safari do not export the correct values for maxValue and minValue.\r\n            this._gain = createAudioParam(\r\n                this,\r\n                isOffline,\r\n                nativeBiquadFilterNode.gain,\r\n                40 * Math.log10(MOST_POSITIVE_SINGLE_FLOAT),\r\n                MOST_NEGATIVE_SINGLE_FLOAT\r\n            );\r\n            this._nativeBiquadFilterNode = nativeBiquadFilterNode;\r\n\r\n            // @todo Determine a meaningful tail-time instead of just using one second.\r\n            setAudioNodeTailTime(this, 1);\r\n        }\r\n\r\n        get detune(): IAudioParam {\r\n            return this._detune;\r\n        }\r\n\r\n        get frequency(): IAudioParam {\r\n            return this._frequency;\r\n        }\r\n\r\n        get gain(): IAudioParam {\r\n            return this._gain;\r\n        }\r\n\r\n        get Q(): IAudioParam {\r\n            return this._Q;\r\n        }\r\n\r\n        get type(): TBiquadFilterType {\r\n            return this._nativeBiquadFilterNode.type;\r\n        }\r\n\r\n        set type(value) {\r\n            this._nativeBiquadFilterNode.type = value;\r\n        }\r\n\r\n        public getFrequencyResponse(frequencyHz: Float32Array, magResponse: Float32Array, phaseResponse: Float32Array): void {\r\n            // Bug #189: Safari does throw an InvalidStateError.\r\n            try {\r\n                this._nativeBiquadFilterNode.getFrequencyResponse(frequencyHz, magResponse, phaseResponse);\r\n            } catch (err) {\r\n                if (err.code === 11) {\r\n                    throw createInvalidAccessError();\r\n                }\r\n\r\n                throw err;\r\n            }\r\n\r\n            // Bug #68: Safari does not throw an error if the parameters differ in their length.\r\n            if (frequencyHz.length !== magResponse.length || magResponse.length !== phaseResponse.length) {\r\n                throw createInvalidAccessError();\r\n            }\r\n        }\r\n    };\r\n};\r\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\r\nimport { IBiquadFilterNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport { TBiquadFilterNodeRendererFactoryFactory, TNativeBiquadFilterNode, TNativeOfflineAudioContext } from '../types';\r\n\r\nexport const createBiquadFilterNodeRendererFactory: TBiquadFilterNodeRendererFactoryFactory = (\r\n    connectAudioParam,\r\n    createNativeBiquadFilterNode,\r\n    getNativeAudioNode,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode\r\n) => {\r\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\r\n        const renderedNativeBiquadFilterNodes = new WeakMap<TNativeOfflineAudioContext, TNativeBiquadFilterNode>();\r\n\r\n        const createBiquadFilterNode = async (proxy: IBiquadFilterNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\r\n            let nativeBiquadFilterNode = getNativeAudioNode<T, TNativeBiquadFilterNode>(proxy);\r\n\r\n            /*\r\n             * If the initially used nativeBiquadFilterNode was not constructed on the same OfflineAudioContext it needs to be created\r\n             * again.\r\n             */\r\n            const nativeBiquadFilterNodeIsOwnedByContext = isOwnedByContext(nativeBiquadFilterNode, nativeOfflineAudioContext);\r\n\r\n            if (!nativeBiquadFilterNodeIsOwnedByContext) {\r\n                const options = {\r\n                    Q: nativeBiquadFilterNode.Q.value,\r\n                    channelCount: nativeBiquadFilterNode.channelCount,\r\n                    channelCountMode: nativeBiquadFilterNode.channelCountMode,\r\n                    channelInterpretation: nativeBiquadFilterNode.channelInterpretation,\r\n                    detune: nativeBiquadFilterNode.detune.value,\r\n                    frequency: nativeBiquadFilterNode.frequency.value,\r\n                    gain: nativeBiquadFilterNode.gain.value,\r\n                    type: nativeBiquadFilterNode.type\r\n                };\r\n\r\n                nativeBiquadFilterNode = createNativeBiquadFilterNode(nativeOfflineAudioContext, options);\r\n            }\r\n\r\n            renderedNativeBiquadFilterNodes.set(nativeOfflineAudioContext, nativeBiquadFilterNode);\r\n\r\n            if (!nativeBiquadFilterNodeIsOwnedByContext) {\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.Q, nativeBiquadFilterNode.Q);\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.detune, nativeBiquadFilterNode.detune);\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.frequency, nativeBiquadFilterNode.frequency);\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.gain, nativeBiquadFilterNode.gain);\r\n            } else {\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.Q, nativeBiquadFilterNode.Q);\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.detune, nativeBiquadFilterNode.detune);\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.frequency, nativeBiquadFilterNode.frequency);\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.gain, nativeBiquadFilterNode.gain);\r\n            }\r\n\r\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeBiquadFilterNode);\r\n\r\n            return nativeBiquadFilterNode;\r\n        };\r\n\r\n        return {\r\n            render(proxy: IBiquadFilterNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeBiquadFilterNode> {\r\n                const renderedNativeBiquadFilterNode = renderedNativeBiquadFilterNodes.get(nativeOfflineAudioContext);\r\n\r\n                if (renderedNativeBiquadFilterNode !== undefined) {\r\n                    return Promise.resolve(renderedNativeBiquadFilterNode);\r\n                }\r\n\r\n                return createBiquadFilterNode(proxy, nativeOfflineAudioContext);\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import { TCacheTestResultFactory } from '../types';\r\n\r\nexport const createCacheTestResult: TCacheTestResultFactory = (ongoingTests, testResults) => {\r\n    return (tester, test) => {\r\n        const cachedTestResult = testResults.get(tester);\r\n\r\n        if (cachedTestResult !== undefined) {\r\n            return cachedTestResult;\r\n        }\r\n\r\n        const ongoingTest = ongoingTests.get(tester);\r\n\r\n        if (ongoingTest !== undefined) {\r\n            return ongoingTest;\r\n        }\r\n\r\n        try {\r\n            const synchronousTestResult = test();\r\n\r\n            if (synchronousTestResult instanceof Promise) {\r\n                ongoingTests.set(tester, synchronousTestResult);\r\n\r\n                return synchronousTestResult\r\n                    .catch(() => false)\r\n                    .then((finalTestResult) => {\r\n                        ongoingTests.delete(tester);\r\n                        testResults.set(tester, finalTestResult);\r\n\r\n                        return finalTestResult;\r\n                    });\r\n            }\r\n\r\n            testResults.set(tester, synchronousTestResult);\r\n\r\n            return synchronousTestResult;\r\n        } catch {\r\n            testResults.set(tester, false);\r\n\r\n            return false;\r\n        }\r\n    };\r\n};\r\n", "import { IChannelMergerOptions } from '../interfaces';\r\nimport { TAudioNodeRenderer, TChannelMergerNodeConstructorFactory, TContext } from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    channelCount: 1,\r\n    channelCountMode: 'explicit',\r\n    channelInterpretation: 'speakers',\r\n    numberOfInputs: 6\r\n} as const;\r\n\r\nexport const createChannelMergerNodeConstructor: TChannelMergerNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createChannelMergerNodeRenderer,\r\n    createNativeChannelMergerNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext\r\n) => {\r\n    return class ChannelMergerNode<T extends TContext> extends audioNodeConstructor<T> {\r\n        constructor(context: T, options?: Partial<IChannelMergerOptions>) {\r\n            const nativeContext = getNativeContext(context);\r\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\r\n            const nativeChannelMergerNode = createNativeChannelMergerNode(nativeContext, mergedOptions);\r\n            const channelMergerNodeRenderer = <TAudioNodeRenderer<T, this>>(\r\n                (isNativeOfflineAudioContext(nativeContext) ? createChannelMergerNodeRenderer() : null)\r\n            );\r\n\r\n            super(context, false, nativeChannelMergerNode, channelMergerNodeRenderer);\r\n        }\r\n    };\r\n};\r\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\r\nimport { IAudioNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport { TChannelMergerNodeRendererFactoryFactory, TNativeAudioNode, TNativeOfflineAudioContext } from '../types';\r\n\r\nexport const createChannelMergerNodeRendererFactory: TChannelMergerNodeRendererFactoryFactory = (\r\n    createNativeChannelMergerNode,\r\n    getNativeAudioNode,\r\n    renderInputsOfAudioNode\r\n) => {\r\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\r\n        const renderedNativeAudioNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAudioNode>();\r\n\r\n        const createAudioNode = async (proxy: IAudioNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\r\n            let nativeAudioNode = getNativeAudioNode<T, TNativeAudioNode>(proxy);\r\n\r\n            // If the initially used nativeAudioNode was not constructed on the same OfflineAudioContext it needs to be created again.\r\n            const nativeAudioNodeIsOwnedByContext = isOwnedByContext(nativeAudioNode, nativeOfflineAudioContext);\r\n\r\n            if (!nativeAudioNodeIsOwnedByContext) {\r\n                const options = {\r\n                    channelCount: nativeAudioNode.channelCount,\r\n                    channelCountMode: nativeAudioNode.channelCountMode,\r\n                    channelInterpretation: nativeAudioNode.channelInterpretation,\r\n                    numberOfInputs: nativeAudioNode.numberOfInputs\r\n                };\r\n\r\n                nativeAudioNode = createNativeChannelMergerNode(nativeOfflineAudioContext, options);\r\n            }\r\n\r\n            renderedNativeAudioNodes.set(nativeOfflineAudioContext, nativeAudioNode);\r\n\r\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioNode);\r\n\r\n            return nativeAudioNode;\r\n        };\r\n\r\n        return {\r\n            render(proxy: IAudioNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeAudioNode> {\r\n                const renderedNativeAudioNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\r\n\r\n                if (renderedNativeAudioNode !== undefined) {\r\n                    return Promise.resolve(renderedNativeAudioNode);\r\n                }\r\n\r\n                return createAudioNode(proxy, nativeOfflineAudioContext);\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import { IChannelSplitterOptions } from '../interfaces';\r\nimport { TAudioNodeRenderer, TChannelSplitterNodeConstructorFactory, TContext } from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    channelCount: 6,\r\n    channelCountMode: 'explicit',\r\n    channelInterpretation: 'discrete',\r\n    numberOfOutputs: 6\r\n} as const;\r\n\r\nexport const createChannelSplitterNodeConstructor: TChannelSplitterNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createChannelSplitterNodeRenderer,\r\n    createNativeChannelSplitterNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    sanitizeChannelSplitterOptions\r\n) => {\r\n    return class ChannelSplitterNode<T extends TContext> extends audioNodeConstructor<T> {\r\n        constructor(context: T, options?: Partial<IChannelSplitterOptions>) {\r\n            const nativeContext = getNativeContext(context);\r\n            const mergedOptions = sanitizeChannelSplitterOptions({ ...DEFAULT_OPTIONS, ...options });\r\n            const nativeChannelSplitterNode = createNativeChannelSplitterNode(nativeContext, mergedOptions);\r\n            const channelSplitterNodeRenderer = <TAudioNodeRenderer<T, this>>(\r\n                (isNativeOfflineAudioContext(nativeContext) ? createChannelSplitterNodeRenderer() : null)\r\n            );\r\n\r\n            super(context, false, nativeChannelSplitterNode, channelSplitterNodeRenderer);\r\n        }\r\n    };\r\n};\r\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\r\nimport { IAudioNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport { TChannelSplitterNodeRendererFactoryFactory, TNativeAudioNode, TNativeOfflineAudioContext } from '../types';\r\n\r\nexport const createChannelSplitterNodeRendererFactory: TChannelSplitterNodeRendererFactoryFactory = (\r\n    createNativeChannelSplitterNode,\r\n    getNativeAudioNode,\r\n    renderInputsOfAudioNode\r\n) => {\r\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\r\n        const renderedNativeAudioNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAudioNode>();\r\n\r\n        const createAudioNode = async (proxy: IAudioNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\r\n            let nativeAudioNode = getNativeAudioNode<T, TNativeAudioNode>(proxy);\r\n\r\n            // If the initially used nativeAudioNode was not constructed on the same OfflineAudioContext it needs to be created again.\r\n            const nativeAudioNodeIsOwnedByContext = isOwnedByContext(nativeAudioNode, nativeOfflineAudioContext);\r\n\r\n            if (!nativeAudioNodeIsOwnedByContext) {\r\n                const options = {\r\n                    channelCount: nativeAudioNode.channelCount,\r\n                    channelCountMode: nativeAudioNode.channelCountMode,\r\n                    channelInterpretation: nativeAudioNode.channelInterpretation,\r\n                    numberOfOutputs: nativeAudioNode.numberOfOutputs\r\n                };\r\n\r\n                nativeAudioNode = createNativeChannelSplitterNode(nativeOfflineAudioContext, options);\r\n            }\r\n\r\n            renderedNativeAudioNodes.set(nativeOfflineAudioContext, nativeAudioNode);\r\n\r\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioNode);\r\n\r\n            return nativeAudioNode;\r\n        };\r\n\r\n        return {\r\n            render(proxy: IAudioNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeAudioNode> {\r\n                const renderedNativeAudioNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\r\n\r\n                if (renderedNativeAudioNode !== undefined) {\r\n                    return Promise.resolve(renderedNativeAudioNode);\r\n                }\r\n\r\n                return createAudioNode(proxy, nativeOfflineAudioContext);\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import { TConnectAudioParamFactory } from '../types';\r\n\r\nexport const createConnectAudioParam: TConnectAudioParamFactory = (renderInputsOfAudioParam) => {\r\n    return (nativeOfflineAudioContext, audioParam, nativeAudioParam) => {\r\n        return renderInputsOfAudioParam(audioParam, nativeOfflineAudioContext, nativeAudioParam);\r\n    };\r\n};\r\n", "import { isNativeAudioNode } from '../guards/native-audio-node';\r\nimport { TConnectMultipleOutputsFactory } from '../types';\r\n\r\nexport const createConnectMultipleOutputs: TConnectMultipleOutputsFactory = (createIndexSizeError) => {\r\n    return (outputAudioNodes, destination, output = 0, input = 0) => {\r\n        const outputAudioNode = outputAudioNodes[output];\r\n\r\n        if (outputAudioNode === undefined) {\r\n            throw createIndexSizeError();\r\n        }\r\n\r\n        if (isNativeAudioNode(destination)) {\r\n            return outputAudioNode.connect(destination, 0, input);\r\n        }\r\n\r\n        return outputAudioNode.connect(destination, 0);\r\n    };\r\n};\r\n", "import { TConnectedNativeAudioBufferSourceNodeFactoryFactory } from '../types';\r\n\r\nexport const createConnectedNativeAudioBufferSourceNodeFactory: TConnectedNativeAudioBufferSourceNodeFactoryFactory = (\r\n    createNativeAudioBufferSourceNode\r\n) => {\r\n    return (nativeContext, nativeAudioNode) => {\r\n        const nativeAudioBufferSourceNode = createNativeAudioBufferSourceNode(nativeContext, {\r\n            buffer: null,\r\n            channelCount: 2,\r\n            channelCountMode: 'max',\r\n            channelInterpretation: 'speakers',\r\n            loop: false,\r\n            loopEnd: 0,\r\n            loopStart: 0,\r\n            playbackRate: 1\r\n        });\r\n        const nativeAudioBuffer = nativeContext.createBuffer(1, 2, 44100);\r\n\r\n        nativeAudioBufferSourceNode.buffer = nativeAudioBuffer;\r\n        nativeAudioBufferSourceNode.loop = true;\r\n\r\n        nativeAudioBufferSourceNode.connect(nativeAudioNode);\r\n        nativeAudioBufferSourceNode.start();\r\n\r\n        return () => {\r\n            nativeAudioBufferSourceNode.stop();\r\n            nativeAudioBufferSourceNode.disconnect(nativeAudioNode);\r\n        };\r\n    };\r\n};\r\n", "import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\r\nimport { isActiveAudioNode } from '../helpers/is-active-audio-node';\r\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\r\nimport { setInternalStateToPassive } from '../helpers/set-internal-state-to-passive';\r\nimport { IAudioParam, IAudioScheduledSourceNodeEventMap, IConstantSourceNode, IConstantSourceOptions } from '../interfaces';\r\nimport {\r\n    TConstantSourceNodeConstructorFactory,\r\n    TConstantSourceNodeRenderer,\r\n    TContext,\r\n    TEventHandler,\r\n    TNativeConstantSourceNode\r\n} from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    channelCount: 2,\r\n    channelCountMode: 'max',\r\n    channelInterpretation: 'speakers',\r\n    offset: 1\r\n} as const;\r\n\r\nexport const createConstantSourceNodeConstructor: TConstantSourceNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createAudioParam,\r\n    createConstantSourceNodeRendererFactory,\r\n    createNativeConstantSourceNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    wrapEventListener\r\n) => {\r\n    return class ConstantSourceNode<T extends TContext>\r\n        extends audioNodeConstructor<T, IAudioScheduledSourceNodeEventMap>\r\n        implements IConstantSourceNode<T>\r\n    {\r\n        private _constantSourceNodeRenderer: TConstantSourceNodeRenderer<T>;\r\n\r\n        private _nativeConstantSourceNode: TNativeConstantSourceNode;\r\n\r\n        private _offset: IAudioParam;\r\n\r\n        private _onended: null | TEventHandler<this>;\r\n\r\n        constructor(context: T, options?: Partial<IConstantSourceOptions>) {\r\n            const nativeContext = getNativeContext(context);\r\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\r\n            const nativeConstantSourceNode = createNativeConstantSourceNode(nativeContext, mergedOptions);\r\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\r\n            const constantSourceNodeRenderer = <TConstantSourceNodeRenderer<T>>(\r\n                (isOffline ? createConstantSourceNodeRendererFactory() : null)\r\n            );\r\n\r\n            super(context, false, nativeConstantSourceNode, constantSourceNodeRenderer);\r\n\r\n            this._constantSourceNodeRenderer = constantSourceNodeRenderer;\r\n            this._nativeConstantSourceNode = nativeConstantSourceNode;\r\n            /*\r\n             * Bug #62 & #74: Safari does not support ConstantSourceNodes and does not export the correct values for maxValue and minValue\r\n             * for GainNodes.\r\n             */\r\n            this._offset = createAudioParam(\r\n                this,\r\n                isOffline,\r\n                nativeConstantSourceNode.offset,\r\n                MOST_POSITIVE_SINGLE_FLOAT,\r\n                MOST_NEGATIVE_SINGLE_FLOAT\r\n            );\r\n            this._onended = null;\r\n        }\r\n\r\n        get offset(): IAudioParam {\r\n            return this._offset;\r\n        }\r\n\r\n        get onended(): null | TEventHandler<this> {\r\n            return this._onended;\r\n        }\r\n\r\n        set onended(value) {\r\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, value) : null;\r\n\r\n            this._nativeConstantSourceNode.onended = wrappedListener;\r\n\r\n            const nativeOnEnded = this._nativeConstantSourceNode.onended;\r\n\r\n            this._onended = nativeOnEnded !== null && nativeOnEnded === wrappedListener ? value : nativeOnEnded;\r\n        }\r\n\r\n        public start(when = 0): void {\r\n            this._nativeConstantSourceNode.start(when);\r\n\r\n            if (this._constantSourceNodeRenderer !== null) {\r\n                this._constantSourceNodeRenderer.start = when;\r\n            }\r\n\r\n            if (this.context.state !== 'closed') {\r\n                setInternalStateToActive(this);\r\n\r\n                const resetInternalStateToPassive = () => {\r\n                    this._nativeConstantSourceNode.removeEventListener('ended', resetInternalStateToPassive);\r\n\r\n                    if (isActiveAudioNode(this)) {\r\n                        setInternalStateToPassive(this);\r\n                    }\r\n                };\r\n\r\n                this._nativeConstantSourceNode.addEventListener('ended', resetInternalStateToPassive);\r\n            }\r\n        }\r\n\r\n        public stop(when = 0): void {\r\n            this._nativeConstantSourceNode.stop(when);\r\n\r\n            if (this._constantSourceNodeRenderer !== null) {\r\n                this._constantSourceNodeRenderer.stop = when;\r\n            }\r\n        }\r\n    };\r\n};\r\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\r\nimport { IConstantSourceNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport { TConstantSourceNodeRendererFactoryFactory, TNativeConstantSourceNode, TNativeOfflineAudioContext } from '../types';\r\n\r\nexport const createConstantSourceNodeRendererFactory: TConstantSourceNodeRendererFactoryFactory = (\r\n    connectAudioParam,\r\n    createNativeConstantSourceNode,\r\n    getNativeAudioNode,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode\r\n) => {\r\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\r\n        const renderedNativeConstantSourceNodes = new WeakMap<TNativeOfflineAudioContext, TNativeConstantSourceNode>();\r\n\r\n        let start: null | number = null;\r\n        let stop: null | number = null;\r\n\r\n        const createConstantSourceNode = async (proxy: IConstantSourceNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\r\n            let nativeConstantSourceNode = getNativeAudioNode<T, TNativeConstantSourceNode>(proxy);\r\n\r\n            /*\r\n             * If the initially used nativeConstantSourceNode was not constructed on the same OfflineAudioContext it needs to be created\r\n             * again.\r\n             */\r\n            const nativeConstantSourceNodeIsOwnedByContext = isOwnedByContext(nativeConstantSourceNode, nativeOfflineAudioContext);\r\n\r\n            if (!nativeConstantSourceNodeIsOwnedByContext) {\r\n                const options = {\r\n                    channelCount: nativeConstantSourceNode.channelCount,\r\n                    channelCountMode: nativeConstantSourceNode.channelCountMode,\r\n                    channelInterpretation: nativeConstantSourceNode.channelInterpretation,\r\n                    offset: nativeConstantSourceNode.offset.value\r\n                };\r\n\r\n                nativeConstantSourceNode = createNativeConstantSourceNode(nativeOfflineAudioContext, options);\r\n\r\n                if (start !== null) {\r\n                    nativeConstantSourceNode.start(start);\r\n                }\r\n\r\n                if (stop !== null) {\r\n                    nativeConstantSourceNode.stop(stop);\r\n                }\r\n            }\r\n\r\n            renderedNativeConstantSourceNodes.set(nativeOfflineAudioContext, nativeConstantSourceNode);\r\n\r\n            if (!nativeConstantSourceNodeIsOwnedByContext) {\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.offset, nativeConstantSourceNode.offset);\r\n            } else {\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.offset, nativeConstantSourceNode.offset);\r\n            }\r\n\r\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeConstantSourceNode);\r\n\r\n            return nativeConstantSourceNode;\r\n        };\r\n\r\n        return {\r\n            set start(value: number) {\r\n                start = value;\r\n            },\r\n            set stop(value: number) {\r\n                stop = value;\r\n            },\r\n            render(\r\n                proxy: IConstantSourceNode<T>,\r\n                nativeOfflineAudioContext: TNativeOfflineAudioContext\r\n            ): Promise<TNativeConstantSourceNode> {\r\n                const renderedNativeConstantSourceNode = renderedNativeConstantSourceNodes.get(nativeOfflineAudioContext);\r\n\r\n                if (renderedNativeConstantSourceNode !== undefined) {\r\n                    return Promise.resolve(renderedNativeConstantSourceNode);\r\n                }\r\n\r\n                return createConstantSourceNode(proxy, nativeOfflineAudioContext);\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import { TConvertNumberToUnsignedLongFactory } from '../types';\r\n\r\nexport const createConvertNumberToUnsignedLong: TConvertNumberToUnsignedLongFactory = (unit32Array) => {\r\n    return (value) => {\r\n        unit32Array[0] = value;\r\n\r\n        return unit32Array[0];\r\n    };\r\n};\r\n", "import { IConvolverNode, IConvolverOptions } from '../interfaces';\r\nimport { TAnyAudioBuffer, TAudioNodeRenderer, TContext, TConvolverNodeConstructorFactory, TNativeConvolverNode } from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    buffer: null,\r\n    channelCount: 2,\r\n    channelCountMode: 'clamped-max',\r\n    channelInterpretation: 'speakers',\r\n    disableNormalization: false\r\n} as const;\r\n\r\nexport const createConvolverNodeConstructor: TConvolverNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createConvolverNodeRenderer,\r\n    createNativeConvolverNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    setAudioNodeTailTime\r\n) => {\r\n    return class ConvolverNode<T extends TContext> extends audioNodeConstructor<T> implements IConvolverNode<T> {\r\n        private _isBufferNullified: boolean;\r\n\r\n        private _nativeConvolverNode: TNativeConvolverNode;\r\n\r\n        constructor(context: T, options?: Partial<IConvolverOptions>) {\r\n            const nativeContext = getNativeContext(context);\r\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\r\n            const nativeConvolverNode = createNativeConvolverNode(nativeContext, mergedOptions);\r\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\r\n            const convolverNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createConvolverNodeRenderer() : null);\r\n\r\n            super(context, false, nativeConvolverNode, convolverNodeRenderer);\r\n\r\n            this._isBufferNullified = false;\r\n            this._nativeConvolverNode = nativeConvolverNode;\r\n\r\n            if (mergedOptions.buffer !== null) {\r\n                setAudioNodeTailTime(this, mergedOptions.buffer.duration);\r\n            }\r\n        }\r\n\r\n        get buffer(): null | TAnyAudioBuffer {\r\n            if (this._isBufferNullified) {\r\n                return null;\r\n            }\r\n\r\n            return this._nativeConvolverNode.buffer;\r\n        }\r\n\r\n        set buffer(value) {\r\n            this._nativeConvolverNode.buffer = value;\r\n\r\n            // Bug #115: Safari does not allow to set the buffer to null.\r\n            if (value === null && this._nativeConvolverNode.buffer !== null) {\r\n                const nativeContext = this._nativeConvolverNode.context;\r\n\r\n                this._nativeConvolverNode.buffer = nativeContext.createBuffer(1, 1, nativeContext.sampleRate);\r\n                this._isBufferNullified = true;\r\n\r\n                setAudioNodeTailTime(this, 0);\r\n            } else {\r\n                this._isBufferNullified = false;\r\n\r\n                setAudioNodeTailTime(this, this._nativeConvolverNode.buffer === null ? 0 : this._nativeConvolverNode.buffer.duration);\r\n            }\r\n        }\r\n\r\n        get normalize(): boolean {\r\n            return this._nativeConvolverNode.normalize;\r\n        }\r\n\r\n        set normalize(value) {\r\n            this._nativeConvolverNode.normalize = value;\r\n        }\r\n    };\r\n};\r\n", "import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\r\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\r\nimport { IConvolverNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport { TConvolverNodeRendererFactoryFactory, TNativeConvolverNode, TNativeOfflineAudioContext } from '../types';\r\n\r\nexport const createConvolverNodeRendererFactory: TConvolverNodeRendererFactoryFactory = (\r\n    createNativeConvolverNode,\r\n    getNativeAudioNode,\r\n    renderInputsOfAudioNode\r\n) => {\r\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\r\n        const renderedNativeConvolverNodes = new WeakMap<TNativeOfflineAudioContext, TNativeConvolverNode>();\r\n\r\n        const createConvolverNode = async (proxy: IConvolverNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\r\n            let nativeConvolverNode = getNativeAudioNode<T, TNativeConvolverNode>(proxy);\r\n\r\n            // If the initially used nativeConvolverNode was not constructed on the same OfflineAudioContext it needs to be created again.\r\n            const nativeConvolverNodeIsOwnedByContext = isOwnedByContext(nativeConvolverNode, nativeOfflineAudioContext);\r\n\r\n            if (!nativeConvolverNodeIsOwnedByContext) {\r\n                const options = {\r\n                    buffer: nativeConvolverNode.buffer,\r\n                    channelCount: nativeConvolverNode.channelCount,\r\n                    channelCountMode: nativeConvolverNode.channelCountMode,\r\n                    channelInterpretation: nativeConvolverNode.channelInterpretation,\r\n                    disableNormalization: !nativeConvolverNode.normalize\r\n                };\r\n\r\n                nativeConvolverNode = createNativeConvolverNode(nativeOfflineAudioContext, options);\r\n            }\r\n\r\n            renderedNativeConvolverNodes.set(nativeOfflineAudioContext, nativeConvolverNode);\r\n\r\n            if (isNativeAudioNodeFaker(nativeConvolverNode)) {\r\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeConvolverNode.inputs[0]);\r\n            } else {\r\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeConvolverNode);\r\n            }\r\n\r\n            return nativeConvolverNode;\r\n        };\r\n\r\n        return {\r\n            render(proxy: IConvolverNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeConvolverNode> {\r\n                const renderedNativeConvolverNode = renderedNativeConvolverNodes.get(nativeOfflineAudioContext);\r\n\r\n                if (renderedNativeConvolverNode !== undefined) {\r\n                    return Promise.resolve(renderedNativeConvolverNode);\r\n                }\r\n\r\n                return createConvolverNode(proxy, nativeOfflineAudioContext);\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import { TCreateNativeOfflineAudioContextFactory } from '../types';\r\n\r\nexport const createCreateNativeOfflineAudioContext: TCreateNativeOfflineAudioContextFactory = (\r\n    createNotSupportedError,\r\n    nativeOfflineAudioContextConstructor\r\n) => {\r\n    return (numberOfChannels, length, sampleRate) => {\r\n        if (nativeOfflineAudioContextConstructor === null) {\r\n            throw new Error('Missing the native OfflineAudioContext constructor.');\r\n        }\r\n\r\n        try {\r\n            return new nativeOfflineAudioContextConstructor(numberOfChannels, length, sampleRate);\r\n        } catch (err) {\r\n            // Bug #143, #144 & #146: Safari throws a SyntaxError when numberOfChannels, length or sampleRate are invalid.\r\n            if (err.name === 'SyntaxError') {\r\n                throw createNotSupportedError();\r\n            }\r\n\r\n            throw err;\r\n        }\r\n    };\r\n};\r\n", "import { TDataCloneErrorFactory } from '../types';\r\n\r\nexport const createDataCloneError: TDataCloneErrorFactory = () => new DOMException('', 'DataCloneError');\r\n", "export const detachArrayBuffer = (arrayBuffer: ArrayBuffer): Promise<void> => {\r\n    const { port1, port2 } = new MessageChannel();\r\n\r\n    return new Promise((resolve) => {\r\n        const closeAndResolve = () => {\r\n            port2.onmessage = null;\r\n\r\n            port1.close();\r\n            port2.close();\r\n\r\n            resolve();\r\n        };\r\n\r\n        port2.onmessage = () => closeAndResolve();\r\n\r\n        try {\r\n            port1.postMessage(arrayBuffer, [arrayBuffer]);\r\n        } catch {\r\n            // Ignore errors.\r\n        } finally {\r\n            closeAndResolve();\r\n        }\r\n    });\r\n};\r\n", "import { detachArrayBuffer } from '../helpers/detach-array-buffer';\r\nimport { wrapAudioBufferGetChannelDataMethod } from '../helpers/wrap-audio-buffer-get-channel-data-method';\r\nimport { TDecodeAudioDataFactory } from '../types';\r\n\r\nexport const createDecodeAudioData: TDecodeAudioDataFactory = (\r\n    audioBufferStore,\r\n    cacheTestResult,\r\n    createDataCloneError,\r\n    createEncodingError,\r\n    detachedArrayBuffers,\r\n    getNativeContext,\r\n    isNativeContext,\r\n    testAudioBufferCopyChannelMethodsOutOfBoundsSupport,\r\n    testPromiseSupport,\r\n    wrapAudioBufferCopyChannelMethods,\r\n    wrapAudioBufferCopyChannelMethodsOutOfBounds\r\n) => {\r\n    return (anyContext, audioData) => {\r\n        const nativeContext = isNativeContext(anyContext) ? anyContext : getNativeContext(anyContext);\r\n\r\n        // Bug #43: Only Chrome and Edge do throw a DataCloneError.\r\n        if (detachedArrayBuffers.has(audioData)) {\r\n            const err = createDataCloneError();\r\n\r\n            return Promise.reject(err);\r\n        }\r\n\r\n        // The audioData parameter maybe of a type which can't be added to a WeakSet.\r\n        try {\r\n            detachedArrayBuffers.add(audioData);\r\n        } catch {\r\n            // Ignore errors.\r\n        }\r\n\r\n        // Bug #21: Safari does not support promises yet.\r\n        if (cacheTestResult(testPromiseSupport, () => testPromiseSupport(nativeContext))) {\r\n            return nativeContext.decodeAudioData(audioData).then((audioBuffer) => {\r\n                // Bug #133: Safari does neuter the ArrayBuffer.\r\n                detachArrayBuffer(audioData).catch(() => {\r\n                    // Ignore errors.\r\n                });\r\n\r\n                // Bug #157: Firefox does not allow the bufferOffset to be out-of-bounds.\r\n                if (\r\n                    !cacheTestResult(testAudioBufferCopyChannelMethodsOutOfBoundsSupport, () =>\r\n                        testAudioBufferCopyChannelMethodsOutOfBoundsSupport(audioBuffer)\r\n                    )\r\n                ) {\r\n                    wrapAudioBufferCopyChannelMethodsOutOfBounds(audioBuffer);\r\n                }\r\n\r\n                audioBufferStore.add(audioBuffer);\r\n\r\n                return audioBuffer;\r\n            });\r\n        }\r\n\r\n        // Bug #21: Safari does not return a Promise yet.\r\n        return new Promise((resolve, reject) => {\r\n            const complete = async () => {\r\n                // Bug #133: Safari does neuter the ArrayBuffer.\r\n                try {\r\n                    await detachArrayBuffer(audioData);\r\n                } catch {\r\n                    // Ignore errors.\r\n                }\r\n            };\r\n\r\n            const fail = (err: DOMException | Error) => {\r\n                reject(err);\r\n                complete();\r\n            };\r\n\r\n            // Bug #26: Safari throws a synchronous error.\r\n            try {\r\n                // Bug #1: Safari requires a successCallback.\r\n                nativeContext.decodeAudioData(\r\n                    audioData,\r\n                    (audioBuffer) => {\r\n                        // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\r\n                        // Bug #100: Safari does throw a wrong error when calling getChannelData() with an out-of-bounds value.\r\n                        if (typeof audioBuffer.copyFromChannel !== 'function') {\r\n                            wrapAudioBufferCopyChannelMethods(audioBuffer);\r\n                            wrapAudioBufferGetChannelDataMethod(audioBuffer);\r\n                        }\r\n\r\n                        audioBufferStore.add(audioBuffer);\r\n\r\n                        complete().then(() => resolve(audioBuffer));\r\n                    },\r\n                    (err: DOMException | Error) => {\r\n                        // Bug #4: Safari returns null instead of an error.\r\n                        if (err === null) {\r\n                            fail(createEncodingError());\r\n                        } else {\r\n                            fail(err);\r\n                        }\r\n                    }\r\n                );\r\n            } catch (err) {\r\n                fail(err);\r\n            }\r\n        });\r\n    };\r\n};\r\n", "import { isAudioNodeOutputConnection } from '../guards/audio-node-output-connection';\r\nimport { TDecrementCycleCounterFactory } from '../types';\r\n\r\nexport const createDecrementCycleCounter: TDecrementCycleCounterFactory = (\r\n    connectNativeAudioNodeToNativeAudioNode,\r\n    cycleCounters,\r\n    getAudioNodeConnections,\r\n    getNativeAudioNode,\r\n    getNativeAudioParam,\r\n    getNativeContext,\r\n    isActiveAudioNode,\r\n    isNativeOfflineAudioContext\r\n) => {\r\n    return (audioNode, count) => {\r\n        const cycleCounter = cycleCounters.get(audioNode);\r\n\r\n        if (cycleCounter === undefined) {\r\n            throw new Error('Missing the expected cycle count.');\r\n        }\r\n\r\n        const nativeContext = getNativeContext(audioNode.context);\r\n        const isOffline = isNativeOfflineAudioContext(nativeContext);\r\n\r\n        if (cycleCounter === count) {\r\n            cycleCounters.delete(audioNode);\r\n\r\n            if (!isOffline && isActiveAudioNode(audioNode)) {\r\n                const nativeSourceAudioNode = getNativeAudioNode(audioNode);\r\n                const { outputs } = getAudioNodeConnections(audioNode);\r\n\r\n                for (const output of outputs) {\r\n                    if (isAudioNodeOutputConnection(output)) {\r\n                        const nativeDestinationAudioNode = getNativeAudioNode(output[0]);\r\n\r\n                        connectNativeAudioNodeToNativeAudioNode(nativeSourceAudioNode, nativeDestinationAudioNode, output[1], output[2]);\r\n                    } else {\r\n                        const nativeDestinationAudioParam = getNativeAudioParam(output[0]);\r\n\r\n                        nativeSourceAudioNode.connect(nativeDestinationAudioParam, output[1]);\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            cycleCounters.set(audioNode, cycleCounter - count);\r\n        }\r\n    };\r\n};\r\n", "import { IAudioParam, IDelayNode, IDelayOptions } from '../interfaces';\r\nimport { TAudioNodeRenderer, TContext, TDelayNodeConstructorFactory } from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    channelCount: 2,\r\n    channelCountMode: 'max',\r\n    channelInterpretation: 'speakers',\r\n    delayTime: 0,\r\n    maxDelayTime: 1\r\n} as const;\r\n\r\nexport const createDelayNodeConstructor: TDelayNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createAudioParam,\r\n    createDelayNodeRenderer,\r\n    createNativeDelayNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    setAudioNodeTailTime\r\n) => {\r\n    return class DelayNode<T extends TContext> extends audioNodeConstructor<T> implements IDelayNode<T> {\r\n        private _delayTime: IAudioParam;\r\n\r\n        constructor(context: T, options?: Partial<IDelayOptions>) {\r\n            const nativeContext = getNativeContext(context);\r\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\r\n            const nativeDelayNode = createNativeDelayNode(nativeContext, mergedOptions);\r\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\r\n            const delayNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createDelayNodeRenderer(mergedOptions.maxDelayTime) : null);\r\n\r\n            super(context, false, nativeDelayNode, delayNodeRenderer);\r\n\r\n            this._delayTime = createAudioParam(this, isOffline, nativeDelayNode.delayTime);\r\n\r\n            setAudioNodeTailTime(this, mergedOptions.maxDelayTime);\r\n        }\r\n\r\n        get delayTime(): IAudioParam {\r\n            return this._delayTime;\r\n        }\r\n    };\r\n};\r\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\r\nimport { IDelayNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport { TDelayNodeRendererFactoryFactory, TNativeDelayNode, TNativeOfflineAudioContext } from '../types';\r\n\r\nexport const createDelayNodeRendererFactory: TDelayNodeRendererFactoryFactory = (\r\n    connectAudioParam,\r\n    createNativeDelayNode,\r\n    getNativeAudioNode,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode\r\n) => {\r\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>(maxDelayTime: number) => {\r\n        const renderedNativeDelayNodes = new WeakMap<TNativeOfflineAudioContext, TNativeDelayNode>();\r\n\r\n        const createDelayNode = async (proxy: IDelayNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\r\n            let nativeDelayNode = getNativeAudioNode<T, TNativeDelayNode>(proxy);\r\n\r\n            // If the initially used nativeDelayNode was not constructed on the same OfflineAudioContext it needs to be created again.\r\n            const nativeDelayNodeIsOwnedByContext = isOwnedByContext(nativeDelayNode, nativeOfflineAudioContext);\r\n\r\n            if (!nativeDelayNodeIsOwnedByContext) {\r\n                const options = {\r\n                    channelCount: nativeDelayNode.channelCount,\r\n                    channelCountMode: nativeDelayNode.channelCountMode,\r\n                    channelInterpretation: nativeDelayNode.channelInterpretation,\r\n                    delayTime: nativeDelayNode.delayTime.value,\r\n                    maxDelayTime\r\n                };\r\n\r\n                nativeDelayNode = createNativeDelayNode(nativeOfflineAudioContext, options);\r\n            }\r\n\r\n            renderedNativeDelayNodes.set(nativeOfflineAudioContext, nativeDelayNode);\r\n\r\n            if (!nativeDelayNodeIsOwnedByContext) {\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.delayTime, nativeDelayNode.delayTime);\r\n            } else {\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.delayTime, nativeDelayNode.delayTime);\r\n            }\r\n\r\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeDelayNode);\r\n\r\n            return nativeDelayNode;\r\n        };\r\n\r\n        return {\r\n            render(proxy: IDelayNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeDelayNode> {\r\n                const renderedNativeDelayNode = renderedNativeDelayNodes.get(nativeOfflineAudioContext);\r\n\r\n                if (renderedNativeDelayNode !== undefined) {\r\n                    return Promise.resolve(renderedNativeDelayNode);\r\n                }\r\n\r\n                return createDelayNode(proxy, nativeOfflineAudioContext);\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import { TDeleteActiveInputConnectionToAudioNodeFactory } from '../types';\r\n\r\nexport const createDeleteActiveInputConnectionToAudioNode: TDeleteActiveInputConnectionToAudioNodeFactory = (pickElementFromSet) => {\r\n    return (activeInputs, source, output, input) => {\r\n        return pickElementFromSet(\r\n            activeInputs[input],\r\n            (activeInputConnection) => activeInputConnection[0] === source && activeInputConnection[1] === output\r\n        );\r\n    };\r\n};\r\n", "import { TDeleteUnrenderedAudioWorkletNodeFactory } from '../types';\r\n\r\nexport const createDeleteUnrenderedAudioWorkletNode: TDeleteUnrenderedAudioWorkletNodeFactory = (getUnrenderedAudioWorkletNodes) => {\r\n    return (nativeContext, audioWorkletNode) => {\r\n        getUnrenderedAudioWorkletNodes(nativeContext).delete(audioWorkletNode);\r\n    };\r\n};\r\n", "import { IAudioNode, IDelayNode } from '../interfaces';\r\nimport { TContext } from '../types';\r\n\r\nexport const isDelayNode = <T extends TContext>(audioNode: IAudioNode<T>): audioNode is IDelayNode<T> => {\r\n    return 'delayTime' in audioNode;\r\n};\r\n", "import { isAudioNode } from '../guards/audio-node';\r\nimport { isDelayNode } from '../guards/delay-node';\r\nimport { IAudioNode, IAudioParam } from '../interfaces';\r\nimport { TContext, TDetectCyclesFactory } from '../types';\r\n\r\nexport const createDetectCycles: TDetectCyclesFactory = (audioParamAudioNodeStore, getAudioNodeConnections, getValueForKey) => {\r\n    return function detectCycles<T extends TContext>(chain: IAudioNode<T>[], nextLink: IAudioNode<T> | IAudioParam): IAudioNode<T>[][] {\r\n        const audioNode = isAudioNode(nextLink) ? nextLink : <IAudioNode<T>>getValueForKey(audioParamAudioNodeStore, nextLink);\r\n\r\n        if (isDelayNode(audioNode)) {\r\n            return [];\r\n        }\r\n\r\n        if (chain[0] === audioNode) {\r\n            return [chain];\r\n        }\r\n\r\n        if (chain.includes(audioNode)) {\r\n            return [];\r\n        }\r\n\r\n        const { outputs } = getAudioNodeConnections(audioNode);\r\n\r\n        return Array.from(outputs)\r\n            .map((outputConnection) => detectCycles([...chain, audioNode], outputConnection[0]))\r\n            .reduce((mergedCycles, nestedCycles) => mergedCycles.concat(nestedCycles), []);\r\n    };\r\n};\r\n", "import { isNativeAudioNode } from '../guards/native-audio-node';\r\nimport { TDisconnectMultipleOutputsFactory, TIndexSizeErrorFactory, TNativeAudioNode } from '../types';\r\n\r\nconst getOutputAudioNodeAtIndex = (\r\n    createIndexSizeError: TIndexSizeErrorFactory,\r\n    outputAudioNodes: TNativeAudioNode[],\r\n    output: number\r\n): TNativeAudioNode => {\r\n    const outputAudioNode = outputAudioNodes[output];\r\n\r\n    if (outputAudioNode === undefined) {\r\n        throw createIndexSizeError();\r\n    }\r\n\r\n    return outputAudioNode;\r\n};\r\n\r\nexport const createDisconnectMultipleOutputs: TDisconnectMultipleOutputsFactory = (createIndexSizeError) => {\r\n    return (outputAudioNodes, destinationOrOutput = undefined, output = undefined, input = 0) => {\r\n        if (destinationOrOutput === undefined) {\r\n            return outputAudioNodes.forEach((outputAudioNode) => outputAudioNode.disconnect());\r\n        }\r\n\r\n        if (typeof destinationOrOutput === 'number') {\r\n            return getOutputAudioNodeAtIndex(createIndexSizeError, outputAudioNodes, destinationOrOutput).disconnect();\r\n        }\r\n\r\n        if (isNativeAudioNode(destinationOrOutput)) {\r\n            if (output === undefined) {\r\n                return outputAudioNodes.forEach((outputAudioNode) => outputAudioNode.disconnect(destinationOrOutput));\r\n            }\r\n\r\n            if (input === undefined) {\r\n                return getOutputAudioNodeAtIndex(createIndexSizeError, outputAudioNodes, output).disconnect(destinationOrOutput, 0);\r\n            }\r\n\r\n            return getOutputAudioNodeAtIndex(createIndexSizeError, outputAudioNodes, output).disconnect(destinationOrOutput, 0, input);\r\n        }\r\n\r\n        if (output === undefined) {\r\n            return outputAudioNodes.forEach((outputAudioNode) => outputAudioNode.disconnect(destinationOrOutput));\r\n        }\r\n\r\n        return getOutputAudioNodeAtIndex(createIndexSizeError, outputAudioNodes, output).disconnect(destinationOrOutput, 0);\r\n    };\r\n};\r\n", "import { IAudioParam, IDynamicsCompressorNode, IDynamicsCompressorOptions } from '../interfaces';\r\nimport {\r\n    TAudioNodeRenderer,\r\n    TChannelCountMode,\r\n    TContext,\r\n    TDynamicsCompressorNodeConstructorFactory,\r\n    TNativeAudioParam,\r\n    TNativeDynamicsCompressorNode\r\n} from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    attack: 0.003,\r\n    channelCount: 2,\r\n    channelCountMode: 'clamped-max',\r\n    channelInterpretation: 'speakers',\r\n    knee: 30,\r\n    ratio: 12,\r\n    release: 0.25,\r\n    threshold: -24\r\n} as const;\r\n\r\nexport const createDynamicsCompressorNodeConstructor: TDynamicsCompressorNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createAudioParam,\r\n    createDynamicsCompressorNodeRenderer,\r\n    createNativeDynamicsCompressorNode,\r\n    createNotSupportedError,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    setAudioNodeTailTime\r\n) => {\r\n    return class DynamicsCompressorNode<T extends TContext> extends audioNodeConstructor<T> implements IDynamicsCompressorNode<T> {\r\n        private _attack: IAudioParam;\r\n\r\n        private _knee: IAudioParam;\r\n\r\n        private _nativeDynamicsCompressorNode: TNativeDynamicsCompressorNode;\r\n\r\n        private _ratio: IAudioParam;\r\n\r\n        private _release: IAudioParam;\r\n\r\n        private _threshold: IAudioParam;\r\n\r\n        constructor(context: T, options?: Partial<IDynamicsCompressorOptions>) {\r\n            const nativeContext = getNativeContext(context);\r\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\r\n            const nativeDynamicsCompressorNode = createNativeDynamicsCompressorNode(nativeContext, mergedOptions);\r\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\r\n            const dynamicsCompressorNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createDynamicsCompressorNodeRenderer() : null);\r\n\r\n            super(context, false, nativeDynamicsCompressorNode, dynamicsCompressorNodeRenderer);\r\n\r\n            this._attack = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.attack);\r\n            this._knee = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.knee);\r\n            this._nativeDynamicsCompressorNode = nativeDynamicsCompressorNode;\r\n            this._ratio = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.ratio);\r\n            this._release = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.release);\r\n            this._threshold = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.threshold);\r\n\r\n            setAudioNodeTailTime(this, 0.006);\r\n        }\r\n\r\n        get attack(): IAudioParam {\r\n            return this._attack;\r\n        }\r\n\r\n        // Bug #108: Safari allows a channelCount of three and above which is why the getter and setter needs to be overwritten here.\r\n        get channelCount(): number {\r\n            return this._nativeDynamicsCompressorNode.channelCount;\r\n        }\r\n\r\n        set channelCount(value) {\r\n            const previousChannelCount = this._nativeDynamicsCompressorNode.channelCount;\r\n\r\n            this._nativeDynamicsCompressorNode.channelCount = value;\r\n\r\n            if (value > 2) {\r\n                this._nativeDynamicsCompressorNode.channelCount = previousChannelCount;\r\n\r\n                throw createNotSupportedError();\r\n            }\r\n        }\r\n\r\n        /*\r\n         * Bug #109: Only Chrome and Firefox disallow a channelCountMode of 'max' yet which is why the getter and setter needs to be\r\n         * overwritten here.\r\n         */\r\n        get channelCountMode(): TChannelCountMode {\r\n            return this._nativeDynamicsCompressorNode.channelCountMode;\r\n        }\r\n\r\n        set channelCountMode(value) {\r\n            const previousChannelCount = this._nativeDynamicsCompressorNode.channelCountMode;\r\n\r\n            this._nativeDynamicsCompressorNode.channelCountMode = value;\r\n\r\n            if (value === 'max') {\r\n                this._nativeDynamicsCompressorNode.channelCountMode = previousChannelCount;\r\n\r\n                throw createNotSupportedError();\r\n            }\r\n        }\r\n\r\n        get knee(): IAudioParam {\r\n            return this._knee;\r\n        }\r\n\r\n        get ratio(): IAudioParam {\r\n            return this._ratio;\r\n        }\r\n\r\n        get reduction(): number {\r\n            // Bug #111: Safari returns an AudioParam instead of a number.\r\n            if (typeof (<TNativeAudioParam>(<any>this._nativeDynamicsCompressorNode.reduction)).value === 'number') {\r\n                return (<TNativeAudioParam>(<any>this._nativeDynamicsCompressorNode.reduction)).value;\r\n            }\r\n\r\n            return this._nativeDynamicsCompressorNode.reduction;\r\n        }\r\n\r\n        get release(): IAudioParam {\r\n            return this._release;\r\n        }\r\n\r\n        get threshold(): IAudioParam {\r\n            return this._threshold;\r\n        }\r\n    };\r\n};\r\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\r\nimport { IDynamicsCompressorNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport { TDynamicsCompressorNodeRendererFactoryFactory, TNativeDynamicsCompressorNode, TNativeOfflineAudioContext } from '../types';\r\n\r\nexport const createDynamicsCompressorNodeRendererFactory: TDynamicsCompressorNodeRendererFactoryFactory = (\r\n    connectAudioParam,\r\n    createNativeDynamicsCompressorNode,\r\n    getNativeAudioNode,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode\r\n) => {\r\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\r\n        const renderedNativeDynamicsCompressorNodes = new WeakMap<TNativeOfflineAudioContext, TNativeDynamicsCompressorNode>();\r\n\r\n        const createDynamicsCompressorNode = async (\r\n            proxy: IDynamicsCompressorNode<T>,\r\n            nativeOfflineAudioContext: TNativeOfflineAudioContext\r\n        ) => {\r\n            let nativeDynamicsCompressorNode = getNativeAudioNode<T, TNativeDynamicsCompressorNode>(proxy);\r\n\r\n            /*\r\n             * If the initially used nativeDynamicsCompressorNode was not constructed on the same OfflineAudioContext it needs to be\r\n             * created again.\r\n             */\r\n            const nativeDynamicsCompressorNodeIsOwnedByContext = isOwnedByContext(nativeDynamicsCompressorNode, nativeOfflineAudioContext);\r\n\r\n            if (!nativeDynamicsCompressorNodeIsOwnedByContext) {\r\n                const options = {\r\n                    attack: nativeDynamicsCompressorNode.attack.value,\r\n                    channelCount: nativeDynamicsCompressorNode.channelCount,\r\n                    channelCountMode: nativeDynamicsCompressorNode.channelCountMode,\r\n                    channelInterpretation: nativeDynamicsCompressorNode.channelInterpretation,\r\n                    knee: nativeDynamicsCompressorNode.knee.value,\r\n                    ratio: nativeDynamicsCompressorNode.ratio.value,\r\n                    release: nativeDynamicsCompressorNode.release.value,\r\n                    threshold: nativeDynamicsCompressorNode.threshold.value\r\n                };\r\n\r\n                nativeDynamicsCompressorNode = createNativeDynamicsCompressorNode(nativeOfflineAudioContext, options);\r\n            }\r\n\r\n            renderedNativeDynamicsCompressorNodes.set(nativeOfflineAudioContext, nativeDynamicsCompressorNode);\r\n\r\n            if (!nativeDynamicsCompressorNodeIsOwnedByContext) {\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.attack, nativeDynamicsCompressorNode.attack);\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.knee, nativeDynamicsCompressorNode.knee);\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.ratio, nativeDynamicsCompressorNode.ratio);\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.release, nativeDynamicsCompressorNode.release);\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.threshold, nativeDynamicsCompressorNode.threshold);\r\n            } else {\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.attack, nativeDynamicsCompressorNode.attack);\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.knee, nativeDynamicsCompressorNode.knee);\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.ratio, nativeDynamicsCompressorNode.ratio);\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.release, nativeDynamicsCompressorNode.release);\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.threshold, nativeDynamicsCompressorNode.threshold);\r\n            }\r\n\r\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeDynamicsCompressorNode);\r\n\r\n            return nativeDynamicsCompressorNode;\r\n        };\r\n\r\n        return {\r\n            render(\r\n                proxy: IDynamicsCompressorNode<T>,\r\n                nativeOfflineAudioContext: TNativeOfflineAudioContext\r\n            ): Promise<TNativeDynamicsCompressorNode> {\r\n                const renderedNativeDynamicsCompressorNode = renderedNativeDynamicsCompressorNodes.get(nativeOfflineAudioContext);\r\n\r\n                if (renderedNativeDynamicsCompressorNode !== undefined) {\r\n                    return Promise.resolve(renderedNativeDynamicsCompressorNode);\r\n                }\r\n\r\n                return createDynamicsCompressorNode(proxy, nativeOfflineAudioContext);\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import { TEncodingErrorFactory } from '../types';\r\n\r\nexport const createEncodingError: TEncodingErrorFactory = () => new DOMException('', 'EncodingError');\r\n", "import { TEvaluateSourceFactory } from '../types';\r\n\r\nexport const createEvaluateSource: TEvaluateSourceFactory = (window) => {\r\n    return (source) =>\r\n        new Promise((resolve, reject) => {\r\n            if (window === null) {\r\n                // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\r\n                reject(new SyntaxError());\r\n\r\n                return;\r\n            }\r\n\r\n            const head = window.document.head;\r\n\r\n            if (head === null) {\r\n                // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\r\n                reject(new SyntaxError());\r\n            } else {\r\n                const script = window.document.createElement('script');\r\n                // @todo Safari doesn't like URLs with a type of 'application/javascript; charset=utf-8'.\r\n                const blob = new Blob([source], { type: 'application/javascript' });\r\n                const url = URL.createObjectURL(blob);\r\n\r\n                const originalOnErrorHandler = window.onerror;\r\n\r\n                const removeErrorEventListenerAndRevokeUrl = () => {\r\n                    window.onerror = originalOnErrorHandler;\r\n\r\n                    URL.revokeObjectURL(url);\r\n                };\r\n\r\n                window.onerror = (message, src, lineno, colno, error) => {\r\n                    // @todo Edge thinks the source is the one of the html document.\r\n                    if (src === url || (src === window.location.href && lineno === 1 && colno === 1)) {\r\n                        removeErrorEventListenerAndRevokeUrl();\r\n                        reject(error);\r\n\r\n                        return false;\r\n                    }\r\n\r\n                    if (originalOnErrorHandler !== null) {\r\n                        return originalOnErrorHandler(message, src, lineno, colno, error);\r\n                    }\r\n                };\r\n\r\n                script.onerror = () => {\r\n                    removeErrorEventListenerAndRevokeUrl();\r\n                    // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\r\n                    reject(new SyntaxError());\r\n                };\r\n                script.onload = () => {\r\n                    removeErrorEventListenerAndRevokeUrl();\r\n                    resolve();\r\n                };\r\n                script.src = url;\r\n                script.type = 'module';\r\n\r\n                head.appendChild(script);\r\n            }\r\n        });\r\n};\r\n", "import { IEventTarget } from '../interfaces';\r\nimport { TEventHandler, TEventTargetConstructorFactory, TNativeEventTarget } from '../types';\r\n\r\nexport const createEventTargetConstructor: TEventTargetConstructorFactory = (wrapEventListener) => {\r\n    return class EventTarget<EventMap extends Record<string, Event>> implements IEventTarget<EventMap> {\r\n        private _listeners: WeakMap<EventListenerOrEventListenerObject, EventListenerOrEventListenerObject>;\r\n\r\n        constructor(private _nativeEventTarget: TNativeEventTarget) {\r\n            this._listeners = new WeakMap();\r\n        }\r\n\r\n        public addEventListener(\r\n            type: string,\r\n            listener: null | TEventHandler<this> | EventListenerOrEventListenerObject,\r\n            options?: boolean | AddEventListenerOptions\r\n        ): void {\r\n            if (listener !== null) {\r\n                let wrappedEventListener = this._listeners.get(listener);\r\n\r\n                if (wrappedEventListener === undefined) {\r\n                    wrappedEventListener = wrapEventListener(this, listener);\r\n\r\n                    if (typeof listener === 'function') {\r\n                        this._listeners.set(listener, wrappedEventListener);\r\n                    }\r\n                }\r\n\r\n                this._nativeEventTarget.addEventListener(type, wrappedEventListener, options);\r\n            }\r\n        }\r\n\r\n        public dispatchEvent(event: Event): boolean {\r\n            return this._nativeEventTarget.dispatchEvent(event);\r\n        }\r\n\r\n        public removeEventListener(\r\n            type: string,\r\n            listener: null | TEventHandler<this> | EventListenerOrEventListenerObject,\r\n            options?: boolean | EventListenerOptions\r\n        ): void {\r\n            const wrappedEventListener = listener === null ? undefined : this._listeners.get(listener);\r\n\r\n            this._nativeEventTarget.removeEventListener(type, wrappedEventListener === undefined ? null : wrappedEventListener, options);\r\n        }\r\n    };\r\n};\r\n", "import { TExposeCurrentFrameAndCurrentTimeFactory } from '../types';\r\n\r\nexport const createExposeCurrentFrameAndCurrentTime: TExposeCurrentFrameAndCurrentTimeFactory = (window) => {\r\n    return (currentTime, sampleRate, fn) => {\r\n        Object.defineProperties(window, {\r\n            currentFrame: {\r\n                configurable: true,\r\n                get(): number {\r\n                    return Math.round(currentTime * sampleRate);\r\n                }\r\n            },\r\n            currentTime: {\r\n                configurable: true,\r\n                get(): number {\r\n                    return currentTime;\r\n                }\r\n            }\r\n        });\r\n\r\n        try {\r\n            return fn();\r\n        } finally {\r\n            if (window !== null) {\r\n                delete (<any>window).currentFrame;\r\n                delete (<any>window).currentTime;\r\n            }\r\n        }\r\n    };\r\n};\r\n", "import { TFetchSourceFactory } from '../types';\r\n\r\nexport const createFetchSource: TFetchSourceFactory = (createAbortError) => {\r\n    return async (url) => {\r\n        try {\r\n            const response = await fetch(url);\r\n\r\n            if (response.ok) {\r\n                return [await response.text(), response.url];\r\n            }\r\n        } catch {\r\n            // Ignore errors.\r\n        } // tslint:disable-line:no-empty\r\n\r\n        throw createAbortError();\r\n    };\r\n};\r\n", "import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\r\nimport { IAudioParam, IGainNode, IGainOptions } from '../interfaces';\r\nimport { TAudioNodeRenderer, TContext, TGainNodeConstructorFactory } from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    channelCount: 2,\r\n    channelCountMode: 'max',\r\n    channelInterpretation: 'speakers',\r\n    gain: 1\r\n} as const;\r\n\r\nexport const createGainNodeConstructor: TGainNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createAudioParam,\r\n    createGainNodeRenderer,\r\n    createNativeGainNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext\r\n) => {\r\n    return class GainNode<T extends TContext> extends audioNodeConstructor<T> implements IGainNode<T> {\r\n        private _gain: IAudioParam;\r\n\r\n        constructor(context: T, options?: Partial<IGainOptions>) {\r\n            const nativeContext = getNativeContext(context);\r\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\r\n            const nativeGainNode = createNativeGainNode(nativeContext, mergedOptions);\r\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\r\n            const gainNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createGainNodeRenderer() : null);\r\n\r\n            super(context, false, nativeGainNode, gainNodeRenderer);\r\n\r\n            // Bug #74: Safari does not export the correct values for maxValue and minValue.\r\n            this._gain = createAudioParam(this, isOffline, nativeGainNode.gain, MOST_POSITIVE_SINGLE_FLOAT, MOST_NEGATIVE_SINGLE_FLOAT);\r\n        }\r\n\r\n        get gain(): IAudioParam {\r\n            return this._gain;\r\n        }\r\n    };\r\n};\r\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\r\nimport { IGainNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport { TGainNodeRendererFactoryFactory, TNativeGainNode, TNativeOfflineAudioContext } from '../types';\r\n\r\nexport const createGainNodeRendererFactory: TGainNodeRendererFactoryFactory = (\r\n    connectAudioParam,\r\n    createNativeGainNode,\r\n    getNativeAudioNode,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode\r\n) => {\r\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\r\n        const renderedNativeGainNodes = new WeakMap<TNativeOfflineAudioContext, TNativeGainNode>();\r\n\r\n        const createGainNode = async (proxy: IGainNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\r\n            let nativeGainNode = getNativeAudioNode<T, TNativeGainNode>(proxy);\r\n\r\n            // If the initially used nativeGainNode was not constructed on the same OfflineAudioContext it needs to be created again.\r\n            const nativeGainNodeIsOwnedByContext = isOwnedByContext(nativeGainNode, nativeOfflineAudioContext);\r\n\r\n            if (!nativeGainNodeIsOwnedByContext) {\r\n                const options = {\r\n                    channelCount: nativeGainNode.channelCount,\r\n                    channelCountMode: nativeGainNode.channelCountMode,\r\n                    channelInterpretation: nativeGainNode.channelInterpretation,\r\n                    gain: nativeGainNode.gain.value\r\n                };\r\n\r\n                nativeGainNode = createNativeGainNode(nativeOfflineAudioContext, options);\r\n            }\r\n\r\n            renderedNativeGainNodes.set(nativeOfflineAudioContext, nativeGainNode);\r\n\r\n            if (!nativeGainNodeIsOwnedByContext) {\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.gain, nativeGainNode.gain);\r\n            } else {\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.gain, nativeGainNode.gain);\r\n            }\r\n\r\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeGainNode);\r\n\r\n            return nativeGainNode;\r\n        };\r\n\r\n        return {\r\n            render(proxy: IGainNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeGainNode> {\r\n                const renderedNativeGainNode = renderedNativeGainNodes.get(nativeOfflineAudioContext);\r\n\r\n                if (renderedNativeGainNode !== undefined) {\r\n                    return Promise.resolve(renderedNativeGainNode);\r\n                }\r\n\r\n                return createGainNode(proxy, nativeOfflineAudioContext);\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import { TActiveInputConnection, TContext, TGetActiveAudioWorkletNodeInputsFactory, TNativeAudioWorkletNode } from '../types';\r\n\r\nexport const createGetActiveAudioWorkletNodeInputs: TGetActiveAudioWorkletNodeInputsFactory = (\r\n    activeAudioWorkletNodeInputsStore,\r\n    getValueForKey\r\n) => {\r\n    return <T extends TContext>(nativeAudioWorkletNode: TNativeAudioWorkletNode) =>\r\n        <Set<TActiveInputConnection<T>>[]>getValueForKey(activeAudioWorkletNodeInputsStore, nativeAudioWorkletNode);\r\n};\r\n", "import { IAudioNode, IAudioNodeRenderer, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport { TGetAudioNodeRendererFactory } from '../types';\r\n\r\nexport const createGetAudioNodeRenderer: TGetAudioNodeRendererFactory = (getAudioNodeConnections) => {\r\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>(\r\n        audioNode: IAudioNode<T>\r\n    ): IAudioNodeRenderer<T, IAudioNode<T>> => {\r\n        const audioNodeConnections = getAudioNodeConnections(audioNode);\r\n\r\n        if (audioNodeConnections.renderer === null) {\r\n            throw new Error('Missing the renderer of the given AudioNode in the audio graph.');\r\n        }\r\n\r\n        return <IAudioNodeRenderer<T, IAudioNode<T>>>audioNodeConnections.renderer;\r\n    };\r\n};\r\n", "import { TGetAudioNodeTailTimeFactory } from '../types';\r\n\r\nexport const createGetAudioNodeTailTime: TGetAudioNodeTailTimeFactory = (audioNodeTailTimeStore) => {\r\n    return (audioNode) => audioNodeTailTimeStore.get(audioNode) ?? 0;\r\n};\r\n", "import { IMinimalOfflineAudioContext } from '../interfaces';\r\nimport { TGetAudioParamRendererFactory } from '../types';\r\n\r\nexport const createGetAudioParamRenderer: TGetAudioParamRendererFactory = (getAudioParamConnections) => {\r\n    return (audioParam) => {\r\n        const audioParamConnections = getAudioParamConnections<IMinimalOfflineAudioContext>(audioParam);\r\n\r\n        if (audioParamConnections.renderer === null) {\r\n            throw new Error('Missing the renderer of the given AudioParam in the audio graph.');\r\n        }\r\n\r\n        return audioParamConnections.renderer;\r\n    };\r\n};\r\n", "import { TGetBackupOfflineAudioContextFactory } from '../types';\r\n\r\nexport const createGetBackupOfflineAudioContext: TGetBackupOfflineAudioContextFactory = (backupOfflineAudioContextStore) => {\r\n    return (nativeContext) => {\r\n        return backupOfflineAudioContextStore.get(nativeContext);\r\n    };\r\n};\r\n", "import { TInvalidStateErrorFactory } from '../types';\r\n\r\nexport const createInvalidStateError: TInvalidStateErrorFactory = () => new DOMException('', 'InvalidStateError');\r\n", "import { IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport { TContext, TGetNativeContextFactory, TNativeAudioContext, TNativeOfflineAudioContext } from '../types';\r\nimport { createInvalidStateError } from './invalid-state-error';\r\n\r\nexport const createGetNativeContext: TGetNativeContextFactory = (contextStore) => {\r\n    return <T extends TContext>(\r\n        context: T\r\n    ): T extends IMinimalOfflineAudioContext | IOfflineAudioContext ? TNativeOfflineAudioContext : TNativeAudioContext => {\r\n        const nativeContext = contextStore.get(context);\r\n\r\n        if (nativeContext === undefined) {\r\n            throw createInvalidStateError();\r\n        }\r\n\r\n        return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext ? TNativeOfflineAudioContext : TNativeAudioContext>(\r\n            nativeContext\r\n        );\r\n    };\r\n};\r\n", "import { TGetOrCreateBackupOfflineAudioContextFactory } from '../types';\r\n\r\nexport const createGetOrCreateBackupOfflineAudioContext: TGetOrCreateBackupOfflineAudioContextFactory = (\r\n    backupOfflineAudioContextStore,\r\n    nativeOfflineAudioContextConstructor\r\n) => {\r\n    return (nativeContext) => {\r\n        let backupOfflineAudioContext = backupOfflineAudioContextStore.get(nativeContext);\r\n\r\n        if (backupOfflineAudioContext !== undefined) {\r\n            return backupOfflineAudioContext;\r\n        }\r\n\r\n        if (nativeOfflineAudioContextConstructor === null) {\r\n            throw new Error('Missing the native OfflineAudioContext constructor.');\r\n        }\r\n\r\n        // Bug #141: Safari does not support creating an OfflineAudioContext with less than 44100 Hz.\r\n        backupOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\r\n\r\n        backupOfflineAudioContextStore.set(nativeContext, backupOfflineAudioContext);\r\n\r\n        return backupOfflineAudioContext;\r\n    };\r\n};\r\n", "import { TGetUnrenderedAudioWorkletNodesFactory } from '../types';\r\n\r\nexport const createGetUnrenderedAudioWorkletNodes: TGetUnrenderedAudioWorkletNodesFactory = (unrenderedAudioWorkletNodeStore) => {\r\n    return (nativeContext) => {\r\n        const unrenderedAudioWorkletNodes = unrenderedAudioWorkletNodeStore.get(nativeContext);\r\n\r\n        if (unrenderedAudioWorkletNodes === undefined) {\r\n            throw new Error('The context has no set of AudioWorkletNodes.');\r\n        }\r\n\r\n        return unrenderedAudioWorkletNodes;\r\n    };\r\n};\r\n", "import { TInvalidAccessErrorFactory } from '../types';\r\n\r\nexport const createInvalidAccessError: TInvalidAccessErrorFactory = () => new DOMException('', 'InvalidAccessError');\r\n", "import { createInvalidAccessError } from '../factories/invalid-access-error';\r\nimport { TNativeIIRFilterNode } from '../types';\r\n\r\nexport const wrapIIRFilterNodeGetFrequencyResponseMethod = (nativeIIRFilterNode: TNativeIIRFilterNode): void => {\r\n    nativeIIRFilterNode.getFrequencyResponse = ((getFrequencyResponse) => {\r\n        return (frequencyHz: Float32Array, magResponse: Float32Array, phaseResponse: Float32Array) => {\r\n            if (frequencyHz.length !== magResponse.length || magResponse.length !== phaseResponse.length) {\r\n                throw createInvalidAccessError();\r\n            }\r\n\r\n            return getFrequencyResponse.call(nativeIIRFilterNode, frequencyHz, magResponse, phaseResponse);\r\n        };\r\n    })(nativeIIRFilterNode.getFrequencyResponse);\r\n};\r\n", "import { wrapIIRFilterNodeGetFrequencyResponseMethod } from '../helpers/wrap-iir-filter-node-get-frequency-response-method';\r\nimport { IIIRFilterNode, IIIRFilterOptions, IMinimalAudioContext } from '../interfaces';\r\nimport { TAudioNodeRenderer, TContext, TIIRFilterNodeConstructorFactory, TNativeIIRFilterNode } from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    channelCount: 2,\r\n    channelCountMode: 'max',\r\n    channelInterpretation: 'speakers'\r\n} as const;\r\n\r\nexport const createIIRFilterNodeConstructor: TIIRFilterNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createNativeIIRFilterNode,\r\n    createIIRFilterNodeRenderer,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    setAudioNodeTailTime\r\n) => {\r\n    return class IIRFilterNode<T extends TContext> extends audioNodeConstructor<T> implements IIIRFilterNode<T> {\r\n        private _nativeIIRFilterNode: TNativeIIRFilterNode;\r\n\r\n        constructor(\r\n            context: T,\r\n            options: { feedback: IIIRFilterOptions['feedback']; feedforward: IIIRFilterOptions['feedforward'] } & Partial<IIIRFilterOptions>\r\n        ) {\r\n            const nativeContext = getNativeContext(context);\r\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\r\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\r\n            const nativeIIRFilterNode = createNativeIIRFilterNode(\r\n                nativeContext,\r\n                isOffline ? null : (<IMinimalAudioContext>(<any>context)).baseLatency,\r\n                mergedOptions\r\n            );\r\n            const iirFilterNodeRenderer = <TAudioNodeRenderer<T, this>>(\r\n                (isOffline ? createIIRFilterNodeRenderer(mergedOptions.feedback, mergedOptions.feedforward) : null)\r\n            );\r\n\r\n            super(context, false, nativeIIRFilterNode, iirFilterNodeRenderer);\r\n\r\n            // Bug #23 & #24: FirefoxDeveloper does not throw an InvalidAccessError.\r\n            // @todo Write a test which allows other browsers to remain unpatched.\r\n            wrapIIRFilterNodeGetFrequencyResponseMethod(nativeIIRFilterNode);\r\n\r\n            this._nativeIIRFilterNode = nativeIIRFilterNode;\r\n\r\n            // @todo Determine a meaningful tail-time instead of just using one second.\r\n            setAudioNodeTailTime(this, 1);\r\n        }\r\n\r\n        public getFrequencyResponse(frequencyHz: Float32Array, magResponse: Float32Array, phaseResponse: Float32Array): void {\r\n            return this._nativeIIRFilterNode.getFrequencyResponse(frequencyHz, magResponse, phaseResponse);\r\n        }\r\n    };\r\n};\r\n", "// This implementation as shamelessly inspired by source code of\r\n// tslint:disable-next-line:max-line-length\r\n// {@link https://chromium.googlesource.com/chromium/src.git/+/master/third_party/WebKit/Source/platform/audio/IIRFilter.cpp|Chromium's IIRFilter}.\r\nexport const filterBuffer = (\r\n    feedback: Float64Array,\r\n    feedbackLength: number,\r\n    feedforward: Float64Array,\r\n    feedforwardLength: number,\r\n    minLength: number,\r\n    xBuffer: Float32Array,\r\n    yBuffer: Float32Array,\r\n    bufferIndex: number,\r\n    bufferLength: number,\r\n    input: Float32Array,\r\n    output: Float32Array\r\n) => {\r\n    const inputLength = input.length;\r\n\r\n    let i = bufferIndex;\r\n\r\n    for (let j = 0; j < inputLength; j += 1) {\r\n        let y = feedforward[0] * input[j];\r\n\r\n        for (let k = 1; k < minLength; k += 1) {\r\n            const x = (i - k) & (bufferLength - 1); // tslint:disable-line:no-bitwise\r\n\r\n            y += feedforward[k] * xBuffer[x];\r\n            y -= feedback[k] * yBuffer[x];\r\n        }\r\n\r\n        for (let k = minLength; k < feedforwardLength; k += 1) {\r\n            y += feedforward[k] * xBuffer[(i - k) & (bufferLength - 1)]; // tslint:disable-line:no-bitwise\r\n        }\r\n\r\n        for (let k = minLength; k < feedbackLength; k += 1) {\r\n            y -= feedback[k] * yBuffer[(i - k) & (bufferLength - 1)]; // tslint:disable-line:no-bitwise\r\n        }\r\n\r\n        xBuffer[i] = input[j];\r\n        yBuffer[i] = y;\r\n\r\n        i = (i + 1) & (bufferLength - 1); // tslint:disable-line:no-bitwise\r\n\r\n        output[j] = y;\r\n    }\r\n\r\n    return i;\r\n};\r\n", "import { filterBuffer } from '../helpers/filter-buffer';\r\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\r\nimport { IIIRFilterNode, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport {\r\n    TIIRFilterNodeRendererFactoryFactory,\r\n    TNativeAudioBuffer,\r\n    TNativeAudioBufferSourceNode,\r\n    TNativeIIRFilterNode,\r\n    TNativeOfflineAudioContext\r\n} from '../types';\r\n\r\nconst filterFullBuffer = (\r\n    renderedBuffer: TNativeAudioBuffer,\r\n    nativeOfflineAudioContext: TNativeOfflineAudioContext,\r\n    feedback: Iterable<number>,\r\n    feedforward: Iterable<number>\r\n) => {\r\n    const convertedFeedback = feedback instanceof Float64Array ? feedback : new Float64Array(feedback);\r\n    const convertedFeedforward = feedforward instanceof Float64Array ? feedforward : new Float64Array(feedforward);\r\n    const feedbackLength = convertedFeedback.length;\r\n    const feedforwardLength = convertedFeedforward.length;\r\n    const minLength = Math.min(feedbackLength, feedforwardLength);\r\n\r\n    if (convertedFeedback[0] !== 1) {\r\n        for (let i = 0; i < feedbackLength; i += 1) {\r\n            convertedFeedforward[i] /= convertedFeedback[0];\r\n        }\r\n\r\n        for (let i = 1; i < feedforwardLength; i += 1) {\r\n            convertedFeedback[i] /= convertedFeedback[0];\r\n        }\r\n    }\r\n\r\n    const bufferLength = 32;\r\n    const xBuffer = new Float32Array(bufferLength);\r\n    const yBuffer = new Float32Array(bufferLength);\r\n\r\n    const filteredBuffer = nativeOfflineAudioContext.createBuffer(\r\n        renderedBuffer.numberOfChannels,\r\n        renderedBuffer.length,\r\n        renderedBuffer.sampleRate\r\n    );\r\n\r\n    const numberOfChannels = renderedBuffer.numberOfChannels;\r\n\r\n    for (let i = 0; i < numberOfChannels; i += 1) {\r\n        const input = renderedBuffer.getChannelData(i);\r\n        const output = filteredBuffer.getChannelData(i);\r\n\r\n        xBuffer.fill(0);\r\n        yBuffer.fill(0);\r\n\r\n        filterBuffer(\r\n            convertedFeedback,\r\n            feedbackLength,\r\n            convertedFeedforward,\r\n            feedforwardLength,\r\n            minLength,\r\n            xBuffer,\r\n            yBuffer,\r\n            0,\r\n            bufferLength,\r\n            input,\r\n            output\r\n        );\r\n    }\r\n\r\n    return filteredBuffer;\r\n};\r\n\r\nexport const createIIRFilterNodeRendererFactory: TIIRFilterNodeRendererFactoryFactory = (\r\n    createNativeAudioBufferSourceNode,\r\n    getNativeAudioNode,\r\n    nativeOfflineAudioContextConstructor,\r\n    renderInputsOfAudioNode,\r\n    renderNativeOfflineAudioContext\r\n) => {\r\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>(feedback: Iterable<number>, feedforward: Iterable<number>) => {\r\n        const renderedNativeAudioNodes = new WeakMap<TNativeOfflineAudioContext, TNativeAudioBufferSourceNode | TNativeIIRFilterNode>();\r\n\r\n        let filteredBufferPromise: null | Promise<null | TNativeAudioBuffer> = null;\r\n\r\n        const createAudioNode = async (proxy: IIIRFilterNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\r\n            let nativeAudioBufferSourceNode: null | TNativeAudioBufferSourceNode = null;\r\n            let nativeIIRFilterNode = getNativeAudioNode<T, TNativeIIRFilterNode>(proxy);\r\n\r\n            // If the initially used nativeIIRFilterNode was not constructed on the same OfflineAudioContext it needs to be created again.\r\n            const nativeIIRFilterNodeIsOwnedByContext = isOwnedByContext(nativeIIRFilterNode, nativeOfflineAudioContext);\r\n\r\n            // Bug #9: Safari does not support IIRFilterNodes.\r\n            if (nativeOfflineAudioContext.createIIRFilter === undefined) {\r\n                nativeAudioBufferSourceNode = createNativeAudioBufferSourceNode(nativeOfflineAudioContext, {\r\n                    buffer: null,\r\n                    channelCount: 2,\r\n                    channelCountMode: 'max',\r\n                    channelInterpretation: 'speakers',\r\n                    loop: false,\r\n                    loopEnd: 0,\r\n                    loopStart: 0,\r\n                    playbackRate: 1\r\n                });\r\n            } else if (!nativeIIRFilterNodeIsOwnedByContext) {\r\n                // @todo TypeScript defines the parameters of createIIRFilter() as arrays of numbers.\r\n                nativeIIRFilterNode = nativeOfflineAudioContext.createIIRFilter(<number[]>feedforward, <number[]>feedback);\r\n            }\r\n\r\n            renderedNativeAudioNodes.set(\r\n                nativeOfflineAudioContext,\r\n                nativeAudioBufferSourceNode === null ? nativeIIRFilterNode : nativeAudioBufferSourceNode\r\n            );\r\n\r\n            if (nativeAudioBufferSourceNode !== null) {\r\n                if (filteredBufferPromise === null) {\r\n                    if (nativeOfflineAudioContextConstructor === null) {\r\n                        throw new Error('Missing the native OfflineAudioContext constructor.');\r\n                    }\r\n\r\n                    const partialOfflineAudioContext = new nativeOfflineAudioContextConstructor(\r\n                        // Bug #47: The AudioDestinationNode in Safari gets not initialized correctly.\r\n                        proxy.context.destination.channelCount,\r\n                        // Bug #17: Safari does not yet expose the length.\r\n                        proxy.context.length,\r\n                        nativeOfflineAudioContext.sampleRate\r\n                    );\r\n\r\n                    filteredBufferPromise = (async () => {\r\n                        await renderInputsOfAudioNode(proxy, partialOfflineAudioContext, partialOfflineAudioContext.destination);\r\n\r\n                        const renderedBuffer = await renderNativeOfflineAudioContext(partialOfflineAudioContext);\r\n\r\n                        return filterFullBuffer(renderedBuffer, nativeOfflineAudioContext, feedback, feedforward);\r\n                    })();\r\n                }\r\n\r\n                const filteredBuffer = await filteredBufferPromise;\r\n\r\n                nativeAudioBufferSourceNode.buffer = filteredBuffer;\r\n                nativeAudioBufferSourceNode.start(0);\r\n\r\n                return nativeAudioBufferSourceNode;\r\n            }\r\n\r\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeIIRFilterNode);\r\n\r\n            return nativeIIRFilterNode;\r\n        };\r\n\r\n        return {\r\n            render(\r\n                proxy: IIIRFilterNode<T>,\r\n                nativeOfflineAudioContext: TNativeOfflineAudioContext\r\n            ): Promise<TNativeAudioBufferSourceNode | TNativeIIRFilterNode> {\r\n                const renderedNativeAudioNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\r\n\r\n                if (renderedNativeAudioNode !== undefined) {\r\n                    return Promise.resolve(renderedNativeAudioNode);\r\n                }\r\n\r\n                return createAudioNode(proxy, nativeOfflineAudioContext);\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import { isAudioNodeOutputConnection } from '../guards/audio-node-output-connection';\r\nimport { TIncrementCycleCounterFactoryFactory } from '../types';\r\n\r\nexport const createIncrementCycleCounterFactory: TIncrementCycleCounterFactoryFactory = (\r\n    cycleCounters,\r\n    disconnectNativeAudioNodeFromNativeAudioNode,\r\n    getAudioNodeConnections,\r\n    getNativeAudioNode,\r\n    getNativeAudioParam,\r\n    isActiveAudioNode\r\n) => {\r\n    return (isOffline) => {\r\n        return (audioNode, count) => {\r\n            const cycleCounter = cycleCounters.get(audioNode);\r\n\r\n            if (cycleCounter === undefined) {\r\n                if (!isOffline && isActiveAudioNode(audioNode)) {\r\n                    const nativeSourceAudioNode = getNativeAudioNode(audioNode);\r\n                    const { outputs } = getAudioNodeConnections(audioNode);\r\n\r\n                    for (const output of outputs) {\r\n                        if (isAudioNodeOutputConnection(output)) {\r\n                            const nativeDestinationAudioNode = getNativeAudioNode(output[0]);\r\n\r\n                            disconnectNativeAudioNodeFromNativeAudioNode(\r\n                                nativeSourceAudioNode,\r\n                                nativeDestinationAudioNode,\r\n                                output[1],\r\n                                output[2]\r\n                            );\r\n                        } else {\r\n                            const nativeDestinationAudioParam = getNativeAudioParam(output[0]);\r\n\r\n                            nativeSourceAudioNode.disconnect(nativeDestinationAudioParam, output[1]);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                cycleCounters.set(audioNode, count);\r\n            } else {\r\n                cycleCounters.set(audioNode, cycleCounter + count);\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import { IAudioContext, IMinimalAudioContext } from '../interfaces';\r\nimport { TIsAnyAudioContextFactory, TNativeAudioContext } from '../types';\r\n\r\nexport const createIsAnyAudioContext: TIsAnyAudioContextFactory = (contextStore, isNativeAudioContext) => {\r\n    return (anything): anything is IAudioContext | IMinimalAudioContext | TNativeAudioContext => {\r\n        const nativeContext = contextStore.get(<any>anything);\r\n\r\n        return isNativeAudioContext(nativeContext) || isNativeAudioContext(anything);\r\n    };\r\n};\r\n", "import { IAudioNode } from '../interfaces';\r\nimport { TIsAnyAudioNodeFactory, TNativeAudioNode } from '../types';\r\n\r\nexport const createIsAnyAudioNode: TIsAnyAudioNodeFactory = (audioNodeStore, isNativeAudioNode) => {\r\n    return (anything): anything is IAudioNode<any> | TNativeAudioNode => audioNodeStore.has(<any>anything) || isNativeAudioNode(anything);\r\n};\r\n", "import { IAudioParam } from '../interfaces';\r\nimport { TIsAnyAudioParamFactory, TNativeAudioParam } from '../types';\r\n\r\nexport const createIsAnyAudioParam: TIsAnyAudioParamFactory = (audioParamStore, isNativeAudioParam) => {\r\n    return (anything): anything is IAudioParam | TNativeAudioParam => audioParamStore.has(<any>anything) || isNativeAudioParam(anything);\r\n};\r\n", "import { IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport { TIsAnyOfflineAudioContextFactory, TNativeOfflineAudioContext } from '../types';\r\n\r\nexport const createIsAnyOfflineAudioContext: TIsAnyOfflineAudioContextFactory = (contextStore, isNativeOfflineAudioContext) => {\r\n    return (anything): anything is IMinimalOfflineAudioContext | IOfflineAudioContext | TNativeOfflineAudioContext => {\r\n        const nativeContext = contextStore.get(<any>anything);\r\n\r\n        return isNativeOfflineAudioContext(nativeContext) || isNativeOfflineAudioContext(anything);\r\n    };\r\n};\r\n", "import { TIsNativeAudioContextFactory, TNativeAudioContext } from '../types';\r\n\r\nexport const createIsNativeAudioContext: TIsNativeAudioContextFactory = (nativeAudioContextConstructor) => {\r\n    return (anything): anything is TNativeAudioContext => {\r\n        return nativeAudioContextConstructor !== null && anything instanceof nativeAudioContextConstructor;\r\n    };\r\n};\r\n", "import { TIsNativeAudioNodeFactory, TNativeAudioNode } from '../types';\r\n\r\nexport const createIsNativeAudioNode: TIsNativeAudioNodeFactory = (window) => {\r\n    return (anything): anything is TNativeAudioNode => {\r\n        return window !== null && typeof window.AudioNode === 'function' && anything instanceof window.AudioNode;\r\n    };\r\n};\r\n", "import { TIsNativeAudioParamFactory, TNativeAudioParam } from '../types';\r\n\r\nexport const createIsNativeAudioParam: TIsNativeAudioParamFactory = (window) => {\r\n    return (anything): anything is TNativeAudioParam => {\r\n        return window !== null && typeof window.AudioParam === 'function' && anything instanceof window.AudioParam;\r\n    };\r\n};\r\n", "import { TIsNativeContextFactory, TNativeAudioContext } from '../types';\r\n\r\nexport const createIsNativeContext: TIsNativeContextFactory = (isNativeAudioContext, isNativeOfflineAudioContext) => {\r\n    return (anything): anything is TNativeAudioContext => {\r\n        return isNativeAudioContext(anything) || isNativeOfflineAudioContext(anything);\r\n    };\r\n};\r\n", "import { TIsNativeOfflineAudioContextFactory, TNativeOfflineAudioContext } from '../types';\r\n\r\nexport const createIsNativeOfflineAudioContext: TIsNativeOfflineAudioContextFactory = (nativeOfflineAudioContextConstructor) => {\r\n    return (anything): anything is TNativeOfflineAudioContext => {\r\n        return nativeOfflineAudioContextConstructor !== null && anything instanceof nativeOfflineAudioContextConstructor;\r\n    };\r\n};\r\n", "import { TIsSecureContextFactory } from '../types';\r\n\r\nexport const createIsSecureContext: TIsSecureContextFactory = (window) => window !== null && window.isSecureContext;\r\n", "import { TIsSupportedPromiseFactory } from '../types';\r\n\r\nexport const createIsSupportedPromise: TIsSupportedPromiseFactory = async (\r\n    cacheTestResult,\r\n    testAudioBufferCopyChannelMethodsSubarraySupport,\r\n    testAudioContextCloseMethodSupport,\r\n    testAudioContextDecodeAudioDataMethodTypeErrorSupport,\r\n    testAudioContextOptionsSupport,\r\n    testAudioNodeConnectMethodSupport,\r\n    testAudioWorkletProcessorNoOutputsSupport,\r\n    testChannelMergerNodeChannelCountSupport,\r\n    testConstantSourceNodeAccurateSchedulingSupport,\r\n    testConvolverNodeBufferReassignabilitySupport,\r\n    testConvolverNodeChannelCountSupport,\r\n    testDomExceptionContrucorSupport,\r\n    testIsSecureContextSupport,\r\n    testMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport,\r\n    testStereoPannerNodeDefaultValueSupport,\r\n    testTransferablesSupport\r\n) => {\r\n    if (\r\n        cacheTestResult(testAudioBufferCopyChannelMethodsSubarraySupport, testAudioBufferCopyChannelMethodsSubarraySupport) &&\r\n        cacheTestResult(testAudioContextCloseMethodSupport, testAudioContextCloseMethodSupport) &&\r\n        cacheTestResult(testAudioContextOptionsSupport, testAudioContextOptionsSupport) &&\r\n        cacheTestResult(testAudioNodeConnectMethodSupport, testAudioNodeConnectMethodSupport) &&\r\n        cacheTestResult(testChannelMergerNodeChannelCountSupport, testChannelMergerNodeChannelCountSupport) &&\r\n        cacheTestResult(testConstantSourceNodeAccurateSchedulingSupport, testConstantSourceNodeAccurateSchedulingSupport) &&\r\n        cacheTestResult(testConvolverNodeBufferReassignabilitySupport, testConvolverNodeBufferReassignabilitySupport) &&\r\n        cacheTestResult(testConvolverNodeChannelCountSupport, testConvolverNodeChannelCountSupport) &&\r\n        cacheTestResult(testDomExceptionContrucorSupport, testDomExceptionContrucorSupport) &&\r\n        cacheTestResult(testIsSecureContextSupport, testIsSecureContextSupport) &&\r\n        cacheTestResult(\r\n            testMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport,\r\n            testMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport\r\n        )\r\n    ) {\r\n        const results = await Promise.all([\r\n            cacheTestResult(testAudioContextDecodeAudioDataMethodTypeErrorSupport, testAudioContextDecodeAudioDataMethodTypeErrorSupport),\r\n            cacheTestResult(testAudioWorkletProcessorNoOutputsSupport, testAudioWorkletProcessorNoOutputsSupport),\r\n            cacheTestResult(testStereoPannerNodeDefaultValueSupport, testStereoPannerNodeDefaultValueSupport),\r\n            cacheTestResult(testTransferablesSupport, testTransferablesSupport)\r\n        ]);\r\n\r\n        return results.every((result) => result);\r\n    }\r\n\r\n    return false;\r\n};\r\n", "import { IAudioContext, IMediaElementAudioSourceNode, IMediaElementAudioSourceOptions, IMinimalAudioContext } from '../interfaces';\r\nimport { TAudioNodeRenderer, TMediaElementAudioSourceNodeConstructorFactory, TNativeMediaElementAudioSourceNode } from '../types';\r\n\r\nexport const createMediaElementAudioSourceNodeConstructor: TMediaElementAudioSourceNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createNativeMediaElementAudioSourceNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext\r\n) => {\r\n    return class MediaElementAudioSourceNode<T extends IAudioContext | IMinimalAudioContext> extends audioNodeConstructor<T>\r\n        implements IMediaElementAudioSourceNode<T> {\r\n        private _nativeMediaElementAudioSourceNode: TNativeMediaElementAudioSourceNode;\r\n\r\n        constructor(context: T, options: IMediaElementAudioSourceOptions) {\r\n            const nativeContext = getNativeContext(context);\r\n            const nativeMediaElementAudioSourceNode = createNativeMediaElementAudioSourceNode(nativeContext, options);\r\n\r\n            // Bug #171: Safari allows to create a MediaElementAudioSourceNode with an OfflineAudioContext.\r\n            if (isNativeOfflineAudioContext(nativeContext)) {\r\n                throw TypeError();\r\n            }\r\n\r\n            super(context, true, nativeMediaElementAudioSourceNode, <TAudioNodeRenderer<T>>null);\r\n\r\n            this._nativeMediaElementAudioSourceNode = nativeMediaElementAudioSourceNode;\r\n        }\r\n\r\n        get mediaElement(): HTMLMediaElement {\r\n            return this._nativeMediaElementAudioSourceNode.mediaElement;\r\n        }\r\n    };\r\n};\r\n", "import { IAudioContext, IAudioNodeOptions, IMediaStreamAudioDestinationNode, IMinimalAudioContext } from '../interfaces';\r\nimport { TAudioNodeRenderer, TMediaStreamAudioDestinationNodeConstructorFactory, TNativeMediaStreamAudioDestinationNode } from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    channelCount: 2,\r\n    channelCountMode: 'explicit',\r\n    channelInterpretation: 'speakers'\r\n} as const;\r\n\r\nexport const createMediaStreamAudioDestinationNodeConstructor: TMediaStreamAudioDestinationNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createNativeMediaStreamAudioDestinationNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext\r\n) => {\r\n    return class MediaStreamAudioDestinationNode<T extends IAudioContext | IMinimalAudioContext> extends audioNodeConstructor<T>\r\n        implements IMediaStreamAudioDestinationNode<T> {\r\n        private _nativeMediaStreamAudioDestinationNode: TNativeMediaStreamAudioDestinationNode;\r\n\r\n        constructor(context: T, options?: Partial<IAudioNodeOptions>) {\r\n            const nativeContext = getNativeContext(context);\r\n\r\n            // Bug #173: Safari allows to create a MediaStreamAudioDestinationNode with an OfflineAudioContext.\r\n            if (isNativeOfflineAudioContext(nativeContext)) {\r\n                throw new TypeError();\r\n            }\r\n\r\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\r\n            const nativeMediaStreamAudioDestinationNode = createNativeMediaStreamAudioDestinationNode(nativeContext, mergedOptions);\r\n\r\n            super(context, false, nativeMediaStreamAudioDestinationNode, <TAudioNodeRenderer<T>>null);\r\n\r\n            this._nativeMediaStreamAudioDestinationNode = nativeMediaStreamAudioDestinationNode;\r\n        }\r\n\r\n        get stream(): MediaStream {\r\n            return this._nativeMediaStreamAudioDestinationNode.stream;\r\n        }\r\n    };\r\n};\r\n", "import { IAudioContext, IMediaStreamAudioSourceNode, IMediaStreamAudioSourceOptions, IMinimalAudioContext } from '../interfaces';\r\nimport { TAudioNodeRenderer, TMediaStreamAudioSourceNodeConstructorFactory, TNativeMediaStreamAudioSourceNode } from '../types';\r\n\r\nexport const createMediaStreamAudioSourceNodeConstructor: TMediaStreamAudioSourceNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createNativeMediaStreamAudioSourceNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext\r\n) => {\r\n    return class MediaStreamAudioSourceNode<T extends IAudioContext | IMinimalAudioContext> extends audioNodeConstructor<T>\r\n        implements IMediaStreamAudioSourceNode<T> {\r\n        private _nativeMediaStreamAudioSourceNode: TNativeMediaStreamAudioSourceNode;\r\n\r\n        constructor(context: T, options: IMediaStreamAudioSourceOptions) {\r\n            const nativeContext = getNativeContext(context);\r\n            const nativeMediaStreamAudioSourceNode = createNativeMediaStreamAudioSourceNode(nativeContext, options);\r\n\r\n            // Bug #172: Safari allows to create a MediaStreamAudioSourceNode with an OfflineAudioContext.\r\n            if (isNativeOfflineAudioContext(nativeContext)) {\r\n                throw new TypeError();\r\n            }\r\n\r\n            super(context, true, nativeMediaStreamAudioSourceNode, <TAudioNodeRenderer<T>>null);\r\n\r\n            this._nativeMediaStreamAudioSourceNode = nativeMediaStreamAudioSourceNode;\r\n        }\r\n\r\n        get mediaStream(): MediaStream {\r\n            return this._nativeMediaStreamAudioSourceNode.mediaStream;\r\n        }\r\n    };\r\n};\r\n", "import { IAudioContext, IMediaStreamTrackAudioSourceNode, IMediaStreamTrackAudioSourceOptions, IMinimalAudioContext } from '../interfaces';\r\nimport { TAudioNodeRenderer, TMediaStreamTrackAudioSourceNodeConstructorFactory } from '../types';\r\n\r\nexport const createMediaStreamTrackAudioSourceNodeConstructor: TMediaStreamTrackAudioSourceNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createNativeMediaStreamTrackAudioSourceNode,\r\n    getNativeContext\r\n) => {\r\n    return class MediaStreamTrackAudioSourceNode<T extends IAudioContext | IMinimalAudioContext> extends audioNodeConstructor<T>\r\n        implements IMediaStreamTrackAudioSourceNode<T> {\r\n        constructor(context: T, options: IMediaStreamTrackAudioSourceOptions) {\r\n            const nativeContext = getNativeContext(context);\r\n            const nativeMediaStreamTrackAudioSourceNode = createNativeMediaStreamTrackAudioSourceNode(nativeContext, options);\r\n\r\n            super(context, true, nativeMediaStreamTrackAudioSourceNode, <TAudioNodeRenderer<T>>null);\r\n        }\r\n    };\r\n};\r\n", "import { deactivateAudioGraph } from '../helpers/deactivate-audio-graph';\r\nimport { isValidLatencyHint } from '../helpers/is-valid-latency-hint';\r\nimport { IAudioContextOptions, IMinimalAudioContext } from '../interfaces';\r\nimport {\r\n    TAudioContextState,\r\n    TMinimalAudioContextConstructorFactory,\r\n    TNativeAudioContext,\r\n    TNativeGainNode,\r\n    TNativeOscillatorNode\r\n} from '../types';\r\n\r\nexport const createMinimalAudioContextConstructor: TMinimalAudioContextConstructorFactory = (\r\n    createInvalidStateError,\r\n    createNotSupportedError,\r\n    createUnknownError,\r\n    minimalBaseAudioContextConstructor,\r\n    nativeAudioContextConstructor\r\n) => {\r\n    return class MinimalAudioContext extends minimalBaseAudioContextConstructor<IMinimalAudioContext> implements IMinimalAudioContext {\r\n        private _baseLatency: number;\r\n\r\n        private _nativeAudioContext: TNativeAudioContext;\r\n\r\n        private _nativeGainNode: null | TNativeGainNode;\r\n\r\n        private _nativeOscillatorNode: null | TNativeOscillatorNode;\r\n\r\n        private _state: null | 'suspended';\r\n\r\n        constructor(options: IAudioContextOptions = {}) {\r\n            if (nativeAudioContextConstructor === null) {\r\n                throw new Error('Missing the native AudioContext constructor.');\r\n            }\r\n\r\n            let nativeAudioContext: TNativeAudioContext;\r\n\r\n            try {\r\n                nativeAudioContext = new nativeAudioContextConstructor(options);\r\n            } catch (err) {\r\n                // Bug #192 Safari does throw a SyntaxError if the sampleRate is not supported.\r\n                if (err.code === 12 && err.message === 'sampleRate is not in range') {\r\n                    throw createNotSupportedError();\r\n                }\r\n\r\n                throw err;\r\n            }\r\n\r\n            // Bug #131 Safari returns null when there are four other AudioContexts running already.\r\n            if (nativeAudioContext === null) {\r\n                throw createUnknownError();\r\n            }\r\n\r\n            // Bug #51 Only Chrome and Edge throw an error if the given latencyHint is invalid.\r\n            if (!isValidLatencyHint(options.latencyHint)) {\r\n                throw new TypeError(\r\n                    `The provided value '${options.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`\r\n                );\r\n            }\r\n\r\n            // Bug #150 Safari does not support setting the sampleRate.\r\n            if (options.sampleRate !== undefined && nativeAudioContext.sampleRate !== options.sampleRate) {\r\n                throw createNotSupportedError();\r\n            }\r\n\r\n            super(nativeAudioContext, 2);\r\n\r\n            const { latencyHint } = options;\r\n            const { sampleRate } = nativeAudioContext;\r\n\r\n            // @todo The values for 'balanced', 'interactive' and 'playback' are just copied from Chrome's implementation.\r\n            this._baseLatency =\r\n                typeof nativeAudioContext.baseLatency === 'number'\r\n                    ? nativeAudioContext.baseLatency\r\n                    : latencyHint === 'balanced'\r\n                    ? 512 / sampleRate\r\n                    : latencyHint === 'interactive' || latencyHint === undefined\r\n                    ? 256 / sampleRate\r\n                    : latencyHint === 'playback'\r\n                    ? 1024 / sampleRate\r\n                    : /*\r\n                       * @todo The min (256) and max (16384) values are taken from the allowed bufferSize values of a\r\n                       * ScriptProcessorNode.\r\n                       */\r\n                      (Math.max(2, Math.min(128, Math.round((latencyHint * sampleRate) / 128))) * 128) / sampleRate;\r\n            this._nativeAudioContext = nativeAudioContext;\r\n\r\n            // Bug #188: Safari will set the context's state to 'interrupted' in case the user switches tabs.\r\n            if (nativeAudioContextConstructor.name === 'webkitAudioContext') {\r\n                this._nativeGainNode = nativeAudioContext.createGain();\r\n                this._nativeOscillatorNode = nativeAudioContext.createOscillator();\r\n\r\n                this._nativeGainNode.gain.value = 1e-37;\r\n\r\n                this._nativeOscillatorNode.connect(this._nativeGainNode).connect(nativeAudioContext.destination);\r\n                this._nativeOscillatorNode.start();\r\n            } else {\r\n                this._nativeGainNode = null;\r\n                this._nativeOscillatorNode = null;\r\n            }\r\n\r\n            this._state = null;\r\n\r\n            /*\r\n             * Bug #34: Chrome and Edge pretend to be running right away, but fire an onstatechange event when the state actually changes\r\n             * to 'running'.\r\n             */\r\n            if (nativeAudioContext.state === 'running') {\r\n                this._state = 'suspended';\r\n\r\n                const revokeState = () => {\r\n                    if (this._state === 'suspended') {\r\n                        this._state = null;\r\n                    }\r\n\r\n                    nativeAudioContext.removeEventListener('statechange', revokeState);\r\n                };\r\n\r\n                nativeAudioContext.addEventListener('statechange', revokeState);\r\n            }\r\n        }\r\n\r\n        get baseLatency(): number {\r\n            return this._baseLatency;\r\n        }\r\n\r\n        get state(): TAudioContextState {\r\n            return this._state !== null ? this._state : this._nativeAudioContext.state;\r\n        }\r\n\r\n        public close(): Promise<void> {\r\n            // Bug #35: Firefox does not throw an error if the AudioContext was closed before.\r\n            if (this.state === 'closed') {\r\n                return this._nativeAudioContext.close().then(() => {\r\n                    throw createInvalidStateError();\r\n                });\r\n            }\r\n\r\n            // Bug #34: If the state was set to suspended before it should be revoked now.\r\n            if (this._state === 'suspended') {\r\n                this._state = null;\r\n            }\r\n\r\n            return this._nativeAudioContext.close().then(() => {\r\n                if (this._nativeGainNode !== null && this._nativeOscillatorNode !== null) {\r\n                    this._nativeOscillatorNode.stop();\r\n\r\n                    this._nativeGainNode.disconnect();\r\n                    this._nativeOscillatorNode.disconnect();\r\n                }\r\n\r\n                deactivateAudioGraph(this);\r\n            });\r\n        }\r\n\r\n        public resume(): Promise<void> {\r\n            if (this._state === 'suspended') {\r\n                return new Promise((resolve, reject) => {\r\n                    const resolvePromise = () => {\r\n                        this._nativeAudioContext.removeEventListener('statechange', resolvePromise);\r\n\r\n                        if (this._nativeAudioContext.state === 'running') {\r\n                            resolve();\r\n                        } else {\r\n                            this.resume().then(resolve, reject);\r\n                        }\r\n                    };\r\n\r\n                    this._nativeAudioContext.addEventListener('statechange', resolvePromise);\r\n                });\r\n            }\r\n\r\n            return this._nativeAudioContext.resume().catch((err) => {\r\n                // Bug #55: Chrome and Edge do throw an InvalidAccessError instead of an InvalidStateError.\r\n                // Bug #56: Safari invokes the catch handler but without an error.\r\n                if (err === undefined || err.code === 15) {\r\n                    throw createInvalidStateError();\r\n                }\r\n\r\n                throw err;\r\n            });\r\n        }\r\n\r\n        public suspend(): Promise<void> {\r\n            return this._nativeAudioContext.suspend().catch((err) => {\r\n                // Bug #56: Safari invokes the catch handler but without an error.\r\n                if (err === undefined) {\r\n                    throw createInvalidStateError();\r\n                }\r\n\r\n                throw err;\r\n            });\r\n        }\r\n    };\r\n};\r\n", "import { CONTEXT_STORE } from '../globals';\r\nimport { IAudioDestinationNode, IAudioListener, IMinimalBaseAudioContext, IMinimalBaseAudioContextEventMap } from '../interfaces';\r\nimport { TAudioContextState, TContext, TEventHandler, TMinimalBaseAudioContextConstructorFactory, TNativeContext } from '../types';\r\n\r\nexport const createMinimalBaseAudioContextConstructor: TMinimalBaseAudioContextConstructorFactory = (\r\n    audioDestinationNodeConstructor,\r\n    createAudioListener,\r\n    eventTargetConstructor,\r\n    isNativeOfflineAudioContext,\r\n    unrenderedAudioWorkletNodeStore,\r\n    wrapEventListener\r\n) => {\r\n    return class MinimalBaseAudioContext<T extends TContext>\r\n        extends eventTargetConstructor<IMinimalBaseAudioContextEventMap>\r\n        implements IMinimalBaseAudioContext<T>\r\n    {\r\n        private _destination: IAudioDestinationNode<T>;\r\n\r\n        private _listener: IAudioListener;\r\n\r\n        private _onstatechange: null | TEventHandler<T>;\r\n\r\n        constructor(private _nativeContext: TNativeContext, numberOfChannels: number) {\r\n            super(_nativeContext);\r\n\r\n            CONTEXT_STORE.set(<T>(<unknown>this), _nativeContext);\r\n\r\n            if (isNativeOfflineAudioContext(_nativeContext)) {\r\n                unrenderedAudioWorkletNodeStore.set(_nativeContext, new Set());\r\n            }\r\n\r\n            this._destination = new audioDestinationNodeConstructor(<T>(<unknown>this), numberOfChannels);\r\n            this._listener = createAudioListener(<T>(<unknown>this), _nativeContext);\r\n            this._onstatechange = null;\r\n        }\r\n\r\n        get currentTime(): number {\r\n            return this._nativeContext.currentTime;\r\n        }\r\n\r\n        get destination(): IAudioDestinationNode<T> {\r\n            return this._destination;\r\n        }\r\n\r\n        get listener(): IAudioListener {\r\n            return this._listener;\r\n        }\r\n\r\n        get onstatechange(): null | TEventHandler<T> {\r\n            return this._onstatechange;\r\n        }\r\n\r\n        set onstatechange(value) {\r\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, value) : null;\r\n\r\n            this._nativeContext.onstatechange = wrappedListener;\r\n\r\n            const nativeOnStateChange = this._nativeContext.onstatechange;\r\n\r\n            this._onstatechange = nativeOnStateChange !== null && nativeOnStateChange === wrappedListener ? value : nativeOnStateChange;\r\n        }\r\n\r\n        get sampleRate(): number {\r\n            return this._nativeContext.sampleRate;\r\n        }\r\n\r\n        get state(): TAudioContextState {\r\n            return this._nativeContext.state;\r\n        }\r\n    };\r\n};\r\n", "import { TNativeContext } from '../types';\r\n\r\nexport const testPromiseSupport = (nativeContext: TNativeContext): boolean => {\r\n    // This 12 numbers represent the 48 bytes of an empty WAVE file with a single sample.\r\n    const uint32Array = new Uint32Array([1179011410, 40, 1163280727, 544501094, 16, 131073, 44100, 176400, 1048580, 1635017060, 4, 0]);\r\n\r\n    try {\r\n        // Bug #1: Safari requires a successCallback.\r\n        const promise = nativeContext.decodeAudioData(<ArrayBuffer>uint32Array.buffer, () => {\r\n            // Ignore the success callback.\r\n        });\r\n\r\n        if (promise === undefined) {\r\n            return false;\r\n        }\r\n\r\n        promise.catch(() => {\r\n            // Ignore rejected errors.\r\n        });\r\n\r\n        return true;\r\n    } catch {\r\n        // Ignore errors.\r\n    }\r\n\r\n    return false;\r\n};\r\n", "import { deactivateAudioGraph } from '../helpers/deactivate-audio-graph';\r\nimport { testPromiseSupport } from '../helpers/test-promise-support';\r\nimport { IAudioBuffer, IMinimalOfflineAudioContext, IOfflineAudioContextOptions } from '../interfaces';\r\nimport { TAudioContextState, TMinimalOfflineAudioContextConstructorFactory, TNativeOfflineAudioContext } from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    numberOfChannels: 1\r\n} as const;\r\n\r\nexport const createMinimalOfflineAudioContextConstructor: TMinimalOfflineAudioContextConstructorFactory = (\r\n    cacheTestResult,\r\n    createInvalidStateError,\r\n    createNativeOfflineAudioContext,\r\n    minimalBaseAudioContextConstructor,\r\n    startRendering\r\n) => {\r\n    return class MinimalOfflineAudioContext extends minimalBaseAudioContextConstructor<IMinimalOfflineAudioContext>\r\n        implements IMinimalOfflineAudioContext {\r\n        private _length: number;\r\n\r\n        private _nativeOfflineAudioContext: TNativeOfflineAudioContext;\r\n\r\n        private _state: null | TAudioContextState;\r\n\r\n        constructor(options: IOfflineAudioContextOptions) {\r\n            const { length, numberOfChannels, sampleRate } = { ...DEFAULT_OPTIONS, ...options };\r\n\r\n            const nativeOfflineAudioContext = createNativeOfflineAudioContext(numberOfChannels, length, sampleRate);\r\n\r\n            // #21 Safari does not support promises and therefore would fire the statechange event before the promise can be resolved.\r\n            if (!cacheTestResult(testPromiseSupport, () => testPromiseSupport(nativeOfflineAudioContext))) {\r\n                nativeOfflineAudioContext.addEventListener(\r\n                    'statechange',\r\n                    (() => {\r\n                        let i = 0;\r\n\r\n                        const delayStateChangeEvent = (event: Event) => {\r\n                            if (this._state === 'running') {\r\n                                if (i > 0) {\r\n                                    nativeOfflineAudioContext.removeEventListener('statechange', delayStateChangeEvent);\r\n                                    event.stopImmediatePropagation();\r\n\r\n                                    this._waitForThePromiseToSettle(event);\r\n                                } else {\r\n                                    i += 1;\r\n                                }\r\n                            }\r\n                        };\r\n\r\n                        return delayStateChangeEvent;\r\n                    })()\r\n                );\r\n            }\r\n\r\n            super(nativeOfflineAudioContext, numberOfChannels);\r\n\r\n            this._length = length;\r\n            this._nativeOfflineAudioContext = nativeOfflineAudioContext;\r\n            this._state = null;\r\n        }\r\n\r\n        get length(): number {\r\n            // Bug #17: Safari does not yet expose the length.\r\n            if (this._nativeOfflineAudioContext.length === undefined) {\r\n                return this._length;\r\n            }\r\n\r\n            return this._nativeOfflineAudioContext.length;\r\n        }\r\n\r\n        get state(): TAudioContextState {\r\n            return this._state === null ? this._nativeOfflineAudioContext.state : this._state;\r\n        }\r\n\r\n        public startRendering(): Promise<IAudioBuffer> {\r\n            /*\r\n             * Bug #9 & #59: It is theoretically possible that startRendering() will first render a partialOfflineAudioContext. Therefore\r\n             * the state of the nativeOfflineAudioContext might no transition to running immediately.\r\n             */\r\n            if (this._state === 'running') {\r\n                return Promise.reject(createInvalidStateError());\r\n            }\r\n\r\n            this._state = 'running';\r\n\r\n            return startRendering(this.destination, this._nativeOfflineAudioContext).finally(() => {\r\n                this._state = null;\r\n\r\n                deactivateAudioGraph(this);\r\n            });\r\n        }\r\n\r\n        private _waitForThePromiseToSettle(event: Event): void {\r\n            if (this._state === null) {\r\n                this._nativeOfflineAudioContext.dispatchEvent(event);\r\n            } else {\r\n                setTimeout(() => this._waitForThePromiseToSettle(event));\r\n            }\r\n        }\r\n    };\r\n};\r\n", "import { TMonitorConnectionsFactory, TNativeAudioNode, TNativeAudioParam } from '../types';\r\n\r\nexport const createMonitorConnections: TMonitorConnectionsFactory = (insertElementInSet, isNativeAudioNode) => {\r\n    return (nativeAudioNode, whenConnected, whenDisconnected) => {\r\n        const connections = new Set<[TNativeAudioNode, number, number] | [TNativeAudioParam, number]>();\r\n\r\n        nativeAudioNode.connect = <TNativeAudioNode['connect']>((connect) => {\r\n            // tslint:disable-next-line:invalid-void no-inferrable-types\r\n            return (destination: TNativeAudioNode | TNativeAudioParam, output = 0, input: number = 0): void | TNativeAudioNode => {\r\n                const wasDisconnected = connections.size === 0;\r\n\r\n                if (isNativeAudioNode(destination)) {\r\n                    // @todo TypeScript cannot infer the overloaded signature with 3 arguments yet.\r\n                    (<(destination: TNativeAudioNode, output?: number, input?: number) => TNativeAudioNode>connect).call(\r\n                        nativeAudioNode,\r\n                        destination,\r\n                        output,\r\n                        input\r\n                    );\r\n\r\n                    insertElementInSet(\r\n                        connections,\r\n                        [destination, output, input],\r\n                        (connection) => connection[0] === destination && connection[1] === output && connection[2] === input,\r\n                        true\r\n                    );\r\n\r\n                    if (wasDisconnected) {\r\n                        whenConnected();\r\n                    }\r\n\r\n                    return destination;\r\n                }\r\n\r\n                connect.call(nativeAudioNode, destination, output);\r\n\r\n                insertElementInSet(\r\n                    connections,\r\n                    [destination, output],\r\n                    (connection) => connection[0] === destination && connection[1] === output,\r\n                    true\r\n                );\r\n\r\n                if (wasDisconnected) {\r\n                    whenConnected();\r\n                }\r\n\r\n                return;\r\n            };\r\n        })(nativeAudioNode.connect);\r\n\r\n        nativeAudioNode.disconnect = ((disconnect) => {\r\n            return (destinationOrOutput?: number | TNativeAudioNode | TNativeAudioParam, output?: number, input?: number): void => {\r\n                const wasConnected = connections.size > 0;\r\n\r\n                if (destinationOrOutput === undefined) {\r\n                    disconnect.apply(nativeAudioNode);\r\n\r\n                    connections.clear();\r\n                } else if (typeof destinationOrOutput === 'number') {\r\n                    // @todo TypeScript cannot infer the overloaded signature with 1 argument yet.\r\n                    (<(output: number) => void>disconnect).call(nativeAudioNode, destinationOrOutput);\r\n\r\n                    for (const connection of connections) {\r\n                        if (connection[1] === destinationOrOutput) {\r\n                            connections.delete(connection);\r\n                        }\r\n                    }\r\n                } else {\r\n                    if (isNativeAudioNode(destinationOrOutput)) {\r\n                        // @todo TypeScript cannot infer the overloaded signature with 3 arguments yet.\r\n                        (<(destination: TNativeAudioNode, output?: number, input?: number) => void>disconnect).call(\r\n                            nativeAudioNode,\r\n                            destinationOrOutput,\r\n                            output,\r\n                            input\r\n                        );\r\n                    } else {\r\n                        // @todo TypeScript cannot infer the overloaded signature with 2 arguments yet.\r\n                        (<(destination: TNativeAudioParam, output?: number) => void>disconnect).call(\r\n                            nativeAudioNode,\r\n                            destinationOrOutput,\r\n                            output\r\n                        );\r\n                    }\r\n\r\n                    for (const connection of connections) {\r\n                        if (\r\n                            connection[0] === destinationOrOutput &&\r\n                            (output === undefined || connection[1] === output) &&\r\n                            (input === undefined || connection[2] === input)\r\n                        ) {\r\n                            connections.delete(connection);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                const isDisconnected = connections.size === 0;\r\n\r\n                if (wasConnected && isDisconnected) {\r\n                    whenDisconnected();\r\n                }\r\n            };\r\n        })(nativeAudioNode.disconnect);\r\n\r\n        return nativeAudioNode;\r\n    };\r\n};\r\n", "export const assignNativeAudioNodeOption = <T extends keyof any, U extends any>(\r\n    nativeAudioNode: Record<T, U>,\r\n    options: Record<T, U>,\r\n    option: T\r\n) => {\r\n    const value = options[option];\r\n\r\n    if (value !== undefined && value !== nativeAudioNode[option]) {\r\n        nativeAudioNode[option] = value;\r\n    }\r\n};\r\n", "import { IAudioNodeOptions } from '../interfaces';\r\nimport { TNativeAudioNode } from '../types';\r\nimport { assignNativeAudioNodeOption } from './assign-native-audio-node-option';\r\n\r\nexport const assignNativeAudioNodeOptions = (nativeAudioNode: TNativeAudioNode, options: IAudioNodeOptions): void => {\r\n    assignNativeAudioNodeOption(nativeAudioNode, options, 'channelCount');\r\n    assignNativeAudioNodeOption(nativeAudioNode, options, 'channelCountMode');\r\n    assignNativeAudioNodeOption(nativeAudioNode, options, 'channelInterpretation');\r\n};\r\n", "import { TNativeAnalyserNode } from '../types';\r\n\r\nexport const testAnalyserNodeGetFloatTimeDomainDataMethodSupport = (nativeAnalyserNode: TNativeAnalyserNode): boolean => {\r\n    return typeof nativeAnalyserNode.getFloatTimeDomainData === 'function';\r\n};\r\n", "import { TNativeAnalyserNode } from '../types';\r\n\r\nexport const wrapAnalyserNodeGetFloatTimeDomainDataMethod = (nativeAnalyserNode: TNativeAnalyserNode): void => {\r\n    nativeAnalyserNode.getFloatTimeDomainData = (array: Float32Array) => {\r\n        const byteTimeDomainData = new Uint8Array(array.length);\r\n\r\n        nativeAnalyserNode.getByteTimeDomainData(byteTimeDomainData);\r\n\r\n        const length = Math.max(byteTimeDomainData.length, nativeAnalyserNode.fftSize);\r\n\r\n        for (let i = 0; i < length; i += 1) {\r\n            array[i] = (byteTimeDomainData[i] - 128) * 0.0078125;\r\n        }\r\n\r\n        return array;\r\n    };\r\n};\r\n", "import { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\r\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\r\nimport { testAnalyserNodeGetFloatTimeDomainDataMethodSupport } from '../helpers/test-analyser-node-get-float-time-domain-data-method-support';\r\nimport { wrapAnalyserNodeGetFloatTimeDomainDataMethod } from '../helpers/wrap-analyser-node-get-float-time-domain-data-method';\r\nimport { TNativeAnalyserNodeFactoryFactory } from '../types';\r\n\r\nexport const createNativeAnalyserNodeFactory: TNativeAnalyserNodeFactoryFactory = (cacheTestResult, createIndexSizeError) => {\r\n    return (nativeContext, options) => {\r\n        const nativeAnalyserNode = nativeContext.createAnalyser();\r\n\r\n        // Bug #37: Firefox does not create an AnalyserNode with the default properties.\r\n        assignNativeAudioNodeOptions(nativeAnalyserNode, options);\r\n\r\n        // Bug #118: Safari does not throw an error if maxDecibels is not more than minDecibels.\r\n        if (!(options.maxDecibels > options.minDecibels)) {\r\n            throw createIndexSizeError();\r\n        }\r\n\r\n        assignNativeAudioNodeOption(nativeAnalyserNode, options, 'fftSize');\r\n        assignNativeAudioNodeOption(nativeAnalyserNode, options, 'maxDecibels');\r\n        assignNativeAudioNodeOption(nativeAnalyserNode, options, 'minDecibels');\r\n        assignNativeAudioNodeOption(nativeAnalyserNode, options, 'smoothingTimeConstant');\r\n\r\n        // Bug #36: Safari does not support getFloatTimeDomainData() yet.\r\n        if (\r\n            !cacheTestResult(testAnalyserNodeGetFloatTimeDomainDataMethodSupport, () =>\r\n                testAnalyserNodeGetFloatTimeDomainDataMethodSupport(nativeAnalyserNode)\r\n            )\r\n        ) {\r\n            wrapAnalyserNodeGetFloatTimeDomainDataMethod(nativeAnalyserNode);\r\n        }\r\n\r\n        return nativeAnalyserNode;\r\n    };\r\n};\r\n", "import { TNativeAudioBufferConstructorFactory } from '../types';\r\n\r\nexport const createNativeAudioBufferConstructor: TNativeAudioBufferConstructorFactory = (window) => {\r\n    if (window === null) {\r\n        return null;\r\n    }\r\n\r\n    if (window.hasOwnProperty('AudioBuffer')) {\r\n        return window.AudioBuffer;\r\n    }\r\n\r\n    return null;\r\n};\r\n", "export const assignNativeAudioNodeAudioParamValue = <T extends { [key: string]: any }, U extends { [key: string]: any }>(\r\n    nativeAudioNode: T,\r\n    options: U,\r\n    audioParam: keyof T & keyof U\r\n) => {\r\n    const value = options[audioParam];\r\n\r\n    if (value !== undefined && value !== nativeAudioNode[audioParam].value) {\r\n        nativeAudioNode[audioParam].value = value;\r\n    }\r\n};\r\n", "import { createInvalidStateError } from '../factories/invalid-state-error';\r\nimport { TNativeAudioBufferSourceNode } from '../types';\r\n\r\nexport const wrapAudioBufferSourceNodeStartMethodConsecutiveCalls = (nativeAudioBufferSourceNode: TNativeAudioBufferSourceNode): void => {\r\n    nativeAudioBufferSourceNode.start = ((start) => {\r\n        let isScheduled = false;\r\n\r\n        return (when = 0, offset = 0, duration?: number) => {\r\n            if (isScheduled) {\r\n                throw createInvalidStateError();\r\n            }\r\n\r\n            start.call(nativeAudioBufferSourceNode, when, offset, duration);\r\n\r\n            isScheduled = true;\r\n        };\r\n    })(nativeAudioBufferSourceNode.start);\r\n};\r\n", "import { TNativeAudioBufferSourceNode, TNativeConstantSourceNode, TNativeOscillatorNode } from '../types';\r\n\r\nexport const wrapAudioScheduledSourceNodeStartMethodNegativeParameters = (\r\n    nativeAudioScheduledSourceNode: TNativeAudioBufferSourceNode | TNativeConstantSourceNode | TNativeOscillatorNode\r\n): void => {\r\n    nativeAudioScheduledSourceNode.start = ((start) => {\r\n        return (when = 0, offset = 0, duration?: number) => {\r\n            if ((typeof duration === 'number' && duration < 0) || offset < 0 || when < 0) {\r\n                throw new RangeError(\"The parameters can't be negative.\");\r\n            }\r\n\r\n            // @todo TypeScript cannot infer the overloaded signature with 3 arguments yet.\r\n            (<(when: number, offset: number, duration?: number) => void>start).call(nativeAudioScheduledSourceNode, when, offset, duration);\r\n        };\r\n    })(nativeAudioScheduledSourceNode.start);\r\n};\r\n", "import { TNativeAudioBufferSourceNode, TNativeConstantSourceNode, TNativeOscillatorNode } from '../types';\r\n\r\nexport const wrapAudioScheduledSourceNodeStopMethodNegativeParameters = (\r\n    nativeAudioScheduledSourceNode: TNativeAudioBufferSourceNode | TNativeConstantSourceNode | TNativeOscillatorNode\r\n): void => {\r\n    nativeAudioScheduledSourceNode.stop = ((stop) => {\r\n        return (when = 0) => {\r\n            if (when < 0) {\r\n                throw new RangeError(\"The parameter can't be negative.\");\r\n            }\r\n\r\n            stop.call(nativeAudioScheduledSourceNode, when);\r\n        };\r\n    })(nativeAudioScheduledSourceNode.stop);\r\n};\r\n", "import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\r\nimport { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\r\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\r\nimport { wrapAudioBufferSourceNodeStartMethodConsecutiveCalls } from '../helpers/wrap-audio-buffer-source-node-start-method-consecutive-calls';\r\nimport { wrapAudioScheduledSourceNodeStartMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters';\r\nimport { wrapAudioScheduledSourceNodeStopMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters';\r\nimport { TNativeAudioBufferSourceNodeFactoryFactory } from '../types';\r\n\r\nexport const createNativeAudioBufferSourceNodeFactory: TNativeAudioBufferSourceNodeFactoryFactory = (\r\n    addSilentConnection,\r\n    cacheTestResult,\r\n    testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,\r\n    testAudioBufferSourceNodeStartMethodOffsetClampingSupport,\r\n    testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,\r\n    testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,\r\n    testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,\r\n    testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,\r\n    wrapAudioBufferSourceNodeStartMethodOffsetClampling,\r\n    wrapAudioBufferSourceNodeStopMethodNullifiedBuffer,\r\n    wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls\r\n) => {\r\n    return (nativeContext, options) => {\r\n        const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\r\n\r\n        assignNativeAudioNodeOptions(nativeAudioBufferSourceNode, options);\r\n\r\n        assignNativeAudioNodeAudioParamValue(nativeAudioBufferSourceNode, options, 'playbackRate');\r\n\r\n        assignNativeAudioNodeOption(nativeAudioBufferSourceNode, options, 'buffer');\r\n\r\n        // Bug #149: Safari does not yet support the detune AudioParam.\r\n\r\n        assignNativeAudioNodeOption(nativeAudioBufferSourceNode, options, 'loop');\r\n        assignNativeAudioNodeOption(nativeAudioBufferSourceNode, options, 'loopEnd');\r\n        assignNativeAudioNodeOption(nativeAudioBufferSourceNode, options, 'loopStart');\r\n\r\n        // Bug #69: Safari does allow calls to start() of an already scheduled AudioBufferSourceNode.\r\n        if (\r\n            !cacheTestResult(testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport, () =>\r\n                testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport(nativeContext)\r\n            )\r\n        ) {\r\n            wrapAudioBufferSourceNodeStartMethodConsecutiveCalls(nativeAudioBufferSourceNode);\r\n        }\r\n\r\n        // Bug #154 & #155: Safari does not handle offsets which are equal to or greater than the duration of the buffer.\r\n        if (\r\n            !cacheTestResult(testAudioBufferSourceNodeStartMethodOffsetClampingSupport, () =>\r\n                testAudioBufferSourceNodeStartMethodOffsetClampingSupport(nativeContext)\r\n            )\r\n        ) {\r\n            wrapAudioBufferSourceNodeStartMethodOffsetClampling(nativeAudioBufferSourceNode);\r\n        }\r\n\r\n        // Bug #162: Safari does throw an error when stop() is called on an AudioBufferSourceNode which has no buffer assigned to it.\r\n        if (\r\n            !cacheTestResult(testAudioBufferSourceNodeStopMethodNullifiedBufferSupport, () =>\r\n                testAudioBufferSourceNodeStopMethodNullifiedBufferSupport(nativeContext)\r\n            )\r\n        ) {\r\n            wrapAudioBufferSourceNodeStopMethodNullifiedBuffer(nativeAudioBufferSourceNode, nativeContext);\r\n        }\r\n\r\n        // Bug #44: Safari does not throw a RangeError yet.\r\n        if (\r\n            !cacheTestResult(testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, () =>\r\n                testAudioScheduledSourceNodeStartMethodNegativeParametersSupport(nativeContext)\r\n            )\r\n        ) {\r\n            wrapAudioScheduledSourceNodeStartMethodNegativeParameters(nativeAudioBufferSourceNode);\r\n        }\r\n\r\n        // Bug #19: Safari does not ignore calls to stop() of an already stopped AudioBufferSourceNode.\r\n        if (\r\n            !cacheTestResult(testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport, () =>\r\n                testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport(nativeContext)\r\n            )\r\n        ) {\r\n            wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls(nativeAudioBufferSourceNode, nativeContext);\r\n        }\r\n\r\n        // Bug #44: Only Firefox does not throw a RangeError yet.\r\n        if (\r\n            !cacheTestResult(testAudioScheduledSourceNodeStopMethodNegativeParametersSupport, () =>\r\n                testAudioScheduledSourceNodeStopMethodNegativeParametersSupport(nativeContext)\r\n            )\r\n        ) {\r\n            wrapAudioScheduledSourceNodeStopMethodNegativeParameters(nativeAudioBufferSourceNode);\r\n        }\r\n\r\n        // Bug #175: Safari will not fire an ended event if the AudioBufferSourceNode is unconnected.\r\n        addSilentConnection(nativeContext, nativeAudioBufferSourceNode);\r\n\r\n        return nativeAudioBufferSourceNode;\r\n    };\r\n};\r\n", "import { TNativeAudioContextConstructorFactory } from '../types';\r\n\r\nexport const createNativeAudioContextConstructor: TNativeAudioContextConstructorFactory = (window) => {\r\n    if (window === null) {\r\n        return null;\r\n    }\r\n\r\n    if (window.hasOwnProperty('AudioContext')) {\r\n        return window.AudioContext;\r\n    }\r\n\r\n    return window.hasOwnProperty('webkitAudioContext') ? (<any>window).webkitAudioContext : null;\r\n};\r\n", "import { TNativeAudioDestinationNode, TNativeAudioDestinationNodeFactoryFactory, TNativeGainNode } from '../types';\r\n\r\nexport const createNativeAudioDestinationNodeFactory: TNativeAudioDestinationNodeFactoryFactory = (\r\n    createNativeGainNode,\r\n    overwriteAccessors\r\n) => {\r\n    return (nativeContext, channelCount, isNodeOfNativeOfflineAudioContext) => {\r\n        const nativeAudioDestinationNode = nativeContext.destination;\r\n\r\n        // Bug #132: Safari does not have the correct channelCount.\r\n        if (nativeAudioDestinationNode.channelCount !== channelCount) {\r\n            try {\r\n                nativeAudioDestinationNode.channelCount = channelCount;\r\n            } catch {\r\n                // Bug #169: Safari throws an error on each attempt to change the channelCount.\r\n            }\r\n        }\r\n\r\n        // Bug #83: Safari does not have the correct channelCountMode.\r\n        if (isNodeOfNativeOfflineAudioContext && nativeAudioDestinationNode.channelCountMode !== 'explicit') {\r\n            nativeAudioDestinationNode.channelCountMode = 'explicit';\r\n        }\r\n\r\n        // Bug #47: The AudioDestinationNode in Safari does not initialize the maxChannelCount property correctly.\r\n        if (nativeAudioDestinationNode.maxChannelCount === 0) {\r\n            Object.defineProperty(nativeAudioDestinationNode, 'maxChannelCount', {\r\n                value: channelCount\r\n            });\r\n        }\r\n\r\n        // Bug #168: No browser does yet have an AudioDestinationNode with an output.\r\n        const gainNode = createNativeGainNode(nativeContext, {\r\n            channelCount,\r\n            channelCountMode: nativeAudioDestinationNode.channelCountMode,\r\n            channelInterpretation: nativeAudioDestinationNode.channelInterpretation,\r\n            gain: 1\r\n        });\r\n\r\n        overwriteAccessors(\r\n            gainNode,\r\n            'channelCount',\r\n            (get) => () => get.call(gainNode),\r\n            (set) => (value) => {\r\n                set.call(gainNode, value);\r\n\r\n                try {\r\n                    nativeAudioDestinationNode.channelCount = value;\r\n                } catch (err) {\r\n                    // Bug #169: Safari throws an error on each attempt to change the channelCount.\r\n                    if (value > nativeAudioDestinationNode.maxChannelCount) {\r\n                        throw err;\r\n                    }\r\n                }\r\n            }\r\n        );\r\n\r\n        overwriteAccessors(\r\n            gainNode,\r\n            'channelCountMode',\r\n            (get) => () => get.call(gainNode),\r\n            (set) => (value) => {\r\n                set.call(gainNode, value);\r\n                nativeAudioDestinationNode.channelCountMode = value;\r\n            }\r\n        );\r\n\r\n        overwriteAccessors(\r\n            gainNode,\r\n            'channelInterpretation',\r\n            (get) => () => get.call(gainNode),\r\n            (set) => (value) => {\r\n                set.call(gainNode, value);\r\n                nativeAudioDestinationNode.channelInterpretation = value;\r\n            }\r\n        );\r\n\r\n        Object.defineProperty(gainNode, 'maxChannelCount', {\r\n            get: () => nativeAudioDestinationNode.maxChannelCount\r\n        });\r\n\r\n        // @todo This should be disconnected when the context is closed.\r\n        gainNode.connect(nativeAudioDestinationNode);\r\n\r\n        return <{ maxChannelCount: TNativeAudioDestinationNode['maxChannelCount'] } & TNativeGainNode>gainNode;\r\n    };\r\n};\r\n", "import { TNativeAudioWorkletNodeConstructorFactory } from '../types';\r\n\r\nexport const createNativeAudioWorkletNodeConstructor: TNativeAudioWorkletNodeConstructorFactory = (window) => {\r\n    if (window === null) {\r\n        return null;\r\n    }\r\n\r\n    return window.hasOwnProperty('AudioWorkletNode') ? window.AudioWorkletNode : null;\r\n};\r\n", "import { IAudioWorkletNodeOptions } from '../interfaces';\r\n\r\nexport const testClonabilityOfAudioWorkletNodeOptions = (audioWorkletNodeOptions: IAudioWorkletNodeOptions): void => {\r\n    const { port1 } = new MessageChannel();\r\n\r\n    try {\r\n        // This will throw an error if the audioWorkletNodeOptions are not clonable.\r\n        port1.postMessage(audioWorkletNodeOptions);\r\n    } finally {\r\n        port1.close();\r\n    }\r\n};\r\n", "import { testClonabilityOfAudioWorkletNodeOptions } from '../helpers/test-clonability-of-audio-worklet-node-options';\r\nimport { TNativeAudioWorkletNode, TNativeAudioWorkletNodeFactoryFactory, TNativeAudioWorkletNodeOptions } from '../types';\r\n\r\nexport const createNativeAudioWorkletNodeFactory: TNativeAudioWorkletNodeFactoryFactory = (\r\n    createInvalidStateError,\r\n    createNativeAudioWorkletNodeFaker,\r\n    createNativeGainNode,\r\n    createNotSupportedError,\r\n    monitorConnections\r\n) => {\r\n    return (nativeContext, baseLatency, nativeAudioWorkletNodeConstructor, name, processorConstructor, options) => {\r\n        if (nativeAudioWorkletNodeConstructor !== null) {\r\n            try {\r\n                const nativeAudioWorkletNode = new nativeAudioWorkletNodeConstructor(\r\n                    nativeContext,\r\n                    name,\r\n                    <TNativeAudioWorkletNodeOptions>options\r\n                );\r\n                const patchedEventListeners: Map<\r\n                    EventListenerOrEventListenerObject,\r\n                    NonNullable<TNativeAudioWorkletNode['onprocessorerror']>\r\n                > = new Map();\r\n\r\n                let onprocessorerror: TNativeAudioWorkletNode['onprocessorerror'] = null;\r\n\r\n                Object.defineProperties(nativeAudioWorkletNode, {\r\n                    /*\r\n                     * Bug #61: Overwriting the property accessors for channelCount and channelCountMode is necessary as long as some\r\n                     * browsers have no native implementation to achieve a consistent behavior.\r\n                     */\r\n                    channelCount: {\r\n                        get: () => options.channelCount,\r\n                        set: () => {\r\n                            throw createInvalidStateError();\r\n                        }\r\n                    },\r\n                    channelCountMode: {\r\n                        get: () => 'explicit',\r\n                        set: () => {\r\n                            throw createInvalidStateError();\r\n                        }\r\n                    },\r\n                    // Bug #156: Chrome and Edge do not yet fire an ErrorEvent.\r\n                    onprocessorerror: {\r\n                        get: () => onprocessorerror,\r\n                        set: (value) => {\r\n                            if (typeof onprocessorerror === 'function') {\r\n                                nativeAudioWorkletNode.removeEventListener('processorerror', onprocessorerror);\r\n                            }\r\n\r\n                            onprocessorerror = typeof value === 'function' ? value : null;\r\n\r\n                            if (typeof onprocessorerror === 'function') {\r\n                                nativeAudioWorkletNode.addEventListener('processorerror', onprocessorerror);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n\r\n                nativeAudioWorkletNode.addEventListener = ((addEventListener) => {\r\n                    return (...args: [string, EventListenerOrEventListenerObject, (boolean | AddEventListenerOptions)?]): void => {\r\n                        if (args[0] === 'processorerror') {\r\n                            const unpatchedEventListener =\r\n                                typeof args[1] === 'function'\r\n                                    ? args[1]\r\n                                    : typeof args[1] === 'object' && args[1] !== null && typeof args[1].handleEvent === 'function'\r\n                                    ? args[1].handleEvent\r\n                                    : null;\r\n\r\n                            if (unpatchedEventListener !== null) {\r\n                                const patchedEventListener = patchedEventListeners.get(args[1]);\r\n\r\n                                if (patchedEventListener !== undefined) {\r\n                                    args[1] = patchedEventListener;\r\n                                } else {\r\n                                    args[1] = (event: Event) => {\r\n                                        // Bug #178: Chrome and Edge do fire an event of type error.\r\n                                        if (event.type === 'error') {\r\n                                            Object.defineProperties(event, {\r\n                                                type: { value: 'processorerror' }\r\n                                            });\r\n\r\n                                            unpatchedEventListener(event);\r\n                                        } else {\r\n                                            unpatchedEventListener(new ErrorEvent(args[0], { ...event }));\r\n                                        }\r\n                                    };\r\n\r\n                                    patchedEventListeners.set(unpatchedEventListener, args[1]);\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        // Bug #178: Chrome and Edge do fire an event of type error.\r\n                        addEventListener.call(nativeAudioWorkletNode, 'error', args[1], args[2]);\r\n\r\n                        return addEventListener.call(nativeAudioWorkletNode, ...args);\r\n                    };\r\n                })(nativeAudioWorkletNode.addEventListener);\r\n\r\n                nativeAudioWorkletNode.removeEventListener = ((removeEventListener) => {\r\n                    return (...args: any[]): void => {\r\n                        if (args[0] === 'processorerror') {\r\n                            const patchedEventListener = patchedEventListeners.get(args[1]);\r\n\r\n                            if (patchedEventListener !== undefined) {\r\n                                patchedEventListeners.delete(args[1]);\r\n\r\n                                args[1] = patchedEventListener;\r\n                            }\r\n                        }\r\n\r\n                        // Bug #178: Chrome and Edge do fire an event of type error.\r\n                        removeEventListener.call(nativeAudioWorkletNode, 'error', args[1], args[2]);\r\n\r\n                        return removeEventListener.call(nativeAudioWorkletNode, args[0], args[1], args[2]);\r\n                    };\r\n                })(nativeAudioWorkletNode.removeEventListener);\r\n\r\n                /*\r\n                 * Bug #86: Chrome and Edge do not invoke the process() function if the corresponding AudioWorkletNode is unconnected but\r\n                 * has an output.\r\n                 */\r\n                if (options.numberOfOutputs !== 0) {\r\n                    const nativeGainNode = createNativeGainNode(nativeContext, {\r\n                        channelCount: 1,\r\n                        channelCountMode: 'explicit',\r\n                        channelInterpretation: 'discrete',\r\n                        gain: 0\r\n                    });\r\n\r\n                    nativeAudioWorkletNode.connect(nativeGainNode).connect(nativeContext.destination);\r\n\r\n                    const whenConnected = () => nativeGainNode.disconnect();\r\n                    const whenDisconnected = () => nativeGainNode.connect(nativeContext.destination);\r\n\r\n                    // @todo Disconnect the connection when the process() function of the AudioWorkletNode returns false.\r\n                    return monitorConnections(nativeAudioWorkletNode, whenConnected, whenDisconnected);\r\n                }\r\n\r\n                return nativeAudioWorkletNode;\r\n            } catch (err) {\r\n                // Bug #60: Chrome & Edge throw an InvalidStateError instead of a NotSupportedError.\r\n                if (err.code === 11) {\r\n                    throw createNotSupportedError();\r\n                }\r\n\r\n                throw err;\r\n            }\r\n        }\r\n\r\n        // Bug #61: Only Chrome & Edge have an implementation of the AudioWorkletNode yet.\r\n        if (processorConstructor === undefined) {\r\n            throw createNotSupportedError();\r\n        }\r\n\r\n        testClonabilityOfAudioWorkletNodeOptions(options);\r\n\r\n        return createNativeAudioWorkletNodeFaker(nativeContext, baseLatency, processorConstructor, options);\r\n    };\r\n};\r\n", "export const computeBufferSize = (baseLatency: null | number, sampleRate: number) => {\r\n    if (baseLatency === null) {\r\n        return 512;\r\n    }\r\n\r\n    return Math.max(512, Math.min(16384, Math.pow(2, Math.round(Math.log2(baseLatency * sampleRate)))));\r\n};\r\n", "import { IAudioWorkletNodeOptions } from '../interfaces';\r\n\r\nexport const cloneAudioWorkletNodeOptions = (audioWorkletNodeOptions: IAudioWorkletNodeOptions): Promise<IAudioWorkletNodeOptions> => {\r\n    return new Promise((resolve, reject) => {\r\n        const { port1, port2 } = new MessageChannel();\r\n\r\n        port1.onmessage = ({ data }) => {\r\n            port1.close();\r\n            port2.close();\r\n\r\n            resolve(data);\r\n        };\r\n        port1.onmessageerror = ({ data }) => {\r\n            port1.close();\r\n            port2.close();\r\n\r\n            reject(data);\r\n        };\r\n\r\n        // This will throw an error if the audioWorkletNodeOptions are not clonable.\r\n        port2.postMessage(audioWorkletNodeOptions);\r\n    });\r\n};\r\n", "import { IAudioWorkletNodeOptions, IAudioWorkletProcessor, IAudioWorkletProcessorConstructor } from '../interfaces';\r\nimport { cloneAudioWorkletNodeOptions } from './clone-audio-worklet-node-options';\r\n\r\nexport const createAudioWorkletProcessorPromise = async (\r\n    processorConstructor: IAudioWorkletProcessorConstructor,\r\n    audioWorkletNodeOptions: IAudioWorkletNodeOptions\r\n): Promise<IAudioWorkletProcessor> => {\r\n    const clonedAudioWorkletNodeOptions = await cloneAudioWorkletNodeOptions(audioWorkletNodeOptions);\r\n\r\n    return new processorConstructor(clonedAudioWorkletNodeOptions);\r\n};\r\n", "import { NODE_TO_PROCESSOR_MAPS } from '../globals';\r\nimport { IAudioWorkletNodeOptions, IAudioWorkletProcessor, IAudioWorkletProcessorConstructor } from '../interfaces';\r\nimport { TNativeAudioWorkletNode, TNativeContext } from '../types';\r\nimport { createAudioWorkletProcessorPromise } from './create-audio-worklet-processor-promise';\r\n\r\nexport const createAudioWorkletProcessor = (\r\n    nativeContext: TNativeContext,\r\n    nativeAudioWorkletNode: TNativeAudioWorkletNode,\r\n    processorConstructor: IAudioWorkletProcessorConstructor,\r\n    audioWorkletNodeOptions: IAudioWorkletNodeOptions\r\n): Promise<IAudioWorkletProcessor> => {\r\n    let nodeToProcessorMap = NODE_TO_PROCESSOR_MAPS.get(nativeContext);\r\n\r\n    if (nodeToProcessorMap === undefined) {\r\n        nodeToProcessorMap = new WeakMap();\r\n\r\n        NODE_TO_PROCESSOR_MAPS.set(nativeContext, nodeToProcessorMap);\r\n    }\r\n\r\n    const audioWorkletProcessorPromise = createAudioWorkletProcessorPromise(processorConstructor, audioWorkletNodeOptions);\r\n\r\n    nodeToProcessorMap.set(nativeAudioWorkletNode, audioWorkletProcessorPromise);\r\n\r\n    return audioWorkletProcessorPromise;\r\n};\r\n", "import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\r\nimport { computeBufferSize } from '../helpers/compute-buffer-size';\r\nimport { copyFromChannel } from '../helpers/copy-from-channel';\r\nimport { copyToChannel } from '../helpers/copy-to-channel';\r\nimport { createAudioWorkletProcessor } from '../helpers/create-audio-worklet-processor';\r\nimport { createNestedArrays } from '../helpers/create-nested-arrays';\r\nimport { IAudioWorkletProcessor } from '../interfaces';\r\nimport { ReadOnlyMap } from '../read-only-map';\r\nimport {\r\n    TNativeAudioNode,\r\n    TNativeAudioParam,\r\n    TNativeAudioWorkletNode,\r\n    TNativeAudioWorkletNodeFakerFactoryFactory,\r\n    TNativeChannelMergerNode,\r\n    TNativeChannelSplitterNode,\r\n    TNativeConstantSourceNode,\r\n    TNativeGainNode\r\n} from '../types';\r\n\r\nexport const createNativeAudioWorkletNodeFakerFactory: TNativeAudioWorkletNodeFakerFactoryFactory = (\r\n    connectMultipleOutputs,\r\n    createIndexSizeError,\r\n    createInvalidStateError,\r\n    createNativeChannelMergerNode,\r\n    createNativeChannelSplitterNode,\r\n    createNativeConstantSourceNode,\r\n    createNativeGainNode,\r\n    createNativeScriptProcessorNode,\r\n    createNotSupportedError,\r\n    disconnectMultipleOutputs,\r\n    exposeCurrentFrameAndCurrentTime,\r\n    getActiveAudioWorkletNodeInputs,\r\n    monitorConnections\r\n) => {\r\n    return (nativeContext, baseLatency, processorConstructor, options) => {\r\n        if (options.numberOfInputs === 0 && options.numberOfOutputs === 0) {\r\n            throw createNotSupportedError();\r\n        }\r\n\r\n        const outputChannelCount = Array.isArray(options.outputChannelCount)\r\n            ? options.outputChannelCount\r\n            : Array.from(options.outputChannelCount);\r\n\r\n        // @todo Check if any of the channelCount values is greater than the implementation's maximum number of channels.\r\n        if (outputChannelCount.some((channelCount) => channelCount < 1)) {\r\n            throw createNotSupportedError();\r\n        }\r\n\r\n        if (outputChannelCount.length !== options.numberOfOutputs) {\r\n            throw createIndexSizeError();\r\n        }\r\n\r\n        // Bug #61: This is not part of the standard but required for the faker to work.\r\n        if (options.channelCountMode !== 'explicit') {\r\n            throw createNotSupportedError();\r\n        }\r\n\r\n        const numberOfInputChannels = options.channelCount * options.numberOfInputs;\r\n        const numberOfOutputChannels = outputChannelCount.reduce((sum, value) => sum + value, 0);\r\n        const numberOfParameters =\r\n            processorConstructor.parameterDescriptors === undefined ? 0 : processorConstructor.parameterDescriptors.length;\r\n\r\n        // Bug #61: This is not part of the standard but required for the faker to work.\r\n        if (numberOfInputChannels + numberOfParameters > 6 || numberOfOutputChannels > 6) {\r\n            throw createNotSupportedError();\r\n        }\r\n\r\n        const messageChannel = new MessageChannel();\r\n        const gainNodes: TNativeGainNode[] = [];\r\n        const inputChannelSplitterNodes: TNativeChannelSplitterNode[] = [];\r\n\r\n        for (let i = 0; i < options.numberOfInputs; i += 1) {\r\n            gainNodes.push(\r\n                createNativeGainNode(nativeContext, {\r\n                    channelCount: options.channelCount,\r\n                    channelCountMode: options.channelCountMode,\r\n                    channelInterpretation: options.channelInterpretation,\r\n                    gain: 1\r\n                })\r\n            );\r\n            inputChannelSplitterNodes.push(\r\n                createNativeChannelSplitterNode(nativeContext, {\r\n                    channelCount: options.channelCount,\r\n                    channelCountMode: 'explicit',\r\n                    channelInterpretation: 'discrete',\r\n                    numberOfOutputs: options.channelCount\r\n                })\r\n            );\r\n        }\r\n\r\n        const constantSourceNodes: TNativeConstantSourceNode[] = [];\r\n\r\n        if (processorConstructor.parameterDescriptors !== undefined) {\r\n            for (const { defaultValue, maxValue, minValue, name } of processorConstructor.parameterDescriptors) {\r\n                const constantSourceNode = createNativeConstantSourceNode(nativeContext, {\r\n                    channelCount: 1,\r\n                    channelCountMode: 'explicit',\r\n                    channelInterpretation: 'discrete',\r\n                    offset:\r\n                        options.parameterData[name] !== undefined\r\n                            ? options.parameterData[name]\r\n                            : defaultValue === undefined\r\n                            ? 0\r\n                            : defaultValue\r\n                });\r\n\r\n                Object.defineProperties(constantSourceNode.offset, {\r\n                    defaultValue: {\r\n                        get: () => (defaultValue === undefined ? 0 : defaultValue)\r\n                    },\r\n                    maxValue: {\r\n                        get: () => (maxValue === undefined ? MOST_POSITIVE_SINGLE_FLOAT : maxValue)\r\n                    },\r\n                    minValue: {\r\n                        get: () => (minValue === undefined ? MOST_NEGATIVE_SINGLE_FLOAT : minValue)\r\n                    }\r\n                });\r\n\r\n                constantSourceNodes.push(constantSourceNode);\r\n            }\r\n        }\r\n\r\n        const inputChannelMergerNode = createNativeChannelMergerNode(nativeContext, {\r\n            channelCount: 1,\r\n            channelCountMode: 'explicit',\r\n            channelInterpretation: 'speakers',\r\n            numberOfInputs: Math.max(1, numberOfInputChannels + numberOfParameters)\r\n        });\r\n        const bufferSize = computeBufferSize(baseLatency, nativeContext.sampleRate);\r\n        const scriptProcessorNode = createNativeScriptProcessorNode(\r\n            nativeContext,\r\n            bufferSize,\r\n            numberOfInputChannels + numberOfParameters,\r\n            // Bug #87: Only Firefox will fire an AudioProcessingEvent if there is no connected output.\r\n            Math.max(1, numberOfOutputChannels)\r\n        );\r\n        const outputChannelSplitterNode = createNativeChannelSplitterNode(nativeContext, {\r\n            channelCount: Math.max(1, numberOfOutputChannels),\r\n            channelCountMode: 'explicit',\r\n            channelInterpretation: 'discrete',\r\n            numberOfOutputs: Math.max(1, numberOfOutputChannels)\r\n        });\r\n        const outputChannelMergerNodes: TNativeChannelMergerNode[] = [];\r\n\r\n        for (let i = 0; i < options.numberOfOutputs; i += 1) {\r\n            outputChannelMergerNodes.push(\r\n                createNativeChannelMergerNode(nativeContext, {\r\n                    channelCount: 1,\r\n                    channelCountMode: 'explicit',\r\n                    channelInterpretation: 'speakers',\r\n                    numberOfInputs: outputChannelCount[i]\r\n                })\r\n            );\r\n        }\r\n\r\n        for (let i = 0; i < options.numberOfInputs; i += 1) {\r\n            gainNodes[i].connect(inputChannelSplitterNodes[i]);\r\n\r\n            for (let j = 0; j < options.channelCount; j += 1) {\r\n                inputChannelSplitterNodes[i].connect(inputChannelMergerNode, j, i * options.channelCount + j);\r\n            }\r\n        }\r\n\r\n        const parameterMap = new ReadOnlyMap(\r\n            processorConstructor.parameterDescriptors === undefined\r\n                ? []\r\n                : processorConstructor.parameterDescriptors.map(({ name }, index) => {\r\n                      const constantSourceNode = constantSourceNodes[index];\r\n\r\n                      constantSourceNode.connect(inputChannelMergerNode, 0, numberOfInputChannels + index);\r\n                      constantSourceNode.start(0);\r\n\r\n                      return <[string, TNativeAudioParam]>[name, constantSourceNode.offset];\r\n                  })\r\n        );\r\n\r\n        inputChannelMergerNode.connect(scriptProcessorNode);\r\n\r\n        let channelInterpretation = options.channelInterpretation;\r\n        let onprocessorerror: TNativeAudioWorkletNode['onprocessorerror'] = null;\r\n\r\n        // Bug #87: Expose at least one output to make this node connectable.\r\n        const outputAudioNodes = options.numberOfOutputs === 0 ? [scriptProcessorNode] : outputChannelMergerNodes;\r\n        const nativeAudioWorkletNodeFaker = {\r\n            get bufferSize(): number {\r\n                return bufferSize;\r\n            },\r\n            get channelCount(): number {\r\n                return options.channelCount;\r\n            },\r\n            set channelCount(_) {\r\n                // Bug #61: This is not part of the standard but required for the faker to work.\r\n                throw createInvalidStateError();\r\n            },\r\n            get channelCountMode(): TNativeAudioWorkletNode['channelCountMode'] {\r\n                return options.channelCountMode;\r\n            },\r\n            set channelCountMode(_) {\r\n                // Bug #61: This is not part of the standard but required for the faker to work.\r\n                throw createInvalidStateError();\r\n            },\r\n            get channelInterpretation(): TNativeAudioWorkletNode['channelInterpretation'] {\r\n                return channelInterpretation;\r\n            },\r\n            set channelInterpretation(value) {\r\n                for (const gainNode of gainNodes) {\r\n                    gainNode.channelInterpretation = value;\r\n                }\r\n\r\n                channelInterpretation = value;\r\n            },\r\n            get context(): TNativeAudioWorkletNode['context'] {\r\n                return scriptProcessorNode.context;\r\n            },\r\n            get inputs(): TNativeAudioNode[] {\r\n                return gainNodes;\r\n            },\r\n            get numberOfInputs(): number {\r\n                return options.numberOfInputs;\r\n            },\r\n            get numberOfOutputs(): number {\r\n                return options.numberOfOutputs;\r\n            },\r\n            get onprocessorerror(): TNativeAudioWorkletNode['onprocessorerror'] {\r\n                return onprocessorerror;\r\n            },\r\n            set onprocessorerror(value) {\r\n                if (typeof onprocessorerror === 'function') {\r\n                    nativeAudioWorkletNodeFaker.removeEventListener('processorerror', onprocessorerror);\r\n                }\r\n\r\n                onprocessorerror = typeof value === 'function' ? value : null;\r\n\r\n                if (typeof onprocessorerror === 'function') {\r\n                    nativeAudioWorkletNodeFaker.addEventListener('processorerror', onprocessorerror);\r\n                }\r\n            },\r\n            get parameters(): TNativeAudioWorkletNode['parameters'] {\r\n                return parameterMap;\r\n            },\r\n            get port(): TNativeAudioWorkletNode['port'] {\r\n                return messageChannel.port2;\r\n            },\r\n            addEventListener(...args: any[]): void {\r\n                return scriptProcessorNode.addEventListener(args[0], args[1], args[2]);\r\n            },\r\n            connect: <TNativeAudioNode['connect']>connectMultipleOutputs.bind(null, outputAudioNodes),\r\n            disconnect: <TNativeAudioNode['disconnect']>disconnectMultipleOutputs.bind(null, outputAudioNodes),\r\n            dispatchEvent(...args: any[]): boolean {\r\n                return scriptProcessorNode.dispatchEvent(args[0]);\r\n            },\r\n            removeEventListener(...args: any[]): void {\r\n                return scriptProcessorNode.removeEventListener(args[0], args[1], args[2]);\r\n            }\r\n        };\r\n\r\n        const patchedEventListeners: Map<EventListenerOrEventListenerObject, NonNullable<MessagePort['onmessage']>> = new Map();\r\n\r\n        messageChannel.port1.addEventListener = ((addEventListener) => {\r\n            return (...args: [string, EventListenerOrEventListenerObject, (boolean | AddEventListenerOptions)?]): void => {\r\n                if (args[0] === 'message') {\r\n                    const unpatchedEventListener =\r\n                        typeof args[1] === 'function'\r\n                            ? args[1]\r\n                            : typeof args[1] === 'object' && args[1] !== null && typeof args[1].handleEvent === 'function'\r\n                            ? args[1].handleEvent\r\n                            : null;\r\n\r\n                    if (unpatchedEventListener !== null) {\r\n                        const patchedEventListener = patchedEventListeners.get(args[1]);\r\n\r\n                        if (patchedEventListener !== undefined) {\r\n                            args[1] = <EventListenerOrEventListenerObject>patchedEventListener;\r\n                        } else {\r\n                            args[1] = (event: Event) => {\r\n                                exposeCurrentFrameAndCurrentTime(nativeContext.currentTime, nativeContext.sampleRate, () =>\r\n                                    unpatchedEventListener(event)\r\n                                );\r\n                            };\r\n\r\n                            patchedEventListeners.set(unpatchedEventListener, args[1]);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return addEventListener.call(messageChannel.port1, args[0], args[1], args[2]);\r\n            };\r\n        })(messageChannel.port1.addEventListener);\r\n\r\n        messageChannel.port1.removeEventListener = ((removeEventListener) => {\r\n            return (...args: any[]): void => {\r\n                if (args[0] === 'message') {\r\n                    const patchedEventListener = patchedEventListeners.get(args[1]);\r\n\r\n                    if (patchedEventListener !== undefined) {\r\n                        patchedEventListeners.delete(args[1]);\r\n\r\n                        args[1] = patchedEventListener;\r\n                    }\r\n                }\r\n\r\n                return removeEventListener.call(messageChannel.port1, args[0], args[1], args[2]);\r\n            };\r\n        })(messageChannel.port1.removeEventListener);\r\n\r\n        let onmessage: MessagePort['onmessage'] = null;\r\n\r\n        Object.defineProperty(messageChannel.port1, 'onmessage', {\r\n            get: () => onmessage,\r\n            set: (value) => {\r\n                if (typeof onmessage === 'function') {\r\n                    messageChannel.port1.removeEventListener('message', onmessage);\r\n                }\r\n\r\n                onmessage = typeof value === 'function' ? value : null;\r\n\r\n                if (typeof onmessage === 'function') {\r\n                    messageChannel.port1.addEventListener('message', onmessage);\r\n                    messageChannel.port1.start();\r\n                }\r\n            }\r\n        });\r\n\r\n        processorConstructor.prototype.port = messageChannel.port1;\r\n\r\n        let audioWorkletProcessor: null | IAudioWorkletProcessor = null;\r\n\r\n        const audioWorkletProcessorPromise = createAudioWorkletProcessor(\r\n            nativeContext,\r\n            nativeAudioWorkletNodeFaker,\r\n            processorConstructor,\r\n            options\r\n        );\r\n\r\n        audioWorkletProcessorPromise.then((dWrkltPrcssr) => (audioWorkletProcessor = dWrkltPrcssr));\r\n\r\n        const inputs = createNestedArrays(options.numberOfInputs, options.channelCount);\r\n        const outputs = createNestedArrays(options.numberOfOutputs, outputChannelCount);\r\n        const parameters: { [name: string]: Float32Array } =\r\n            processorConstructor.parameterDescriptors === undefined\r\n                ? []\r\n                : processorConstructor.parameterDescriptors.reduce(\r\n                      (prmtrs, { name }) => ({ ...prmtrs, [name]: new Float32Array(128) }),\r\n                      {}\r\n                  );\r\n\r\n        let isActive = true;\r\n\r\n        const disconnectOutputsGraph = () => {\r\n            if (options.numberOfOutputs > 0) {\r\n                scriptProcessorNode.disconnect(outputChannelSplitterNode);\r\n            }\r\n\r\n            for (let i = 0, outputChannelSplitterNodeOutput = 0; i < options.numberOfOutputs; i += 1) {\r\n                const outputChannelMergerNode = outputChannelMergerNodes[i];\r\n\r\n                for (let j = 0; j < outputChannelCount[i]; j += 1) {\r\n                    outputChannelSplitterNode.disconnect(outputChannelMergerNode, outputChannelSplitterNodeOutput + j, j);\r\n                }\r\n\r\n                outputChannelSplitterNodeOutput += outputChannelCount[i];\r\n            }\r\n        };\r\n\r\n        const activeInputIndexes = new Map<number, number>();\r\n\r\n        // tslint:disable-next-line:deprecation\r\n        scriptProcessorNode.onaudioprocess = ({ inputBuffer, outputBuffer }: AudioProcessingEvent) => {\r\n            if (audioWorkletProcessor !== null) {\r\n                const activeInputs = getActiveAudioWorkletNodeInputs(nativeAudioWorkletNodeFaker);\r\n\r\n                for (let i = 0; i < bufferSize; i += 128) {\r\n                    for (let j = 0; j < options.numberOfInputs; j += 1) {\r\n                        for (let k = 0; k < options.channelCount; k += 1) {\r\n                            copyFromChannel(inputBuffer, inputs[j], k, k, i);\r\n                        }\r\n                    }\r\n\r\n                    if (processorConstructor.parameterDescriptors !== undefined) {\r\n                        processorConstructor.parameterDescriptors.forEach(({ name }, index) => {\r\n                            copyFromChannel(inputBuffer, parameters, name, numberOfInputChannels + index, i);\r\n                        });\r\n                    }\r\n\r\n                    for (let j = 0; j < options.numberOfInputs; j += 1) {\r\n                        for (let k = 0; k < outputChannelCount[j]; k += 1) {\r\n                            // The byteLength will be 0 when the ArrayBuffer was transferred.\r\n                            if (outputs[j][k].byteLength === 0) {\r\n                                outputs[j][k] = new Float32Array(128);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    try {\r\n                        const potentiallyEmptyInputs = inputs.map((input, index) => {\r\n                            const activeInput = activeInputs[index];\r\n\r\n                            if (activeInput.size > 0) {\r\n                                activeInputIndexes.set(index, bufferSize / 128);\r\n\r\n                                return input;\r\n                            }\r\n\r\n                            const count = activeInputIndexes.get(index);\r\n\r\n                            if (count === undefined) {\r\n                                return [];\r\n                            }\r\n\r\n                            if (input.every((channelData) => channelData.every((sample) => sample === 0))) {\r\n                                if (count === 1) {\r\n                                    activeInputIndexes.delete(index);\r\n                                } else {\r\n                                    activeInputIndexes.set(index, count - 1);\r\n                                }\r\n                            }\r\n\r\n                            return input;\r\n                        });\r\n\r\n                        const activeSourceFlag = exposeCurrentFrameAndCurrentTime(\r\n                            nativeContext.currentTime + i / nativeContext.sampleRate,\r\n                            nativeContext.sampleRate,\r\n                            () => (<IAudioWorkletProcessor>audioWorkletProcessor).process(potentiallyEmptyInputs, outputs, parameters)\r\n                        );\r\n\r\n                        isActive = activeSourceFlag;\r\n\r\n                        for (let j = 0, outputChannelSplitterNodeOutput = 0; j < options.numberOfOutputs; j += 1) {\r\n                            for (let k = 0; k < outputChannelCount[j]; k += 1) {\r\n                                copyToChannel(outputBuffer, outputs[j], k, outputChannelSplitterNodeOutput + k, i);\r\n                            }\r\n\r\n                            outputChannelSplitterNodeOutput += outputChannelCount[j];\r\n                        }\r\n                    } catch (error) {\r\n                        isActive = false;\r\n\r\n                        nativeAudioWorkletNodeFaker.dispatchEvent(\r\n                            new ErrorEvent('processorerror', {\r\n                                colno: error.colno,\r\n                                filename: error.filename,\r\n                                lineno: error.lineno,\r\n                                message: error.message\r\n                            })\r\n                        );\r\n                    }\r\n\r\n                    if (!isActive) {\r\n                        for (let j = 0; j < options.numberOfInputs; j += 1) {\r\n                            gainNodes[j].disconnect(inputChannelSplitterNodes[j]);\r\n\r\n                            for (let k = 0; k < options.channelCount; k += 1) {\r\n                                inputChannelSplitterNodes[i].disconnect(inputChannelMergerNode, k, j * options.channelCount + k);\r\n                            }\r\n                        }\r\n\r\n                        if (processorConstructor.parameterDescriptors !== undefined) {\r\n                            const length = processorConstructor.parameterDescriptors.length;\r\n\r\n                            for (let j = 0; j < length; j += 1) {\r\n                                const constantSourceNode = constantSourceNodes[j];\r\n\r\n                                constantSourceNode.disconnect(inputChannelMergerNode, 0, numberOfInputChannels + j);\r\n                                constantSourceNode.stop();\r\n                            }\r\n                        }\r\n\r\n                        inputChannelMergerNode.disconnect(scriptProcessorNode);\r\n\r\n                        scriptProcessorNode.onaudioprocess = null; // tslint:disable-line:deprecation\r\n\r\n                        if (isConnected) {\r\n                            disconnectOutputsGraph();\r\n                        } else {\r\n                            disconnectFakeGraph();\r\n                        }\r\n\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        let isConnected = false;\r\n\r\n        // Bug #87: Only Firefox will fire an AudioProcessingEvent if there is no connected output.\r\n        const nativeGainNode = createNativeGainNode(nativeContext, {\r\n            channelCount: 1,\r\n            channelCountMode: 'explicit',\r\n            channelInterpretation: 'discrete',\r\n            gain: 0\r\n        });\r\n\r\n        const connectFakeGraph = () => scriptProcessorNode.connect(nativeGainNode).connect(nativeContext.destination);\r\n        const disconnectFakeGraph = () => {\r\n            scriptProcessorNode.disconnect(nativeGainNode);\r\n            nativeGainNode.disconnect();\r\n        };\r\n        const whenConnected = () => {\r\n            if (isActive) {\r\n                disconnectFakeGraph();\r\n\r\n                if (options.numberOfOutputs > 0) {\r\n                    scriptProcessorNode.connect(outputChannelSplitterNode);\r\n                }\r\n\r\n                for (let i = 0, outputChannelSplitterNodeOutput = 0; i < options.numberOfOutputs; i += 1) {\r\n                    const outputChannelMergerNode = outputChannelMergerNodes[i];\r\n\r\n                    for (let j = 0; j < outputChannelCount[i]; j += 1) {\r\n                        outputChannelSplitterNode.connect(outputChannelMergerNode, outputChannelSplitterNodeOutput + j, j);\r\n                    }\r\n\r\n                    outputChannelSplitterNodeOutput += outputChannelCount[i];\r\n                }\r\n            }\r\n\r\n            isConnected = true;\r\n        };\r\n        const whenDisconnected = () => {\r\n            if (isActive) {\r\n                connectFakeGraph();\r\n                disconnectOutputsGraph();\r\n            }\r\n\r\n            isConnected = false;\r\n        };\r\n\r\n        connectFakeGraph();\r\n\r\n        return monitorConnections(nativeAudioWorkletNodeFaker, whenConnected, whenDisconnected);\r\n    };\r\n};\r\n", "import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\r\nimport { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\r\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\r\nimport { TNativeBiquadFilterNodeFactory } from '../types';\r\n\r\nexport const createNativeBiquadFilterNode: TNativeBiquadFilterNodeFactory = (nativeContext, options) => {\r\n    const nativeBiquadFilterNode = nativeContext.createBiquadFilter();\r\n\r\n    assignNativeAudioNodeOptions(nativeBiquadFilterNode, options);\r\n\r\n    assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode, options, 'Q');\r\n    assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode, options, 'detune');\r\n    assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode, options, 'frequency');\r\n    assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode, options, 'gain');\r\n\r\n    assignNativeAudioNodeOption(nativeBiquadFilterNode, options, 'type');\r\n\r\n    return nativeBiquadFilterNode;\r\n};\r\n", "import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\r\nimport { TNativeChannelMergerNodeFactoryFactory } from '../types';\r\n\r\nexport const createNativeChannelMergerNodeFactory: TNativeChannelMergerNodeFactoryFactory = (\r\n    nativeAudioContextConstructor,\r\n    wrapChannelMergerNode\r\n) => {\r\n    return (nativeContext, options) => {\r\n        const nativeChannelMergerNode = nativeContext.createChannelMerger(options.numberOfInputs);\r\n\r\n        /*\r\n         * Bug #20: Safari requires a connection of any kind to treat the input signal correctly.\r\n         * @todo Unfortunately there is no way to test for this behavior in a synchronous fashion which is why testing for the existence of\r\n         * the webkitAudioContext is used as a workaround here.\r\n         */\r\n        if (nativeAudioContextConstructor !== null && nativeAudioContextConstructor.name === 'webkitAudioContext') {\r\n            wrapChannelMergerNode(nativeContext, nativeChannelMergerNode);\r\n        }\r\n\r\n        assignNativeAudioNodeOptions(nativeChannelMergerNode, options);\r\n\r\n        return nativeChannelMergerNode;\r\n    };\r\n};\r\n", "import { createInvalidStateError } from '../factories/invalid-state-error';\r\nimport { TNativeChannelSplitterNode } from '../types';\r\n\r\nexport const wrapChannelSplitterNode = (channelSplitterNode: TNativeChannelSplitterNode): void => {\r\n    const channelCount = channelSplitterNode.numberOfOutputs;\r\n\r\n    // Bug #97: Safari does not throw an error when attempting to change the channelCount to something other than its initial value.\r\n    Object.defineProperty(channelSplitterNode, 'channelCount', {\r\n        get: () => channelCount,\r\n        set: (value) => {\r\n            if (value !== channelCount) {\r\n                throw createInvalidStateError();\r\n            }\r\n        }\r\n    });\r\n\r\n    // Bug #30: Safari does not throw an error when attempting to change the channelCountMode to something other than explicit.\r\n    Object.defineProperty(channelSplitterNode, 'channelCountMode', {\r\n        get: () => 'explicit',\r\n        set: (value) => {\r\n            if (value !== 'explicit') {\r\n                throw createInvalidStateError();\r\n            }\r\n        }\r\n    });\r\n\r\n    // Bug #32: Safari does not throw an error when attempting to change the channelInterpretation to something other than discrete.\r\n    Object.defineProperty(channelSplitterNode, 'channelInterpretation', {\r\n        get: () => 'discrete',\r\n        set: (value) => {\r\n            if (value !== 'discrete') {\r\n                throw createInvalidStateError();\r\n            }\r\n        }\r\n    });\r\n};\r\n", "import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\r\nimport { wrapChannelSplitterNode } from '../helpers/wrap-channel-splitter-node';\r\nimport { TNativeChannelSplitterNodeFactory } from '../types';\r\n\r\nexport const createNativeChannelSplitterNode: TNativeChannelSplitterNodeFactory = (nativeContext, options) => {\r\n    const nativeChannelSplitterNode = nativeContext.createChannelSplitter(options.numberOfOutputs);\r\n\r\n    // Bug #96: Safari does not have the correct channelCount.\r\n    // Bug #29: Safari does not have the correct channelCountMode.\r\n    // Bug #31: Safari does not have the correct channelInterpretation.\r\n    assignNativeAudioNodeOptions(nativeChannelSplitterNode, options);\r\n\r\n    // Bug #29, #30, #31, #32, #96 & #97: Only Chrome, Edge & Firefox partially support the spec yet.\r\n    wrapChannelSplitterNode(nativeChannelSplitterNode);\r\n\r\n    return nativeChannelSplitterNode;\r\n};\r\n", "import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\r\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\r\nimport { wrapAudioScheduledSourceNodeStartMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters';\r\nimport { wrapAudioScheduledSourceNodeStopMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters';\r\nimport { TNativeConstantSourceNodeFactoryFactory } from '../types';\r\n\r\nexport const createNativeConstantSourceNodeFactory: TNativeConstantSourceNodeFactoryFactory = (\r\n    addSilentConnection,\r\n    cacheTestResult,\r\n    createNativeConstantSourceNodeFaker,\r\n    testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,\r\n    testAudioScheduledSourceNodeStopMethodNegativeParametersSupport\r\n) => {\r\n    return (nativeContext, options) => {\r\n        // Bug #62: Safari does not support ConstantSourceNodes.\r\n        if (nativeContext.createConstantSource === undefined) {\r\n            return createNativeConstantSourceNodeFaker(nativeContext, options);\r\n        }\r\n\r\n        const nativeConstantSourceNode = nativeContext.createConstantSource();\r\n\r\n        assignNativeAudioNodeOptions(nativeConstantSourceNode, options);\r\n\r\n        assignNativeAudioNodeAudioParamValue(nativeConstantSourceNode, options, 'offset');\r\n\r\n        // Bug #44: Safari does not throw a RangeError yet.\r\n        if (\r\n            !cacheTestResult(testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, () =>\r\n                testAudioScheduledSourceNodeStartMethodNegativeParametersSupport(nativeContext)\r\n            )\r\n        ) {\r\n            wrapAudioScheduledSourceNodeStartMethodNegativeParameters(nativeConstantSourceNode);\r\n        }\r\n\r\n        // Bug #44: Only Firefox does not throw a RangeError yet.\r\n        if (\r\n            !cacheTestResult(testAudioScheduledSourceNodeStopMethodNegativeParametersSupport, () =>\r\n                testAudioScheduledSourceNodeStopMethodNegativeParametersSupport(nativeContext)\r\n            )\r\n        ) {\r\n            wrapAudioScheduledSourceNodeStopMethodNegativeParameters(nativeConstantSourceNode);\r\n        }\r\n\r\n        // Bug #175: Safari will not fire an ended event if the ConstantSourceNode is unconnected.\r\n        addSilentConnection(nativeContext, nativeConstantSourceNode);\r\n\r\n        return nativeConstantSourceNode;\r\n    };\r\n};\r\n", "import { TNativeAudioNode } from '../types';\r\n\r\nexport const interceptConnections = <T extends object>(\r\n    original: T,\r\n    interceptor: TNativeAudioNode\r\n): T & { connect: TNativeAudioNode['connect']; disconnect: TNativeAudioNode['disconnect'] } => {\r\n    (<T & { connect: TNativeAudioNode['connect'] }>original).connect = interceptor.connect.bind(interceptor);\r\n\r\n    (<T & { disconnect: TNativeAudioNode['disconnect'] }>original).disconnect = interceptor.disconnect.bind(interceptor);\r\n\r\n    return <T & { connect: TNativeAudioNode['connect']; disconnect: TNativeAudioNode['disconnect'] }>original;\r\n};\r\n", "import { interceptConnections } from '../helpers/intercept-connections';\r\nimport {\r\n    TNativeAudioBufferSourceNode,\r\n    TNativeAudioNode,\r\n    TNativeConstantSourceNode,\r\n    TNativeConstantSourceNodeFakerFactoryFactory\r\n} from '../types';\r\n\r\nexport const createNativeConstantSourceNodeFakerFactory: TNativeConstantSourceNodeFakerFactoryFactory = (\r\n    addSilentConnection,\r\n    createNativeAudioBufferSourceNode,\r\n    createNativeGainNode,\r\n    monitorConnections\r\n) => {\r\n    return (nativeContext, { offset, ...audioNodeOptions }) => {\r\n        const audioBuffer = nativeContext.createBuffer(1, 2, 44100);\r\n        const audioBufferSourceNode = createNativeAudioBufferSourceNode(nativeContext, {\r\n            buffer: null,\r\n            channelCount: 2,\r\n            channelCountMode: 'max',\r\n            channelInterpretation: 'speakers',\r\n            loop: false,\r\n            loopEnd: 0,\r\n            loopStart: 0,\r\n            playbackRate: 1\r\n        });\r\n        const gainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: offset });\r\n\r\n        // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\r\n        const channelData = audioBuffer.getChannelData(0);\r\n\r\n        // Bug #95: Safari does not play or loop one sample buffers.\r\n        channelData[0] = 1;\r\n        channelData[1] = 1;\r\n\r\n        audioBufferSourceNode.buffer = audioBuffer;\r\n        audioBufferSourceNode.loop = true;\r\n\r\n        const nativeConstantSourceNodeFaker = {\r\n            get bufferSize(): undefined {\r\n                return undefined;\r\n            },\r\n            get channelCount(): number {\r\n                return gainNode.channelCount;\r\n            },\r\n            set channelCount(value) {\r\n                gainNode.channelCount = value;\r\n            },\r\n            get channelCountMode(): TNativeConstantSourceNode['channelCountMode'] {\r\n                return gainNode.channelCountMode;\r\n            },\r\n            set channelCountMode(value) {\r\n                gainNode.channelCountMode = value;\r\n            },\r\n            get channelInterpretation(): TNativeConstantSourceNode['channelInterpretation'] {\r\n                return gainNode.channelInterpretation;\r\n            },\r\n            set channelInterpretation(value) {\r\n                gainNode.channelInterpretation = value;\r\n            },\r\n            get context(): TNativeConstantSourceNode['context'] {\r\n                return gainNode.context;\r\n            },\r\n            get inputs(): TNativeAudioNode[] {\r\n                return [];\r\n            },\r\n            get numberOfInputs(): number {\r\n                return audioBufferSourceNode.numberOfInputs;\r\n            },\r\n            get numberOfOutputs(): number {\r\n                return gainNode.numberOfOutputs;\r\n            },\r\n            get offset(): TNativeConstantSourceNode['offset'] {\r\n                return gainNode.gain;\r\n            },\r\n            get onended(): TNativeConstantSourceNode['onended'] {\r\n                return audioBufferSourceNode.onended;\r\n            },\r\n            set onended(value) {\r\n                audioBufferSourceNode.onended = <TNativeAudioBufferSourceNode['onended']>value;\r\n            },\r\n            addEventListener(...args: any[]): void {\r\n                return audioBufferSourceNode.addEventListener(args[0], args[1], args[2]);\r\n            },\r\n            dispatchEvent(...args: any[]): boolean {\r\n                return audioBufferSourceNode.dispatchEvent(args[0]);\r\n            },\r\n            removeEventListener(...args: any[]): void {\r\n                return audioBufferSourceNode.removeEventListener(args[0], args[1], args[2]);\r\n            },\r\n            start(when = 0): void {\r\n                audioBufferSourceNode.start.call(audioBufferSourceNode, when);\r\n            },\r\n            stop(when = 0): void {\r\n                audioBufferSourceNode.stop.call(audioBufferSourceNode, when);\r\n            }\r\n        };\r\n\r\n        const whenConnected = () => audioBufferSourceNode.connect(gainNode);\r\n        const whenDisconnected = () => audioBufferSourceNode.disconnect(gainNode);\r\n\r\n        // Bug #175: Safari will not fire an ended event if the AudioBufferSourceNode is unconnected.\r\n        addSilentConnection(nativeContext, audioBufferSourceNode);\r\n\r\n        return monitorConnections(interceptConnections(nativeConstantSourceNodeFaker, gainNode), whenConnected, whenDisconnected);\r\n    };\r\n};\r\n", "import { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\r\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\r\nimport { TNativeConvolverNodeFactoryFactory } from '../types';\r\n\r\nexport const createNativeConvolverNodeFactory: TNativeConvolverNodeFactoryFactory = (createNotSupportedError, overwriteAccessors) => {\r\n    return (nativeContext, options) => {\r\n        const nativeConvolverNode = nativeContext.createConvolver();\r\n\r\n        assignNativeAudioNodeOptions(nativeConvolverNode, options);\r\n\r\n        // The normalize property needs to be set before setting the buffer.\r\n        if (options.disableNormalization === nativeConvolverNode.normalize) {\r\n            nativeConvolverNode.normalize = !options.disableNormalization;\r\n        }\r\n\r\n        assignNativeAudioNodeOption(nativeConvolverNode, options, 'buffer');\r\n\r\n        // Bug #113: Safari does allow to set the channelCount to a value larger than 2.\r\n        if (options.channelCount > 2) {\r\n            throw createNotSupportedError();\r\n        }\r\n\r\n        overwriteAccessors(\r\n            nativeConvolverNode,\r\n            'channelCount',\r\n            (get) => () => get.call(nativeConvolverNode),\r\n            (set) => (value) => {\r\n                if (value > 2) {\r\n                    throw createNotSupportedError();\r\n                }\r\n\r\n                return set.call(nativeConvolverNode, value);\r\n            }\r\n        );\r\n\r\n        // Bug #114: Safari allows to set the channelCountMode to 'max'.\r\n        if (options.channelCountMode === 'max') {\r\n            throw createNotSupportedError();\r\n        }\r\n\r\n        overwriteAccessors(\r\n            nativeConvolverNode,\r\n            'channelCountMode',\r\n            (get) => () => get.call(nativeConvolverNode),\r\n            (set) => (value) => {\r\n                if (value === 'max') {\r\n                    throw createNotSupportedError();\r\n                }\r\n\r\n                return set.call(nativeConvolverNode, value);\r\n            }\r\n        );\r\n\r\n        return nativeConvolverNode;\r\n    };\r\n};\r\n", "import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\r\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\r\nimport { TNativeDelayNodeFactory } from '../types';\r\n\r\nexport const createNativeDelayNode: TNativeDelayNodeFactory = (nativeContext, options) => {\r\n    const nativeDelayNode = nativeContext.createDelay(options.maxDelayTime);\r\n\r\n    assignNativeAudioNodeOptions(nativeDelayNode, options);\r\n\r\n    assignNativeAudioNodeAudioParamValue(nativeDelayNode, options, 'delayTime');\r\n\r\n    return nativeDelayNode;\r\n};\r\n", "import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\r\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\r\nimport { TNativeDynamicsCompressorNodeFactoryFactory } from '../types';\r\n\r\nexport const createNativeDynamicsCompressorNodeFactory: TNativeDynamicsCompressorNodeFactoryFactory = (createNotSupportedError) => {\r\n    return (nativeContext, options) => {\r\n        const nativeDynamicsCompressorNode = nativeContext.createDynamicsCompressor();\r\n\r\n        assignNativeAudioNodeOptions(nativeDynamicsCompressorNode, options);\r\n\r\n        // Bug #108: Safari allows a channelCount of three and above.\r\n        if (options.channelCount > 2) {\r\n            throw createNotSupportedError();\r\n        }\r\n\r\n        // Bug #109: Only Chrome and Firefox disallow a channelCountMode of 'max'.\r\n        if (options.channelCountMode === 'max') {\r\n            throw createNotSupportedError();\r\n        }\r\n\r\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'attack');\r\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'knee');\r\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'ratio');\r\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'release');\r\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'threshold');\r\n\r\n        return nativeDynamicsCompressorNode;\r\n    };\r\n};\r\n", "import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\r\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\r\nimport { TNativeGainNodeFactory } from '../types';\r\n\r\nexport const createNativeGainNode: TNativeGainNodeFactory = (nativeContext, options) => {\r\n    const nativeGainNode = nativeContext.createGain();\r\n\r\n    assignNativeAudioNodeOptions(nativeGainNode, options);\r\n\r\n    assignNativeAudioNodeAudioParamValue(nativeGainNode, options, 'gain');\r\n\r\n    return nativeGainNode;\r\n};\r\n", "import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\r\nimport { TNativeIIRFilterNodeFactoryFactory } from '../types';\r\n\r\nexport const createNativeIIRFilterNodeFactory: TNativeIIRFilterNodeFactoryFactory = (createNativeIIRFilterNodeFaker) => {\r\n    return (nativeContext, baseLatency, options) => {\r\n        // Bug #9: Safari does not support IIRFilterNodes.\r\n        if (nativeContext.createIIRFilter === undefined) {\r\n            return createNativeIIRFilterNodeFaker(nativeContext, baseLatency, options);\r\n        }\r\n\r\n        // @todo TypeScript defines the parameters of createIIRFilter() as arrays of numbers.\r\n        const nativeIIRFilterNode = nativeContext.createIIRFilter(<number[]>options.feedforward, <number[]>options.feedback);\r\n\r\n        assignNativeAudioNodeOptions(nativeIIRFilterNode, options);\r\n\r\n        return nativeIIRFilterNode;\r\n    };\r\n};\r\n", "import { computeBufferSize } from '../helpers/compute-buffer-size';\r\nimport { filterBuffer } from '../helpers/filter-buffer';\r\nimport { interceptConnections } from '../helpers/intercept-connections';\r\nimport { TNativeAudioNode, TNativeIIRFilterNode, TNativeIIRFilterNodeFakerFactoryFactory } from '../types';\r\n\r\nfunction divide(a: [number, number], b: [number, number]): [number, number] {\r\n    const denominator = b[0] * b[0] + b[1] * b[1];\r\n\r\n    return [(a[0] * b[0] + a[1] * b[1]) / denominator, (a[1] * b[0] - a[0] * b[1]) / denominator];\r\n}\r\n\r\nfunction multiply(a: [number, number], b: [number, number]): [number, number] {\r\n    return [a[0] * b[0] - a[1] * b[1], a[0] * b[1] + a[1] * b[0]];\r\n}\r\n\r\nfunction evaluatePolynomial(coefficient: Float64Array, z: [number, number]): [number, number] {\r\n    let result: [number, number] = [0, 0];\r\n\r\n    for (let i = coefficient.length - 1; i >= 0; i -= 1) {\r\n        result = multiply(result, z);\r\n\r\n        result[0] += coefficient[i];\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nexport const createNativeIIRFilterNodeFakerFactory: TNativeIIRFilterNodeFakerFactoryFactory = (\r\n    createInvalidAccessError,\r\n    createInvalidStateError,\r\n    createNativeScriptProcessorNode,\r\n    createNotSupportedError\r\n) => {\r\n    return (nativeContext, baseLatency, { channelCount, channelCountMode, channelInterpretation, feedback, feedforward }) => {\r\n        const bufferSize = computeBufferSize(baseLatency, nativeContext.sampleRate);\r\n        const convertedFeedback = feedback instanceof Float64Array ? feedback : new Float64Array(feedback);\r\n        const convertedFeedforward = feedforward instanceof Float64Array ? feedforward : new Float64Array(feedforward);\r\n        const feedbackLength = convertedFeedback.length;\r\n        const feedforwardLength = convertedFeedforward.length;\r\n        const minLength = Math.min(feedbackLength, feedforwardLength);\r\n\r\n        if (feedbackLength === 0 || feedbackLength > 20) {\r\n            throw createNotSupportedError();\r\n        }\r\n\r\n        if (convertedFeedback[0] === 0) {\r\n            throw createInvalidStateError();\r\n        }\r\n\r\n        if (feedforwardLength === 0 || feedforwardLength > 20) {\r\n            throw createNotSupportedError();\r\n        }\r\n\r\n        if (convertedFeedforward[0] === 0) {\r\n            throw createInvalidStateError();\r\n        }\r\n\r\n        if (convertedFeedback[0] !== 1) {\r\n            for (let i = 0; i < feedforwardLength; i += 1) {\r\n                convertedFeedforward[i] /= convertedFeedback[0];\r\n            }\r\n\r\n            for (let i = 1; i < feedbackLength; i += 1) {\r\n                convertedFeedback[i] /= convertedFeedback[0];\r\n            }\r\n        }\r\n\r\n        const scriptProcessorNode = createNativeScriptProcessorNode(nativeContext, bufferSize, channelCount, channelCount);\r\n\r\n        scriptProcessorNode.channelCount = channelCount;\r\n        scriptProcessorNode.channelCountMode = channelCountMode;\r\n        scriptProcessorNode.channelInterpretation = channelInterpretation;\r\n\r\n        const bufferLength = 32;\r\n        const bufferIndexes: number[] = [];\r\n        const xBuffers: Float32Array[] = [];\r\n        const yBuffers: Float32Array[] = [];\r\n\r\n        for (let i = 0; i < channelCount; i += 1) {\r\n            bufferIndexes.push(0);\r\n\r\n            const xBuffer = new Float32Array(bufferLength);\r\n            const yBuffer = new Float32Array(bufferLength);\r\n\r\n            xBuffer.fill(0);\r\n            yBuffer.fill(0);\r\n\r\n            xBuffers.push(xBuffer);\r\n            yBuffers.push(yBuffer);\r\n        }\r\n\r\n        // tslint:disable-next-line:deprecation\r\n        scriptProcessorNode.onaudioprocess = (event: AudioProcessingEvent) => {\r\n            const inputBuffer = event.inputBuffer;\r\n            const outputBuffer = event.outputBuffer;\r\n\r\n            const numberOfChannels = inputBuffer.numberOfChannels;\r\n\r\n            for (let i = 0; i < numberOfChannels; i += 1) {\r\n                const input = inputBuffer.getChannelData(i);\r\n                const output = outputBuffer.getChannelData(i);\r\n\r\n                bufferIndexes[i] = filterBuffer(\r\n                    convertedFeedback,\r\n                    feedbackLength,\r\n                    convertedFeedforward,\r\n                    feedforwardLength,\r\n                    minLength,\r\n                    xBuffers[i],\r\n                    yBuffers[i],\r\n                    bufferIndexes[i],\r\n                    bufferLength,\r\n                    input,\r\n                    output\r\n                );\r\n            }\r\n        };\r\n\r\n        const nyquist = nativeContext.sampleRate / 2;\r\n\r\n        const nativeIIRFilterNodeFaker = {\r\n            get bufferSize(): number {\r\n                return bufferSize;\r\n            },\r\n            get channelCount(): number {\r\n                return scriptProcessorNode.channelCount;\r\n            },\r\n            set channelCount(value) {\r\n                scriptProcessorNode.channelCount = value;\r\n            },\r\n            get channelCountMode(): TNativeIIRFilterNode['channelCountMode'] {\r\n                return scriptProcessorNode.channelCountMode;\r\n            },\r\n            set channelCountMode(value) {\r\n                scriptProcessorNode.channelCountMode = value;\r\n            },\r\n            get channelInterpretation(): TNativeIIRFilterNode['channelInterpretation'] {\r\n                return scriptProcessorNode.channelInterpretation;\r\n            },\r\n            set channelInterpretation(value) {\r\n                scriptProcessorNode.channelInterpretation = value;\r\n            },\r\n            get context(): TNativeIIRFilterNode['context'] {\r\n                return scriptProcessorNode.context;\r\n            },\r\n            get inputs(): TNativeAudioNode[] {\r\n                return [scriptProcessorNode];\r\n            },\r\n            get numberOfInputs(): number {\r\n                return scriptProcessorNode.numberOfInputs;\r\n            },\r\n            get numberOfOutputs(): number {\r\n                return scriptProcessorNode.numberOfOutputs;\r\n            },\r\n            addEventListener(...args: any[]): void {\r\n                // @todo Dissallow adding an audioprocess listener.\r\n                return scriptProcessorNode.addEventListener(args[0], args[1], args[2]);\r\n            },\r\n            dispatchEvent(...args: any[]): boolean {\r\n                return scriptProcessorNode.dispatchEvent(args[0]);\r\n            },\r\n            getFrequencyResponse(frequencyHz: Float32Array, magResponse: Float32Array, phaseResponse: Float32Array): void {\r\n                if (frequencyHz.length !== magResponse.length || magResponse.length !== phaseResponse.length) {\r\n                    throw createInvalidAccessError();\r\n                }\r\n\r\n                const length = frequencyHz.length;\r\n\r\n                for (let i = 0; i < length; i += 1) {\r\n                    const omega = -Math.PI * (frequencyHz[i] / nyquist);\r\n                    const z: [number, number] = [Math.cos(omega), Math.sin(omega)];\r\n                    const numerator = evaluatePolynomial(convertedFeedforward, z);\r\n                    const denominator = evaluatePolynomial(convertedFeedback, z);\r\n                    const response = divide(numerator, denominator);\r\n\r\n                    magResponse[i] = Math.sqrt(response[0] * response[0] + response[1] * response[1]);\r\n                    phaseResponse[i] = Math.atan2(response[1], response[0]);\r\n                }\r\n            },\r\n            removeEventListener(...args: any[]): void {\r\n                return scriptProcessorNode.removeEventListener(args[0], args[1], args[2]);\r\n            }\r\n        };\r\n\r\n        return interceptConnections(nativeIIRFilterNodeFaker, scriptProcessorNode);\r\n    };\r\n};\r\n", "import { TNativeMediaElementAudioSourceNodeFactory } from '../types';\r\n\r\nexport const createNativeMediaElementAudioSourceNode: TNativeMediaElementAudioSourceNodeFactory = (nativeAudioContext, options) => {\r\n    return nativeAudioContext.createMediaElementSource(options.mediaElement);\r\n};\r\n", "import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\r\nimport { TNativeMediaStreamAudioDestinationNodeFactory } from '../types';\r\n\r\nexport const createNativeMediaStreamAudioDestinationNode: TNativeMediaStreamAudioDestinationNodeFactory = (nativeAudioContext, options) => {\r\n    const nativeMediaStreamAudioDestinationNode = nativeAudioContext.createMediaStreamDestination();\r\n\r\n    assignNativeAudioNodeOptions(nativeMediaStreamAudioDestinationNode, options);\r\n\r\n    // Bug #174: Safari does expose a wrong numberOfOutputs.\r\n    if (nativeMediaStreamAudioDestinationNode.numberOfOutputs === 1) {\r\n        Object.defineProperty(nativeMediaStreamAudioDestinationNode, 'numberOfOutputs', { get: () => 0 });\r\n    }\r\n\r\n    return nativeMediaStreamAudioDestinationNode;\r\n};\r\n", "import { TNativeMediaStreamAudioSourceNodeFactory } from '../types';\r\n\r\nexport const createNativeMediaStreamAudioSourceNode: TNativeMediaStreamAudioSourceNodeFactory = (nativeAudioContext, { mediaStream }) => {\r\n    const audioStreamTracks = mediaStream.getAudioTracks();\r\n    /*\r\n     * Bug #151: Safari does not use the audio track as input anymore if it gets removed from the mediaStream after construction.\r\n     * Bug #159: Safari picks the first audio track if the MediaStream has more than one audio track.\r\n     */\r\n    audioStreamTracks.sort((a, b) => (a.id < b.id ? -1 : a.id > b.id ? 1 : 0));\r\n\r\n    const filteredAudioStreamTracks = audioStreamTracks.slice(0, 1);\r\n\r\n    const nativeMediaStreamAudioSourceNode = nativeAudioContext.createMediaStreamSource(new MediaStream(filteredAudioStreamTracks));\r\n\r\n    /*\r\n     * Bug #151 & #159: The given mediaStream gets reconstructed before it gets passed to the native node which is why the accessor needs\r\n     * to be overwritten as it would otherwise expose the reconstructed version.\r\n     */\r\n    Object.defineProperty(nativeMediaStreamAudioSourceNode, 'mediaStream', { value: mediaStream });\r\n\r\n    return nativeMediaStreamAudioSourceNode;\r\n};\r\n", "import { TNativeMediaStreamTrackAudioSourceNodeFactoryFactory } from '../types';\r\n\r\nexport const createNativeMediaStreamTrackAudioSourceNodeFactory: TNativeMediaStreamTrackAudioSourceNodeFactoryFactory = (\r\n    createInvalidStateError,\r\n    isNativeOfflineAudioContext\r\n) => {\r\n    return (nativeAudioContext, { mediaStreamTrack }) => {\r\n        // Bug #121: Only Firefox does yet support the MediaStreamTrackAudioSourceNode.\r\n        if (typeof nativeAudioContext.createMediaStreamTrackSource === 'function') {\r\n            return nativeAudioContext.createMediaStreamTrackSource(mediaStreamTrack);\r\n        }\r\n\r\n        const mediaStream = new MediaStream([mediaStreamTrack]);\r\n        const nativeMediaStreamAudioSourceNode = nativeAudioContext.createMediaStreamSource(mediaStream);\r\n\r\n        // Bug #120: Firefox does not throw an error if the mediaStream has no audio track.\r\n        if (mediaStreamTrack.kind !== 'audio') {\r\n            throw createInvalidStateError();\r\n        }\r\n\r\n        // Bug #172: Safari allows to create a MediaStreamAudioSourceNode with an OfflineAudioContext.\r\n        if (isNativeOfflineAudioContext(nativeAudioContext)) {\r\n            throw new TypeError();\r\n        }\r\n\r\n        return nativeMediaStreamAudioSourceNode;\r\n    };\r\n};\r\n", "import { TNativeOfflineAudioContextConstructorFactory } from '../types';\r\n\r\nexport const createNativeOfflineAudioContextConstructor: TNativeOfflineAudioContextConstructorFactory = (window) => {\r\n    if (window === null) {\r\n        return null;\r\n    }\r\n\r\n    if (window.hasOwnProperty('OfflineAudioContext')) {\r\n        return window.OfflineAudioContext;\r\n    }\r\n\r\n    return window.hasOwnProperty('webkitOfflineAudioContext') ? (<any>window).webkitOfflineAudioContext : null;\r\n};\r\n", "import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\r\nimport { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\r\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\r\nimport { wrapAudioScheduledSourceNodeStartMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters';\r\nimport { wrapAudioScheduledSourceNodeStopMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters';\r\nimport { TNativeOscillatorNodeFactoryFactory } from '../types';\r\n\r\nexport const createNativeOscillatorNodeFactory: TNativeOscillatorNodeFactoryFactory = (\r\n    addSilentConnection,\r\n    cacheTestResult,\r\n    testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,\r\n    testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,\r\n    testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,\r\n    wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls\r\n) => {\r\n    return (nativeContext, options) => {\r\n        const nativeOscillatorNode = nativeContext.createOscillator();\r\n\r\n        assignNativeAudioNodeOptions(nativeOscillatorNode, options);\r\n\r\n        assignNativeAudioNodeAudioParamValue(nativeOscillatorNode, options, 'detune');\r\n        assignNativeAudioNodeAudioParamValue(nativeOscillatorNode, options, 'frequency');\r\n\r\n        if (options.periodicWave !== undefined) {\r\n            nativeOscillatorNode.setPeriodicWave(options.periodicWave);\r\n        } else {\r\n            assignNativeAudioNodeOption(nativeOscillatorNode, options, 'type');\r\n        }\r\n\r\n        // Bug #44: Only Chrome & Edge throw a RangeError yet.\r\n        if (\r\n            !cacheTestResult(testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, () =>\r\n                testAudioScheduledSourceNodeStartMethodNegativeParametersSupport(nativeContext)\r\n            )\r\n        ) {\r\n            wrapAudioScheduledSourceNodeStartMethodNegativeParameters(nativeOscillatorNode);\r\n        }\r\n\r\n        // Bug #19: Safari does not ignore calls to stop() of an already stopped AudioBufferSourceNode.\r\n        if (\r\n            !cacheTestResult(testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport, () =>\r\n                testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport(nativeContext)\r\n            )\r\n        ) {\r\n            wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls(nativeOscillatorNode, nativeContext);\r\n        }\r\n\r\n        // Bug #44: Only Firefox does not throw a RangeError yet.\r\n        if (\r\n            !cacheTestResult(testAudioScheduledSourceNodeStopMethodNegativeParametersSupport, () =>\r\n                testAudioScheduledSourceNodeStopMethodNegativeParametersSupport(nativeContext)\r\n            )\r\n        ) {\r\n            wrapAudioScheduledSourceNodeStopMethodNegativeParameters(nativeOscillatorNode);\r\n        }\r\n\r\n        // Bug #175: Safari will not fire an ended event if the OscillatorNode is unconnected.\r\n        addSilentConnection(nativeContext, nativeOscillatorNode);\r\n\r\n        return nativeOscillatorNode;\r\n    };\r\n};\r\n", "import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\r\nimport { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\r\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\r\nimport { TNativePannerNodeFactoryFactory } from '../types';\r\n\r\nexport const createNativePannerNodeFactory: TNativePannerNodeFactoryFactory = (createNativePannerNodeFaker) => {\r\n    return (nativeContext, options) => {\r\n        const nativePannerNode = nativeContext.createPanner();\r\n\r\n        // Bug #124: Safari does not support modifying the orientation and the position with AudioParams.\r\n        if (nativePannerNode.orientationX === undefined) {\r\n            return createNativePannerNodeFaker(nativeContext, options);\r\n        }\r\n\r\n        assignNativeAudioNodeOptions(nativePannerNode, options);\r\n\r\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'orientationX');\r\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'orientationY');\r\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'orientationZ');\r\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'positionX');\r\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'positionY');\r\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'positionZ');\r\n\r\n        assignNativeAudioNodeOption(nativePannerNode, options, 'coneInnerAngle');\r\n        assignNativeAudioNodeOption(nativePannerNode, options, 'coneOuterAngle');\r\n        assignNativeAudioNodeOption(nativePannerNode, options, 'coneOuterGain');\r\n        assignNativeAudioNodeOption(nativePannerNode, options, 'distanceModel');\r\n        assignNativeAudioNodeOption(nativePannerNode, options, 'maxDistance');\r\n        assignNativeAudioNodeOption(nativePannerNode, options, 'panningModel');\r\n        assignNativeAudioNodeOption(nativePannerNode, options, 'refDistance');\r\n        assignNativeAudioNodeOption(nativePannerNode, options, 'rolloffFactor');\r\n\r\n        return nativePannerNode;\r\n    };\r\n};\r\n", "import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\r\nimport { interceptConnections } from '../helpers/intercept-connections';\r\nimport { TNativeAudioNode, TNativePannerNode, TNativePannerNodeFakerFactoryFactory } from '../types';\r\n\r\nexport const createNativePannerNodeFakerFactory: TNativePannerNodeFakerFactoryFactory = (\r\n    connectNativeAudioNodeToNativeAudioNode,\r\n    createInvalidStateError,\r\n    createNativeChannelMergerNode,\r\n    createNativeGainNode,\r\n    createNativeScriptProcessorNode,\r\n    createNativeWaveShaperNode,\r\n    createNotSupportedError,\r\n    disconnectNativeAudioNodeFromNativeAudioNode,\r\n    getFirstSample,\r\n    monitorConnections\r\n) => {\r\n    return (\r\n        nativeContext,\r\n        {\r\n            coneInnerAngle,\r\n            coneOuterAngle,\r\n            coneOuterGain,\r\n            distanceModel,\r\n            maxDistance,\r\n            orientationX,\r\n            orientationY,\r\n            orientationZ,\r\n            panningModel,\r\n            positionX,\r\n            positionY,\r\n            positionZ,\r\n            refDistance,\r\n            rolloffFactor,\r\n            ...audioNodeOptions\r\n        }\r\n    ) => {\r\n        const pannerNode = nativeContext.createPanner();\r\n\r\n        // Bug #125: Safari does not throw an error yet.\r\n        if (audioNodeOptions.channelCount > 2) {\r\n            throw createNotSupportedError();\r\n        }\r\n\r\n        // Bug #126: Safari does not throw an error yet.\r\n        if (audioNodeOptions.channelCountMode === 'max') {\r\n            throw createNotSupportedError();\r\n        }\r\n\r\n        assignNativeAudioNodeOptions(pannerNode, audioNodeOptions);\r\n\r\n        const SINGLE_CHANNEL_OPTIONS = {\r\n            channelCount: 1,\r\n            channelCountMode: 'explicit',\r\n            channelInterpretation: 'discrete'\r\n        } as const;\r\n\r\n        const channelMergerNode = createNativeChannelMergerNode(nativeContext, {\r\n            ...SINGLE_CHANNEL_OPTIONS,\r\n            channelInterpretation: 'speakers',\r\n            numberOfInputs: 6\r\n        });\r\n        const inputGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: 1 });\r\n        const orientationXGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 1 });\r\n        const orientationYGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\r\n        const orientationZGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\r\n        const positionXGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\r\n        const positionYGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\r\n        const positionZGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\r\n        const scriptProcessorNode = createNativeScriptProcessorNode(nativeContext, 256, 6, 1);\r\n        const waveShaperNode = createNativeWaveShaperNode(nativeContext, {\r\n            ...SINGLE_CHANNEL_OPTIONS,\r\n            curve: new Float32Array([1, 1]),\r\n            oversample: 'none'\r\n        });\r\n\r\n        let lastOrientation: [number, number, number] = [orientationX, orientationY, orientationZ];\r\n        let lastPosition: [number, number, number] = [positionX, positionY, positionZ];\r\n\r\n        const buffer = new Float32Array(1);\r\n\r\n        // tslint:disable-next-line:deprecation\r\n        scriptProcessorNode.onaudioprocess = ({ inputBuffer }) => {\r\n            const orientation: [number, number, number] = [\r\n                getFirstSample(inputBuffer, buffer, 0),\r\n                getFirstSample(inputBuffer, buffer, 1),\r\n                getFirstSample(inputBuffer, buffer, 2)\r\n            ];\r\n\r\n            if (orientation.some((value, index) => value !== lastOrientation[index])) {\r\n                pannerNode.setOrientation(...orientation); // tslint:disable-line:deprecation\r\n\r\n                lastOrientation = orientation;\r\n            }\r\n\r\n            const positon: [number, number, number] = [\r\n                getFirstSample(inputBuffer, buffer, 3),\r\n                getFirstSample(inputBuffer, buffer, 4),\r\n                getFirstSample(inputBuffer, buffer, 5)\r\n            ];\r\n\r\n            if (positon.some((value, index) => value !== lastPosition[index])) {\r\n                pannerNode.setPosition(...positon); // tslint:disable-line:deprecation\r\n\r\n                lastPosition = positon;\r\n            }\r\n        };\r\n\r\n        Object.defineProperty(orientationYGainNode.gain, 'defaultValue', { get: () => 0 });\r\n        Object.defineProperty(orientationZGainNode.gain, 'defaultValue', { get: () => 0 });\r\n        Object.defineProperty(positionXGainNode.gain, 'defaultValue', { get: () => 0 });\r\n        Object.defineProperty(positionYGainNode.gain, 'defaultValue', { get: () => 0 });\r\n        Object.defineProperty(positionZGainNode.gain, 'defaultValue', { get: () => 0 });\r\n\r\n        const nativePannerNodeFaker = {\r\n            get bufferSize(): undefined {\r\n                return undefined;\r\n            },\r\n            get channelCount(): number {\r\n                return pannerNode.channelCount;\r\n            },\r\n            set channelCount(value) {\r\n                // Bug #125: Safari does not throw an error yet.\r\n                if (value > 2) {\r\n                    throw createNotSupportedError();\r\n                }\r\n\r\n                inputGainNode.channelCount = value;\r\n                pannerNode.channelCount = value;\r\n            },\r\n            get channelCountMode(): TNativePannerNode['channelCountMode'] {\r\n                return pannerNode.channelCountMode;\r\n            },\r\n            set channelCountMode(value) {\r\n                // Bug #126: Safari does not throw an error yet.\r\n                if (value === 'max') {\r\n                    throw createNotSupportedError();\r\n                }\r\n\r\n                inputGainNode.channelCountMode = value;\r\n                pannerNode.channelCountMode = value;\r\n            },\r\n            get channelInterpretation(): TNativePannerNode['channelInterpretation'] {\r\n                return pannerNode.channelInterpretation;\r\n            },\r\n            set channelInterpretation(value) {\r\n                inputGainNode.channelInterpretation = value;\r\n                pannerNode.channelInterpretation = value;\r\n            },\r\n            get coneInnerAngle(): TNativePannerNode['coneInnerAngle'] {\r\n                return pannerNode.coneInnerAngle;\r\n            },\r\n            set coneInnerAngle(value) {\r\n                pannerNode.coneInnerAngle = value;\r\n            },\r\n            get coneOuterAngle(): TNativePannerNode['coneOuterAngle'] {\r\n                return pannerNode.coneOuterAngle;\r\n            },\r\n            set coneOuterAngle(value) {\r\n                pannerNode.coneOuterAngle = value;\r\n            },\r\n            get coneOuterGain(): TNativePannerNode['coneOuterGain'] {\r\n                return pannerNode.coneOuterGain;\r\n            },\r\n            set coneOuterGain(value) {\r\n                // Bug #127: Safari does not throw an InvalidStateError yet.\r\n                if (value < 0 || value > 1) {\r\n                    throw createInvalidStateError();\r\n                }\r\n\r\n                pannerNode.coneOuterGain = value;\r\n            },\r\n            get context(): TNativePannerNode['context'] {\r\n                return pannerNode.context;\r\n            },\r\n            get distanceModel(): TNativePannerNode['distanceModel'] {\r\n                return pannerNode.distanceModel;\r\n            },\r\n            set distanceModel(value) {\r\n                pannerNode.distanceModel = value;\r\n            },\r\n            get inputs(): TNativeAudioNode[] {\r\n                return [inputGainNode];\r\n            },\r\n            get maxDistance(): TNativePannerNode['maxDistance'] {\r\n                return pannerNode.maxDistance;\r\n            },\r\n            set maxDistance(value) {\r\n                // Bug #128: Safari does not throw an error yet.\r\n                if (value < 0) {\r\n                    throw new RangeError();\r\n                }\r\n\r\n                pannerNode.maxDistance = value;\r\n            },\r\n            get numberOfInputs(): number {\r\n                return pannerNode.numberOfInputs;\r\n            },\r\n            get numberOfOutputs(): number {\r\n                return pannerNode.numberOfOutputs;\r\n            },\r\n            get orientationX(): TNativePannerNode['orientationX'] {\r\n                return orientationXGainNode.gain;\r\n            },\r\n            get orientationY(): TNativePannerNode['orientationY'] {\r\n                return orientationYGainNode.gain;\r\n            },\r\n            get orientationZ(): TNativePannerNode['orientationZ'] {\r\n                return orientationZGainNode.gain;\r\n            },\r\n            get panningModel(): TNativePannerNode['panningModel'] {\r\n                return pannerNode.panningModel;\r\n            },\r\n            set panningModel(value) {\r\n                pannerNode.panningModel = value;\r\n            },\r\n            get positionX(): TNativePannerNode['positionX'] {\r\n                return positionXGainNode.gain;\r\n            },\r\n            get positionY(): TNativePannerNode['positionY'] {\r\n                return positionYGainNode.gain;\r\n            },\r\n            get positionZ(): TNativePannerNode['positionZ'] {\r\n                return positionZGainNode.gain;\r\n            },\r\n            get refDistance(): TNativePannerNode['refDistance'] {\r\n                return pannerNode.refDistance;\r\n            },\r\n            set refDistance(value) {\r\n                // Bug #129: Safari does not throw an error yet.\r\n                if (value < 0) {\r\n                    throw new RangeError();\r\n                }\r\n\r\n                pannerNode.refDistance = value;\r\n            },\r\n            get rolloffFactor(): TNativePannerNode['rolloffFactor'] {\r\n                return pannerNode.rolloffFactor;\r\n            },\r\n            set rolloffFactor(value) {\r\n                // Bug #130: Safari does not throw an error yet.\r\n                if (value < 0) {\r\n                    throw new RangeError();\r\n                }\r\n\r\n                pannerNode.rolloffFactor = value;\r\n            },\r\n            addEventListener(...args: any[]): void {\r\n                return inputGainNode.addEventListener(args[0], args[1], args[2]);\r\n            },\r\n            dispatchEvent(...args: any[]): boolean {\r\n                return inputGainNode.dispatchEvent(args[0]);\r\n            },\r\n            removeEventListener(...args: any[]): void {\r\n                return inputGainNode.removeEventListener(args[0], args[1], args[2]);\r\n            }\r\n        };\r\n\r\n        if (coneInnerAngle !== nativePannerNodeFaker.coneInnerAngle) {\r\n            nativePannerNodeFaker.coneInnerAngle = coneInnerAngle;\r\n        }\r\n\r\n        if (coneOuterAngle !== nativePannerNodeFaker.coneOuterAngle) {\r\n            nativePannerNodeFaker.coneOuterAngle = coneOuterAngle;\r\n        }\r\n\r\n        if (coneOuterGain !== nativePannerNodeFaker.coneOuterGain) {\r\n            nativePannerNodeFaker.coneOuterGain = coneOuterGain;\r\n        }\r\n\r\n        if (distanceModel !== nativePannerNodeFaker.distanceModel) {\r\n            nativePannerNodeFaker.distanceModel = distanceModel;\r\n        }\r\n\r\n        if (maxDistance !== nativePannerNodeFaker.maxDistance) {\r\n            nativePannerNodeFaker.maxDistance = maxDistance;\r\n        }\r\n\r\n        if (orientationX !== nativePannerNodeFaker.orientationX.value) {\r\n            nativePannerNodeFaker.orientationX.value = orientationX;\r\n        }\r\n\r\n        if (orientationY !== nativePannerNodeFaker.orientationY.value) {\r\n            nativePannerNodeFaker.orientationY.value = orientationY;\r\n        }\r\n\r\n        if (orientationZ !== nativePannerNodeFaker.orientationZ.value) {\r\n            nativePannerNodeFaker.orientationZ.value = orientationZ;\r\n        }\r\n\r\n        if (panningModel !== nativePannerNodeFaker.panningModel) {\r\n            nativePannerNodeFaker.panningModel = panningModel;\r\n        }\r\n\r\n        if (positionX !== nativePannerNodeFaker.positionX.value) {\r\n            nativePannerNodeFaker.positionX.value = positionX;\r\n        }\r\n\r\n        if (positionY !== nativePannerNodeFaker.positionY.value) {\r\n            nativePannerNodeFaker.positionY.value = positionY;\r\n        }\r\n\r\n        if (positionZ !== nativePannerNodeFaker.positionZ.value) {\r\n            nativePannerNodeFaker.positionZ.value = positionZ;\r\n        }\r\n\r\n        if (refDistance !== nativePannerNodeFaker.refDistance) {\r\n            nativePannerNodeFaker.refDistance = refDistance;\r\n        }\r\n\r\n        if (rolloffFactor !== nativePannerNodeFaker.rolloffFactor) {\r\n            nativePannerNodeFaker.rolloffFactor = rolloffFactor;\r\n        }\r\n\r\n        if (lastOrientation[0] !== 1 || lastOrientation[1] !== 0 || lastOrientation[2] !== 0) {\r\n            pannerNode.setOrientation(...lastOrientation); // tslint:disable-line:deprecation\r\n        }\r\n\r\n        if (lastPosition[0] !== 0 || lastPosition[1] !== 0 || lastPosition[2] !== 0) {\r\n            pannerNode.setPosition(...lastPosition); // tslint:disable-line:deprecation\r\n        }\r\n\r\n        const whenConnected = () => {\r\n            inputGainNode.connect(pannerNode);\r\n\r\n            // Bug #119: Safari does not fully support the WaveShaperNode.\r\n            connectNativeAudioNodeToNativeAudioNode(inputGainNode, waveShaperNode, 0, 0);\r\n\r\n            waveShaperNode.connect(orientationXGainNode).connect(channelMergerNode, 0, 0);\r\n            waveShaperNode.connect(orientationYGainNode).connect(channelMergerNode, 0, 1);\r\n            waveShaperNode.connect(orientationZGainNode).connect(channelMergerNode, 0, 2);\r\n            waveShaperNode.connect(positionXGainNode).connect(channelMergerNode, 0, 3);\r\n            waveShaperNode.connect(positionYGainNode).connect(channelMergerNode, 0, 4);\r\n            waveShaperNode.connect(positionZGainNode).connect(channelMergerNode, 0, 5);\r\n\r\n            channelMergerNode.connect(scriptProcessorNode).connect(nativeContext.destination);\r\n        };\r\n        const whenDisconnected = () => {\r\n            inputGainNode.disconnect(pannerNode);\r\n\r\n            // Bug #119: Safari does not fully support the WaveShaperNode.\r\n            disconnectNativeAudioNodeFromNativeAudioNode(inputGainNode, waveShaperNode, 0, 0);\r\n\r\n            waveShaperNode.disconnect(orientationXGainNode);\r\n            orientationXGainNode.disconnect(channelMergerNode);\r\n            waveShaperNode.disconnect(orientationYGainNode);\r\n            orientationYGainNode.disconnect(channelMergerNode);\r\n            waveShaperNode.disconnect(orientationZGainNode);\r\n            orientationZGainNode.disconnect(channelMergerNode);\r\n            waveShaperNode.disconnect(positionXGainNode);\r\n            positionXGainNode.disconnect(channelMergerNode);\r\n            waveShaperNode.disconnect(positionYGainNode);\r\n            positionYGainNode.disconnect(channelMergerNode);\r\n            waveShaperNode.disconnect(positionZGainNode);\r\n            positionZGainNode.disconnect(channelMergerNode);\r\n\r\n            channelMergerNode.disconnect(scriptProcessorNode);\r\n            scriptProcessorNode.disconnect(nativeContext.destination);\r\n        };\r\n\r\n        return monitorConnections(interceptConnections(nativePannerNodeFaker, pannerNode), whenConnected, whenDisconnected);\r\n    };\r\n};\r\n", "import { TNativePeriodicWaveFactoryFactory } from '../types';\r\n\r\nexport const createNativePeriodicWaveFactory: TNativePeriodicWaveFactoryFactory = (createIndexSizeError) => {\r\n    return (nativeContext, { disableNormalization, imag, real }) => {\r\n        // Bug #180: Safari does not allow to use ordinary arrays.\r\n        const convertedImag = imag instanceof Float32Array ? imag : new Float32Array(imag);\r\n        const convertedReal = real instanceof Float32Array ? real : new Float32Array(real);\r\n\r\n        const nativePeriodicWave = nativeContext.createPeriodicWave(convertedReal, convertedImag, { disableNormalization });\r\n\r\n        // Bug #181: Safari does not throw an IndexSizeError so far if the given arrays have less than two values.\r\n        if (Array.from(imag).length < 2) {\r\n            throw createIndexSizeError();\r\n        }\r\n\r\n        return nativePeriodicWave;\r\n    };\r\n};\r\n", "import { TNativeScriptProcessorNodeFactory } from '../types';\r\n\r\nexport const createNativeScriptProcessorNode: TNativeScriptProcessorNodeFactory = (\r\n    nativeContext,\r\n    bufferSize,\r\n    numberOfInputChannels,\r\n    numberOfOutputChannels\r\n) => {\r\n    return nativeContext.createScriptProcessor(bufferSize, numberOfInputChannels, numberOfOutputChannels); // tslint:disable-line deprecation\r\n};\r\n", "import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\r\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\r\nimport { TNativeStereoPannerNodeFactoryFactory } from '../types';\r\n\r\nexport const createNativeStereoPannerNodeFactory: TNativeStereoPannerNodeFactoryFactory = (\r\n    createNativeStereoPannerNodeFaker,\r\n    createNotSupportedError\r\n) => {\r\n    return (nativeContext, options) => {\r\n        const channelCountMode = options.channelCountMode;\r\n\r\n        /*\r\n         * Bug #105: The channelCountMode of 'clamped-max' should be supported. However it is not possible to write a polyfill for Safari\r\n         * which supports it and therefore it can't be supported at all.\r\n         */\r\n        if (channelCountMode === 'clamped-max') {\r\n            throw createNotSupportedError();\r\n        }\r\n\r\n        // Bug #105: Safari does not support the StereoPannerNode.\r\n        if (nativeContext.createStereoPanner === undefined) {\r\n            return createNativeStereoPannerNodeFaker(nativeContext, options);\r\n        }\r\n\r\n        const nativeStereoPannerNode = nativeContext.createStereoPanner();\r\n\r\n        assignNativeAudioNodeOptions(nativeStereoPannerNode, options);\r\n\r\n        assignNativeAudioNodeAudioParamValue(nativeStereoPannerNode, options, 'pan');\r\n\r\n        /*\r\n         * Bug #105: The channelCountMode of 'clamped-max' should be supported. However it is not possible to write a polyfill for Safari\r\n         * which supports it and therefore it can't be supported at all.\r\n         */\r\n        Object.defineProperty(nativeStereoPannerNode, 'channelCountMode', {\r\n            get: () => channelCountMode,\r\n            set: (value) => {\r\n                if (value !== channelCountMode) {\r\n                    throw createNotSupportedError();\r\n                }\r\n            }\r\n        });\r\n\r\n        return nativeStereoPannerNode;\r\n    };\r\n};\r\n", "import { interceptConnections } from '../helpers/intercept-connections';\r\nimport { INativeWaveShaperNodeFaker } from '../interfaces';\r\nimport {\r\n    TNativeAudioNode,\r\n    TNativeChannelMergerNode,\r\n    TNativeContext,\r\n    TNativeGainNode,\r\n    TNativeStereoPannerNode,\r\n    TNativeStereoPannerNodeFakerFactoryFactory\r\n} from '../types';\r\n\r\nexport const createNativeStereoPannerNodeFakerFactory: TNativeStereoPannerNodeFakerFactoryFactory = (\r\n    createNativeChannelMergerNode,\r\n    createNativeChannelSplitterNode,\r\n    createNativeGainNode,\r\n    createNativeWaveShaperNode,\r\n    createNotSupportedError,\r\n    monitorConnections\r\n) => {\r\n    // The curve has a size of 14bit plus 1 value to have an exact representation for zero. This value has been determined experimentally.\r\n    const CURVE_SIZE = 16385;\r\n    const DC_CURVE = new Float32Array([1, 1]);\r\n    const HALF_PI = Math.PI / 2;\r\n    const SINGLE_CHANNEL_OPTIONS = { channelCount: 1, channelCountMode: 'explicit', channelInterpretation: 'discrete' } as const;\r\n    const SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS = { ...SINGLE_CHANNEL_OPTIONS, oversample: 'none' } as const;\r\n\r\n    const buildInternalGraphForMono = (\r\n        nativeContext: TNativeContext,\r\n        inputGainNode: TNativeGainNode,\r\n        panGainNode: TNativeGainNode,\r\n        channelMergerNode: TNativeChannelMergerNode\r\n    ) => {\r\n        const leftWaveShaperCurve = new Float32Array(CURVE_SIZE);\r\n        const rightWaveShaperCurve = new Float32Array(CURVE_SIZE);\r\n\r\n        for (let i = 0; i < CURVE_SIZE; i += 1) {\r\n            const x = (i / (CURVE_SIZE - 1)) * HALF_PI;\r\n\r\n            leftWaveShaperCurve[i] = Math.cos(x);\r\n            rightWaveShaperCurve[i] = Math.sin(x);\r\n        }\r\n\r\n        const leftGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\r\n        // Bug #119: Safari does not fully support the WaveShaperNode.\r\n        const leftWaveShaperNode = <INativeWaveShaperNodeFaker>(\r\n            createNativeWaveShaperNode(nativeContext, { ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS, curve: leftWaveShaperCurve })\r\n        );\r\n        // Bug #119: Safari does not fully support the WaveShaperNode.\r\n        const panWaveShaperNode = <INativeWaveShaperNodeFaker>(\r\n            createNativeWaveShaperNode(nativeContext, { ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS, curve: DC_CURVE })\r\n        );\r\n        const rightGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\r\n        // Bug #119: Safari does not fully support the WaveShaperNode.\r\n        const rightWaveShaperNode = <INativeWaveShaperNodeFaker>(\r\n            createNativeWaveShaperNode(nativeContext, { ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS, curve: rightWaveShaperCurve })\r\n        );\r\n\r\n        return {\r\n            connectGraph(): void {\r\n                inputGainNode.connect(leftGainNode);\r\n                inputGainNode.connect(panWaveShaperNode.inputs === undefined ? panWaveShaperNode : panWaveShaperNode.inputs[0]);\r\n                inputGainNode.connect(rightGainNode);\r\n\r\n                panWaveShaperNode.connect(panGainNode);\r\n\r\n                panGainNode.connect(leftWaveShaperNode.inputs === undefined ? leftWaveShaperNode : leftWaveShaperNode.inputs[0]);\r\n                panGainNode.connect(rightWaveShaperNode.inputs === undefined ? rightWaveShaperNode : rightWaveShaperNode.inputs[0]);\r\n\r\n                leftWaveShaperNode.connect(leftGainNode.gain);\r\n                rightWaveShaperNode.connect(rightGainNode.gain);\r\n\r\n                leftGainNode.connect(channelMergerNode, 0, 0);\r\n                rightGainNode.connect(channelMergerNode, 0, 1);\r\n            },\r\n            disconnectGraph(): void {\r\n                inputGainNode.disconnect(leftGainNode);\r\n                inputGainNode.disconnect(panWaveShaperNode.inputs === undefined ? panWaveShaperNode : panWaveShaperNode.inputs[0]);\r\n                inputGainNode.disconnect(rightGainNode);\r\n\r\n                panWaveShaperNode.disconnect(panGainNode);\r\n\r\n                panGainNode.disconnect(leftWaveShaperNode.inputs === undefined ? leftWaveShaperNode : leftWaveShaperNode.inputs[0]);\r\n                panGainNode.disconnect(rightWaveShaperNode.inputs === undefined ? rightWaveShaperNode : rightWaveShaperNode.inputs[0]);\r\n\r\n                leftWaveShaperNode.disconnect(leftGainNode.gain);\r\n                rightWaveShaperNode.disconnect(rightGainNode.gain);\r\n\r\n                leftGainNode.disconnect(channelMergerNode, 0, 0);\r\n                rightGainNode.disconnect(channelMergerNode, 0, 1);\r\n            }\r\n        };\r\n    };\r\n\r\n    const buildInternalGraphForStereo = (\r\n        nativeContext: TNativeContext,\r\n        inputGainNode: TNativeGainNode,\r\n        panGainNode: TNativeGainNode,\r\n        channelMergerNode: TNativeChannelMergerNode\r\n    ) => {\r\n        const leftInputForLeftOutputWaveShaperCurve = new Float32Array(CURVE_SIZE);\r\n        const leftInputForRightOutputWaveShaperCurve = new Float32Array(CURVE_SIZE);\r\n        const rightInputForLeftOutputWaveShaperCurve = new Float32Array(CURVE_SIZE);\r\n        const rightInputForRightOutputWaveShaperCurve = new Float32Array(CURVE_SIZE);\r\n\r\n        const centerIndex = Math.floor(CURVE_SIZE / 2);\r\n\r\n        for (let i = 0; i < CURVE_SIZE; i += 1) {\r\n            if (i > centerIndex) {\r\n                const x = ((i - centerIndex) / (CURVE_SIZE - 1 - centerIndex)) * HALF_PI;\r\n\r\n                leftInputForLeftOutputWaveShaperCurve[i] = Math.cos(x);\r\n                leftInputForRightOutputWaveShaperCurve[i] = Math.sin(x);\r\n                rightInputForLeftOutputWaveShaperCurve[i] = 0;\r\n                rightInputForRightOutputWaveShaperCurve[i] = 1;\r\n            } else {\r\n                const x = (i / (CURVE_SIZE - 1 - centerIndex)) * HALF_PI;\r\n\r\n                leftInputForLeftOutputWaveShaperCurve[i] = 1;\r\n                leftInputForRightOutputWaveShaperCurve[i] = 0;\r\n                rightInputForLeftOutputWaveShaperCurve[i] = Math.cos(x);\r\n                rightInputForRightOutputWaveShaperCurve[i] = Math.sin(x);\r\n            }\r\n        }\r\n\r\n        const channelSplitterNode = createNativeChannelSplitterNode(nativeContext, {\r\n            channelCount: 2,\r\n            channelCountMode: 'explicit',\r\n            channelInterpretation: 'discrete',\r\n            numberOfOutputs: 2\r\n        });\r\n        const leftInputForLeftOutputGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\r\n        // Bug #119: Safari does not fully support the WaveShaperNode.\r\n        const leftInputForLeftOutputWaveShaperNode = <INativeWaveShaperNodeFaker>createNativeWaveShaperNode(nativeContext, {\r\n            ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,\r\n            curve: leftInputForLeftOutputWaveShaperCurve\r\n        });\r\n        const leftInputForRightOutputGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\r\n        // Bug #119: Safari does not fully support the WaveShaperNode.\r\n        const leftInputForRightOutputWaveShaperNode = <INativeWaveShaperNodeFaker>createNativeWaveShaperNode(nativeContext, {\r\n            ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,\r\n            curve: leftInputForRightOutputWaveShaperCurve\r\n        });\r\n        // Bug #119: Safari does not fully support the WaveShaperNode.\r\n        const panWaveShaperNode = <INativeWaveShaperNodeFaker>(\r\n            createNativeWaveShaperNode(nativeContext, { ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS, curve: DC_CURVE })\r\n        );\r\n        const rightInputForLeftOutputGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\r\n        // Bug #119: Safari does not fully support the WaveShaperNode.\r\n        const rightInputForLeftOutputWaveShaperNode = <INativeWaveShaperNodeFaker>createNativeWaveShaperNode(nativeContext, {\r\n            ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,\r\n            curve: rightInputForLeftOutputWaveShaperCurve\r\n        });\r\n        const rightInputForRightOutputGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\r\n        // Bug #119: Safari does not fully support the WaveShaperNode.\r\n        const rightInputForRightOutputWaveShaperNode = <INativeWaveShaperNodeFaker>createNativeWaveShaperNode(nativeContext, {\r\n            ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,\r\n            curve: rightInputForRightOutputWaveShaperCurve\r\n        });\r\n\r\n        return {\r\n            connectGraph(): void {\r\n                inputGainNode.connect(channelSplitterNode);\r\n                inputGainNode.connect(panWaveShaperNode.inputs === undefined ? panWaveShaperNode : panWaveShaperNode.inputs[0]);\r\n\r\n                channelSplitterNode.connect(leftInputForLeftOutputGainNode, 0);\r\n                channelSplitterNode.connect(leftInputForRightOutputGainNode, 0);\r\n                channelSplitterNode.connect(rightInputForLeftOutputGainNode, 1);\r\n                channelSplitterNode.connect(rightInputForRightOutputGainNode, 1);\r\n\r\n                panWaveShaperNode.connect(panGainNode);\r\n\r\n                panGainNode.connect(\r\n                    leftInputForLeftOutputWaveShaperNode.inputs === undefined\r\n                        ? leftInputForLeftOutputWaveShaperNode\r\n                        : leftInputForLeftOutputWaveShaperNode.inputs[0]\r\n                );\r\n                panGainNode.connect(\r\n                    leftInputForRightOutputWaveShaperNode.inputs === undefined\r\n                        ? leftInputForRightOutputWaveShaperNode\r\n                        : leftInputForRightOutputWaveShaperNode.inputs[0]\r\n                );\r\n                panGainNode.connect(\r\n                    rightInputForLeftOutputWaveShaperNode.inputs === undefined\r\n                        ? rightInputForLeftOutputWaveShaperNode\r\n                        : rightInputForLeftOutputWaveShaperNode.inputs[0]\r\n                );\r\n                panGainNode.connect(\r\n                    rightInputForRightOutputWaveShaperNode.inputs === undefined\r\n                        ? rightInputForRightOutputWaveShaperNode\r\n                        : rightInputForRightOutputWaveShaperNode.inputs[0]\r\n                );\r\n\r\n                leftInputForLeftOutputWaveShaperNode.connect(leftInputForLeftOutputGainNode.gain);\r\n                leftInputForRightOutputWaveShaperNode.connect(leftInputForRightOutputGainNode.gain);\r\n                rightInputForLeftOutputWaveShaperNode.connect(rightInputForLeftOutputGainNode.gain);\r\n                rightInputForRightOutputWaveShaperNode.connect(rightInputForRightOutputGainNode.gain);\r\n\r\n                leftInputForLeftOutputGainNode.connect(channelMergerNode, 0, 0);\r\n                rightInputForLeftOutputGainNode.connect(channelMergerNode, 0, 0);\r\n\r\n                leftInputForRightOutputGainNode.connect(channelMergerNode, 0, 1);\r\n                rightInputForRightOutputGainNode.connect(channelMergerNode, 0, 1);\r\n            },\r\n            disconnectGraph(): void {\r\n                inputGainNode.disconnect(channelSplitterNode);\r\n                inputGainNode.disconnect(panWaveShaperNode.inputs === undefined ? panWaveShaperNode : panWaveShaperNode.inputs[0]);\r\n\r\n                channelSplitterNode.disconnect(leftInputForLeftOutputGainNode, 0);\r\n                channelSplitterNode.disconnect(leftInputForRightOutputGainNode, 0);\r\n                channelSplitterNode.disconnect(rightInputForLeftOutputGainNode, 1);\r\n                channelSplitterNode.disconnect(rightInputForRightOutputGainNode, 1);\r\n\r\n                panWaveShaperNode.disconnect(panGainNode);\r\n\r\n                panGainNode.disconnect(\r\n                    leftInputForLeftOutputWaveShaperNode.inputs === undefined\r\n                        ? leftInputForLeftOutputWaveShaperNode\r\n                        : leftInputForLeftOutputWaveShaperNode.inputs[0]\r\n                );\r\n                panGainNode.disconnect(\r\n                    leftInputForRightOutputWaveShaperNode.inputs === undefined\r\n                        ? leftInputForRightOutputWaveShaperNode\r\n                        : leftInputForRightOutputWaveShaperNode.inputs[0]\r\n                );\r\n                panGainNode.disconnect(\r\n                    rightInputForLeftOutputWaveShaperNode.inputs === undefined\r\n                        ? rightInputForLeftOutputWaveShaperNode\r\n                        : rightInputForLeftOutputWaveShaperNode.inputs[0]\r\n                );\r\n                panGainNode.disconnect(\r\n                    rightInputForRightOutputWaveShaperNode.inputs === undefined\r\n                        ? rightInputForRightOutputWaveShaperNode\r\n                        : rightInputForRightOutputWaveShaperNode.inputs[0]\r\n                );\r\n\r\n                leftInputForLeftOutputWaveShaperNode.disconnect(leftInputForLeftOutputGainNode.gain);\r\n                leftInputForRightOutputWaveShaperNode.disconnect(leftInputForRightOutputGainNode.gain);\r\n                rightInputForLeftOutputWaveShaperNode.disconnect(rightInputForLeftOutputGainNode.gain);\r\n                rightInputForRightOutputWaveShaperNode.disconnect(rightInputForRightOutputGainNode.gain);\r\n\r\n                leftInputForLeftOutputGainNode.disconnect(channelMergerNode, 0, 0);\r\n                rightInputForLeftOutputGainNode.disconnect(channelMergerNode, 0, 0);\r\n\r\n                leftInputForRightOutputGainNode.disconnect(channelMergerNode, 0, 1);\r\n                rightInputForRightOutputGainNode.disconnect(channelMergerNode, 0, 1);\r\n            }\r\n        };\r\n    };\r\n\r\n    const buildInternalGraph = (\r\n        nativeContext: TNativeContext,\r\n        channelCount: number,\r\n        inputGainNode: TNativeGainNode,\r\n        panGainNode: TNativeGainNode,\r\n        channelMergerNode: TNativeChannelMergerNode\r\n    ) => {\r\n        if (channelCount === 1) {\r\n            return buildInternalGraphForMono(nativeContext, inputGainNode, panGainNode, channelMergerNode);\r\n        }\r\n\r\n        if (channelCount === 2) {\r\n            return buildInternalGraphForStereo(nativeContext, inputGainNode, panGainNode, channelMergerNode);\r\n        }\r\n\r\n        throw createNotSupportedError();\r\n    };\r\n\r\n    return (nativeContext, { channelCount, channelCountMode, pan, ...audioNodeOptions }) => {\r\n        if (channelCountMode === 'max') {\r\n            throw createNotSupportedError();\r\n        }\r\n\r\n        const channelMergerNode = createNativeChannelMergerNode(nativeContext, {\r\n            ...audioNodeOptions,\r\n            channelCount: 1,\r\n            channelCountMode,\r\n            numberOfInputs: 2\r\n        });\r\n        const inputGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, channelCount, channelCountMode, gain: 1 });\r\n        const panGainNode = createNativeGainNode(nativeContext, {\r\n            channelCount: 1,\r\n            channelCountMode: 'explicit',\r\n            channelInterpretation: 'discrete',\r\n            gain: pan\r\n        });\r\n\r\n        let { connectGraph, disconnectGraph } = buildInternalGraph(\r\n            nativeContext,\r\n            channelCount,\r\n            inputGainNode,\r\n            panGainNode,\r\n            channelMergerNode\r\n        );\r\n\r\n        Object.defineProperty(panGainNode.gain, 'defaultValue', { get: () => 0 });\r\n        Object.defineProperty(panGainNode.gain, 'maxValue', { get: () => 1 });\r\n        Object.defineProperty(panGainNode.gain, 'minValue', { get: () => -1 });\r\n\r\n        const nativeStereoPannerNodeFakerFactory = {\r\n            get bufferSize(): undefined {\r\n                return undefined;\r\n            },\r\n            get channelCount(): number {\r\n                return inputGainNode.channelCount;\r\n            },\r\n            set channelCount(value) {\r\n                if (inputGainNode.channelCount !== value) {\r\n                    if (isConnected) {\r\n                        disconnectGraph();\r\n                    }\r\n\r\n                    ({ connectGraph, disconnectGraph } = buildInternalGraph(\r\n                        nativeContext,\r\n                        value,\r\n                        inputGainNode,\r\n                        panGainNode,\r\n                        channelMergerNode\r\n                    ));\r\n\r\n                    if (isConnected) {\r\n                        connectGraph();\r\n                    }\r\n                }\r\n\r\n                inputGainNode.channelCount = value;\r\n            },\r\n            get channelCountMode(): TNativeStereoPannerNode['channelCountMode'] {\r\n                return inputGainNode.channelCountMode;\r\n            },\r\n            set channelCountMode(value) {\r\n                if (value === 'clamped-max' || value === 'max') {\r\n                    throw createNotSupportedError();\r\n                }\r\n\r\n                inputGainNode.channelCountMode = value;\r\n            },\r\n            get channelInterpretation(): TNativeStereoPannerNode['channelInterpretation'] {\r\n                return inputGainNode.channelInterpretation;\r\n            },\r\n            set channelInterpretation(value) {\r\n                inputGainNode.channelInterpretation = value;\r\n            },\r\n            get context(): TNativeStereoPannerNode['context'] {\r\n                return inputGainNode.context;\r\n            },\r\n            get inputs(): TNativeAudioNode[] {\r\n                return [inputGainNode];\r\n            },\r\n            get numberOfInputs(): number {\r\n                return inputGainNode.numberOfInputs;\r\n            },\r\n            get numberOfOutputs(): number {\r\n                return inputGainNode.numberOfOutputs;\r\n            },\r\n            get pan(): TNativeStereoPannerNode['pan'] {\r\n                return panGainNode.gain;\r\n            },\r\n            addEventListener(...args: any[]): void {\r\n                return inputGainNode.addEventListener(args[0], args[1], args[2]);\r\n            },\r\n            dispatchEvent(...args: any[]): boolean {\r\n                return inputGainNode.dispatchEvent(args[0]);\r\n            },\r\n            removeEventListener(...args: any[]): void {\r\n                return inputGainNode.removeEventListener(args[0], args[1], args[2]);\r\n            }\r\n        };\r\n\r\n        let isConnected = false;\r\n\r\n        const whenConnected = () => {\r\n            connectGraph();\r\n\r\n            isConnected = true;\r\n        };\r\n        const whenDisconnected = () => {\r\n            disconnectGraph();\r\n\r\n            isConnected = false;\r\n        };\r\n\r\n        return monitorConnections(\r\n            interceptConnections(nativeStereoPannerNodeFakerFactory, channelMergerNode),\r\n            whenConnected,\r\n            whenDisconnected\r\n        );\r\n    };\r\n};\r\n", "import { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\r\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\r\nimport { TNativeWaveShaperNodeFactoryFactory } from '../types';\r\n\r\nexport const createNativeWaveShaperNodeFactory: TNativeWaveShaperNodeFactoryFactory = (\r\n    createConnectedNativeAudioBufferSourceNode,\r\n    createInvalidStateError,\r\n    createNativeWaveShaperNodeFaker,\r\n    isDCCurve,\r\n    monitorConnections,\r\n    nativeAudioContextConstructor,\r\n    overwriteAccessors\r\n) => {\r\n    return (nativeContext, options) => {\r\n        const nativeWaveShaperNode = nativeContext.createWaveShaper();\r\n\r\n        /*\r\n         * Bug #119: Safari does not correctly map the values.\r\n         * @todo Unfortunately there is no way to test for this behavior in a synchronous fashion which is why testing for the existence of\r\n         * the webkitAudioContext is used as a workaround here. Testing for the automationRate property is necessary because this workaround\r\n         * isn't necessary anymore since v14.0.2 of Safari.\r\n         */\r\n        if (\r\n            nativeAudioContextConstructor !== null &&\r\n            nativeAudioContextConstructor.name === 'webkitAudioContext' &&\r\n            nativeContext.createGain().gain.automationRate === undefined\r\n        ) {\r\n            return createNativeWaveShaperNodeFaker(nativeContext, options);\r\n        }\r\n\r\n        assignNativeAudioNodeOptions(nativeWaveShaperNode, options);\r\n\r\n        const curve = options.curve === null || options.curve instanceof Float32Array ? options.curve : new Float32Array(options.curve);\r\n\r\n        // Bug #104: Chrome and Edge will throw an InvalidAccessError when the curve has less than two samples.\r\n        if (curve !== null && curve.length < 2) {\r\n            throw createInvalidStateError();\r\n        }\r\n\r\n        // Only values of type Float32Array can be assigned to the curve property.\r\n        assignNativeAudioNodeOption(nativeWaveShaperNode, { curve }, 'curve');\r\n        assignNativeAudioNodeOption(nativeWaveShaperNode, options, 'oversample');\r\n\r\n        let disconnectNativeAudioBufferSourceNode: null | (() => void) = null;\r\n        let isConnected = false;\r\n\r\n        overwriteAccessors(\r\n            nativeWaveShaperNode,\r\n            'curve',\r\n            (get) => () => get.call(nativeWaveShaperNode),\r\n            (set) => (value) => {\r\n                set.call(nativeWaveShaperNode, value);\r\n\r\n                if (isConnected) {\r\n                    if (isDCCurve(value) && disconnectNativeAudioBufferSourceNode === null) {\r\n                        disconnectNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNode(\r\n                            nativeContext,\r\n                            nativeWaveShaperNode\r\n                        );\r\n                    } else if (!isDCCurve(value) && disconnectNativeAudioBufferSourceNode !== null) {\r\n                        disconnectNativeAudioBufferSourceNode();\r\n                        disconnectNativeAudioBufferSourceNode = null;\r\n                    }\r\n                }\r\n\r\n                return value;\r\n            }\r\n        );\r\n\r\n        const whenConnected = () => {\r\n            isConnected = true;\r\n\r\n            if (isDCCurve(nativeWaveShaperNode.curve)) {\r\n                disconnectNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNode(nativeContext, nativeWaveShaperNode);\r\n            }\r\n        };\r\n        const whenDisconnected = () => {\r\n            isConnected = false;\r\n\r\n            if (disconnectNativeAudioBufferSourceNode !== null) {\r\n                disconnectNativeAudioBufferSourceNode();\r\n                disconnectNativeAudioBufferSourceNode = null;\r\n            }\r\n        };\r\n\r\n        return monitorConnections(nativeWaveShaperNode, whenConnected, whenDisconnected);\r\n    };\r\n};\r\n", "import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\r\nimport { interceptConnections } from '../helpers/intercept-connections';\r\nimport { TNativeAudioNode, TNativeWaveShaperNode, TNativeWaveShaperNodeFakerFactoryFactory } from '../types';\r\n\r\nexport const createNativeWaveShaperNodeFakerFactory: TNativeWaveShaperNodeFakerFactoryFactory = (\r\n    createConnectedNativeAudioBufferSourceNode,\r\n    createInvalidStateError,\r\n    createNativeGainNode,\r\n    isDCCurve,\r\n    monitorConnections\r\n) => {\r\n    return (nativeContext, { curve, oversample, ...audioNodeOptions }) => {\r\n        const negativeWaveShaperNode = nativeContext.createWaveShaper();\r\n        const positiveWaveShaperNode = nativeContext.createWaveShaper();\r\n\r\n        assignNativeAudioNodeOptions(negativeWaveShaperNode, audioNodeOptions);\r\n        assignNativeAudioNodeOptions(positiveWaveShaperNode, audioNodeOptions);\r\n\r\n        const inputGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: 1 });\r\n        const invertGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: -1 });\r\n        const outputGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: 1 });\r\n        const revertGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: -1 });\r\n\r\n        let disconnectNativeAudioBufferSourceNode: null | (() => void) = null;\r\n        let isConnected = false;\r\n        let unmodifiedCurve: null | TNativeWaveShaperNode['curve'] = null;\r\n\r\n        const nativeWaveShaperNodeFaker = {\r\n            get bufferSize(): undefined {\r\n                return undefined;\r\n            },\r\n            get channelCount(): number {\r\n                return negativeWaveShaperNode.channelCount;\r\n            },\r\n            set channelCount(value) {\r\n                inputGainNode.channelCount = value;\r\n                invertGainNode.channelCount = value;\r\n                negativeWaveShaperNode.channelCount = value;\r\n                outputGainNode.channelCount = value;\r\n                positiveWaveShaperNode.channelCount = value;\r\n                revertGainNode.channelCount = value;\r\n            },\r\n            get channelCountMode(): TNativeWaveShaperNode['channelCountMode'] {\r\n                return negativeWaveShaperNode.channelCountMode;\r\n            },\r\n            set channelCountMode(value) {\r\n                inputGainNode.channelCountMode = value;\r\n                invertGainNode.channelCountMode = value;\r\n                negativeWaveShaperNode.channelCountMode = value;\r\n                outputGainNode.channelCountMode = value;\r\n                positiveWaveShaperNode.channelCountMode = value;\r\n                revertGainNode.channelCountMode = value;\r\n            },\r\n            get channelInterpretation(): TNativeWaveShaperNode['channelInterpretation'] {\r\n                return negativeWaveShaperNode.channelInterpretation;\r\n            },\r\n            set channelInterpretation(value) {\r\n                inputGainNode.channelInterpretation = value;\r\n                invertGainNode.channelInterpretation = value;\r\n                negativeWaveShaperNode.channelInterpretation = value;\r\n                outputGainNode.channelInterpretation = value;\r\n                positiveWaveShaperNode.channelInterpretation = value;\r\n                revertGainNode.channelInterpretation = value;\r\n            },\r\n            get context(): TNativeWaveShaperNode['context'] {\r\n                return negativeWaveShaperNode.context;\r\n            },\r\n            get curve(): TNativeWaveShaperNode['curve'] {\r\n                return unmodifiedCurve;\r\n            },\r\n            set curve(value) {\r\n                // Bug #102: Safari does not throw an InvalidStateError when the curve has less than two samples.\r\n                if (value !== null && value.length < 2) {\r\n                    throw createInvalidStateError();\r\n                }\r\n\r\n                if (value === null) {\r\n                    negativeWaveShaperNode.curve = value;\r\n                    positiveWaveShaperNode.curve = value;\r\n                } else {\r\n                    const curveLength = value.length;\r\n\r\n                    const negativeCurve = new Float32Array(curveLength + 2 - (curveLength % 2));\r\n                    const positiveCurve = new Float32Array(curveLength + 2 - (curveLength % 2));\r\n\r\n                    negativeCurve[0] = value[0];\r\n                    positiveCurve[0] = -value[curveLength - 1];\r\n\r\n                    const length = Math.ceil((curveLength + 1) / 2);\r\n                    const centerIndex = (curveLength + 1) / 2 - 1;\r\n\r\n                    for (let i = 1; i < length; i += 1) {\r\n                        const theoreticIndex = (i / length) * centerIndex;\r\n\r\n                        const lowerIndex = Math.floor(theoreticIndex);\r\n                        const upperIndex = Math.ceil(theoreticIndex);\r\n\r\n                        negativeCurve[i] =\r\n                            lowerIndex === upperIndex\r\n                                ? value[lowerIndex]\r\n                                : (1 - (theoreticIndex - lowerIndex)) * value[lowerIndex] +\r\n                                  (1 - (upperIndex - theoreticIndex)) * value[upperIndex];\r\n                        positiveCurve[i] =\r\n                            lowerIndex === upperIndex\r\n                                ? -value[curveLength - 1 - lowerIndex]\r\n                                : -((1 - (theoreticIndex - lowerIndex)) * value[curveLength - 1 - lowerIndex]) -\r\n                                  (1 - (upperIndex - theoreticIndex)) * value[curveLength - 1 - upperIndex];\r\n                    }\r\n\r\n                    negativeCurve[length] = curveLength % 2 === 1 ? value[length - 1] : (value[length - 2] + value[length - 1]) / 2;\r\n\r\n                    negativeWaveShaperNode.curve = negativeCurve;\r\n                    positiveWaveShaperNode.curve = positiveCurve;\r\n                }\r\n\r\n                unmodifiedCurve = value;\r\n\r\n                if (isConnected) {\r\n                    if (isDCCurve(unmodifiedCurve) && disconnectNativeAudioBufferSourceNode === null) {\r\n                        disconnectNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNode(nativeContext, inputGainNode);\r\n                    } else if (disconnectNativeAudioBufferSourceNode !== null) {\r\n                        disconnectNativeAudioBufferSourceNode();\r\n                        disconnectNativeAudioBufferSourceNode = null;\r\n                    }\r\n                }\r\n            },\r\n            get inputs(): TNativeAudioNode[] {\r\n                return [inputGainNode];\r\n            },\r\n            get numberOfInputs(): number {\r\n                return negativeWaveShaperNode.numberOfInputs;\r\n            },\r\n            get numberOfOutputs(): number {\r\n                return negativeWaveShaperNode.numberOfOutputs;\r\n            },\r\n            get oversample(): TNativeWaveShaperNode['oversample'] {\r\n                return negativeWaveShaperNode.oversample;\r\n            },\r\n            set oversample(value) {\r\n                negativeWaveShaperNode.oversample = value;\r\n                positiveWaveShaperNode.oversample = value;\r\n            },\r\n            addEventListener(...args: any[]): void {\r\n                return inputGainNode.addEventListener(args[0], args[1], args[2]);\r\n            },\r\n            dispatchEvent(...args: any[]): boolean {\r\n                return inputGainNode.dispatchEvent(args[0]);\r\n            },\r\n            removeEventListener(...args: any[]): void {\r\n                return inputGainNode.removeEventListener(args[0], args[1], args[2]);\r\n            }\r\n        };\r\n\r\n        if (curve !== null) {\r\n            // Only values of type Float32Array can be assigned to the curve property.\r\n            nativeWaveShaperNodeFaker.curve = curve instanceof Float32Array ? curve : new Float32Array(curve);\r\n        }\r\n\r\n        if (oversample !== nativeWaveShaperNodeFaker.oversample) {\r\n            nativeWaveShaperNodeFaker.oversample = oversample;\r\n        }\r\n\r\n        const whenConnected = () => {\r\n            inputGainNode.connect(negativeWaveShaperNode).connect(outputGainNode);\r\n\r\n            inputGainNode.connect(invertGainNode).connect(positiveWaveShaperNode).connect(revertGainNode).connect(outputGainNode);\r\n\r\n            isConnected = true;\r\n\r\n            if (isDCCurve(unmodifiedCurve)) {\r\n                disconnectNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNode(nativeContext, inputGainNode);\r\n            }\r\n        };\r\n        const whenDisconnected = () => {\r\n            inputGainNode.disconnect(negativeWaveShaperNode);\r\n            negativeWaveShaperNode.disconnect(outputGainNode);\r\n\r\n            inputGainNode.disconnect(invertGainNode);\r\n            invertGainNode.disconnect(positiveWaveShaperNode);\r\n            positiveWaveShaperNode.disconnect(revertGainNode);\r\n            revertGainNode.disconnect(outputGainNode);\r\n\r\n            isConnected = false;\r\n\r\n            if (disconnectNativeAudioBufferSourceNode !== null) {\r\n                disconnectNativeAudioBufferSourceNode();\r\n                disconnectNativeAudioBufferSourceNode = null;\r\n            }\r\n        };\r\n\r\n        return monitorConnections(interceptConnections(nativeWaveShaperNodeFaker, outputGainNode), whenConnected, whenDisconnected);\r\n    };\r\n};\r\n", "import { TNotSupportedErrorFactory } from '../types';\r\n\r\nexport const createNotSupportedError: TNotSupportedErrorFactory = () => new DOMException('', 'NotSupportedError');\r\n", "import { deactivateAudioGraph } from '../helpers/deactivate-audio-graph';\r\nimport { testPromiseSupport } from '../helpers/test-promise-support';\r\nimport { IAudioBuffer, IOfflineAudioContext, IOfflineAudioContextOptions } from '../interfaces';\r\nimport { TAudioContextState, TNativeOfflineAudioContext, TOfflineAudioContextConstructorFactory } from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    numberOfChannels: 1\r\n} as const;\r\n\r\nexport const createOfflineAudioContextConstructor: TOfflineAudioContextConstructorFactory = (\r\n    baseAudioContextConstructor,\r\n    cacheTestResult,\r\n    createInvalidStateError,\r\n    createNativeOfflineAudioContext,\r\n    startRendering\r\n) => {\r\n    return class OfflineAudioContext extends baseAudioContextConstructor<IOfflineAudioContext> implements IOfflineAudioContext {\r\n        private _length: number;\r\n\r\n        private _nativeOfflineAudioContext: TNativeOfflineAudioContext;\r\n\r\n        private _state: null | TAudioContextState;\r\n\r\n        constructor(options: IOfflineAudioContextOptions);\r\n        constructor(numberOfChannels: number, length: number, sampleRate: number);\r\n        constructor(a: number | IOfflineAudioContextOptions, b?: number, c?: number) {\r\n            let options: IOfflineAudioContextOptions;\r\n\r\n            if (typeof a === 'number' && b !== undefined && c !== undefined) {\r\n                options = { length: b, numberOfChannels: a, sampleRate: c };\r\n            } else if (typeof a === 'object') {\r\n                options = a;\r\n            } else {\r\n                throw new Error('The given parameters are not valid.');\r\n            }\r\n\r\n            const { length, numberOfChannels, sampleRate } = { ...DEFAULT_OPTIONS, ...options };\r\n\r\n            const nativeOfflineAudioContext = createNativeOfflineAudioContext(numberOfChannels, length, sampleRate);\r\n\r\n            // #21 Safari does not support promises and therefore would fire the statechange event before the promise can be resolved.\r\n            if (!cacheTestResult(testPromiseSupport, () => testPromiseSupport(nativeOfflineAudioContext))) {\r\n                nativeOfflineAudioContext.addEventListener(\r\n                    'statechange',\r\n                    (() => {\r\n                        let i = 0;\r\n\r\n                        const delayStateChangeEvent = (event: Event) => {\r\n                            if (this._state === 'running') {\r\n                                if (i > 0) {\r\n                                    nativeOfflineAudioContext.removeEventListener('statechange', delayStateChangeEvent);\r\n                                    event.stopImmediatePropagation();\r\n\r\n                                    this._waitForThePromiseToSettle(event);\r\n                                } else {\r\n                                    i += 1;\r\n                                }\r\n                            }\r\n                        };\r\n\r\n                        return delayStateChangeEvent;\r\n                    })()\r\n                );\r\n            }\r\n\r\n            super(nativeOfflineAudioContext, numberOfChannels);\r\n\r\n            this._length = length;\r\n            this._nativeOfflineAudioContext = nativeOfflineAudioContext;\r\n            this._state = null;\r\n        }\r\n\r\n        get length(): number {\r\n            // Bug #17: Safari does not yet expose the length.\r\n            if (this._nativeOfflineAudioContext.length === undefined) {\r\n                return this._length;\r\n            }\r\n\r\n            return this._nativeOfflineAudioContext.length;\r\n        }\r\n\r\n        get state(): TAudioContextState {\r\n            return this._state === null ? this._nativeOfflineAudioContext.state : this._state;\r\n        }\r\n\r\n        public startRendering(): Promise<IAudioBuffer> {\r\n            /*\r\n             * Bug #9 & #59: It is theoretically possible that startRendering() will first render a partialOfflineAudioContext. Therefore\r\n             * the state of the nativeOfflineAudioContext might no transition to running immediately.\r\n             */\r\n            if (this._state === 'running') {\r\n                return Promise.reject(createInvalidStateError());\r\n            }\r\n\r\n            this._state = 'running';\r\n\r\n            return startRendering(this.destination, this._nativeOfflineAudioContext).finally(() => {\r\n                this._state = null;\r\n\r\n                deactivateAudioGraph(this);\r\n            });\r\n        }\r\n\r\n        private _waitForThePromiseToSettle(event: Event): void {\r\n            if (this._state === null) {\r\n                this._nativeOfflineAudioContext.dispatchEvent(event);\r\n            } else {\r\n                setTimeout(() => this._waitForThePromiseToSettle(event));\r\n            }\r\n        }\r\n    };\r\n};\r\n", "import { isActiveAudioNode } from '../helpers/is-active-audio-node';\r\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\r\nimport { setInternalStateToPassive } from '../helpers/set-internal-state-to-passive';\r\nimport {\r\n    IAudioParam,\r\n    IAudioScheduledSourceNodeEventMap,\r\n    IMinimalOfflineAudioContext,\r\n    IOscillatorNode,\r\n    IOscillatorNodeRenderer,\r\n    IOscillatorOptions\r\n} from '../interfaces';\r\nimport {\r\n    TContext,\r\n    TEventHandler,\r\n    TNativeOscillatorNode,\r\n    TOscillatorNodeConstructorFactory,\r\n    TOscillatorNodeRenderer,\r\n    TOscillatorType\r\n} from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    channelCount: 2,\r\n    channelCountMode: 'max', // This attribute has no effect for nodes with no inputs.\r\n    channelInterpretation: 'speakers', // This attribute has no effect for nodes with no inputs.\r\n    detune: 0,\r\n    frequency: 440,\r\n    periodicWave: undefined,\r\n    type: 'sine'\r\n} as const;\r\n\r\nexport const createOscillatorNodeConstructor: TOscillatorNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createAudioParam,\r\n    createNativeOscillatorNode,\r\n    createOscillatorNodeRenderer,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    wrapEventListener\r\n) => {\r\n    return class OscillatorNode<T extends TContext>\r\n        extends audioNodeConstructor<T, IAudioScheduledSourceNodeEventMap>\r\n        implements IOscillatorNode<T>\r\n    {\r\n        private _detune: IAudioParam;\r\n\r\n        private _frequency: IAudioParam;\r\n\r\n        private _nativeOscillatorNode: TNativeOscillatorNode;\r\n\r\n        private _onended: null | TEventHandler<this>;\r\n\r\n        private _oscillatorNodeRenderer: TOscillatorNodeRenderer<T>;\r\n\r\n        constructor(context: T, options?: Partial<IOscillatorOptions>) {\r\n            const nativeContext = getNativeContext(context);\r\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\r\n            const nativeOscillatorNode = createNativeOscillatorNode(nativeContext, mergedOptions);\r\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\r\n            const oscillatorNodeRenderer = <TOscillatorNodeRenderer<T>>(isOffline ? createOscillatorNodeRenderer() : null);\r\n            const nyquist = context.sampleRate / 2;\r\n\r\n            super(context, false, nativeOscillatorNode, oscillatorNodeRenderer);\r\n\r\n            // Bug #81: Firefox & Safari do not export the correct values for maxValue and minValue.\r\n            this._detune = createAudioParam(this, isOffline, nativeOscillatorNode.detune, 153600, -153600);\r\n            // Bug #76: Safari does not export the correct values for maxValue and minValue.\r\n            this._frequency = createAudioParam(this, isOffline, nativeOscillatorNode.frequency, nyquist, -nyquist);\r\n            this._nativeOscillatorNode = nativeOscillatorNode;\r\n            this._onended = null;\r\n            this._oscillatorNodeRenderer = oscillatorNodeRenderer;\r\n\r\n            if (this._oscillatorNodeRenderer !== null && mergedOptions.periodicWave !== undefined) {\r\n                (<IOscillatorNodeRenderer<IMinimalOfflineAudioContext>>this._oscillatorNodeRenderer).periodicWave =\r\n                    mergedOptions.periodicWave;\r\n            }\r\n        }\r\n\r\n        get detune(): IAudioParam {\r\n            return this._detune;\r\n        }\r\n\r\n        get frequency(): IAudioParam {\r\n            return this._frequency;\r\n        }\r\n\r\n        get onended(): null | TEventHandler<this> {\r\n            return this._onended;\r\n        }\r\n\r\n        set onended(value) {\r\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, value) : null;\r\n\r\n            this._nativeOscillatorNode.onended = wrappedListener;\r\n\r\n            const nativeOnEnded = this._nativeOscillatorNode.onended;\r\n\r\n            this._onended = nativeOnEnded !== null && nativeOnEnded === wrappedListener ? value : nativeOnEnded;\r\n        }\r\n\r\n        get type(): TOscillatorType {\r\n            return this._nativeOscillatorNode.type;\r\n        }\r\n\r\n        set type(value) {\r\n            this._nativeOscillatorNode.type = value;\r\n\r\n            if (this._oscillatorNodeRenderer !== null) {\r\n                this._oscillatorNodeRenderer.periodicWave = null;\r\n            }\r\n        }\r\n\r\n        public setPeriodicWave(periodicWave: PeriodicWave): void {\r\n            this._nativeOscillatorNode.setPeriodicWave(periodicWave);\r\n\r\n            if (this._oscillatorNodeRenderer !== null) {\r\n                this._oscillatorNodeRenderer.periodicWave = periodicWave;\r\n            }\r\n        }\r\n\r\n        public start(when = 0): void {\r\n            this._nativeOscillatorNode.start(when);\r\n\r\n            if (this._oscillatorNodeRenderer !== null) {\r\n                this._oscillatorNodeRenderer.start = when;\r\n            }\r\n\r\n            if (this.context.state !== 'closed') {\r\n                setInternalStateToActive(this);\r\n\r\n                const resetInternalStateToPassive = () => {\r\n                    this._nativeOscillatorNode.removeEventListener('ended', resetInternalStateToPassive);\r\n\r\n                    if (isActiveAudioNode(this)) {\r\n                        setInternalStateToPassive(this);\r\n                    }\r\n                };\r\n\r\n                this._nativeOscillatorNode.addEventListener('ended', resetInternalStateToPassive);\r\n            }\r\n        }\r\n\r\n        public stop(when = 0): void {\r\n            this._nativeOscillatorNode.stop(when);\r\n\r\n            if (this._oscillatorNodeRenderer !== null) {\r\n                this._oscillatorNodeRenderer.stop = when;\r\n            }\r\n        }\r\n    };\r\n};\r\n", "import { isOwnedByContext } from '../helpers/is-owned-by-context';\r\nimport { IMinimalOfflineAudioContext, IOfflineAudioContext, IOscillatorNode, IPeriodicWave } from '../interfaces';\r\nimport { TNativeOfflineAudioContext, TNativeOscillatorNode, TOscillatorNodeRendererFactoryFactory } from '../types';\r\n\r\nexport const createOscillatorNodeRendererFactory: TOscillatorNodeRendererFactoryFactory = (\r\n    connectAudioParam,\r\n    createNativeOscillatorNode,\r\n    getNativeAudioNode,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode\r\n) => {\r\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\r\n        const renderedNativeOscillatorNodes = new WeakMap<TNativeOfflineAudioContext, TNativeOscillatorNode>();\r\n\r\n        let periodicWave: null | IPeriodicWave = null;\r\n        let start: null | number = null;\r\n        let stop: null | number = null;\r\n\r\n        const createOscillatorNode = async (proxy: IOscillatorNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\r\n            let nativeOscillatorNode = getNativeAudioNode<T, TNativeOscillatorNode>(proxy);\r\n\r\n            // If the initially used nativeOscillatorNode was not constructed on the same OfflineAudioContext it needs to be created again.\r\n            const nativeOscillatorNodeIsOwnedByContext = isOwnedByContext(nativeOscillatorNode, nativeOfflineAudioContext);\r\n\r\n            if (!nativeOscillatorNodeIsOwnedByContext) {\r\n                const options = {\r\n                    channelCount: nativeOscillatorNode.channelCount,\r\n                    channelCountMode: nativeOscillatorNode.channelCountMode,\r\n                    channelInterpretation: nativeOscillatorNode.channelInterpretation,\r\n                    detune: nativeOscillatorNode.detune.value,\r\n                    frequency: nativeOscillatorNode.frequency.value,\r\n                    periodicWave: periodicWave === null ? undefined : periodicWave,\r\n                    type: nativeOscillatorNode.type\r\n                };\r\n\r\n                nativeOscillatorNode = createNativeOscillatorNode(nativeOfflineAudioContext, options);\r\n\r\n                if (start !== null) {\r\n                    nativeOscillatorNode.start(start);\r\n                }\r\n\r\n                if (stop !== null) {\r\n                    nativeOscillatorNode.stop(stop);\r\n                }\r\n            }\r\n\r\n            renderedNativeOscillatorNodes.set(nativeOfflineAudioContext, nativeOscillatorNode);\r\n\r\n            if (!nativeOscillatorNodeIsOwnedByContext) {\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.detune, nativeOscillatorNode.detune);\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.frequency, nativeOscillatorNode.frequency);\r\n            } else {\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.detune, nativeOscillatorNode.detune);\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.frequency, nativeOscillatorNode.frequency);\r\n            }\r\n\r\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeOscillatorNode);\r\n\r\n            return nativeOscillatorNode;\r\n        };\r\n\r\n        return {\r\n            set periodicWave(value: null | IPeriodicWave) {\r\n                periodicWave = value;\r\n            },\r\n            set start(value: number) {\r\n                start = value;\r\n            },\r\n            set stop(value: number) {\r\n                stop = value;\r\n            },\r\n            render(proxy: IOscillatorNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeOscillatorNode> {\r\n                const renderedNativeOscillatorNode = renderedNativeOscillatorNodes.get(nativeOfflineAudioContext);\r\n\r\n                if (renderedNativeOscillatorNode !== undefined) {\r\n                    return Promise.resolve(renderedNativeOscillatorNode);\r\n                }\r\n\r\n                return createOscillatorNode(proxy, nativeOfflineAudioContext);\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\r\nimport { IAudioParam, IPannerNode, IPannerOptions } from '../interfaces';\r\nimport {\r\n    TAudioNodeRenderer,\r\n    TContext,\r\n    TDistanceModelType,\r\n    TNativePannerNode,\r\n    TPannerNodeConstructorFactory,\r\n    TPanningModelType\r\n} from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    channelCount: 2,\r\n    channelCountMode: 'clamped-max',\r\n    channelInterpretation: 'speakers',\r\n    coneInnerAngle: 360,\r\n    coneOuterAngle: 360,\r\n    coneOuterGain: 0,\r\n    distanceModel: 'inverse',\r\n    maxDistance: 10000,\r\n    orientationX: 1,\r\n    orientationY: 0,\r\n    orientationZ: 0,\r\n    panningModel: 'equalpower',\r\n    positionX: 0,\r\n    positionY: 0,\r\n    positionZ: 0,\r\n    refDistance: 1,\r\n    rolloffFactor: 1\r\n} as const;\r\n\r\nexport const createPannerNodeConstructor: TPannerNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createAudioParam,\r\n    createNativePannerNode,\r\n    createPannerNodeRenderer,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    setAudioNodeTailTime\r\n) => {\r\n    return class PannerNode<T extends TContext> extends audioNodeConstructor<T> implements IPannerNode<T> {\r\n        private _nativePannerNode: TNativePannerNode;\r\n\r\n        private _orientationX: IAudioParam;\r\n\r\n        private _orientationY: IAudioParam;\r\n\r\n        private _orientationZ: IAudioParam;\r\n\r\n        private _positionX: IAudioParam;\r\n\r\n        private _positionY: IAudioParam;\r\n\r\n        private _positionZ: IAudioParam;\r\n\r\n        constructor(context: T, options?: Partial<IPannerOptions>) {\r\n            const nativeContext = getNativeContext(context);\r\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\r\n            const nativePannerNode = createNativePannerNode(nativeContext, mergedOptions);\r\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\r\n            const pannerNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createPannerNodeRenderer() : null);\r\n\r\n            super(context, false, nativePannerNode, pannerNodeRenderer);\r\n\r\n            this._nativePannerNode = nativePannerNode;\r\n            // Bug #74: Safari does not export the correct values for maxValue and minValue.\r\n            this._orientationX = createAudioParam(\r\n                this,\r\n                isOffline,\r\n                nativePannerNode.orientationX,\r\n                MOST_POSITIVE_SINGLE_FLOAT,\r\n                MOST_NEGATIVE_SINGLE_FLOAT\r\n            );\r\n            this._orientationY = createAudioParam(\r\n                this,\r\n                isOffline,\r\n                nativePannerNode.orientationY,\r\n                MOST_POSITIVE_SINGLE_FLOAT,\r\n                MOST_NEGATIVE_SINGLE_FLOAT\r\n            );\r\n            this._orientationZ = createAudioParam(\r\n                this,\r\n                isOffline,\r\n                nativePannerNode.orientationZ,\r\n                MOST_POSITIVE_SINGLE_FLOAT,\r\n                MOST_NEGATIVE_SINGLE_FLOAT\r\n            );\r\n            this._positionX = createAudioParam(\r\n                this,\r\n                isOffline,\r\n                nativePannerNode.positionX,\r\n                MOST_POSITIVE_SINGLE_FLOAT,\r\n                MOST_NEGATIVE_SINGLE_FLOAT\r\n            );\r\n            this._positionY = createAudioParam(\r\n                this,\r\n                isOffline,\r\n                nativePannerNode.positionY,\r\n                MOST_POSITIVE_SINGLE_FLOAT,\r\n                MOST_NEGATIVE_SINGLE_FLOAT\r\n            );\r\n            this._positionZ = createAudioParam(\r\n                this,\r\n                isOffline,\r\n                nativePannerNode.positionZ,\r\n                MOST_POSITIVE_SINGLE_FLOAT,\r\n                MOST_NEGATIVE_SINGLE_FLOAT\r\n            );\r\n\r\n            // @todo Determine a meaningful tail-time instead of just using one second.\r\n            setAudioNodeTailTime(this, 1);\r\n        }\r\n\r\n        get coneInnerAngle(): number {\r\n            return this._nativePannerNode.coneInnerAngle;\r\n        }\r\n\r\n        set coneInnerAngle(value) {\r\n            this._nativePannerNode.coneInnerAngle = value;\r\n        }\r\n\r\n        get coneOuterAngle(): number {\r\n            return this._nativePannerNode.coneOuterAngle;\r\n        }\r\n\r\n        set coneOuterAngle(value) {\r\n            this._nativePannerNode.coneOuterAngle = value;\r\n        }\r\n\r\n        get coneOuterGain(): number {\r\n            return this._nativePannerNode.coneOuterGain;\r\n        }\r\n\r\n        set coneOuterGain(value) {\r\n            this._nativePannerNode.coneOuterGain = value;\r\n        }\r\n\r\n        get distanceModel(): TDistanceModelType {\r\n            return this._nativePannerNode.distanceModel;\r\n        }\r\n\r\n        set distanceModel(value) {\r\n            this._nativePannerNode.distanceModel = value;\r\n        }\r\n\r\n        get maxDistance(): number {\r\n            return this._nativePannerNode.maxDistance;\r\n        }\r\n\r\n        set maxDistance(value) {\r\n            this._nativePannerNode.maxDistance = value;\r\n        }\r\n\r\n        get orientationX(): IAudioParam {\r\n            return this._orientationX;\r\n        }\r\n\r\n        get orientationY(): IAudioParam {\r\n            return this._orientationY;\r\n        }\r\n\r\n        get orientationZ(): IAudioParam {\r\n            return this._orientationZ;\r\n        }\r\n\r\n        get panningModel(): TPanningModelType {\r\n            return this._nativePannerNode.panningModel;\r\n        }\r\n\r\n        set panningModel(value) {\r\n            this._nativePannerNode.panningModel = value;\r\n        }\r\n\r\n        get positionX(): IAudioParam {\r\n            return this._positionX;\r\n        }\r\n\r\n        get positionY(): IAudioParam {\r\n            return this._positionY;\r\n        }\r\n\r\n        get positionZ(): IAudioParam {\r\n            return this._positionZ;\r\n        }\r\n\r\n        get refDistance(): number {\r\n            return this._nativePannerNode.refDistance;\r\n        }\r\n\r\n        set refDistance(value) {\r\n            this._nativePannerNode.refDistance = value;\r\n        }\r\n\r\n        get rolloffFactor(): number {\r\n            return this._nativePannerNode.rolloffFactor;\r\n        }\r\n\r\n        set rolloffFactor(value) {\r\n            this._nativePannerNode.rolloffFactor = value;\r\n        }\r\n    };\r\n};\r\n", "import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\r\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\r\nimport { IMinimalOfflineAudioContext, INativePannerNodeFaker, IOfflineAudioContext, IPannerNode } from '../interfaces';\r\nimport {\r\n    TNativeAudioBuffer,\r\n    TNativeGainNode,\r\n    TNativeOfflineAudioContext,\r\n    TNativePannerNode,\r\n    TPannerNodeRendererFactoryFactory\r\n} from '../types';\r\n\r\nexport const createPannerNodeRendererFactory: TPannerNodeRendererFactoryFactory = (\r\n    connectAudioParam,\r\n    createNativeChannelMergerNode,\r\n    createNativeConstantSourceNode,\r\n    createNativeGainNode,\r\n    createNativePannerNode,\r\n    getNativeAudioNode,\r\n    nativeOfflineAudioContextConstructor,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode,\r\n    renderNativeOfflineAudioContext\r\n) => {\r\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\r\n        const renderedNativeAudioNodes = new WeakMap<TNativeOfflineAudioContext, TNativeGainNode | TNativePannerNode>();\r\n\r\n        let renderedBufferPromise: null | Promise<TNativeAudioBuffer> = null;\r\n\r\n        const createAudioNode = async (proxy: IPannerNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\r\n            let nativeGainNode: null | TNativeGainNode = null;\r\n            let nativePannerNode = getNativeAudioNode<T, TNativePannerNode>(proxy);\r\n\r\n            const commonAudioNodeOptions = {\r\n                channelCount: nativePannerNode.channelCount,\r\n                channelCountMode: nativePannerNode.channelCountMode,\r\n                channelInterpretation: nativePannerNode.channelInterpretation\r\n            };\r\n            const commonNativePannerNodeOptions = {\r\n                ...commonAudioNodeOptions,\r\n                coneInnerAngle: nativePannerNode.coneInnerAngle,\r\n                coneOuterAngle: nativePannerNode.coneOuterAngle,\r\n                coneOuterGain: nativePannerNode.coneOuterGain,\r\n                distanceModel: nativePannerNode.distanceModel,\r\n                maxDistance: nativePannerNode.maxDistance,\r\n                panningModel: nativePannerNode.panningModel,\r\n                refDistance: nativePannerNode.refDistance,\r\n                rolloffFactor: nativePannerNode.rolloffFactor\r\n            };\r\n\r\n            // If the initially used nativePannerNode was not constructed on the same OfflineAudioContext it needs to be created again.\r\n            const nativePannerNodeIsOwnedByContext = isOwnedByContext(nativePannerNode, nativeOfflineAudioContext);\r\n\r\n            // Bug #124: Safari does not support modifying the orientation and the position with AudioParams.\r\n            if ('bufferSize' in nativePannerNode) {\r\n                nativeGainNode = createNativeGainNode(nativeOfflineAudioContext, { ...commonAudioNodeOptions, gain: 1 });\r\n            } else if (!nativePannerNodeIsOwnedByContext) {\r\n                const options = {\r\n                    ...commonNativePannerNodeOptions,\r\n                    orientationX: nativePannerNode.orientationX.value,\r\n                    orientationY: nativePannerNode.orientationY.value,\r\n                    orientationZ: nativePannerNode.orientationZ.value,\r\n                    positionX: nativePannerNode.positionX.value,\r\n                    positionY: nativePannerNode.positionY.value,\r\n                    positionZ: nativePannerNode.positionZ.value\r\n                };\r\n\r\n                nativePannerNode = createNativePannerNode(nativeOfflineAudioContext, options);\r\n            }\r\n\r\n            renderedNativeAudioNodes.set(nativeOfflineAudioContext, nativeGainNode === null ? nativePannerNode : nativeGainNode);\r\n\r\n            if (nativeGainNode !== null) {\r\n                if (renderedBufferPromise === null) {\r\n                    if (nativeOfflineAudioContextConstructor === null) {\r\n                        throw new Error('Missing the native OfflineAudioContext constructor.');\r\n                    }\r\n\r\n                    const partialOfflineAudioContext = new nativeOfflineAudioContextConstructor(\r\n                        6,\r\n                        // Bug #17: Safari does not yet expose the length.\r\n                        proxy.context.length,\r\n                        nativeOfflineAudioContext.sampleRate\r\n                    );\r\n                    const nativeChannelMergerNode = createNativeChannelMergerNode(partialOfflineAudioContext, {\r\n                        channelCount: 1,\r\n                        channelCountMode: 'explicit',\r\n                        channelInterpretation: 'speakers',\r\n                        numberOfInputs: 6\r\n                    });\r\n                    nativeChannelMergerNode.connect(partialOfflineAudioContext.destination);\r\n\r\n                    renderedBufferPromise = (async () => {\r\n                        const nativeConstantSourceNodes = await Promise.all(\r\n                            [\r\n                                proxy.orientationX,\r\n                                proxy.orientationY,\r\n                                proxy.orientationZ,\r\n                                proxy.positionX,\r\n                                proxy.positionY,\r\n                                proxy.positionZ\r\n                            ].map(async (audioParam, index) => {\r\n                                const nativeConstantSourceNode = createNativeConstantSourceNode(partialOfflineAudioContext, {\r\n                                    channelCount: 1,\r\n                                    channelCountMode: 'explicit',\r\n                                    channelInterpretation: 'discrete',\r\n                                    offset: index === 0 ? 1 : 0\r\n                                });\r\n\r\n                                await renderAutomation(partialOfflineAudioContext, audioParam, nativeConstantSourceNode.offset);\r\n\r\n                                return nativeConstantSourceNode;\r\n                            })\r\n                        );\r\n\r\n                        for (let i = 0; i < 6; i += 1) {\r\n                            nativeConstantSourceNodes[i].connect(nativeChannelMergerNode, 0, i);\r\n                            nativeConstantSourceNodes[i].start(0);\r\n                        }\r\n\r\n                        return renderNativeOfflineAudioContext(partialOfflineAudioContext);\r\n                    })();\r\n                }\r\n\r\n                const renderedBuffer = await renderedBufferPromise;\r\n                const inputGainNode = createNativeGainNode(nativeOfflineAudioContext, { ...commonAudioNodeOptions, gain: 1 });\r\n\r\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, inputGainNode);\r\n\r\n                const channelDatas: Float32Array[] = [];\r\n\r\n                for (let i = 0; i < renderedBuffer.numberOfChannels; i += 1) {\r\n                    channelDatas.push(renderedBuffer.getChannelData(i));\r\n                }\r\n\r\n                let lastOrientation = [channelDatas[0][0], channelDatas[1][0], channelDatas[2][0]];\r\n                let lastPosition = [channelDatas[3][0], channelDatas[4][0], channelDatas[5][0]];\r\n                let gateGainNode = createNativeGainNode(nativeOfflineAudioContext, { ...commonAudioNodeOptions, gain: 1 });\r\n                let partialPannerNode = createNativePannerNode(nativeOfflineAudioContext, {\r\n                    ...commonNativePannerNodeOptions,\r\n                    orientationX: lastOrientation[0],\r\n                    orientationY: lastOrientation[1],\r\n                    orientationZ: lastOrientation[2],\r\n                    positionX: lastPosition[0],\r\n                    positionY: lastPosition[1],\r\n                    positionZ: lastPosition[2]\r\n                });\r\n\r\n                inputGainNode.connect(gateGainNode).connect((<INativePannerNodeFaker>partialPannerNode).inputs[0]);\r\n                partialPannerNode.connect(nativeGainNode);\r\n\r\n                for (let i = 128; i < renderedBuffer.length; i += 128) {\r\n                    const orientation: [number, number, number] = [channelDatas[0][i], channelDatas[1][i], channelDatas[2][i]];\r\n                    const positon: [number, number, number] = [channelDatas[3][i], channelDatas[4][i], channelDatas[5][i]];\r\n\r\n                    if (\r\n                        orientation.some((value, index) => value !== lastOrientation[index]) ||\r\n                        positon.some((value, index) => value !== lastPosition[index])\r\n                    ) {\r\n                        lastOrientation = orientation;\r\n                        lastPosition = positon;\r\n\r\n                        const currentTime = i / nativeOfflineAudioContext.sampleRate;\r\n\r\n                        gateGainNode.gain.setValueAtTime(0, currentTime);\r\n\r\n                        gateGainNode = createNativeGainNode(nativeOfflineAudioContext, { ...commonAudioNodeOptions, gain: 0 });\r\n                        partialPannerNode = createNativePannerNode(nativeOfflineAudioContext, {\r\n                            ...commonNativePannerNodeOptions,\r\n                            orientationX: lastOrientation[0],\r\n                            orientationY: lastOrientation[1],\r\n                            orientationZ: lastOrientation[2],\r\n                            positionX: lastPosition[0],\r\n                            positionY: lastPosition[1],\r\n                            positionZ: lastPosition[2]\r\n                        });\r\n\r\n                        gateGainNode.gain.setValueAtTime(1, currentTime);\r\n\r\n                        inputGainNode.connect(gateGainNode).connect((<INativePannerNodeFaker>partialPannerNode).inputs[0]);\r\n                        partialPannerNode.connect(nativeGainNode);\r\n                    }\r\n                }\r\n\r\n                return nativeGainNode;\r\n            }\r\n\r\n            if (!nativePannerNodeIsOwnedByContext) {\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.orientationX, nativePannerNode.orientationX);\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.orientationY, nativePannerNode.orientationY);\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.orientationZ, nativePannerNode.orientationZ);\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.positionX, nativePannerNode.positionX);\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.positionY, nativePannerNode.positionY);\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.positionZ, nativePannerNode.positionZ);\r\n            } else {\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.orientationX, nativePannerNode.orientationX);\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.orientationY, nativePannerNode.orientationY);\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.orientationZ, nativePannerNode.orientationZ);\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.positionX, nativePannerNode.positionX);\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.positionY, nativePannerNode.positionY);\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.positionZ, nativePannerNode.positionZ);\r\n            }\r\n\r\n            if (isNativeAudioNodeFaker(nativePannerNode)) {\r\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativePannerNode.inputs[0]);\r\n            } else {\r\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativePannerNode);\r\n            }\r\n\r\n            return nativePannerNode;\r\n        };\r\n\r\n        return {\r\n            render(\r\n                proxy: IPannerNode<T>,\r\n                nativeOfflineAudioContext: TNativeOfflineAudioContext\r\n            ): Promise<TNativeGainNode | TNativePannerNode> {\r\n                const renderedNativeGainNodeOrNativePannerNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\r\n\r\n                if (renderedNativeGainNodeOrNativePannerNode !== undefined) {\r\n                    return Promise.resolve(renderedNativeGainNodeOrNativePannerNode);\r\n                }\r\n\r\n                return createAudioNode(proxy, nativeOfflineAudioContext);\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import { IPeriodicWave, IPeriodicWaveOptions } from '../interfaces';\r\nimport { TContext, TPeriodicWaveConstructorFactory } from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    disableNormalization: false\r\n} as const;\r\n\r\nexport const createPeriodicWaveConstructor: TPeriodicWaveConstructorFactory = (\r\n    createNativePeriodicWave,\r\n    getNativeContext,\r\n    periodicWaveStore,\r\n    sanitizePeriodicWaveOptions\r\n) => {\r\n    return class PeriodicWave<T extends TContext> implements IPeriodicWave {\r\n        constructor(context: T, options?: Partial<IPeriodicWaveOptions>) {\r\n            const nativeContext = getNativeContext(context);\r\n            const mergedOptions = sanitizePeriodicWaveOptions({ ...DEFAULT_OPTIONS, ...options });\r\n            const periodicWave = createNativePeriodicWave(nativeContext, mergedOptions);\r\n\r\n            periodicWaveStore.add(periodicWave);\r\n\r\n            // This does violate all good pratices but it is used here to simplify the handling of periodic waves.\r\n            return periodicWave;\r\n        }\r\n\r\n        public static [Symbol.hasInstance](instance: unknown): boolean {\r\n            return (\r\n                (instance !== null && typeof instance === 'object' && Object.getPrototypeOf(instance) === PeriodicWave.prototype) ||\r\n                periodicWaveStore.has(<any>instance)\r\n            );\r\n        }\r\n    };\r\n};\r\n", "import { TRenderAutomationFactory } from '../types';\r\n\r\nexport const createRenderAutomation: TRenderAutomationFactory = (getAudioParamRenderer, renderInputsOfAudioParam) => {\r\n    return (nativeOfflineAudioContext, audioParam, nativeAudioParam) => {\r\n        const audioParamRenderer = getAudioParamRenderer(audioParam);\r\n\r\n        audioParamRenderer.replay(nativeAudioParam);\r\n\r\n        return renderInputsOfAudioParam(audioParam, nativeOfflineAudioContext, nativeAudioParam);\r\n    };\r\n};\r\n", "import { IAudioDestinationNode } from '../interfaces';\r\nimport { TRenderInputsOfAudioNodeFactory } from '../types';\r\n\r\nexport const createRenderInputsOfAudioNode: TRenderInputsOfAudioNodeFactory = (\r\n    getAudioNodeConnections,\r\n    getAudioNodeRenderer,\r\n    isPartOfACycle\r\n) => {\r\n    return async (audioNode, nativeOfflineAudioContext, nativeAudioNode) => {\r\n        const audioNodeConnections = getAudioNodeConnections(audioNode);\r\n\r\n        await Promise.all(\r\n            audioNodeConnections.activeInputs\r\n                .map((connections, input) =>\r\n                    Array.from(connections).map(async ([source, output]) => {\r\n                        const audioNodeRenderer = getAudioNodeRenderer(source);\r\n                        const renderedNativeAudioNode = await audioNodeRenderer.render(source, nativeOfflineAudioContext);\r\n                        const destination = <IAudioDestinationNode<typeof audioNode.context>>audioNode.context.destination;\r\n\r\n                        if (!isPartOfACycle(source) && (audioNode !== destination || !isPartOfACycle(audioNode))) {\r\n                            renderedNativeAudioNode.connect(nativeAudioNode, output, input);\r\n                        }\r\n                    })\r\n                )\r\n                .reduce((allRenderingPromises, renderingPromises) => [...allRenderingPromises, ...renderingPromises], [])\r\n        );\r\n    };\r\n};\r\n", "import { IAudioParam, IMinimalOfflineAudioContext, IOfflineAudioContext } from '../interfaces';\r\nimport { TNativeAudioParam, TNativeOfflineAudioContext, TRenderInputsOfAudioParamFactory } from '../types';\r\n\r\nexport const createRenderInputsOfAudioParam: TRenderInputsOfAudioParamFactory = (\r\n    getAudioNodeRenderer,\r\n    getAudioParamConnections,\r\n    isPartOfACycle\r\n) => {\r\n    return async <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>(\r\n        audioParam: IAudioParam,\r\n        nativeOfflineAudioContext: TNativeOfflineAudioContext,\r\n        nativeAudioParam: TNativeAudioParam\r\n    ): Promise<void> => {\r\n        const audioParamConnections = getAudioParamConnections<T>(audioParam);\r\n\r\n        await Promise.all(\r\n            Array.from(audioParamConnections.activeInputs).map(async ([source, output]) => {\r\n                const audioNodeRenderer = getAudioNodeRenderer(source);\r\n                const renderedNativeAudioNode = await audioNodeRenderer.render(source, nativeOfflineAudioContext);\r\n\r\n                if (!isPartOfACycle(source)) {\r\n                    renderedNativeAudioNode.connect(nativeAudioParam, output);\r\n                }\r\n            })\r\n        );\r\n    };\r\n};\r\n", "import { testPromiseSupport } from '../helpers/test-promise-support';\r\nimport { IOfflineAudioCompletionEvent } from '../interfaces';\r\nimport { TNativeAudioBuffer, TRenderNativeOfflineAudioContextFactory } from '../types';\r\n\r\nexport const createRenderNativeOfflineAudioContext: TRenderNativeOfflineAudioContextFactory = (\r\n    cacheTestResult,\r\n    createNativeGainNode,\r\n    createNativeScriptProcessorNode,\r\n    testOfflineAudioContextCurrentTimeSupport\r\n) => {\r\n    return (nativeOfflineAudioContext) => {\r\n        // Bug #21: Safari does not support promises yet.\r\n        if (cacheTestResult(testPromiseSupport, () => testPromiseSupport(nativeOfflineAudioContext))) {\r\n            // Bug #158: Chrome and Edge do not advance currentTime if it is not accessed while rendering the audio.\r\n            return Promise.resolve(\r\n                cacheTestResult(testOfflineAudioContextCurrentTimeSupport, testOfflineAudioContextCurrentTimeSupport)\r\n            ).then((isOfflineAudioContextCurrentTimeSupported) => {\r\n                if (!isOfflineAudioContextCurrentTimeSupported) {\r\n                    const scriptProcessorNode = createNativeScriptProcessorNode(nativeOfflineAudioContext, 512, 0, 1);\r\n\r\n                    nativeOfflineAudioContext.oncomplete = () => {\r\n                        scriptProcessorNode.onaudioprocess = null; // tslint:disable-line:deprecation\r\n                        scriptProcessorNode.disconnect();\r\n                    };\r\n                    scriptProcessorNode.onaudioprocess = () => nativeOfflineAudioContext.currentTime; // tslint:disable-line:deprecation\r\n\r\n                    scriptProcessorNode.connect(nativeOfflineAudioContext.destination);\r\n                }\r\n\r\n                return nativeOfflineAudioContext.startRendering();\r\n            });\r\n        }\r\n\r\n        return new Promise<TNativeAudioBuffer>((resolve) => {\r\n            // Bug #48: Safari does not render an OfflineAudioContext without any connected node.\r\n            const gainNode = createNativeGainNode(nativeOfflineAudioContext, {\r\n                channelCount: 1,\r\n                channelCountMode: 'explicit',\r\n                channelInterpretation: 'discrete',\r\n                gain: 0\r\n            });\r\n\r\n            nativeOfflineAudioContext.oncomplete = (event: IOfflineAudioCompletionEvent) => {\r\n                gainNode.disconnect();\r\n\r\n                resolve(event.renderedBuffer);\r\n            };\r\n\r\n            gainNode.connect(nativeOfflineAudioContext.destination);\r\n\r\n            nativeOfflineAudioContext.startRendering();\r\n        });\r\n    };\r\n};\r\n", "import { TSetActiveAudioWorkletNodeInputsFactory } from '../types';\r\n\r\nexport const createSetActiveAudioWorkletNodeInputs: TSetActiveAudioWorkletNodeInputsFactory = (activeAudioWorkletNodeInputsStore) => {\r\n    return (nativeAudioWorkletNode, activeInputs) => {\r\n        activeAudioWorkletNodeInputsStore.set(nativeAudioWorkletNode, activeInputs);\r\n    };\r\n};\r\n", "import { TSetAudioNodeTailTimeFactory } from '../types';\r\n\r\nexport const createSetAudioNodeTailTime: TSetAudioNodeTailTimeFactory = (audioNodeTailTimeStore) => {\r\n    return (audioNode, tailTime) => audioNodeTailTimeStore.set(audioNode, tailTime);\r\n};\r\n", "import { wrapAudioBufferGetChannelDataMethod } from '../helpers/wrap-audio-buffer-get-channel-data-method';\r\nimport { TStartRenderingFactory } from '../types';\r\n\r\nexport const createStartRendering: TStartRenderingFactory = (\r\n    audioBufferStore,\r\n    cacheTestResult,\r\n    getAudioNodeRenderer,\r\n    getUnrenderedAudioWorkletNodes,\r\n    renderNativeOfflineAudioContext,\r\n    testAudioBufferCopyChannelMethodsOutOfBoundsSupport,\r\n    wrapAudioBufferCopyChannelMethods,\r\n    wrapAudioBufferCopyChannelMethodsOutOfBounds\r\n) => {\r\n    return (destination, nativeOfflineAudioContext) =>\r\n        getAudioNodeRenderer(destination)\r\n            .render(destination, nativeOfflineAudioContext)\r\n            /*\r\n             * Bug #86 & #87: Invoking the renderer of an AudioWorkletNode might be necessary if it has no direct or indirect connection to the\r\n             * destination.\r\n             */\r\n            .then(() =>\r\n                Promise.all(\r\n                    Array.from(getUnrenderedAudioWorkletNodes(nativeOfflineAudioContext)).map((audioWorkletNode) =>\r\n                        getAudioNodeRenderer(audioWorkletNode).render(audioWorkletNode, nativeOfflineAudioContext)\r\n                    )\r\n                )\r\n            )\r\n            .then(() => renderNativeOfflineAudioContext(nativeOfflineAudioContext))\r\n            .then((audioBuffer) => {\r\n                // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\r\n                // Bug #100: Safari does throw a wrong error when calling getChannelData() with an out-of-bounds value.\r\n                if (typeof audioBuffer.copyFromChannel !== 'function') {\r\n                    wrapAudioBufferCopyChannelMethods(audioBuffer);\r\n                    wrapAudioBufferGetChannelDataMethod(audioBuffer);\r\n                    // Bug #157: Firefox does not allow the bufferOffset to be out-of-bounds.\r\n                } else if (\r\n                    !cacheTestResult(testAudioBufferCopyChannelMethodsOutOfBoundsSupport, () =>\r\n                        testAudioBufferCopyChannelMethodsOutOfBoundsSupport(audioBuffer)\r\n                    )\r\n                ) {\r\n                    wrapAudioBufferCopyChannelMethodsOutOfBounds(audioBuffer);\r\n                }\r\n\r\n                audioBufferStore.add(audioBuffer);\r\n\r\n                return audioBuffer;\r\n            });\r\n};\r\n", "import { IAudioParam, IStereoPannerNode, IStereoPannerOptions } from '../interfaces';\r\nimport { TAudioNodeRenderer, TContext, TStereoPannerNodeConstructorFactory } from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    channelCount: 2,\r\n    /*\r\n     * Bug #105: The channelCountMode should be 'clamped-max' according to the spec but is set to 'explicit' to achieve consistent\r\n     * behavior.\r\n     */\r\n    channelCountMode: 'explicit',\r\n    channelInterpretation: 'speakers',\r\n    pan: 0\r\n} as const;\r\n\r\nexport const createStereoPannerNodeConstructor: TStereoPannerNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createAudioParam,\r\n    createNativeStereoPannerNode,\r\n    createStereoPannerNodeRenderer,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext\r\n) => {\r\n    return class StereoPannerNode<T extends TContext> extends audioNodeConstructor<T> implements IStereoPannerNode<T> {\r\n        private _pan: IAudioParam;\r\n\r\n        constructor(context: T, options?: Partial<IStereoPannerOptions>) {\r\n            const nativeContext = getNativeContext(context);\r\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\r\n            const nativeStereoPannerNode = createNativeStereoPannerNode(nativeContext, mergedOptions);\r\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\r\n            const stereoPannerNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createStereoPannerNodeRenderer() : null);\r\n\r\n            super(context, false, nativeStereoPannerNode, stereoPannerNodeRenderer);\r\n\r\n            this._pan = createAudioParam(this, isOffline, nativeStereoPannerNode.pan);\r\n        }\r\n\r\n        get pan(): IAudioParam {\r\n            return this._pan;\r\n        }\r\n    };\r\n};\r\n", "import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\r\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\r\nimport { IMinimalOfflineAudioContext, IOfflineAudioContext, IStereoPannerNode } from '../interfaces';\r\nimport { TNativeOfflineAudioContext, TNativeStereoPannerNode, TStereoPannerNodeRendererFactoryFactory } from '../types';\r\n\r\nexport const createStereoPannerNodeRendererFactory: TStereoPannerNodeRendererFactoryFactory = (\r\n    connectAudioParam,\r\n    createNativeStereoPannerNode,\r\n    getNativeAudioNode,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode\r\n) => {\r\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\r\n        const renderedNativeStereoPannerNodes = new WeakMap<TNativeOfflineAudioContext, TNativeStereoPannerNode>();\r\n\r\n        const createStereoPannerNode = async (proxy: IStereoPannerNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\r\n            let nativeStereoPannerNode = getNativeAudioNode<T, TNativeStereoPannerNode>(proxy);\r\n\r\n            /*\r\n             * If the initially used nativeStereoPannerNode was not constructed on the same OfflineAudioContext it needs to be created\r\n             * again.\r\n             */\r\n            const nativeStereoPannerNodeIsOwnedByContext = isOwnedByContext(nativeStereoPannerNode, nativeOfflineAudioContext);\r\n\r\n            if (!nativeStereoPannerNodeIsOwnedByContext) {\r\n                const options = {\r\n                    channelCount: nativeStereoPannerNode.channelCount,\r\n                    channelCountMode: nativeStereoPannerNode.channelCountMode,\r\n                    channelInterpretation: nativeStereoPannerNode.channelInterpretation,\r\n                    pan: nativeStereoPannerNode.pan.value\r\n                };\r\n\r\n                nativeStereoPannerNode = createNativeStereoPannerNode(nativeOfflineAudioContext, options);\r\n            }\r\n\r\n            renderedNativeStereoPannerNodes.set(nativeOfflineAudioContext, nativeStereoPannerNode);\r\n\r\n            if (!nativeStereoPannerNodeIsOwnedByContext) {\r\n                await renderAutomation(nativeOfflineAudioContext, proxy.pan, nativeStereoPannerNode.pan);\r\n            } else {\r\n                await connectAudioParam(nativeOfflineAudioContext, proxy.pan, nativeStereoPannerNode.pan);\r\n            }\r\n\r\n            if (isNativeAudioNodeFaker(nativeStereoPannerNode)) {\r\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeStereoPannerNode.inputs[0]);\r\n            } else {\r\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeStereoPannerNode);\r\n            }\r\n\r\n            return nativeStereoPannerNode;\r\n        };\r\n\r\n        return {\r\n            render(proxy: IStereoPannerNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeStereoPannerNode> {\r\n                const renderedNativeStereoPannerNode = renderedNativeStereoPannerNodes.get(nativeOfflineAudioContext);\r\n\r\n                if (renderedNativeStereoPannerNode !== undefined) {\r\n                    return Promise.resolve(renderedNativeStereoPannerNode);\r\n                }\r\n\r\n                return createStereoPannerNode(proxy, nativeOfflineAudioContext);\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import { TTestAudioBufferConstructorSupportFactory } from '../types';\r\n\r\n// Bug #33: Safari exposes an AudioBuffer but it can't be used as a constructor.\r\nexport const createTestAudioBufferConstructorSupport: TTestAudioBufferConstructorSupportFactory = (nativeAudioBufferConstructor) => {\r\n    return () => {\r\n        if (nativeAudioBufferConstructor === null) {\r\n            return false;\r\n        }\r\n\r\n        try {\r\n            new nativeAudioBufferConstructor({ length: 1, sampleRate: 44100 }); // tslint:disable-line:no-unused-expression\r\n        } catch {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    };\r\n};\r\n", "import { TTestAudioBufferCopyChannelMethodsSubarraySupportFactory } from '../types';\r\n\r\n/*\r\n * Firefox up to version 67 didn't fully support the copyFromChannel() and copyToChannel() methods. Therefore testing one of those methods\r\n * is enough to know if the other one is supported as well.\r\n */\r\nexport const createTestAudioBufferCopyChannelMethodsSubarraySupport: TTestAudioBufferCopyChannelMethodsSubarraySupportFactory = (\r\n    nativeOfflineAudioContextConstructor\r\n) => {\r\n    return () => {\r\n        if (nativeOfflineAudioContextConstructor === null) {\r\n            return false;\r\n        }\r\n\r\n        const nativeOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\r\n        const nativeAudioBuffer = nativeOfflineAudioContext.createBuffer(1, 1, 44100);\r\n\r\n        // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\r\n        if (nativeAudioBuffer.copyToChannel === undefined) {\r\n            return true;\r\n        }\r\n\r\n        const source = new Float32Array(2);\r\n\r\n        try {\r\n            nativeAudioBuffer.copyFromChannel(source, 0, 0);\r\n        } catch {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    };\r\n};\r\n", "import { TTestAudioContextCloseMethodSupportFactory } from '../types';\r\n\r\nexport const createTestAudioContextCloseMethodSupport: TTestAudioContextCloseMethodSupportFactory = (nativeAudioContextConstructor) => {\r\n    return () => {\r\n        if (nativeAudioContextConstructor === null) {\r\n            return false;\r\n        }\r\n\r\n        // Try to check the prototype before constructing the AudioContext.\r\n        if (nativeAudioContextConstructor.prototype !== undefined && nativeAudioContextConstructor.prototype.close !== undefined) {\r\n            return true;\r\n        }\r\n\r\n        const audioContext = new nativeAudioContextConstructor();\r\n\r\n        const isAudioContextClosable = audioContext.close !== undefined;\r\n\r\n        try {\r\n            audioContext.close();\r\n        } catch {\r\n            // Ignore errors.\r\n        }\r\n\r\n        return isAudioContextClosable;\r\n    };\r\n};\r\n", "import { TTestAudioContextDecodeAudioDataMethodTypeErrorSupportFactory } from '../types';\r\n\r\n/**\r\n * Edge up to version 14, Firefox up to version 52, Safari up to version 9 and maybe other browsers\r\n * did not refuse to decode invalid parameters with a TypeError.\r\n */\r\nexport const createTestAudioContextDecodeAudioDataMethodTypeErrorSupport: TTestAudioContextDecodeAudioDataMethodTypeErrorSupportFactory = (\r\n    nativeOfflineAudioContextConstructor\r\n) => {\r\n    return () => {\r\n        if (nativeOfflineAudioContextConstructor === null) {\r\n            return Promise.resolve(false);\r\n        }\r\n\r\n        const offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\r\n\r\n        // Bug #21: Safari does not support promises yet.\r\n        return new Promise((resolve) => {\r\n            let isPending = true;\r\n\r\n            const resolvePromise = (err: Error) => {\r\n                if (isPending) {\r\n                    isPending = false;\r\n\r\n                    offlineAudioContext.startRendering();\r\n\r\n                    resolve(err instanceof TypeError);\r\n                }\r\n            };\r\n\r\n            let promise;\r\n\r\n            // Bug #26: Safari throws a synchronous error.\r\n            try {\r\n                promise = offlineAudioContext\r\n                    // Bug #1: Safari requires a successCallback.\r\n                    .decodeAudioData(\r\n                        <any>null,\r\n                        () => {\r\n                            // Ignore the success callback.\r\n                        },\r\n                        resolvePromise\r\n                    );\r\n            } catch (err) {\r\n                resolvePromise(err);\r\n            }\r\n\r\n            // Bug #21: Safari does not support promises yet.\r\n            if (promise !== undefined) {\r\n                // Bug #6: Chrome, Edge and Firefox do not call the errorCallback.\r\n                promise.catch(resolvePromise);\r\n            }\r\n        });\r\n    };\r\n};\r\n", "import { TTestAudioContextOptionsSupportFactory } from '../types';\r\n\r\nexport const createTestAudioContextOptionsSupport: TTestAudioContextOptionsSupportFactory = (nativeAudioContextConstructor) => {\r\n    return () => {\r\n        if (nativeAudioContextConstructor === null) {\r\n            return false;\r\n        }\r\n\r\n        let audioContext;\r\n\r\n        try {\r\n            audioContext = new nativeAudioContextConstructor({ latencyHint: 'balanced' });\r\n        } catch {\r\n            return false;\r\n        }\r\n\r\n        audioContext.close();\r\n\r\n        return true;\r\n    };\r\n};\r\n", "import { TTestAudioNodeConnectMethodSupportFactory } from '../types';\r\n\r\n// Safari up to version 12.0 (but not v12.1) didn't return the destination in case it was an AudioNode.\r\nexport const createTestAudioNodeConnectMethodSupport: TTestAudioNodeConnectMethodSupportFactory = (\r\n    nativeOfflineAudioContextConstructor\r\n) => {\r\n    return () => {\r\n        if (nativeOfflineAudioContextConstructor === null) {\r\n            return false;\r\n        }\r\n\r\n        const nativeOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\r\n        const nativeGainNode = nativeOfflineAudioContext.createGain();\r\n        const isSupported = nativeGainNode.connect(nativeGainNode) === nativeGainNode;\r\n\r\n        nativeGainNode.disconnect(nativeGainNode);\r\n\r\n        return isSupported;\r\n    };\r\n};\r\n", "import { TTestAudioWorkletProcessorNoOutputsSupportFactory } from '../types';\r\n\r\n/**\r\n * Chrome version 66 and 67 did not call the process() function of an AudioWorkletProcessor if it had no outputs. AudioWorklet support was\r\n * enabled by default in version 66.\r\n */\r\nexport const createTestAudioWorkletProcessorNoOutputsSupport: TTestAudioWorkletProcessorNoOutputsSupportFactory = (\r\n    nativeAudioWorkletNodeConstructor,\r\n    nativeOfflineAudioContextConstructor\r\n) => {\r\n    return async () => {\r\n        // Bug #61: If there is no native AudioWorkletNode it gets faked and therefore it is no problem if the it doesn't exist.\r\n        if (nativeAudioWorkletNodeConstructor === null) {\r\n            return true;\r\n        }\r\n\r\n        if (nativeOfflineAudioContextConstructor === null) {\r\n            return false;\r\n        }\r\n\r\n        const blob = new Blob(\r\n            [\r\n                'let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor(\"a\",A)'\r\n            ],\r\n            {\r\n                type: 'application/javascript; charset=utf-8'\r\n            }\r\n        );\r\n        const messageChannel = new MessageChannel();\r\n        // Bug #141: Safari does not support creating an OfflineAudioContext with less than 44100 Hz.\r\n        const offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 128, 44100);\r\n        const url = URL.createObjectURL(blob);\r\n\r\n        let isCallingProcess = false;\r\n\r\n        try {\r\n            await offlineAudioContext.audioWorklet.addModule(url);\r\n\r\n            const audioWorkletNode = new nativeAudioWorkletNodeConstructor(offlineAudioContext, 'a', { numberOfOutputs: 0 });\r\n            const oscillator = offlineAudioContext.createOscillator();\r\n\r\n            await new Promise<void>((resolve) => {\r\n                audioWorkletNode.port.onmessage = () => resolve();\r\n                audioWorkletNode.port.postMessage(messageChannel.port2, [messageChannel.port2]);\r\n            });\r\n\r\n            audioWorkletNode.port.onmessage = () => (isCallingProcess = true);\r\n\r\n            oscillator.connect(audioWorkletNode);\r\n            oscillator.start(0);\r\n\r\n            await offlineAudioContext.startRendering();\r\n\r\n            isCallingProcess = await new Promise((resolve) => {\r\n                messageChannel.port1.onmessage = ({ data }) => resolve(data === 1);\r\n                messageChannel.port1.postMessage(0);\r\n            });\r\n        } catch {\r\n            // Ignore errors.\r\n        } finally {\r\n            messageChannel.port1.close();\r\n            URL.revokeObjectURL(url);\r\n        }\r\n\r\n        return isCallingProcess;\r\n    };\r\n};\r\n", "import { TTestAudioWorkletProcessorPostMessageSupportFactory } from '../types';\r\n\r\n// Bug #179: Firefox does not allow to transfer any buffer which has been passed to the process() method as an argument.\r\nexport const createTestAudioWorkletProcessorPostMessageSupport: TTestAudioWorkletProcessorPostMessageSupportFactory = (\r\n    nativeAudioWorkletNodeConstructor,\r\n    nativeOfflineAudioContextConstructor\r\n) => {\r\n    return async () => {\r\n        // Bug #61: If there is no native AudioWorkletNode it gets faked and therefore it is no problem if the it doesn't exist.\r\n        if (nativeAudioWorkletNodeConstructor === null) {\r\n            return true;\r\n        }\r\n\r\n        if (nativeOfflineAudioContextConstructor === null) {\r\n            return false;\r\n        }\r\n\r\n        const blob = new Blob(\r\n            ['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor(\"a\",A)'],\r\n            {\r\n                type: 'application/javascript; charset=utf-8'\r\n            }\r\n        );\r\n        // Bug #141: Safari does not support creating an OfflineAudioContext with less than 44100 Hz.\r\n        const offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 128, 44100);\r\n        const url = URL.createObjectURL(blob);\r\n\r\n        let isEmittingMessageEvents = false;\r\n        let isEmittingProcessorErrorEvents = false;\r\n\r\n        try {\r\n            await offlineAudioContext.audioWorklet.addModule(url);\r\n\r\n            const audioWorkletNode = new nativeAudioWorkletNodeConstructor(offlineAudioContext, 'a', { numberOfOutputs: 0 });\r\n            const oscillator = offlineAudioContext.createOscillator();\r\n\r\n            audioWorkletNode.port.onmessage = () => (isEmittingMessageEvents = true);\r\n            audioWorkletNode.onprocessorerror = () => (isEmittingProcessorErrorEvents = true);\r\n\r\n            oscillator.connect(audioWorkletNode);\r\n            oscillator.start(0);\r\n\r\n            await offlineAudioContext.startRendering();\r\n\r\n            // Bug #197: Safari does not deliver the messages before the promise returned by startRendering() resolves.\r\n            await new Promise((resolve) => setTimeout(resolve));\r\n        } catch {\r\n            // Ignore errors.\r\n        } finally {\r\n            URL.revokeObjectURL(url);\r\n        }\r\n\r\n        return isEmittingMessageEvents && !isEmittingProcessorErrorEvents;\r\n    };\r\n};\r\n", "import { TTestChannelMergerNodeChannelCountSupportFactory } from '../types';\r\n\r\n/**\r\n * Firefox up to version 69 did not throw an error when setting a different channelCount or channelCountMode.\r\n */\r\nexport const createTestChannelMergerNodeChannelCountSupport: TTestChannelMergerNodeChannelCountSupportFactory = (\r\n    nativeOfflineAudioContextConstructor\r\n) => {\r\n    return () => {\r\n        if (nativeOfflineAudioContextConstructor === null) {\r\n            return false;\r\n        }\r\n\r\n        const offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\r\n        const nativeChannelMergerNode = offlineAudioContext.createChannelMerger();\r\n\r\n        /**\r\n         * Bug #15: Safari does not return the default properties. It still needs to be patched. This test is supposed to test the support\r\n         * in other browsers.\r\n         */\r\n        if (nativeChannelMergerNode.channelCountMode === 'max') {\r\n            return true;\r\n        }\r\n\r\n        try {\r\n            nativeChannelMergerNode.channelCount = 2;\r\n        } catch {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    };\r\n};\r\n", "import { TTestConstantSourceNodeAccurateSchedulingSupportFactory } from '../types';\r\n\r\nexport const createTestConstantSourceNodeAccurateSchedulingSupport: TTestConstantSourceNodeAccurateSchedulingSupportFactory = (\r\n    nativeOfflineAudioContextConstructor\r\n) => {\r\n    return () => {\r\n        if (nativeOfflineAudioContextConstructor === null) {\r\n            return false;\r\n        }\r\n\r\n        const nativeOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\r\n\r\n        // Bug #62: Safari does not support ConstantSourceNodes.\r\n        if (nativeOfflineAudioContext.createConstantSource === undefined) {\r\n            return true;\r\n        }\r\n\r\n        const nativeConstantSourceNode = nativeOfflineAudioContext.createConstantSource();\r\n\r\n        /*\r\n         * @todo This is using bug #75 to detect bug #70. That works because both bugs were unique to\r\n         * the implementation of Firefox right now, but it could probably be done in a better way.\r\n         */\r\n        return nativeConstantSourceNode.offset.maxValue !== Number.POSITIVE_INFINITY;\r\n    };\r\n};\r\n", "import { TTestConvolverNodeBufferReassignabilitySupportFactory } from '../types';\r\n\r\n// Opera up to version 57 did not allow to reassign the buffer of a ConvolverNode.\r\nexport const createTestConvolverNodeBufferReassignabilitySupport: TTestConvolverNodeBufferReassignabilitySupportFactory = (\r\n    nativeOfflineAudioContextConstructor\r\n) => {\r\n    return () => {\r\n        if (nativeOfflineAudioContextConstructor === null) {\r\n            return false;\r\n        }\r\n\r\n        const offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\r\n        const nativeConvolverNode = offlineAudioContext.createConvolver();\r\n\r\n        nativeConvolverNode.buffer = offlineAudioContext.createBuffer(1, 1, offlineAudioContext.sampleRate);\r\n\r\n        try {\r\n            nativeConvolverNode.buffer = offlineAudioContext.createBuffer(1, 1, offlineAudioContext.sampleRate);\r\n        } catch {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    };\r\n};\r\n", "import { TTestConvolverNodeChannelCountSupportFactory } from '../types';\r\n\r\n// Chrome up to version v80, Edge up to version v80 and Opera up to version v67 did not allow to set the channelCount property of a ConvolverNode to 1. They also did not allow to set the channelCountMode to 'explicit'.\r\nexport const createTestConvolverNodeChannelCountSupport: TTestConvolverNodeChannelCountSupportFactory = (\r\n    nativeOfflineAudioContextConstructor\r\n) => {\r\n    return () => {\r\n        if (nativeOfflineAudioContextConstructor === null) {\r\n            return false;\r\n        }\r\n\r\n        const offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\r\n        const nativeConvolverNode = offlineAudioContext.createConvolver();\r\n\r\n        try {\r\n            nativeConvolverNode.channelCount = 1;\r\n        } catch {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    };\r\n};\r\n", "import { TTestIsSecureContextSupportFactory } from '../types';\r\n\r\nexport const createTestIsSecureContextSupport: TTestIsSecureContextSupportFactory = (window) => {\r\n    return () => window !== null && window.hasOwnProperty('isSecureContext');\r\n};\r\n", "import { TTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupportFactory } from '../types';\r\n\r\n// Firefox up to version 68 did not throw an error when creating a MediaStreamAudioSourceNode with a mediaStream that had no audio track.\r\nexport const createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport: TTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupportFactory =\r\n    (nativeAudioContextConstructor) => {\r\n        return () => {\r\n            if (nativeAudioContextConstructor === null) {\r\n                return false;\r\n            }\r\n\r\n            const audioContext = new nativeAudioContextConstructor();\r\n\r\n            try {\r\n                audioContext.createMediaStreamSource(new MediaStream());\r\n\r\n                return false;\r\n            } catch (err) {\r\n                return true;\r\n            } finally {\r\n                audioContext.close();\r\n            }\r\n        };\r\n    };\r\n", "import { TTestOfflineAudioContextCurrentTimeSupportFactory } from '../types';\r\n\r\nexport const createTestOfflineAudioContextCurrentTimeSupport: TTestOfflineAudioContextCurrentTimeSupportFactory = (\r\n    createNativeGainNode,\r\n    nativeOfflineAudioContextConstructor\r\n) => {\r\n    return () => {\r\n        if (nativeOfflineAudioContextConstructor === null) {\r\n            return Promise.resolve(false);\r\n        }\r\n\r\n        const nativeOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\r\n\r\n        // Bug #48: Safari does not render an OfflineAudioContext without any connected node.\r\n        const gainNode = createNativeGainNode(nativeOfflineAudioContext, {\r\n            channelCount: 1,\r\n            channelCountMode: 'explicit',\r\n            channelInterpretation: 'discrete',\r\n            gain: 0\r\n        });\r\n\r\n        // Bug #21: Safari does not support promises yet.\r\n        return new Promise((resolve) => {\r\n            nativeOfflineAudioContext.oncomplete = () => {\r\n                gainNode.disconnect();\r\n\r\n                resolve(nativeOfflineAudioContext.currentTime !== 0);\r\n            };\r\n            nativeOfflineAudioContext.startRendering();\r\n        });\r\n    };\r\n};\r\n", "import { TTestStereoPannerNodeDefaultValueSupportFactory } from '../types';\r\n\r\n/**\r\n * Firefox up to version 62 did not kick off the processing of the StereoPannerNode if the value of pan was zero.\r\n */\r\nexport const createTestStereoPannerNodeDefaultValueSupport: TTestStereoPannerNodeDefaultValueSupportFactory = (\r\n    nativeOfflineAudioContextConstructor\r\n) => {\r\n    return () => {\r\n        if (nativeOfflineAudioContextConstructor === null) {\r\n            return Promise.resolve(false);\r\n        }\r\n\r\n        const nativeOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\r\n\r\n        /*\r\n         * Bug #105: Safari does not support the StereoPannerNode. Therefore the returned value should normally be false but the faker does\r\n         * support the tested behaviour.\r\n         */\r\n        if (nativeOfflineAudioContext.createStereoPanner === undefined) {\r\n            return Promise.resolve(true);\r\n        }\r\n\r\n        // Bug #62: Safari does not support ConstantSourceNodes.\r\n        if (nativeOfflineAudioContext.createConstantSource === undefined) {\r\n            return Promise.resolve(true);\r\n        }\r\n\r\n        const constantSourceNode = nativeOfflineAudioContext.createConstantSource();\r\n        const stereoPanner = nativeOfflineAudioContext.createStereoPanner();\r\n\r\n        constantSourceNode.channelCount = 1;\r\n        constantSourceNode.offset.value = 1;\r\n\r\n        stereoPanner.channelCount = 1;\r\n\r\n        constantSourceNode.start();\r\n\r\n        constantSourceNode.connect(stereoPanner).connect(nativeOfflineAudioContext.destination);\r\n\r\n        return nativeOfflineAudioContext.startRendering().then((buffer) => buffer.getChannelData(0)[0] !== 1);\r\n    };\r\n};\r\n", "import { TUnknownErrorFactory } from '../types';\r\n\r\nexport const createUnknownError: TUnknownErrorFactory = () => new DOMException('', 'UnknownError');\r\n", "import { IWaveShaperNode, IWaveShaperOptions } from '../interfaces';\r\nimport { TAudioNodeRenderer, TContext, TNativeWaveShaperNode, TOverSampleType, TWaveShaperNodeConstructorFactory } from '../types';\r\n\r\nconst DEFAULT_OPTIONS = {\r\n    channelCount: 2,\r\n    channelCountMode: 'max',\r\n    channelInterpretation: 'speakers',\r\n    curve: null,\r\n    oversample: 'none'\r\n} as const;\r\n\r\nexport const createWaveShaperNodeConstructor: TWaveShaperNodeConstructorFactory = (\r\n    audioNodeConstructor,\r\n    createInvalidStateError,\r\n    createNativeWaveShaperNode,\r\n    createWaveShaperNodeRenderer,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    setAudioNodeTailTime\r\n) => {\r\n    return class WaveShaperNode<T extends TContext> extends audioNodeConstructor<T> implements IWaveShaperNode<T> {\r\n        private _isCurveNullified: boolean;\r\n\r\n        private _nativeWaveShaperNode: TNativeWaveShaperNode;\r\n\r\n        constructor(context: T, options?: Partial<IWaveShaperOptions>) {\r\n            const nativeContext = getNativeContext(context);\r\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\r\n            const nativeWaveShaperNode = createNativeWaveShaperNode(nativeContext, mergedOptions);\r\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\r\n            const waveShaperNodeRenderer = <TAudioNodeRenderer<T, this>>(isOffline ? createWaveShaperNodeRenderer() : null);\r\n\r\n            // @todo Add a mechanism to only switch a WaveShaperNode to active while it is connected.\r\n            super(context, true, nativeWaveShaperNode, waveShaperNodeRenderer);\r\n\r\n            this._isCurveNullified = false;\r\n            this._nativeWaveShaperNode = nativeWaveShaperNode;\r\n\r\n            // @todo Determine a meaningful tail-time instead of just using one second.\r\n            setAudioNodeTailTime(this, 1);\r\n        }\r\n\r\n        get curve(): null | Float32Array {\r\n            if (this._isCurveNullified) {\r\n                return null;\r\n            }\r\n\r\n            return this._nativeWaveShaperNode.curve;\r\n        }\r\n\r\n        set curve(value) {\r\n            // Bug #103: Safari does not allow to set the curve to null.\r\n            if (value === null) {\r\n                this._isCurveNullified = true;\r\n                this._nativeWaveShaperNode.curve = new Float32Array([0, 0]);\r\n            } else {\r\n                // Bug #102: Safari does not throw an InvalidStateError when the curve has less than two samples.\r\n                // Bug #104: Chrome and Edge will throw an InvalidAccessError when the curve has less than two samples.\r\n                if (value.length < 2) {\r\n                    throw createInvalidStateError();\r\n                }\r\n\r\n                this._isCurveNullified = false;\r\n                this._nativeWaveShaperNode.curve = value;\r\n            }\r\n        }\r\n\r\n        get oversample(): TOverSampleType {\r\n            return this._nativeWaveShaperNode.oversample;\r\n        }\r\n\r\n        set oversample(value) {\r\n            this._nativeWaveShaperNode.oversample = value;\r\n        }\r\n    };\r\n};\r\n", "import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\r\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\r\nimport { IMinimalOfflineAudioContext, IOfflineAudioContext, IWaveShaperNode } from '../interfaces';\r\nimport { TNativeOfflineAudioContext, TNativeWaveShaperNode, TWaveShaperNodeRendererFactoryFactory } from '../types';\r\n\r\nexport const createWaveShaperNodeRendererFactory: TWaveShaperNodeRendererFactoryFactory = (\r\n    createNativeWaveShaperNode,\r\n    getNativeAudioNode,\r\n    renderInputsOfAudioNode\r\n) => {\r\n    return <T extends IMinimalOfflineAudioContext | IOfflineAudioContext>() => {\r\n        const renderedNativeWaveShaperNodes = new WeakMap<TNativeOfflineAudioContext, TNativeWaveShaperNode>();\r\n\r\n        const createWaveShaperNode = async (proxy: IWaveShaperNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext) => {\r\n            let nativeWaveShaperNode = getNativeAudioNode<T, TNativeWaveShaperNode>(proxy);\r\n\r\n            // If the initially used nativeWaveShaperNode was not constructed on the same OfflineAudioContext it needs to be created again.\r\n            const nativeWaveShaperNodeIsOwnedByContext = isOwnedByContext(nativeWaveShaperNode, nativeOfflineAudioContext);\r\n\r\n            if (!nativeWaveShaperNodeIsOwnedByContext) {\r\n                const options = {\r\n                    channelCount: nativeWaveShaperNode.channelCount,\r\n                    channelCountMode: nativeWaveShaperNode.channelCountMode,\r\n                    channelInterpretation: nativeWaveShaperNode.channelInterpretation,\r\n                    curve: nativeWaveShaperNode.curve,\r\n                    oversample: nativeWaveShaperNode.oversample\r\n                };\r\n\r\n                nativeWaveShaperNode = createNativeWaveShaperNode(nativeOfflineAudioContext, options);\r\n            }\r\n\r\n            renderedNativeWaveShaperNodes.set(nativeOfflineAudioContext, nativeWaveShaperNode);\r\n\r\n            if (isNativeAudioNodeFaker(nativeWaveShaperNode)) {\r\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeWaveShaperNode.inputs[0]);\r\n            } else {\r\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeWaveShaperNode);\r\n            }\r\n\r\n            return nativeWaveShaperNode;\r\n        };\r\n\r\n        return {\r\n            render(proxy: IWaveShaperNode<T>, nativeOfflineAudioContext: TNativeOfflineAudioContext): Promise<TNativeWaveShaperNode> {\r\n                const renderedNativeWaveShaperNode = renderedNativeWaveShaperNodes.get(nativeOfflineAudioContext);\r\n\r\n                if (renderedNativeWaveShaperNode !== undefined) {\r\n                    return Promise.resolve(renderedNativeWaveShaperNode);\r\n                }\r\n\r\n                return createWaveShaperNode(proxy, nativeOfflineAudioContext);\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import { TWindow, TWindowFactory } from '../types';\r\n\r\nexport const createWindow: TWindowFactory = () => (typeof window === 'undefined' ? null : <TWindow>window);\r\n", "import { TNativeAudioBuffer, TWrapAudioBufferCopyChannelMethodsFactory } from '../types';\r\n\r\nexport const createWrapAudioBufferCopyChannelMethods: TWrapAudioBufferCopyChannelMethodsFactory = (\r\n    convertNumberToUnsignedLong,\r\n    createIndexSizeError\r\n) => {\r\n    return (audioBuffer: TNativeAudioBuffer): void => {\r\n        audioBuffer.copyFromChannel = (destination, channelNumberAsNumber, bufferOffsetAsNumber = 0) => {\r\n            const bufferOffset = convertNumberToUnsignedLong(bufferOffsetAsNumber);\r\n            const channelNumber = convertNumberToUnsignedLong(channelNumberAsNumber);\r\n\r\n            if (channelNumber >= audioBuffer.numberOfChannels) {\r\n                throw createIndexSizeError();\r\n            }\r\n\r\n            const audioBufferLength = audioBuffer.length;\r\n            const channelData = audioBuffer.getChannelData(channelNumber);\r\n            const destinationLength = destination.length;\r\n\r\n            for (let i = bufferOffset < 0 ? -bufferOffset : 0; i + bufferOffset < audioBufferLength && i < destinationLength; i += 1) {\r\n                destination[i] = channelData[i + bufferOffset];\r\n            }\r\n        };\r\n\r\n        audioBuffer.copyToChannel = (source, channelNumberAsNumber, bufferOffsetAsNumber = 0) => {\r\n            const bufferOffset = convertNumberToUnsignedLong(bufferOffsetAsNumber);\r\n            const channelNumber = convertNumberToUnsignedLong(channelNumberAsNumber);\r\n\r\n            if (channelNumber >= audioBuffer.numberOfChannels) {\r\n                throw createIndexSizeError();\r\n            }\r\n\r\n            const audioBufferLength = audioBuffer.length;\r\n            const channelData = audioBuffer.getChannelData(channelNumber);\r\n            const sourceLength = source.length;\r\n\r\n            for (let i = bufferOffset < 0 ? -bufferOffset : 0; i + bufferOffset < audioBufferLength && i < sourceLength; i += 1) {\r\n                channelData[i + bufferOffset] = source[i];\r\n            }\r\n        };\r\n    };\r\n};\r\n", "import { TNativeAudioBuffer, TWrapAudioBufferCopyChannelMethodsOutOfBoundsFactory } from '../types';\r\n\r\nexport const createWrapAudioBufferCopyChannelMethodsOutOfBounds: TWrapAudioBufferCopyChannelMethodsOutOfBoundsFactory = (\r\n    convertNumberToUnsignedLong\r\n) => {\r\n    return (audioBuffer: TNativeAudioBuffer): void => {\r\n        audioBuffer.copyFromChannel = ((copyFromChannel) => {\r\n            return (destination: Float32Array, channelNumberAsNumber: number, bufferOffsetAsNumber = 0) => {\r\n                const bufferOffset = convertNumberToUnsignedLong(bufferOffsetAsNumber);\r\n                const channelNumber = convertNumberToUnsignedLong(channelNumberAsNumber);\r\n\r\n                if (bufferOffset < audioBuffer.length) {\r\n                    return copyFromChannel.call(audioBuffer, destination, channelNumber, bufferOffset);\r\n                }\r\n            };\r\n        })(audioBuffer.copyFromChannel);\r\n\r\n        audioBuffer.copyToChannel = ((copyToChannel) => {\r\n            return (source: Float32Array, channelNumberAsNumber: number, bufferOffsetAsNumber = 0) => {\r\n                const bufferOffset = convertNumberToUnsignedLong(bufferOffsetAsNumber);\r\n                const channelNumber = convertNumberToUnsignedLong(channelNumberAsNumber);\r\n\r\n                if (bufferOffset < audioBuffer.length) {\r\n                    return copyToChannel.call(audioBuffer, source, channelNumber, bufferOffset);\r\n                }\r\n            };\r\n        })(audioBuffer.copyToChannel);\r\n    };\r\n};\r\n", "import { TWrapAudioBufferSourceNodeStopMethodNullifiedBufferFactory } from '../types';\r\n\r\nexport const createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer: TWrapAudioBufferSourceNodeStopMethodNullifiedBufferFactory = (\r\n    overwriteAccessors\r\n) => {\r\n    return (nativeAudioBufferSourceNode, nativeContext) => {\r\n        const nullifiedBuffer = nativeContext.createBuffer(1, 1, 44100);\r\n\r\n        if (nativeAudioBufferSourceNode.buffer === null) {\r\n            nativeAudioBufferSourceNode.buffer = nullifiedBuffer;\r\n        }\r\n\r\n        overwriteAccessors(\r\n            nativeAudioBufferSourceNode,\r\n            'buffer',\r\n            (get) => () => {\r\n                const value = get.call(nativeAudioBufferSourceNode);\r\n\r\n                return value === nullifiedBuffer ? null : value;\r\n            },\r\n            (set) => (value) => {\r\n                return set.call(nativeAudioBufferSourceNode, value === null ? nullifiedBuffer : value);\r\n            }\r\n        );\r\n    };\r\n};\r\n", "import { TWrapChannelMergerNodeFactory } from '../types';\r\n\r\nexport const createWrapChannelMergerNode: TWrapChannelMergerNodeFactory = (createInvalidStateError, monitorConnections) => {\r\n    return (nativeContext, channelMergerNode) => {\r\n        // Bug #15: Safari does not return the default properties.\r\n        channelMergerNode.channelCount = 1;\r\n        channelMergerNode.channelCountMode = 'explicit';\r\n\r\n        // Bug #16: Safari does not throw an error when setting a different channelCount or channelCountMode.\r\n        Object.defineProperty(channelMergerNode, 'channelCount', {\r\n            get: () => 1,\r\n            set: () => {\r\n                throw createInvalidStateError();\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(channelMergerNode, 'channelCountMode', {\r\n            get: () => 'explicit',\r\n            set: () => {\r\n                throw createInvalidStateError();\r\n            }\r\n        });\r\n\r\n        // Bug #20: Safari requires a connection of any kind to treat the input signal correctly.\r\n        const audioBufferSourceNode = nativeContext.createBufferSource();\r\n\r\n        const whenConnected = () => {\r\n            const length = channelMergerNode.numberOfInputs;\r\n\r\n            for (let i = 0; i < length; i += 1) {\r\n                audioBufferSourceNode.connect(channelMergerNode, 0, i);\r\n            }\r\n        };\r\n        const whenDisconnected = () => audioBufferSourceNode.disconnect(channelMergerNode);\r\n\r\n        monitorConnections(channelMergerNode, whenConnected, whenDisconnected);\r\n    };\r\n};\r\n", "import { TGetFirstSampleFunction } from '../types';\r\n\r\nexport const getFirstSample: TGetFirstSampleFunction = (audioBuffer, buffer, channelNumber) => {\r\n    // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\r\n    if (audioBuffer.copyFromChannel === undefined) {\r\n        return audioBuffer.getChannelData(channelNumber)[0];\r\n    }\r\n\r\n    audioBuffer.copyFromChannel(buffer, channelNumber);\r\n\r\n    return buffer[0];\r\n};\r\n", "import { TIsDCCurveFunction } from '../types';\r\n\r\nexport const isDCCurve: TIsDCCurveFunction = (curve) => {\r\n    if (curve === null) {\r\n        return false;\r\n    }\r\n\r\n    const length = curve.length;\r\n\r\n    if (length % 2 !== 0) {\r\n        return curve[Math.floor(length / 2)] !== 0;\r\n    }\r\n\r\n    return curve[length / 2 - 1] + curve[length / 2] !== 0;\r\n};\r\n", "import { TOverwriteAccessorsFunction } from '../types';\r\n\r\nexport const overwriteAccessors: TOverwriteAccessorsFunction = (object, property, createGetter, createSetter) => {\r\n    let prototype = object;\r\n\r\n    while (!prototype.hasOwnProperty(property)) {\r\n        prototype = Object.getPrototypeOf(prototype);\r\n    }\r\n\r\n    const { get, set } = <Required<PropertyDescriptor>>Object.getOwnPropertyDescriptor(prototype, property);\r\n\r\n    Object.defineProperty(object, property, { get: createGetter(get), set: createSetter(set) });\r\n};\r\n", "import { TSanitizeAudioWorkletNodeOptionsFunction } from '../types';\r\n\r\nexport const sanitizeAudioWorkletNodeOptions: TSanitizeAudioWorkletNodeOptionsFunction = (options) => {\r\n    return {\r\n        ...options,\r\n        outputChannelCount:\r\n            options.outputChannelCount !== undefined\r\n                ? options.outputChannelCount\r\n                : options.numberOfInputs === 1 && options.numberOfOutputs === 1\r\n                ? /*\r\n                   * Bug #61: This should be the computedNumberOfChannels, but unfortunately that is almost impossible to fake. That's why\r\n                   * the channelCountMode is required to be 'explicit' as long as there is not a native implementation in every browser. That\r\n                   * makes sure the computedNumberOfChannels is equivilant to the channelCount which makes it much easier to compute.\r\n                   */\r\n                  [options.channelCount]\r\n                : Array.from({ length: options.numberOfOutputs }, () => 1)\r\n    };\r\n};\r\n", "import { TSanitizeChannelSplitterOptionsFunction } from '../types';\r\n\r\nexport const sanitizeChannelSplitterOptions: TSanitizeChannelSplitterOptionsFunction = (options) => {\r\n    return { ...options, channelCount: options.numberOfOutputs };\r\n};\r\n", "import { TSanitizePeriodicWaveOptionsFunction } from '../types';\r\n\r\nexport const sanitizePeriodicWaveOptions: TSanitizePeriodicWaveOptionsFunction = (options) => {\r\n    const { imag, real } = options;\r\n\r\n    if (imag === undefined) {\r\n        if (real === undefined) {\r\n            return { ...options, imag: [0, 0], real: [0, 0] };\r\n        }\r\n\r\n        return { ...options, imag: Array.from(real, () => 0), real };\r\n    }\r\n\r\n    if (real === undefined) {\r\n        return { ...options, imag, real: Array.from(imag, () => 0) };\r\n    }\r\n\r\n    return { ...options, imag, real };\r\n};\r\n", "import { TSetValueAtTimeUntilPossibleFunction } from '../types';\r\n\r\nexport const setValueAtTimeUntilPossible: TSetValueAtTimeUntilPossibleFunction = (audioParam, value, startTime) => {\r\n    try {\r\n        audioParam.setValueAtTime(value, startTime);\r\n    } catch (err) {\r\n        if (err.code !== 9) {\r\n            throw err;\r\n        }\r\n\r\n        setValueAtTimeUntilPossible(audioParam, value, startTime + 1e-7);\r\n    }\r\n};\r\n", "import { TNativeContext } from '../types';\r\n\r\nexport const testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport = (nativeContext: TNativeContext) => {\r\n    const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\r\n\r\n    nativeAudioBufferSourceNode.start();\r\n\r\n    try {\r\n        nativeAudioBufferSourceNode.start();\r\n    } catch {\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n};\r\n", "import { TNativeContext } from '../types';\r\n\r\nexport const testAudioBufferSourceNodeStartMethodOffsetClampingSupport = (nativeContext: TNativeContext) => {\r\n    const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\r\n    const nativeAudioBuffer = nativeContext.createBuffer(1, 1, 44100);\r\n\r\n    nativeAudioBufferSourceNode.buffer = nativeAudioBuffer;\r\n\r\n    try {\r\n        nativeAudioBufferSourceNode.start(0, 1);\r\n    } catch {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n};\r\n", "import { TNativeContext } from '../types';\r\n\r\nexport const testAudioBufferSourceNodeStopMethodNullifiedBufferSupport = (nativeContext: TNativeContext) => {\r\n    const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\r\n\r\n    nativeAudioBufferSourceNode.start();\r\n\r\n    try {\r\n        nativeAudioBufferSourceNode.stop();\r\n    } catch {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n};\r\n", "import { TNativeContext } from '../types';\r\n\r\nexport const testAudioScheduledSourceNodeStartMethodNegativeParametersSupport = (nativeContext: TNativeContext) => {\r\n    const nativeAudioBufferSourceNode = nativeContext.createOscillator();\r\n\r\n    try {\r\n        nativeAudioBufferSourceNode.start(-1);\r\n    } catch (err) {\r\n        return err instanceof RangeError;\r\n    }\r\n\r\n    return false;\r\n};\r\n", "import { TNativeContext } from '../types';\r\n\r\nexport const testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport = (nativeContext: TNativeContext) => {\r\n    const nativeAudioBuffer = nativeContext.createBuffer(1, 1, 44100);\r\n    const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\r\n\r\n    nativeAudioBufferSourceNode.buffer = nativeAudioBuffer;\r\n    nativeAudioBufferSourceNode.start();\r\n    nativeAudioBufferSourceNode.stop();\r\n\r\n    try {\r\n        nativeAudioBufferSourceNode.stop();\r\n\r\n        return true;\r\n    } catch {\r\n        return false;\r\n    }\r\n};\r\n", "import { TNativeContext } from '../types';\r\n\r\nexport const testAudioScheduledSourceNodeStopMethodNegativeParametersSupport = (nativeContext: TNativeContext) => {\r\n    const nativeAudioBufferSourceNode = nativeContext.createOscillator();\r\n\r\n    try {\r\n        nativeAudioBufferSourceNode.stop(-1);\r\n    } catch (err) {\r\n        return err instanceof RangeError;\r\n    }\r\n\r\n    return false;\r\n};\r\n", "import { TTestAudioWorkletNodeOptionsClonabilityFunction } from '../types';\r\n\r\nexport const testAudioWorkletNodeOptionsClonability: TTestAudioWorkletNodeOptionsClonabilityFunction = (audioWorkletNodeOptions) => {\r\n    const { port1, port2 } = new MessageChannel();\r\n\r\n    try {\r\n        // This will throw an error if the audioWorkletNodeOptions are not clonable.\r\n        port1.postMessage(audioWorkletNodeOptions);\r\n    } finally {\r\n        port1.close();\r\n        port2.close();\r\n    }\r\n};\r\n", "/*\r\n * Bug #122: Edge up to version v18 did not allow to construct a DOMException'. It also had a couple more bugs but since this is easy to\r\n * test it's used here as a placeholder.\r\n *\r\n * Bug #27: Edge up to version v18 did reject an invalid arrayBuffer passed to decodeAudioData() with a DOMException.\r\n *\r\n * Bug #50: Edge up to version v18 did not allow to create AudioNodes on a closed context.\r\n *\r\n * Bug #57: Edge up to version v18 did not throw an error when assigning the type of an OscillatorNode to 'custom'.\r\n *\r\n * Bug #63: Edge up to version v18 did not expose the mediaElement property of a MediaElementAudioSourceNode.\r\n *\r\n * Bug #64: Edge up to version v18 did not support the MediaStreamAudioDestinationNode.\r\n *\r\n * Bug #71: Edge up to version v18 did not allow to set the buffer of an AudioBufferSourceNode to null.\r\n *\r\n * Bug #93: Edge up to version v18 did set the sampleRate of an AudioContext to zero when it was closed.\r\n *\r\n * Bug #101: Edge up to version v18 refused to execute decodeAudioData() on a closed context.\r\n *\r\n * Bug #106: Edge up to version v18 did not expose the maxValue and minValue properties of the pan AudioParam of a StereoPannerNode.\r\n *\r\n * Bug #110: Edge up to version v18 did not expose the maxValue and minValue properties of the attack, knee, ratio, release and threshold AudioParams of a DynamicsCompressorNode.\r\n *\r\n * Bug #123: Edge up to version v18 did not support HRTF as the panningModel for a PannerNode.\r\n *\r\n * Bug #145: Edge up to version v18 did throw an IndexSizeError when an OfflineAudioContext was created with a sampleRate of zero.\r\n *\r\n * Bug #161: Edge up to version v18 did not expose the maxValue and minValue properties of the delayTime AudioParam of a DelayNode.\r\n */\r\nexport const testDomExceptionConstructorSupport = () => {\r\n    try {\r\n        new DOMException(); // tslint:disable-line:no-unused-expression\r\n    } catch {\r\n        return false;\r\n    }\r\n\r\n    return true;\r\n};\r\n", "// Safari at version 11 did not support transferables.\r\nexport const testTransferablesSupport = () =>\r\n    new Promise<boolean>((resolve) => {\r\n        const arrayBuffer = new ArrayBuffer(0);\r\n        const { port1, port2 } = new MessageChannel();\r\n\r\n        port1.onmessage = ({ data }) => resolve(data !== null);\r\n        port2.postMessage(arrayBuffer, [arrayBuffer]);\r\n    });\r\n", "import { TNativeAudioBufferSourceNode } from '../types';\r\n\r\nexport const wrapAudioBufferSourceNodeStartMethodOffsetClamping = (nativeAudioBufferSourceNode: TNativeAudioBufferSourceNode): void => {\r\n    nativeAudioBufferSourceNode.start = ((start) => {\r\n        return (when = 0, offset = 0, duration?: number) => {\r\n            const buffer = nativeAudioBufferSourceNode.buffer;\r\n            // Bug #154: Safari does not clamp the offset if it is equal to or greater than the duration of the buffer.\r\n            const clampedOffset = buffer === null ? offset : Math.min(buffer.duration, offset);\r\n\r\n            // Bug #155: Safari does not handle the offset correctly if it would cause the buffer to be not be played at all.\r\n            if (buffer !== null && clampedOffset > buffer.duration - 0.5 / nativeAudioBufferSourceNode.context.sampleRate) {\r\n                start.call(nativeAudioBufferSourceNode, when, 0, 0);\r\n            } else {\r\n                start.call(nativeAudioBufferSourceNode, when, clampedOffset, duration);\r\n            }\r\n        };\r\n    })(nativeAudioBufferSourceNode.start);\r\n};\r\n", "import { TNativeAudioNode, TWrapAudioScheduledSourceNodeStopMethodConsecutiveCallsFunction } from '../types';\r\nimport { interceptConnections } from './intercept-connections';\r\n\r\nexport const wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls: TWrapAudioScheduledSourceNodeStopMethodConsecutiveCallsFunction = (\r\n    nativeAudioScheduledSourceNode,\r\n    nativeContext\r\n) => {\r\n    const nativeGainNode = nativeContext.createGain();\r\n\r\n    nativeAudioScheduledSourceNode.connect(nativeGainNode);\r\n\r\n    const disconnectGainNode = ((disconnect) => {\r\n        return () => {\r\n            // @todo TypeScript cannot infer the overloaded signature with 1 argument yet.\r\n            (<(destinaton: TNativeAudioNode) => void>disconnect).call(nativeAudioScheduledSourceNode, nativeGainNode);\r\n            nativeAudioScheduledSourceNode.removeEventListener('ended', disconnectGainNode);\r\n        };\r\n    })(nativeAudioScheduledSourceNode.disconnect);\r\n\r\n    nativeAudioScheduledSourceNode.addEventListener('ended', disconnectGainNode);\r\n\r\n    interceptConnections(nativeAudioScheduledSourceNode, nativeGainNode);\r\n\r\n    nativeAudioScheduledSourceNode.stop = ((stop) => {\r\n        let isStopped = false;\r\n\r\n        return (when = 0) => {\r\n            if (isStopped) {\r\n                try {\r\n                    stop.call(nativeAudioScheduledSourceNode, when);\r\n                } catch {\r\n                    nativeGainNode.gain.setValueAtTime(0, when);\r\n                }\r\n            } else {\r\n                stop.call(nativeAudioScheduledSourceNode, when);\r\n\r\n                isStopped = true;\r\n            }\r\n        };\r\n    })(nativeAudioScheduledSourceNode.stop);\r\n};\r\n", "import { TWrapEventListenerFunction } from '../types';\r\n\r\nexport const wrapEventListener: TWrapEventListenerFunction = (target, eventListener) => {\r\n    return (event) => {\r\n        const descriptor = { value: target };\r\n\r\n        Object.defineProperties(event, {\r\n            currentTarget: descriptor,\r\n            target: descriptor\r\n        });\r\n\r\n        if (typeof eventListener === 'function') {\r\n            return eventListener.call(target, event);\r\n        }\r\n\r\n        return eventListener.handleEvent.call(target, event);\r\n    };\r\n};\r\n", "export {};\r\n//# sourceMappingURL=analyser-node.js.map", "export {};\r\n//# sourceMappingURL=analyser-options.js.map", "export {};\r\n//# sourceMappingURL=audio-buffer.js.map", "export {};\r\n//# sourceMappingURL=audio-buffer-options.js.map", "export {};\r\n//# sourceMappingURL=audio-buffer-source-node.js.map", "export {};\r\n//# sourceMappingURL=audio-buffer-source-node-renderer.js.map", "export {};\r\n//# sourceMappingURL=audio-buffer-source-options.js.map", "export {};\r\n//# sourceMappingURL=audio-context.js.map", "export {};\r\n//# sourceMappingURL=audio-context-options.js.map", "export {};\r\n//# sourceMappingURL=audio-destination-node.js.map", "export {};\r\n//# sourceMappingURL=audio-listener.js.map", "export {};\r\n//# sourceMappingURL=audio-node.js.map", "export {};\r\n//# sourceMappingURL=audio-node-options.js.map", "export {};\r\n//# sourceMappingURL=audio-node-renderer.js.map", "export {};\r\n//# sourceMappingURL=audio-param.js.map", "export {};\r\n//# sourceMappingURL=audio-param-descriptor.js.map", "export {};\r\n//# sourceMappingURL=audio-param-renderer.js.map", "export {};\r\n//# sourceMappingURL=audio-scheduled-source-node.js.map", "export {};\r\n//# sourceMappingURL=audio-scheduled-source-node-event-map.js.map", "export {};\r\n//# sourceMappingURL=audio-worklet.js.map", "export {};\r\n//# sourceMappingURL=audio-worklet-node.js.map", "export {};\r\n//# sourceMappingURL=audio-worklet-node-event-map.js.map", "export {};\r\n//# sourceMappingURL=audio-worklet-node-options.js.map", "export {};\r\n//# sourceMappingURL=audio-worklet-processor.js.map", "export {};\r\n//# sourceMappingURL=audio-worklet-processor-constructor.js.map", "export {};\r\n//# sourceMappingURL=automation.js.map", "export {};\r\n//# sourceMappingURL=base-audio-context.js.map", "export {};\r\n//# sourceMappingURL=biquad-filter-node.js.map", "export {};\r\n//# sourceMappingURL=biquad-filter-options.js.map", "export {};\r\n//# sourceMappingURL=channel-merger-options.js.map", "export {};\r\n//# sourceMappingURL=channel-splitter-options.js.map", "export {};\r\n//# sourceMappingURL=common-audio-context.js.map", "export {};\r\n//# sourceMappingURL=common-offline-audio-context.js.map", "export {};\r\n//# sourceMappingURL=constant-source-node.js.map", "export {};\r\n//# sourceMappingURL=constant-source-node-renderer.js.map", "export {};\r\n//# sourceMappingURL=constant-source-options.js.map", "export {};\r\n//# sourceMappingURL=convolver-node.js.map", "export {};\r\n//# sourceMappingURL=convolver-options.js.map", "export {};\r\n//# sourceMappingURL=delay-node.js.map", "export {};\r\n//# sourceMappingURL=delay-options.js.map", "export {};\r\n//# sourceMappingURL=dynamics-compressor-node.js.map", "export {};\r\n//# sourceMappingURL=dynamics-compressor-options.js.map", "export {};\r\n//# sourceMappingURL=event-target.js.map", "export {};\r\n//# sourceMappingURL=gain-node.js.map", "export {};\r\n//# sourceMappingURL=gain-options.js.map", "export {};\r\n//# sourceMappingURL=iir-filter-node.js.map", "export {};\r\n//# sourceMappingURL=iir-filter-options.js.map", "export {};\r\n//# sourceMappingURL=media-element-audio-source-node.js.map", "export {};\r\n//# sourceMappingURL=media-element-audio-source-options.js.map", "export {};\r\n//# sourceMappingURL=media-stream-audio-destination-node.js.map", "export {};\r\n//# sourceMappingURL=media-stream-audio-source-node.js.map", "export {};\r\n//# sourceMappingURL=media-stream-audio-source-options.js.map", "export {};\r\n//# sourceMappingURL=media-stream-track-audio-source-node.js.map", "export {};\r\n//# sourceMappingURL=media-stream-track-audio-source-options.js.map", "export {};\r\n//# sourceMappingURL=minimal-audio-context.js.map", "export {};\r\n//# sourceMappingURL=minimal-base-audio-context.js.map", "export {};\r\n//# sourceMappingURL=minimal-base-audio-context-event-map.js.map", "export {};\r\n//# sourceMappingURL=minimal-offline-audio-context.js.map", "export {};\r\n//# sourceMappingURL=native-audio-node-faker.js.map", "export {};\r\n//# sourceMappingURL=native-audio-worklet-node-faker.js.map", "export {};\r\n//# sourceMappingURL=native-constant-source-node-faker.js.map", "export {};\r\n//# sourceMappingURL=native-convolver-node-faker.js.map", "export {};\r\n//# sourceMappingURL=native-iir-filter-node-faker.js.map", "export {};\r\n//# sourceMappingURL=native-panner-node-faker.js.map", "export {};\r\n//# sourceMappingURL=native-stereo-panner-node-faker.js.map", "export {};\r\n//# sourceMappingURL=native-wave-shaper-node-faker.js.map", "export {};\r\n//# sourceMappingURL=offline-audio-completion-event.js.map", "export {};\r\n//# sourceMappingURL=offline-audio-context.js.map", "export {};\r\n//# sourceMappingURL=offline-audio-context-constructor.js.map", "export {};\r\n//# sourceMappingURL=offline-audio-context-options.js.map", "export {};\r\n//# sourceMappingURL=oscillator-node.js.map", "export {};\r\n//# sourceMappingURL=oscillator-node-renderer.js.map", "export {};\r\n//# sourceMappingURL=oscillator-options.js.map", "export {};\r\n//# sourceMappingURL=panner-node.js.map", "export {};\r\n//# sourceMappingURL=panner-options.js.map", "export {};\r\n//# sourceMappingURL=periodic-wave.js.map", "export {};\r\n//# sourceMappingURL=periodic-wave-constraints.js.map", "export {};\r\n//# sourceMappingURL=periodic-wave-options.js.map", "export {};\r\n//# sourceMappingURL=read-only-map.js.map", "export {};\r\n//# sourceMappingURL=stereo-panner-node.js.map", "export {};\r\n//# sourceMappingURL=stereo-panner-options.js.map", "export {};\r\n//# sourceMappingURL=wave-shaper-node.js.map", "export {};\r\n//# sourceMappingURL=wave-shaper-options.js.map", "// @todo This is currently named IWorkletOptions and not IAudioWorkletOptions because it defines the options of a generic Worklet.\r\n\r\nexport interface IWorkletOptions {\r\n    credentials: 'include' | 'omit' | 'same-origin';\r\n}\r\n", "export * from './analyser-node';\r\nexport * from './analyser-options';\r\nexport * from './audio-buffer';\r\nexport * from './audio-buffer-options';\r\nexport * from './audio-buffer-source-node';\r\nexport * from './audio-buffer-source-node-renderer';\r\nexport * from './audio-buffer-source-options';\r\nexport * from './audio-context';\r\nexport * from './audio-context-options';\r\nexport * from './audio-destination-node';\r\nexport * from './audio-listener';\r\nexport * from './audio-node';\r\nexport * from './audio-node-options';\r\nexport * from './audio-node-renderer';\r\nexport * from './audio-param';\r\nexport * from './audio-param-descriptor';\r\nexport * from './audio-param-renderer';\r\nexport * from './audio-scheduled-source-node';\r\nexport * from './audio-scheduled-source-node-event-map';\r\nexport * from './audio-worklet';\r\nexport * from './audio-worklet-node';\r\nexport * from './audio-worklet-node-event-map';\r\nexport * from './audio-worklet-node-options';\r\nexport * from './audio-worklet-processor';\r\nexport * from './audio-worklet-processor-constructor';\r\nexport * from './automation';\r\nexport * from './base-audio-context';\r\nexport * from './biquad-filter-node';\r\nexport * from './biquad-filter-options';\r\nexport * from './channel-merger-options';\r\nexport * from './channel-splitter-options';\r\nexport * from './common-audio-context';\r\nexport * from './common-offline-audio-context';\r\nexport * from './constant-source-node';\r\nexport * from './constant-source-node-renderer';\r\nexport * from './constant-source-options';\r\nexport * from './convolver-node';\r\nexport * from './convolver-options';\r\nexport * from './delay-node';\r\nexport * from './delay-options';\r\nexport * from './dynamics-compressor-node';\r\nexport * from './dynamics-compressor-options';\r\nexport * from './event-target';\r\nexport * from './gain-node';\r\nexport * from './gain-options';\r\nexport * from './iir-filter-node';\r\nexport * from './iir-filter-options';\r\nexport * from './media-element-audio-source-node';\r\nexport * from './media-element-audio-source-options';\r\nexport * from './media-stream-audio-destination-node';\r\nexport * from './media-stream-audio-source-node';\r\nexport * from './media-stream-audio-source-options';\r\nexport * from './media-stream-track-audio-source-node';\r\nexport * from './media-stream-track-audio-source-options';\r\nexport * from './minimal-audio-context';\r\nexport * from './minimal-base-audio-context';\r\nexport * from './minimal-base-audio-context-event-map';\r\nexport * from './minimal-offline-audio-context';\r\nexport * from './native-audio-node-faker';\r\nexport * from './native-audio-worklet-node-faker';\r\nexport * from './native-constant-source-node-faker';\r\nexport * from './native-convolver-node-faker';\r\nexport * from './native-iir-filter-node-faker';\r\nexport * from './native-panner-node-faker';\r\nexport * from './native-stereo-panner-node-faker';\r\nexport * from './native-wave-shaper-node-faker';\r\nexport * from './offline-audio-completion-event';\r\nexport * from './offline-audio-context';\r\nexport * from './offline-audio-context-constructor';\r\nexport * from './offline-audio-context-options';\r\nexport * from './oscillator-node';\r\nexport * from './oscillator-node-renderer';\r\nexport * from './oscillator-options';\r\nexport * from './panner-node';\r\nexport * from './panner-options';\r\nexport * from './periodic-wave';\r\nexport * from './periodic-wave-constraints';\r\nexport * from './periodic-wave-options';\r\nexport * from './read-only-map';\r\nexport * from './stereo-panner-node';\r\nexport * from './stereo-panner-options';\r\nexport * from './wave-shaper-node';\r\nexport * from './wave-shaper-options';\r\nexport * from './worklet-options';\r\n", "export {};\r\n//# sourceMappingURL=abort-error-factory.js.map", "export {};\r\n//# sourceMappingURL=active-audio-worklet-node-inputs-store.js.map", "export {};\r\n//# sourceMappingURL=active-input-connection.js.map", "export {};\r\n//# sourceMappingURL=add-active-input-connection-to-audio-node-factory.js.map", "export {};\r\n//# sourceMappingURL=add-active-input-connection-to-audio-node-function.js.map", "export {};\r\n//# sourceMappingURL=add-audio-node-connections-factory.js.map", "export {};\r\n//# sourceMappingURL=add-audio-node-connections-function.js.map", "export {};\r\n//# sourceMappingURL=add-audio-param-connections-factory.js.map", "export {};\r\n//# sourceMappingURL=add-audio-param-connections-function.js.map", "export {};\r\n//# sourceMappingURL=add-audio-worklet-module-factory.js.map", "export {};\r\n//# sourceMappingURL=add-audio-worklet-module-function.js.map", "export {};\r\n//# sourceMappingURL=add-connection-to-audio-node-factory.js.map", "export {};\r\n//# sourceMappingURL=add-connection-to-audio-node-function.js.map", "export {};\r\n//# sourceMappingURL=add-passive-input-connection-to-audio-node-factory.js.map", "export {};\r\n//# sourceMappingURL=add-passive-input-connection-to-audio-node-function.js.map", "export {};\r\n//# sourceMappingURL=add-silent-connection-factory.js.map", "export {};\r\n//# sourceMappingURL=add-silent-connection-function.js.map", "export {};\r\n//# sourceMappingURL=add-unrendered-audio-worklet-node-factory.js.map", "export {};\r\n//# sourceMappingURL=add-unrendered-audio-worklet-node-function.js.map", "export {};\r\n//# sourceMappingURL=analyser-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=analyser-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=analyser-node-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=analyser-node-renderer-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=any-audio-buffer.js.map", "export {};\r\n//# sourceMappingURL=any-context.js.map", "export {};\r\n//# sourceMappingURL=audio-buffer-constructor.js.map", "export {};\r\n//# sourceMappingURL=audio-buffer-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=audio-buffer-source-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=audio-buffer-source-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=audio-buffer-source-node-renderer.js.map", "export {};\r\n//# sourceMappingURL=audio-buffer-source-node-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=audio-buffer-source-node-renderer-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=audio-buffer-store.js.map", "export {};\r\n//# sourceMappingURL=audio-context-constructor.js.map", "export {};\r\n//# sourceMappingURL=audio-context-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=audio-context-latency-category.js.map", "export {};\r\n//# sourceMappingURL=audio-context-state.js.map", "export {};\r\n//# sourceMappingURL=audio-destination-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=audio-destination-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=audio-destination-node-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=audio-listener-factory.js.map", "export {};\r\n//# sourceMappingURL=audio-listener-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=audio-node-connections.js.map", "export {};\r\n//# sourceMappingURL=audio-node-connections-store.js.map", "export {};\r\n//# sourceMappingURL=audio-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=audio-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=audio-node-output-connection.js.map", "export {};\r\n//# sourceMappingURL=audio-node-renderer.js.map", "export {};\r\n//# sourceMappingURL=audio-node-store.js.map", "export {};\r\n//# sourceMappingURL=audio-node-tail-time-store.js.map", "export {};\r\n//# sourceMappingURL=audio-param-audio-node-store.js.map", "export {};\r\n//# sourceMappingURL=audio-param-connections.js.map", "export {};\r\n//# sourceMappingURL=audio-param-connections-store.js.map", "export {};\r\n//# sourceMappingURL=audio-param-factory.js.map", "export {};\r\n//# sourceMappingURL=audio-param-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=audio-param-map.js.map", "export {};\r\n//# sourceMappingURL=audio-param-output-connection.js.map", "export {};\r\n//# sourceMappingURL=audio-param-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=audio-param-store.js.map", "export {};\r\n//# sourceMappingURL=audio-worklet-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=audio-worklet-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=audio-worklet-node-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=audio-worklet-node-renderer-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=backup-offline-audio-context-store.js.map", "export {};\r\n//# sourceMappingURL=base-audio-context-constructor.js.map", "export {};\r\n//# sourceMappingURL=base-audio-context-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=biquad-filter-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=biquad-filter-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=biquad-filter-node-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=biquad-filter-node-renderer-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=biquad-filter-type.js.map", "export {};\r\n//# sourceMappingURL=channel-count-mode.js.map", "export {};\r\n//# sourceMappingURL=channel-interpretation.js.map", "export {};\r\n//# sourceMappingURL=channel-merger-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=channel-merger-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=channel-merger-node-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=channel-merger-node-renderer-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=channel-splitter-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=channel-splitter-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=channel-splitter-node-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=channel-splitter-node-renderer-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=cache-test-result-factory.js.map", "export {};\r\n//# sourceMappingURL=cache-test-result-function.js.map", "export {};\r\n//# sourceMappingURL=connect-audio-param-factory.js.map", "export {};\r\n//# sourceMappingURL=connect-audio-param-function.js.map", "export {};\r\n//# sourceMappingURL=connect-multiple-outputs-factory.js.map", "export {};\r\n//# sourceMappingURL=connect-multiple-outputs-function.js.map", "export {};\r\n//# sourceMappingURL=connect-native-audio-node-to-native-audio-node-function.js.map", "export {};\r\n//# sourceMappingURL=connected-native-audio-buffer-source-node-factory.js.map", "export {};\r\n//# sourceMappingURL=connected-native-audio-buffer-source-node-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=constant-source-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=constant-source-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=constant-source-node-renderer.js.map", "export {};\r\n//# sourceMappingURL=constant-source-node-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=constant-source-node-renderer-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=constructor.js.map", "export {};\r\n//# sourceMappingURL=context.js.map", "export {};\r\n//# sourceMappingURL=context-store.js.map", "export {};\r\n//# sourceMappingURL=convert-number-to-unsigned-long-factory.js.map", "export {};\r\n//# sourceMappingURL=convert-number-to-unsigned-long-function.js.map", "export {};\r\n//# sourceMappingURL=convolver-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=convolver-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=convolver-node-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=convolver-node-renderer-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=create-native-offline-audio-context-factory.js.map", "export {};\r\n//# sourceMappingURL=create-native-offline-audio-context-function.js.map", "export {};\r\n//# sourceMappingURL=cycle-counters.js.map", "export {};\r\n//# sourceMappingURL=data-clone-error-factory.js.map", "export {};\r\n//# sourceMappingURL=decode-audio-data-factory.js.map", "export {};\r\n//# sourceMappingURL=decode-audio-data-function.js.map", "export {};\r\n//# sourceMappingURL=decode-error-callback.js.map", "export {};\r\n//# sourceMappingURL=decode-success-callback.js.map", "export {};\r\n//# sourceMappingURL=decrement-cycle-counter-factory.js.map", "export {};\r\n//# sourceMappingURL=decrement-cycle-counter-function.js.map", "export {};\r\n//# sourceMappingURL=delay-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=delay-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=delay-node-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=delay-node-renderer-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=delete-active-input-connection-to-audio-node-factory.js.map", "export {};\r\n//# sourceMappingURL=delete-active-input-connection-to-audio-node-function.js.map", "export {};\r\n//# sourceMappingURL=delete-unrendered-audio-worklet-node-factory.js.map", "export {};\r\n//# sourceMappingURL=delete-unrendered-audio-worklet-node-function.js.map", "export {};\r\n//# sourceMappingURL=detect-cycles-factory.js.map", "export {};\r\n//# sourceMappingURL=detect-cycles-function.js.map", "export {};\r\n//# sourceMappingURL=disconnect-multiple-outputs-factory.js.map", "export {};\r\n//# sourceMappingURL=disconnect-multiple-outputs-function.js.map", "export {};\r\n//# sourceMappingURL=disconnect-native-audio-node-from-native-audio-node-function.js.map", "export {};\r\n//# sourceMappingURL=distance-model-type.js.map", "export {};\r\n//# sourceMappingURL=dynamics-compressor-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=dynamics-compressor-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=dynamics-compressor-node-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=dynamics-compressor-node-renderer-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=encoding-error-factory.js.map", "export {};\r\n//# sourceMappingURL=error-event-handler.js.map", "export {};\r\n//# sourceMappingURL=evaluate-audio-worklet-global-scope-function.js.map", "export {};\r\n//# sourceMappingURL=evaluate-source-factory.js.map", "export {};\r\n//# sourceMappingURL=evaluate-source-function.js.map", "export {};\r\n//# sourceMappingURL=event-handler.js.map", "export {};\r\n//# sourceMappingURL=event-target-constructor.js.map", "export {};\r\n//# sourceMappingURL=event-target-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=expose-current-frame-and-current-time-factory.js.map", "export {};\r\n//# sourceMappingURL=expose-current-frame-and-current-time-function.js.map", "export {};\r\n//# sourceMappingURL=fetch-source-factory.js.map", "export {};\r\n//# sourceMappingURL=fetch-source-function.js.map", "export {};\r\n//# sourceMappingURL=gain-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=gain-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=gain-node-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=gain-node-renderer-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=get-active-audio-worklet-node-inputs-factory.js.map", "export {};\r\n//# sourceMappingURL=get-active-audio-worklet-node-inputs-function.js.map", "export {};\r\n//# sourceMappingURL=get-audio-node-connections-function.js.map", "export {};\r\n//# sourceMappingURL=get-audio-node-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=get-audio-node-renderer-function.js.map", "export {};\r\n//# sourceMappingURL=get-audio-node-tail-time-factory.js.map", "export {};\r\n//# sourceMappingURL=get-audio-node-tail-time-function.js.map", "export {};\r\n//# sourceMappingURL=get-audio-param-connections-function.js.map", "export {};\r\n//# sourceMappingURL=get-audio-param-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=get-audio-param-renderer-function.js.map", "export {};\r\n//# sourceMappingURL=get-backup-offline-audio-context-factory.js.map", "export {};\r\n//# sourceMappingURL=get-backup-offline-audio-context-function.js.map", "export {};\r\n//# sourceMappingURL=get-event-listeners-of-audio-node-function.js.map", "export {};\r\n//# sourceMappingURL=get-first-sample-function.js.map", "export {};\r\n//# sourceMappingURL=get-native-audio-node-function.js.map", "export {};\r\n//# sourceMappingURL=get-native-audio-param-function.js.map", "export {};\r\n//# sourceMappingURL=get-native-context-factory.js.map", "export {};\r\n//# sourceMappingURL=get-native-context-function.js.map", "export {};\r\n//# sourceMappingURL=get-or-create-backup-offline-audio-context-factory.js.map", "export {};\r\n//# sourceMappingURL=get-or-create-backup-offline-audio-context-function.js.map", "export {};\r\n//# sourceMappingURL=get-unrendered-audio-worklet-nodes-factory.js.map", "export {};\r\n//# sourceMappingURL=get-unrendered-audio-worklet-nodes-function.js.map", "export {};\r\n//# sourceMappingURL=get-value-for-key-function.js.map", "export {};\r\n//# sourceMappingURL=iir-filter-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=iir-filter-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=iir-filter-node-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=iir-filter-node-renderer-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=increment-cycle-counter-factory.js.map", "export {};\r\n//# sourceMappingURL=increment-cycle-counter-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=increment-cycle-counter-function.js.map", "export {};\r\n//# sourceMappingURL=index-size-error-factory.js.map", "export {};\r\n//# sourceMappingURL=insert-element-in-set-function.js.map", "export {};\r\n//# sourceMappingURL=internal-state-event-listener.js.map", "export {};\r\n//# sourceMappingURL=invalid-access-error-factory.js.map", "export {};\r\n//# sourceMappingURL=invalid-state-error-factory.js.map", "export {};\r\n//# sourceMappingURL=is-active-audio-node-function.js.map", "export {};\r\n//# sourceMappingURL=is-any-audio-context-factory.js.map", "export {};\r\n//# sourceMappingURL=is-any-audio-context-function.js.map", "export {};\r\n//# sourceMappingURL=is-any-audio-node-factory.js.map", "export {};\r\n//# sourceMappingURL=is-any-audio-node-function.js.map", "export {};\r\n//# sourceMappingURL=is-any-audio-param-factory.js.map", "export {};\r\n//# sourceMappingURL=is-any-audio-param-function.js.map", "export {};\r\n//# sourceMappingURL=is-any-offline-audio-context-factory.js.map", "export {};\r\n//# sourceMappingURL=is-any-offline-audio-context-function.js.map", "export {};\r\n//# sourceMappingURL=is-dc-curve-function.js.map", "export {};\r\n//# sourceMappingURL=is-native-audio-context-factory.js.map", "export {};\r\n//# sourceMappingURL=is-native-audio-context-function.js.map", "export {};\r\n//# sourceMappingURL=is-native-audio-node-factory.js.map", "export {};\r\n//# sourceMappingURL=is-native-audio-node-function.js.map", "export {};\r\n//# sourceMappingURL=is-native-audio-param-factory.js.map", "export {};\r\n//# sourceMappingURL=is-native-audio-param-function.js.map", "export {};\r\n//# sourceMappingURL=is-native-context-factory.js.map", "export {};\r\n//# sourceMappingURL=is-native-context-function.js.map", "export {};\r\n//# sourceMappingURL=is-native-offline-audio-context-factory.js.map", "export {};\r\n//# sourceMappingURL=is-native-offline-audio-context-function.js.map", "export {};\r\n//# sourceMappingURL=is-part-of-a-cycle-function.js.map", "export {};\r\n//# sourceMappingURL=is-passive-audio-node-function.js.map", "export {};\r\n//# sourceMappingURL=is-secure-context-factory.js.map", "export {};\r\n//# sourceMappingURL=is-supported-promise-factory.js.map", "export {};\r\n//# sourceMappingURL=media-element-audio-source-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=media-element-audio-source-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=media-stream-audio-destination-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=media-stream-audio-destination-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=media-stream-audio-source-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=media-stream-audio-source-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=media-stream-track-audio-source-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=media-stream-track-audio-source-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=minimal-audio-context-constructor.js.map", "export {};\r\n//# sourceMappingURL=minimal-audio-context-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=minimal-base-audio-context-constructor.js.map", "export {};\r\n//# sourceMappingURL=minimal-base-audio-context-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=minimal-offline-audio-context-constructor.js.map", "export {};\r\n//# sourceMappingURL=minimal-offline-audio-context-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=monitor-connections-factory.js.map", "export {};\r\n//# sourceMappingURL=monitor-connections-function.js.map", "export {};\r\n//# sourceMappingURL=native-analyser-node.js.map", "export {};\r\n//# sourceMappingURL=native-analyser-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-analyser-node-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-audio-buffer.js.map", "export {};\r\n//# sourceMappingURL=native-audio-buffer-constructor.js.map", "export {};\r\n//# sourceMappingURL=native-audio-buffer-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=native-audio-buffer-source-node.js.map", "export {};\r\n//# sourceMappingURL=native-audio-buffer-source-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-audio-buffer-source-node-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-audio-context.js.map", "export {};\r\n//# sourceMappingURL=native-audio-context-constructor.js.map", "export {};\r\n//# sourceMappingURL=native-audio-context-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=native-audio-destination-node.js.map", "export {};\r\n//# sourceMappingURL=native-audio-destination-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-audio-destination-node-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-audio-listener.js.map", "export {};\r\n//# sourceMappingURL=native-audio-node.js.map", "export {};\r\n//# sourceMappingURL=native-audio-param.js.map", "export {};\r\n//# sourceMappingURL=native-audio-param-map.js.map", "export {};\r\n//# sourceMappingURL=native-audio-worklet.js.map", "export {};\r\n//# sourceMappingURL=native-audio-worklet-node.js.map", "export {};\r\n//# sourceMappingURL=native-audio-worklet-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=native-audio-worklet-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=native-audio-worklet-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-audio-worklet-node-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-audio-worklet-node-faker-factory.js.map", "export {};\r\n//# sourceMappingURL=native-audio-worklet-node-faker-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-audio-worklet-node-options.js.map", "export {};\r\n//# sourceMappingURL=native-biquad-filter-node.js.map", "export {};\r\n//# sourceMappingURL=native-biquad-filter-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-channel-merger-node.js.map", "export {};\r\n//# sourceMappingURL=native-channel-merger-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-channel-merger-node-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-channel-splitter-node.js.map", "export {};\r\n//# sourceMappingURL=native-channel-splitter-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-constant-source-node.js.map", "export {};\r\n//# sourceMappingURL=native-constant-source-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-constant-source-node-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-constant-source-node-faker-factory.js.map", "export {};\r\n//# sourceMappingURL=native-constant-source-node-faker-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-context.js.map", "export {};\r\n//# sourceMappingURL=native-convolver-node.js.map", "export {};\r\n//# sourceMappingURL=native-convolver-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-convolver-node-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-delay-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-delay-node.js.map", "export {};\r\n//# sourceMappingURL=native-dynamics-compressor-node.js.map", "export {};\r\n//# sourceMappingURL=native-dynamics-compressor-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-dynamics-compressor-node-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-event-target.js.map", "export {};\r\n//# sourceMappingURL=native-gain-node.js.map", "export {};\r\n//# sourceMappingURL=native-gain-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-iir-filter-node.js.map", "export {};\r\n//# sourceMappingURL=native-iir-filter-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-iir-filter-node-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-iir-filter-node-faker-factory.js.map", "export {};\r\n//# sourceMappingURL=native-iir-filter-node-faker-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-media-element-audio-source-node.js.map", "export {};\r\n//# sourceMappingURL=native-media-element-audio-source-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-media-stream-audio-destination-node.js.map", "export {};\r\n//# sourceMappingURL=native-media-stream-audio-destination-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-media-stream-audio-source-node.js.map", "export {};\r\n//# sourceMappingURL=native-media-stream-audio-source-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-media-stream-track-audio-source-node.js.map", "export {};\r\n//# sourceMappingURL=native-media-stream-track-audio-source-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-media-stream-track-audio-source-node-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-offline-audio-context.js.map", "export {};\r\n//# sourceMappingURL=native-offline-audio-context-constructor.js.map", "export {};\r\n//# sourceMappingURL=native-offline-audio-context-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=native-oscillator-node.js.map", "export {};\r\n//# sourceMappingURL=native-oscillator-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-oscillator-node-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-panner-node.js.map", "export {};\r\n//# sourceMappingURL=native-panner-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-panner-node-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-panner-node-faker-factory.js.map", "export {};\r\n//# sourceMappingURL=native-panner-node-faker-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-periodic-wave.js.map", "export {};\r\n//# sourceMappingURL=native-periodic-wave-factory.js.map", "export {};\r\n//# sourceMappingURL=native-periodic-wave-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-script-processor-node.js.map", "export {};\r\n//# sourceMappingURL=native-script-processor-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-stereo-panner-node.js.map", "export {};\r\n//# sourceMappingURL=native-stereo-panner-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-stereo-panner-node-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-stereo-panner-node-faker-factory.js.map", "export {};\r\n//# sourceMappingURL=native-stereo-panner-node-faker-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-wave-shaper-node.js.map", "export {};\r\n//# sourceMappingURL=native-wave-shaper-node-factory.js.map", "export {};\r\n//# sourceMappingURL=native-wave-shaper-node-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=native-wave-shaper-node-faker-factory.js.map", "export {};\r\n//# sourceMappingURL=native-wave-shaper-node-faker-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=not-supported-error-factory.js.map", "export {};\r\n//# sourceMappingURL=offline-audio-context-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=oscillator-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=oscillator-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=oscillator-node-renderer.js.map", "export {};\r\n//# sourceMappingURL=oscillator-node-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=oscillator-node-renderer-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=oscillator-type.js.map", "export {};\r\n//# sourceMappingURL=output-connection.js.map", "export {};\r\n//# sourceMappingURL=over-sample-type.js.map", "export {};\r\n//# sourceMappingURL=overwrite-accessors-function.js.map", "export {};\r\n//# sourceMappingURL=panner-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=panner-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=panner-node-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=panner-node-renderer-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=panning-model-type.js.map", "export {};\r\n//# sourceMappingURL=passive-audio-node-input-connection.js.map", "export {};\r\n//# sourceMappingURL=passive-audio-param-input-connection.js.map", "export {};\r\n//# sourceMappingURL=periodic-wave-constructor.js.map", "export {};\r\n//# sourceMappingURL=periodic-wave-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=pick-element-from-set-function.js.map", "export {};\r\n//# sourceMappingURL=render-automation-factory.js.map", "export {};\r\n//# sourceMappingURL=render-automation-function.js.map", "export {};\r\n//# sourceMappingURL=render-inputs-of-audio-node-factory.js.map", "export {};\r\n//# sourceMappingURL=render-inputs-of-audio-node-function.js.map", "export {};\r\n//# sourceMappingURL=render-inputs-of-audio-param-factory.js.map", "export {};\r\n//# sourceMappingURL=render-inputs-of-audio-param-function.js.map", "export {};\r\n//# sourceMappingURL=render-native-offline-audio-context-factory.js.map", "export {};\r\n//# sourceMappingURL=render-native-offline-audio-context-function.js.map", "export {};\r\n//# sourceMappingURL=sanitize-audio-worklet-node-options-function.js.map", "export {};\r\n//# sourceMappingURL=sanitize-channel-splitter-options-function.js.map", "export {};\r\n//# sourceMappingURL=sanitize-periodic-wave-options-function.js.map", "export {};\r\n//# sourceMappingURL=set-active-audio-worklet-node-inputs-factory.js.map", "export {};\r\n//# sourceMappingURL=set-active-audio-worklet-node-inputs-function.js.map", "export {};\r\n//# sourceMappingURL=set-audio-node-tail-time-factory.js.map", "export {};\r\n//# sourceMappingURL=set-audio-node-tail-time-function.js.map", "export {};\r\n//# sourceMappingURL=set-value-at-time-until-possible-function.js.map", "export {};\r\n//# sourceMappingURL=start-rendering-factory.js.map", "export {};\r\n//# sourceMappingURL=start-rendering-function.js.map", "export {};\r\n//# sourceMappingURL=stereo-panner-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=stereo-panner-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=stereo-panner-node-renderer-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=stereo-panner-node-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=test-audio-buffer-copy-channel-methods-subarray-support-factory.js.map", "export {};\r\n//# sourceMappingURL=test-audio-buffer-constructor-support-factory.js.map", "export {};\r\n//# sourceMappingURL=test-audio-context-close-method-support-factory.js.map", "export {};\r\n//# sourceMappingURL=test-audio-context-decode-audio-data-method-type-error-support-factory.js.map", "export {};\r\n//# sourceMappingURL=test-audio-context-options-support-factory.js.map", "export {};\r\n//# sourceMappingURL=test-audio-node-connect-method-support-factory.js.map", "export {};\r\n//# sourceMappingURL=test-audio-worklet-node-options-clonability-function.js.map", "export {};\r\n//# sourceMappingURL=test-audio-worklet-processor-no-outputs-support-factory.js.map", "export {};\r\n//# sourceMappingURL=test-audio-worklet-processor-post-message-support-factory.js.map", "export {};\r\n//# sourceMappingURL=test-channel-merger-node-channel-count-support-factory.js.map", "export {};\r\n//# sourceMappingURL=test-constant-source-node-accurate-scheduling-support-factory.js.map", "export {};\r\n//# sourceMappingURL=test-convolver-node-buffer-reassignability-support-factory.js.map", "export {};\r\n//# sourceMappingURL=test-convolver-node-channel-count-support-factory.js.map", "export {};\r\n//# sourceMappingURL=test-is-secure-context-support-factory.js.map", "export {};\r\n//# sourceMappingURL=test-media-stream-audio-source-node-media-stream-without-audio-track-support.js.map", "export {};\r\n//# sourceMappingURL=test-offline-audio-context-current-time-support-factory.js.map", "export {};\r\n//# sourceMappingURL=test-stereo-panner-node-default-value-support-factory.js.map", "export {};\r\n//# sourceMappingURL=unknown-error-factory.js.map", "export {};\r\n//# sourceMappingURL=unrendered-audio-worklet-node-store.js.map", "export {};\r\n//# sourceMappingURL=unrendered-audio-worklet-nodes.js.map", "export {};\r\n//# sourceMappingURL=wave-shaper-node-constructor.js.map", "export {};\r\n//# sourceMappingURL=wave-shaper-node-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=wave-shaper-node-renderer-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=wave-shaper-node-renderer-factory.js.map", "export {};\r\n//# sourceMappingURL=window.js.map", "export {};\r\n//# sourceMappingURL=window-factory.js.map", "export {};\r\n//# sourceMappingURL=wrap-audio-buffer-copy-channel-methods-factory.js.map", "export {};\r\n//# sourceMappingURL=wrap-audio-buffer-copy-channel-methods-function.js.map", "export {};\r\n//# sourceMappingURL=wrap-audio-buffer-copy-channel-methods-out-of-bounds-factory.js.map", "export {};\r\n//# sourceMappingURL=wrap-audio-buffer-copy-channel-methods-out-of-bounds-function.js.map", "export {};\r\n//# sourceMappingURL=wrap-audio-buffer-source-node-start-method-offset-clamping-function.js.map", "export {};\r\n//# sourceMappingURL=wrap-audio-buffer-source-node-stop-method-nullified-buffer-factory.js.map", "export {};\r\n//# sourceMappingURL=wrap-audio-buffer-source-node-stop-method-nullified-buffer-function.js.map", "export {};\r\n//# sourceMappingURL=wrap-audio-scheduled-source-node-stop-method-consecutive-calls-function.js.map", "export {};\r\n//# sourceMappingURL=wrap-channel-merger-node-factory.js.map", "export {};\r\n//# sourceMappingURL=wrap-channel-merger-node-function.js.map", "export {};\r\n//# sourceMappingURL=wrap-event-listener-function.js.map", "export * from './abort-error-factory';\r\nexport * from './active-audio-worklet-node-inputs-store';\r\nexport * from './active-input-connection';\r\nexport * from './add-active-input-connection-to-audio-node-factory';\r\nexport * from './add-active-input-connection-to-audio-node-function';\r\nexport * from './add-audio-node-connections-factory';\r\nexport * from './add-audio-node-connections-function';\r\nexport * from './add-audio-param-connections-factory';\r\nexport * from './add-audio-param-connections-function';\r\nexport * from './add-audio-worklet-module-factory';\r\nexport * from './add-audio-worklet-module-function';\r\nexport * from './add-connection-to-audio-node-factory';\r\nexport * from './add-connection-to-audio-node-function';\r\nexport * from './add-passive-input-connection-to-audio-node-factory';\r\nexport * from './add-passive-input-connection-to-audio-node-function';\r\nexport * from './add-silent-connection-factory';\r\nexport * from './add-silent-connection-function';\r\nexport * from './add-unrendered-audio-worklet-node-factory';\r\nexport * from './add-unrendered-audio-worklet-node-function';\r\nexport * from './analyser-node-constructor';\r\nexport * from './analyser-node-constructor-factory';\r\nexport * from './analyser-node-renderer-factory';\r\nexport * from './analyser-node-renderer-factory-factory';\r\nexport * from './any-audio-buffer';\r\nexport * from './any-context';\r\nexport * from './audio-buffer-constructor';\r\nexport * from './audio-buffer-constructor-factory';\r\nexport * from './audio-buffer-source-node-constructor';\r\nexport * from './audio-buffer-source-node-constructor-factory';\r\nexport * from './audio-buffer-source-node-renderer';\r\nexport * from './audio-buffer-source-node-renderer-factory';\r\nexport * from './audio-buffer-source-node-renderer-factory-factory';\r\nexport * from './audio-buffer-store';\r\nexport * from './audio-context-constructor';\r\nexport * from './audio-context-constructor-factory';\r\nexport * from './audio-context-latency-category';\r\nexport * from './audio-context-state';\r\nexport * from './audio-destination-node-constructor';\r\nexport * from './audio-destination-node-constructor-factory';\r\nexport * from './audio-destination-node-renderer-factory';\r\nexport * from './audio-listener-factory';\r\nexport * from './audio-listener-factory-factory';\r\nexport * from './audio-node-connections';\r\nexport * from './audio-node-connections-store';\r\nexport * from './audio-node-constructor';\r\nexport * from './audio-node-constructor-factory';\r\nexport * from './audio-node-output-connection';\r\nexport * from './audio-node-renderer';\r\nexport * from './audio-node-store';\r\nexport * from './audio-node-tail-time-store';\r\nexport * from './audio-param-audio-node-store';\r\nexport * from './audio-param-connections';\r\nexport * from './audio-param-connections-store';\r\nexport * from './audio-param-factory';\r\nexport * from './audio-param-factory-factory';\r\nexport * from './audio-param-map';\r\nexport * from './audio-param-output-connection';\r\nexport * from './audio-param-renderer-factory';\r\nexport * from './audio-param-store';\r\nexport * from './audio-worklet-node-constructor';\r\nexport * from './audio-worklet-node-constructor-factory';\r\nexport * from './audio-worklet-node-renderer-factory';\r\nexport * from './audio-worklet-node-renderer-factory-factory';\r\nexport * from './backup-offline-audio-context-store';\r\nexport * from './base-audio-context-constructor';\r\nexport * from './base-audio-context-constructor-factory';\r\nexport * from './biquad-filter-node-constructor';\r\nexport * from './biquad-filter-node-constructor-factory';\r\nexport * from './biquad-filter-node-renderer-factory';\r\nexport * from './biquad-filter-node-renderer-factory-factory';\r\nexport * from './biquad-filter-type';\r\nexport * from './channel-count-mode';\r\nexport * from './channel-interpretation';\r\nexport * from './channel-merger-node-constructor';\r\nexport * from './channel-merger-node-constructor-factory';\r\nexport * from './channel-merger-node-renderer-factory';\r\nexport * from './channel-merger-node-renderer-factory-factory';\r\nexport * from './channel-splitter-node-constructor';\r\nexport * from './channel-splitter-node-constructor-factory';\r\nexport * from './channel-splitter-node-renderer-factory';\r\nexport * from './channel-splitter-node-renderer-factory-factory';\r\nexport * from './cache-test-result-factory';\r\nexport * from './cache-test-result-function';\r\nexport * from './connect-audio-param-factory';\r\nexport * from './connect-audio-param-function';\r\nexport * from './connect-multiple-outputs-factory';\r\nexport * from './connect-multiple-outputs-function';\r\nexport * from './connect-native-audio-node-to-native-audio-node-function';\r\nexport * from './connected-native-audio-buffer-source-node-factory';\r\nexport * from './connected-native-audio-buffer-source-node-factory-factory';\r\nexport * from './constant-source-node-constructor';\r\nexport * from './constant-source-node-constructor-factory';\r\nexport * from './constant-source-node-renderer';\r\nexport * from './constant-source-node-renderer-factory';\r\nexport * from './constant-source-node-renderer-factory-factory';\r\nexport * from './constructor';\r\nexport * from './context';\r\nexport * from './context-store';\r\nexport * from './convert-number-to-unsigned-long-factory';\r\nexport * from './convert-number-to-unsigned-long-function';\r\nexport * from './convolver-node-constructor';\r\nexport * from './convolver-node-constructor-factory';\r\nexport * from './convolver-node-renderer-factory';\r\nexport * from './convolver-node-renderer-factory-factory';\r\nexport * from './create-native-offline-audio-context-factory';\r\nexport * from './create-native-offline-audio-context-function';\r\nexport * from './cycle-counters';\r\nexport * from './data-clone-error-factory';\r\nexport * from './decode-audio-data-factory';\r\nexport * from './decode-audio-data-function';\r\nexport * from './decode-error-callback';\r\nexport * from './decode-success-callback';\r\nexport * from './decrement-cycle-counter-factory';\r\nexport * from './decrement-cycle-counter-function';\r\nexport * from './delay-node-constructor';\r\nexport * from './delay-node-constructor-factory';\r\nexport * from './delay-node-renderer-factory';\r\nexport * from './delay-node-renderer-factory-factory';\r\nexport * from './delete-active-input-connection-to-audio-node-factory';\r\nexport * from './delete-active-input-connection-to-audio-node-function';\r\nexport * from './delete-unrendered-audio-worklet-node-factory';\r\nexport * from './delete-unrendered-audio-worklet-node-function';\r\nexport * from './detect-cycles-factory';\r\nexport * from './detect-cycles-function';\r\nexport * from './disconnect-multiple-outputs-factory';\r\nexport * from './disconnect-multiple-outputs-function';\r\nexport * from './disconnect-native-audio-node-from-native-audio-node-function';\r\nexport * from './distance-model-type';\r\nexport * from './dynamics-compressor-node-constructor';\r\nexport * from './dynamics-compressor-node-constructor-factory';\r\nexport * from './dynamics-compressor-node-renderer-factory';\r\nexport * from './dynamics-compressor-node-renderer-factory-factory';\r\nexport * from './encoding-error-factory';\r\nexport * from './error-event-handler';\r\nexport * from './evaluate-audio-worklet-global-scope-function';\r\nexport * from './evaluate-source-factory';\r\nexport * from './evaluate-source-function';\r\nexport * from './event-handler';\r\nexport * from './event-target-constructor';\r\nexport * from './event-target-constructor-factory';\r\nexport * from './expose-current-frame-and-current-time-factory';\r\nexport * from './expose-current-frame-and-current-time-function';\r\nexport * from './fetch-source-factory';\r\nexport * from './fetch-source-function';\r\nexport * from './gain-node-constructor';\r\nexport * from './gain-node-constructor-factory';\r\nexport * from './gain-node-renderer-factory';\r\nexport * from './gain-node-renderer-factory-factory';\r\nexport * from './get-active-audio-worklet-node-inputs-factory';\r\nexport * from './get-active-audio-worklet-node-inputs-function';\r\nexport * from './get-audio-node-connections-function';\r\nexport * from './get-audio-node-renderer-factory';\r\nexport * from './get-audio-node-renderer-function';\r\nexport * from './get-audio-node-tail-time-factory';\r\nexport * from './get-audio-node-tail-time-function';\r\nexport * from './get-audio-param-connections-function';\r\nexport * from './get-audio-param-renderer-factory';\r\nexport * from './get-audio-param-renderer-function';\r\nexport * from './get-backup-offline-audio-context-factory';\r\nexport * from './get-backup-offline-audio-context-function';\r\nexport * from './get-event-listeners-of-audio-node-function';\r\nexport * from './get-first-sample-function';\r\nexport * from './get-native-audio-node-function';\r\nexport * from './get-native-audio-param-function';\r\nexport * from './get-native-context-factory';\r\nexport * from './get-native-context-function';\r\nexport * from './get-or-create-backup-offline-audio-context-factory';\r\nexport * from './get-or-create-backup-offline-audio-context-function';\r\nexport * from './get-unrendered-audio-worklet-nodes-factory';\r\nexport * from './get-unrendered-audio-worklet-nodes-function';\r\nexport * from './get-value-for-key-function';\r\nexport * from './iir-filter-node-constructor';\r\nexport * from './iir-filter-node-constructor-factory';\r\nexport * from './iir-filter-node-renderer-factory';\r\nexport * from './iir-filter-node-renderer-factory-factory';\r\nexport * from './increment-cycle-counter-factory';\r\nexport * from './increment-cycle-counter-factory-factory';\r\nexport * from './increment-cycle-counter-function';\r\nexport * from './index-size-error-factory';\r\nexport * from './insert-element-in-set-function';\r\nexport * from './internal-state-event-listener';\r\nexport * from './invalid-access-error-factory';\r\nexport * from './invalid-state-error-factory';\r\nexport * from './is-active-audio-node-function';\r\nexport * from './is-any-audio-context-factory';\r\nexport * from './is-any-audio-context-function';\r\nexport * from './is-any-audio-node-factory';\r\nexport * from './is-any-audio-node-function';\r\nexport * from './is-any-audio-param-factory';\r\nexport * from './is-any-audio-param-function';\r\nexport * from './is-any-offline-audio-context-factory';\r\nexport * from './is-any-offline-audio-context-function';\r\nexport * from './is-dc-curve-function';\r\nexport * from './is-native-audio-context-factory';\r\nexport * from './is-native-audio-context-function';\r\nexport * from './is-native-audio-node-factory';\r\nexport * from './is-native-audio-node-function';\r\nexport * from './is-native-audio-param-factory';\r\nexport * from './is-native-audio-param-function';\r\nexport * from './is-native-context-factory';\r\nexport * from './is-native-context-function';\r\nexport * from './is-native-offline-audio-context-factory';\r\nexport * from './is-native-offline-audio-context-function';\r\nexport * from './is-part-of-a-cycle-function';\r\nexport * from './is-passive-audio-node-function';\r\nexport * from './is-secure-context-factory';\r\nexport * from './is-supported-promise-factory';\r\nexport * from './media-element-audio-source-node-constructor';\r\nexport * from './media-element-audio-source-node-constructor-factory';\r\nexport * from './media-stream-audio-destination-node-constructor';\r\nexport * from './media-stream-audio-destination-node-constructor-factory';\r\nexport * from './media-stream-audio-source-node-constructor';\r\nexport * from './media-stream-audio-source-node-constructor-factory';\r\nexport * from './media-stream-track-audio-source-node-constructor';\r\nexport * from './media-stream-track-audio-source-node-constructor-factory';\r\nexport * from './minimal-audio-context-constructor';\r\nexport * from './minimal-audio-context-constructor-factory';\r\nexport * from './minimal-base-audio-context-constructor';\r\nexport * from './minimal-base-audio-context-constructor-factory';\r\nexport * from './minimal-offline-audio-context-constructor';\r\nexport * from './minimal-offline-audio-context-constructor-factory';\r\nexport * from './monitor-connections-factory';\r\nexport * from './monitor-connections-function';\r\nexport * from './native-analyser-node';\r\nexport * from './native-analyser-node-factory';\r\nexport * from './native-analyser-node-factory-factory';\r\nexport * from './native-audio-buffer';\r\nexport * from './native-audio-buffer-constructor';\r\nexport * from './native-audio-buffer-constructor-factory';\r\nexport * from './native-audio-buffer-source-node';\r\nexport * from './native-audio-buffer-source-node-factory';\r\nexport * from './native-audio-buffer-source-node-factory-factory';\r\nexport * from './native-audio-context';\r\nexport * from './native-audio-context-constructor';\r\nexport * from './native-audio-context-constructor-factory';\r\nexport * from './native-audio-destination-node';\r\nexport * from './native-audio-destination-node-factory';\r\nexport * from './native-audio-destination-node-factory-factory';\r\nexport * from './native-audio-listener';\r\nexport * from './native-audio-node';\r\nexport * from './native-audio-param';\r\nexport * from './native-audio-param-map';\r\nexport * from './native-audio-worklet';\r\nexport * from './native-audio-worklet-node';\r\nexport * from './native-audio-worklet-node-constructor';\r\nexport * from './native-audio-worklet-node-constructor-factory';\r\nexport * from './native-audio-worklet-node-factory';\r\nexport * from './native-audio-worklet-node-factory-factory';\r\nexport * from './native-audio-worklet-node-faker-factory';\r\nexport * from './native-audio-worklet-node-faker-factory-factory';\r\nexport * from './native-audio-worklet-node-options';\r\nexport * from './native-biquad-filter-node';\r\nexport * from './native-biquad-filter-node-factory';\r\nexport * from './native-channel-merger-node';\r\nexport * from './native-channel-merger-node-factory';\r\nexport * from './native-channel-merger-node-factory-factory';\r\nexport * from './native-channel-splitter-node';\r\nexport * from './native-channel-splitter-node-factory';\r\nexport * from './native-constant-source-node';\r\nexport * from './native-constant-source-node-factory';\r\nexport * from './native-constant-source-node-factory-factory';\r\nexport * from './native-constant-source-node-faker-factory';\r\nexport * from './native-constant-source-node-faker-factory-factory';\r\nexport * from './native-context';\r\nexport * from './native-convolver-node';\r\nexport * from './native-convolver-node-factory';\r\nexport * from './native-convolver-node-factory-factory';\r\nexport * from './native-delay-node-factory';\r\nexport * from './native-delay-node';\r\nexport * from './native-dynamics-compressor-node';\r\nexport * from './native-dynamics-compressor-node-factory';\r\nexport * from './native-dynamics-compressor-node-factory-factory';\r\nexport * from './native-event-target';\r\nexport * from './native-gain-node';\r\nexport * from './native-gain-node-factory';\r\nexport * from './native-iir-filter-node';\r\nexport * from './native-iir-filter-node-factory';\r\nexport * from './native-iir-filter-node-factory-factory';\r\nexport * from './native-iir-filter-node-faker-factory';\r\nexport * from './native-iir-filter-node-faker-factory-factory';\r\nexport * from './native-media-element-audio-source-node';\r\nexport * from './native-media-element-audio-source-node-factory';\r\nexport * from './native-media-stream-audio-destination-node';\r\nexport * from './native-media-stream-audio-destination-node-factory';\r\nexport * from './native-media-stream-audio-source-node';\r\nexport * from './native-media-stream-audio-source-node-factory';\r\nexport * from './native-media-stream-track-audio-source-node';\r\nexport * from './native-media-stream-track-audio-source-node-factory';\r\nexport * from './native-media-stream-track-audio-source-node-factory-factory';\r\nexport * from './native-offline-audio-context';\r\nexport * from './native-offline-audio-context-constructor';\r\nexport * from './native-offline-audio-context-constructor-factory';\r\nexport * from './native-oscillator-node';\r\nexport * from './native-oscillator-node-factory';\r\nexport * from './native-oscillator-node-factory-factory';\r\nexport * from './native-panner-node';\r\nexport * from './native-panner-node-factory';\r\nexport * from './native-panner-node-factory-factory';\r\nexport * from './native-panner-node-faker-factory';\r\nexport * from './native-panner-node-faker-factory-factory';\r\nexport * from './native-periodic-wave';\r\nexport * from './native-periodic-wave-factory';\r\nexport * from './native-periodic-wave-factory-factory';\r\nexport * from './native-script-processor-node';\r\nexport * from './native-script-processor-node-factory';\r\nexport * from './native-stereo-panner-node';\r\nexport * from './native-stereo-panner-node-factory';\r\nexport * from './native-stereo-panner-node-factory-factory';\r\nexport * from './native-stereo-panner-node-faker-factory';\r\nexport * from './native-stereo-panner-node-faker-factory-factory';\r\nexport * from './native-wave-shaper-node';\r\nexport * from './native-wave-shaper-node-factory';\r\nexport * from './native-wave-shaper-node-factory-factory';\r\nexport * from './native-wave-shaper-node-faker-factory';\r\nexport * from './native-wave-shaper-node-faker-factory-factory';\r\nexport * from './not-supported-error-factory';\r\nexport * from './offline-audio-context-constructor-factory';\r\nexport * from './oscillator-node-constructor';\r\nexport * from './oscillator-node-constructor-factory';\r\nexport * from './oscillator-node-renderer';\r\nexport * from './oscillator-node-renderer-factory';\r\nexport * from './oscillator-node-renderer-factory-factory';\r\nexport * from './oscillator-type';\r\nexport * from './output-connection';\r\nexport * from './over-sample-type';\r\nexport * from './overwrite-accessors-function';\r\nexport * from './panner-node-constructor';\r\nexport * from './panner-node-constructor-factory';\r\nexport * from './panner-node-renderer-factory';\r\nexport * from './panner-node-renderer-factory-factory';\r\nexport * from './panning-model-type';\r\nexport * from './passive-audio-node-input-connection';\r\nexport * from './passive-audio-param-input-connection';\r\nexport * from './periodic-wave-constructor';\r\nexport * from './periodic-wave-constructor-factory';\r\nexport * from './pick-element-from-set-function';\r\nexport * from './render-automation-factory';\r\nexport * from './render-automation-function';\r\nexport * from './render-inputs-of-audio-node-factory';\r\nexport * from './render-inputs-of-audio-node-function';\r\nexport * from './render-inputs-of-audio-param-factory';\r\nexport * from './render-inputs-of-audio-param-function';\r\nexport * from './render-native-offline-audio-context-factory';\r\nexport * from './render-native-offline-audio-context-function';\r\nexport * from './sanitize-audio-worklet-node-options-function';\r\nexport * from './sanitize-channel-splitter-options-function';\r\nexport * from './sanitize-periodic-wave-options-function';\r\nexport * from './set-active-audio-worklet-node-inputs-factory';\r\nexport * from './set-active-audio-worklet-node-inputs-function';\r\nexport * from './set-audio-node-tail-time-factory';\r\nexport * from './set-audio-node-tail-time-function';\r\nexport * from './set-value-at-time-until-possible-function';\r\nexport * from './start-rendering-factory';\r\nexport * from './start-rendering-function';\r\nexport * from './stereo-panner-node-constructor';\r\nexport * from './stereo-panner-node-constructor-factory';\r\nexport * from './stereo-panner-node-renderer-factory-factory';\r\nexport * from './stereo-panner-node-renderer-factory';\r\nexport * from './test-audio-buffer-copy-channel-methods-subarray-support-factory';\r\nexport * from './test-audio-buffer-constructor-support-factory';\r\nexport * from './test-audio-context-close-method-support-factory';\r\nexport * from './test-audio-context-decode-audio-data-method-type-error-support-factory';\r\nexport * from './test-audio-context-options-support-factory';\r\nexport * from './test-audio-node-connect-method-support-factory';\r\nexport * from './test-audio-worklet-node-options-clonability-function';\r\nexport * from './test-audio-worklet-processor-no-outputs-support-factory';\r\nexport * from './test-audio-worklet-processor-post-message-support-factory';\r\nexport * from './test-channel-merger-node-channel-count-support-factory';\r\nexport * from './test-constant-source-node-accurate-scheduling-support-factory';\r\nexport * from './test-convolver-node-buffer-reassignability-support-factory';\r\nexport * from './test-convolver-node-channel-count-support-factory';\r\nexport * from './test-is-secure-context-support-factory';\r\nexport * from './test-media-stream-audio-source-node-media-stream-without-audio-track-support';\r\nexport * from './test-offline-audio-context-current-time-support-factory';\r\nexport * from './test-stereo-panner-node-default-value-support-factory';\r\nexport * from './unknown-error-factory';\r\nexport * from './unrendered-audio-worklet-node-store';\r\nexport * from './unrendered-audio-worklet-nodes';\r\nexport * from './wave-shaper-node-constructor';\r\nexport * from './wave-shaper-node-constructor-factory';\r\nexport * from './wave-shaper-node-renderer-factory-factory';\r\nexport * from './wave-shaper-node-renderer-factory';\r\nexport * from './window';\r\nexport * from './window-factory';\r\nexport * from './wrap-audio-buffer-copy-channel-methods-factory';\r\nexport * from './wrap-audio-buffer-copy-channel-methods-function';\r\nexport * from './wrap-audio-buffer-copy-channel-methods-out-of-bounds-factory';\r\nexport * from './wrap-audio-buffer-copy-channel-methods-out-of-bounds-function';\r\nexport * from './wrap-audio-buffer-source-node-start-method-offset-clamping-function';\r\nexport * from './wrap-audio-buffer-source-node-stop-method-nullified-buffer-factory';\r\nexport * from './wrap-audio-buffer-source-node-stop-method-nullified-buffer-function';\r\nexport * from './wrap-audio-scheduled-source-node-stop-method-consecutive-calls-function';\r\nexport * from './wrap-channel-merger-node-factory';\r\nexport * from './wrap-channel-merger-node-function';\r\nexport * from './wrap-event-listener-function';\r\n", "import {\r\n    createCancelAndHoldAutomationEvent,\r\n    createCancelScheduledValuesAutomationEvent,\r\n    createExponentialRampToValueAutomationEvent,\r\n    createLinearRampToValueAutomationEvent,\r\n    createSetTargetAutomationEvent,\r\n    createSetValueAutomationEvent,\r\n    createSetValueCurveAutomationEvent\r\n} from 'automation-events';\r\nimport { createAbortError } from './factories/abort-error';\r\nimport { createAddActiveInputConnectionToAudioNode } from './factories/add-active-input-connection-to-audio-node';\r\nimport { createAddAudioNodeConnections } from './factories/add-audio-node-connections';\r\nimport { createAddAudioParamConnections } from './factories/add-audio-param-connections';\r\nimport { createAddAudioWorkletModule } from './factories/add-audio-worklet-module';\r\nimport { createAddConnectionToAudioNode } from './factories/add-connection-to-audio-node';\r\nimport { createAddPassiveInputConnectionToAudioNode } from './factories/add-passive-input-connection-to-audio-node';\r\nimport { createAddSilentConnection } from './factories/add-silent-connection';\r\nimport { createAddUnrenderedAudioWorkletNode } from './factories/add-unrendered-audio-worklet-node';\r\nimport { createAnalyserNodeConstructor } from './factories/analyser-node-constructor';\r\nimport { createAnalyserNodeRendererFactory } from './factories/analyser-node-renderer-factory';\r\nimport { createAudioBufferConstructor } from './factories/audio-buffer-constructor';\r\nimport { createAudioBufferSourceNodeConstructor } from './factories/audio-buffer-source-node-constructor';\r\nimport { createAudioBufferSourceNodeRendererFactory } from './factories/audio-buffer-source-node-renderer-factory';\r\nimport { createAudioContextConstructor } from './factories/audio-context-constructor';\r\nimport { createAudioDestinationNodeConstructor } from './factories/audio-destination-node-constructor';\r\nimport { createAudioDestinationNodeRenderer } from './factories/audio-destination-node-renderer-factory';\r\nimport { createAudioListenerFactory } from './factories/audio-listener-factory';\r\nimport { createAudioNodeConstructor } from './factories/audio-node-constructor';\r\nimport { createAudioParamFactory } from './factories/audio-param-factory';\r\nimport { createAudioParamRenderer } from './factories/audio-param-renderer';\r\nimport { createAudioWorkletNodeConstructor } from './factories/audio-worklet-node-constructor';\r\nimport { createAudioWorkletNodeRendererFactory } from './factories/audio-worklet-node-renderer-factory';\r\nimport { createBaseAudioContextConstructor } from './factories/base-audio-context-constructor';\r\nimport { createBiquadFilterNodeConstructor } from './factories/biquad-filter-node-constructor';\r\nimport { createBiquadFilterNodeRendererFactory } from './factories/biquad-filter-node-renderer-factory';\r\nimport { createCacheTestResult } from './factories/cache-test-result';\r\nimport { createChannelMergerNodeConstructor } from './factories/channel-merger-node-constructor';\r\nimport { createChannelMergerNodeRendererFactory } from './factories/channel-merger-node-renderer-factory';\r\nimport { createChannelSplitterNodeConstructor } from './factories/channel-splitter-node-constructor';\r\nimport { createChannelSplitterNodeRendererFactory } from './factories/channel-splitter-node-renderer-factory';\r\nimport { createConnectAudioParam } from './factories/connect-audio-param';\r\nimport { createConnectMultipleOutputs } from './factories/connect-multiple-outputs';\r\nimport { createConnectedNativeAudioBufferSourceNodeFactory } from './factories/connected-native-audio-buffer-source-node-factory';\r\nimport { createConstantSourceNodeConstructor } from './factories/constant-source-node-constructor';\r\nimport { createConstantSourceNodeRendererFactory } from './factories/constant-source-node-renderer-factory';\r\nimport { createConvertNumberToUnsignedLong } from './factories/convert-number-to-unsigned-long';\r\nimport { createConvolverNodeConstructor } from './factories/convolver-node-constructor';\r\nimport { createConvolverNodeRendererFactory } from './factories/convolver-node-renderer-factory';\r\nimport { createCreateNativeOfflineAudioContext } from './factories/create-native-offline-audio-context';\r\nimport { createDataCloneError } from './factories/data-clone-error';\r\nimport { createDecodeAudioData } from './factories/decode-audio-data';\r\nimport { createDecrementCycleCounter } from './factories/decrement-cycle-counter';\r\nimport { createDelayNodeConstructor } from './factories/delay-node-constructor';\r\nimport { createDelayNodeRendererFactory } from './factories/delay-node-renderer-factory';\r\nimport { createDeleteActiveInputConnectionToAudioNode } from './factories/delete-active-input-connection-to-audio-node';\r\nimport { createDeleteUnrenderedAudioWorkletNode } from './factories/delete-unrendered-audio-worklet-node';\r\nimport { createDetectCycles } from './factories/detect-cycles';\r\nimport { createDisconnectMultipleOutputs } from './factories/disconnect-multiple-outputs';\r\nimport { createDynamicsCompressorNodeConstructor } from './factories/dynamics-compressor-node-constructor';\r\nimport { createDynamicsCompressorNodeRendererFactory } from './factories/dynamics-compressor-node-renderer-factory';\r\nimport { createEncodingError } from './factories/encoding-error';\r\nimport { createEvaluateSource } from './factories/evaluate-source';\r\nimport { createEventTargetConstructor } from './factories/event-target-constructor';\r\nimport { createExposeCurrentFrameAndCurrentTime } from './factories/expose-current-frame-and-current-time';\r\nimport { createFetchSource } from './factories/fetch-source';\r\nimport { createGainNodeConstructor } from './factories/gain-node-constructor';\r\nimport { createGainNodeRendererFactory } from './factories/gain-node-renderer-factory';\r\nimport { createGetActiveAudioWorkletNodeInputs } from './factories/get-active-audio-worklet-node-inputs';\r\nimport { createGetAudioNodeRenderer } from './factories/get-audio-node-renderer';\r\nimport { createGetAudioNodeTailTime } from './factories/get-audio-node-tail-time';\r\nimport { createGetAudioParamRenderer } from './factories/get-audio-param-renderer';\r\nimport { createGetBackupOfflineAudioContext } from './factories/get-backup-offline-audio-context';\r\nimport { createGetNativeContext } from './factories/get-native-context';\r\nimport { createGetOrCreateBackupOfflineAudioContext } from './factories/get-or-create-backup-offline-audio-context';\r\nimport { createGetUnrenderedAudioWorkletNodes } from './factories/get-unrendered-audio-worklet-nodes';\r\nimport { createIIRFilterNodeConstructor } from './factories/iir-filter-node-constructor';\r\nimport { createIIRFilterNodeRendererFactory } from './factories/iir-filter-node-renderer-factory';\r\nimport { createIncrementCycleCounterFactory } from './factories/increment-cycle-counter-factory';\r\nimport { createIndexSizeError } from './factories/index-size-error';\r\nimport { createInvalidAccessError } from './factories/invalid-access-error';\r\nimport { createInvalidStateError } from './factories/invalid-state-error';\r\nimport { createIsAnyAudioContext } from './factories/is-any-audio-context';\r\nimport { createIsAnyAudioNode } from './factories/is-any-audio-node';\r\nimport { createIsAnyAudioParam } from './factories/is-any-audio-param';\r\nimport { createIsAnyOfflineAudioContext } from './factories/is-any-offline-audio-context';\r\nimport { createIsNativeAudioContext } from './factories/is-native-audio-context';\r\nimport { createIsNativeAudioNode } from './factories/is-native-audio-node';\r\nimport { createIsNativeAudioParam } from './factories/is-native-audio-param';\r\nimport { createIsNativeContext } from './factories/is-native-context';\r\nimport { createIsNativeOfflineAudioContext } from './factories/is-native-offline-audio-context';\r\nimport { createIsSecureContext } from './factories/is-secure-context';\r\nimport { createIsSupportedPromise } from './factories/is-supported-promise';\r\nimport { createMediaElementAudioSourceNodeConstructor } from './factories/media-element-audio-source-node-constructor';\r\nimport { createMediaStreamAudioDestinationNodeConstructor } from './factories/media-stream-audio-destination-node-constructor';\r\nimport { createMediaStreamAudioSourceNodeConstructor } from './factories/media-stream-audio-source-node-constructor';\r\nimport { createMediaStreamTrackAudioSourceNodeConstructor } from './factories/media-stream-track-audio-source-node-constructor';\r\nimport { createMinimalAudioContextConstructor } from './factories/minimal-audio-context-constructor';\r\nimport { createMinimalBaseAudioContextConstructor } from './factories/minimal-base-audio-context-constructor';\r\nimport { createMinimalOfflineAudioContextConstructor } from './factories/minimal-offline-audio-context-constructor';\r\nimport { createMonitorConnections } from './factories/monitor-connections';\r\nimport { createNativeAnalyserNodeFactory } from './factories/native-analyser-node-factory';\r\nimport { createNativeAudioBufferConstructor } from './factories/native-audio-buffer-constructor';\r\nimport { createNativeAudioBufferSourceNodeFactory } from './factories/native-audio-buffer-source-node-factory';\r\nimport { createNativeAudioContextConstructor } from './factories/native-audio-context-constructor';\r\nimport { createNativeAudioDestinationNodeFactory } from './factories/native-audio-destination-node';\r\nimport { createNativeAudioWorkletNodeConstructor } from './factories/native-audio-worklet-node-constructor';\r\nimport { createNativeAudioWorkletNodeFactory } from './factories/native-audio-worklet-node-factory';\r\nimport { createNativeAudioWorkletNodeFakerFactory } from './factories/native-audio-worklet-node-faker-factory';\r\nimport { createNativeBiquadFilterNode } from './factories/native-biquad-filter-node';\r\nimport { createNativeChannelMergerNodeFactory } from './factories/native-channel-merger-node-factory';\r\nimport { createNativeChannelSplitterNode } from './factories/native-channel-splitter-node';\r\nimport { createNativeConstantSourceNodeFactory } from './factories/native-constant-source-node-factory';\r\nimport { createNativeConstantSourceNodeFakerFactory } from './factories/native-constant-source-node-faker-factory';\r\nimport { createNativeConvolverNodeFactory } from './factories/native-convolver-node-factory';\r\nimport { createNativeDelayNode } from './factories/native-delay-node';\r\nimport { createNativeDynamicsCompressorNodeFactory } from './factories/native-dynamics-compressor-node-factory';\r\nimport { createNativeGainNode } from './factories/native-gain-node';\r\nimport { createNativeIIRFilterNodeFactory } from './factories/native-iir-filter-node-factory';\r\nimport { createNativeIIRFilterNodeFakerFactory } from './factories/native-iir-filter-node-faker-factory';\r\nimport { createNativeMediaElementAudioSourceNode } from './factories/native-media-element-audio-source-node';\r\nimport { createNativeMediaStreamAudioDestinationNode } from './factories/native-media-stream-audio-destination-node';\r\nimport { createNativeMediaStreamAudioSourceNode } from './factories/native-media-stream-audio-source-node';\r\nimport { createNativeMediaStreamTrackAudioSourceNodeFactory } from './factories/native-media-stream-track-audio-source-node-factory';\r\nimport { createNativeOfflineAudioContextConstructor } from './factories/native-offline-audio-context-constructor';\r\nimport { createNativeOscillatorNodeFactory } from './factories/native-oscillator-node-factory';\r\nimport { createNativePannerNodeFactory } from './factories/native-panner-node-factory';\r\nimport { createNativePannerNodeFakerFactory } from './factories/native-panner-node-faker-factory';\r\nimport { createNativePeriodicWaveFactory } from './factories/native-periodic-wave-factory';\r\nimport { createNativeScriptProcessorNode } from './factories/native-script-processor-node';\r\nimport { createNativeStereoPannerNodeFactory } from './factories/native-stereo-panner-node-factory';\r\nimport { createNativeStereoPannerNodeFakerFactory } from './factories/native-stereo-panner-node-faker-factory';\r\nimport { createNativeWaveShaperNodeFactory } from './factories/native-wave-shaper-node-factory';\r\nimport { createNativeWaveShaperNodeFakerFactory } from './factories/native-wave-shaper-node-faker-factory';\r\nimport { createNotSupportedError } from './factories/not-supported-error';\r\nimport { createOfflineAudioContextConstructor } from './factories/offline-audio-context-constructor';\r\nimport { createOscillatorNodeConstructor } from './factories/oscillator-node-constructor';\r\nimport { createOscillatorNodeRendererFactory } from './factories/oscillator-node-renderer-factory';\r\nimport { createPannerNodeConstructor } from './factories/panner-node-constructor';\r\nimport { createPannerNodeRendererFactory } from './factories/panner-node-renderer-factory';\r\nimport { createPeriodicWaveConstructor } from './factories/periodic-wave-constructor';\r\nimport { createRenderAutomation } from './factories/render-automation';\r\nimport { createRenderInputsOfAudioNode } from './factories/render-inputs-of-audio-node';\r\nimport { createRenderInputsOfAudioParam } from './factories/render-inputs-of-audio-param';\r\nimport { createRenderNativeOfflineAudioContext } from './factories/render-native-offline-audio-context';\r\nimport { createSetActiveAudioWorkletNodeInputs } from './factories/set-active-audio-worklet-node-inputs';\r\nimport { createSetAudioNodeTailTime } from './factories/set-audio-node-tail-time';\r\nimport { createStartRendering } from './factories/start-rendering';\r\nimport { createStereoPannerNodeConstructor } from './factories/stereo-panner-node-constructor';\r\nimport { createStereoPannerNodeRendererFactory } from './factories/stereo-panner-node-renderer-factory';\r\nimport { createTestAudioBufferConstructorSupport } from './factories/test-audio-buffer-constructor-support';\r\nimport { createTestAudioBufferCopyChannelMethodsSubarraySupport } from './factories/test-audio-buffer-copy-channel-methods-subarray-support';\r\nimport { createTestAudioContextCloseMethodSupport } from './factories/test-audio-context-close-method-support';\r\nimport { createTestAudioContextDecodeAudioDataMethodTypeErrorSupport } from './factories/test-audio-context-decode-audio-data-method-type-error-support';\r\nimport { createTestAudioContextOptionsSupport } from './factories/test-audio-context-options-support';\r\nimport { createTestAudioNodeConnectMethodSupport } from './factories/test-audio-node-connect-method-support';\r\nimport { createTestAudioWorkletProcessorNoOutputsSupport } from './factories/test-audio-worklet-processor-no-outputs-support';\r\nimport { createTestAudioWorkletProcessorPostMessageSupport } from './factories/test-audio-worklet-processor-post-message-support';\r\nimport { createTestChannelMergerNodeChannelCountSupport } from './factories/test-channel-merger-node-channel-count-support';\r\nimport { createTestConstantSourceNodeAccurateSchedulingSupport } from './factories/test-constant-source-node-accurate-scheduling-support';\r\nimport { createTestConvolverNodeBufferReassignabilitySupport } from './factories/test-convolver-node-buffer-reassignability-support';\r\nimport { createTestConvolverNodeChannelCountSupport } from './factories/test-convolver-node-channel-count-support';\r\nimport { createTestIsSecureContextSupport } from './factories/test-is-secure-context-support';\r\nimport { createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport } from './factories/test-media-stream-audio-source-node-media-stream-without-audio-track-support';\r\nimport { createTestOfflineAudioContextCurrentTimeSupport } from './factories/test-offline-audio-context-current-time-support';\r\nimport { createTestStereoPannerNodeDefaultValueSupport } from './factories/test-stereo-panner-node-default-value-support';\r\nimport { createUnknownError } from './factories/unknown-error';\r\nimport { createWaveShaperNodeConstructor } from './factories/wave-shaper-node-constructor';\r\nimport { createWaveShaperNodeRendererFactory } from './factories/wave-shaper-node-renderer-factory';\r\nimport { createWindow } from './factories/window';\r\nimport { createWrapAudioBufferCopyChannelMethods } from './factories/wrap-audio-buffer-copy-channel-methods';\r\nimport { createWrapAudioBufferCopyChannelMethodsOutOfBounds } from './factories/wrap-audio-buffer-copy-channel-methods-out-of-bounds';\r\nimport { createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer } from './factories/wrap-audio-buffer-source-node-stop-method-nullified-buffer';\r\nimport { createWrapChannelMergerNode } from './factories/wrap-channel-merger-node';\r\nimport {\r\n    AUDIO_NODE_CONNECTIONS_STORE,\r\n    AUDIO_NODE_STORE,\r\n    AUDIO_PARAM_CONNECTIONS_STORE,\r\n    AUDIO_PARAM_STORE,\r\n    CONTEXT_STORE,\r\n    CYCLE_COUNTERS\r\n} from './globals';\r\nimport { connectNativeAudioNodeToNativeAudioNode } from './helpers/connect-native-audio-node-to-native-audio-node';\r\nimport { disconnectNativeAudioNodeFromNativeAudioNode } from './helpers/disconnect-native-audio-node-from-native-audio-node';\r\nimport { getAudioNodeConnections } from './helpers/get-audio-node-connections';\r\nimport { getAudioParamConnections } from './helpers/get-audio-param-connections';\r\nimport { getEventListenersOfAudioNode } from './helpers/get-event-listeners-of-audio-node';\r\nimport { getFirstSample } from './helpers/get-first-sample';\r\nimport { getNativeAudioNode } from './helpers/get-native-audio-node';\r\nimport { getNativeAudioParam } from './helpers/get-native-audio-param';\r\nimport { getValueForKey } from './helpers/get-value-for-key';\r\nimport { insertElementInSet } from './helpers/insert-element-in-set';\r\nimport { isActiveAudioNode } from './helpers/is-active-audio-node';\r\nimport { isDCCurve } from './helpers/is-dc-curve';\r\nimport { isPartOfACycle } from './helpers/is-part-of-a-cycle';\r\nimport { isPassiveAudioNode } from './helpers/is-passive-audio-node';\r\nimport { overwriteAccessors } from './helpers/overwrite-accessors';\r\nimport { pickElementFromSet } from './helpers/pick-element-from-set';\r\nimport { sanitizeAudioWorkletNodeOptions } from './helpers/sanitize-audio-worklet-node-options';\r\nimport { sanitizeChannelSplitterOptions } from './helpers/sanitize-channel-splitter-options';\r\nimport { sanitizePeriodicWaveOptions } from './helpers/sanitize-periodic-wave-options';\r\nimport { setValueAtTimeUntilPossible } from './helpers/set-value-at-time-until-possible';\r\nimport { testAudioBufferCopyChannelMethodsOutOfBoundsSupport } from './helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support';\r\nimport { testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport } from './helpers/test-audio-buffer-source-node-start-method-consecutive-calls-support';\r\nimport { testAudioBufferSourceNodeStartMethodOffsetClampingSupport } from './helpers/test-audio-buffer-source-node-start-method-offset-clamping-support';\r\nimport { testAudioBufferSourceNodeStopMethodNullifiedBufferSupport } from './helpers/test-audio-buffer-source-node-stop-method-nullified-buffer-support';\r\nimport { testAudioScheduledSourceNodeStartMethodNegativeParametersSupport } from './helpers/test-audio-scheduled-source-node-start-method-negative-parameters-support';\r\nimport { testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport } from './helpers/test-audio-scheduled-source-node-stop-method-consecutive-calls-support';\r\nimport { testAudioScheduledSourceNodeStopMethodNegativeParametersSupport } from './helpers/test-audio-scheduled-source-node-stop-method-negative-parameters-support';\r\nimport { testAudioWorkletNodeOptionsClonability } from './helpers/test-audio-worklet-node-options-clonability';\r\nimport { testDomExceptionConstructorSupport } from './helpers/test-dom-exception-constructor-support';\r\nimport { testPromiseSupport } from './helpers/test-promise-support';\r\nimport { testTransferablesSupport } from './helpers/test-transferables-support';\r\nimport { wrapAudioBufferSourceNodeStartMethodOffsetClamping } from './helpers/wrap-audio-buffer-source-node-start-method-offset-clamping';\r\nimport { wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls } from './helpers/wrap-audio-scheduled-source-node-stop-method-consecutive-calls';\r\nimport { wrapEventListener } from './helpers/wrap-event-listener';\r\nimport {\r\n    IAnalyserNode,\r\n    IAudioBuffer,\r\n    IAudioBufferSourceNode,\r\n    IAudioContext,\r\n    IAudioNode,\r\n    IAudioWorkletNode,\r\n    IBiquadFilterNode,\r\n    IConstantSourceNode,\r\n    IConvolverNode,\r\n    IDelayNode,\r\n    IDynamicsCompressorNode,\r\n    IGainNode,\r\n    IIIRFilterNode,\r\n    IMediaElementAudioSourceNode,\r\n    IMediaStreamAudioDestinationNode,\r\n    IMediaStreamAudioSourceNode,\r\n    IMediaStreamTrackAudioSourceNode,\r\n    IMinimalAudioContext,\r\n    IMinimalOfflineAudioContext,\r\n    IOfflineAudioContext,\r\n    IOfflineAudioContextConstructor,\r\n    IOscillatorNode,\r\n    IPannerNode,\r\n    IPeriodicWave,\r\n    IStereoPannerNode,\r\n    IWaveShaperNode\r\n} from './interfaces';\r\nimport {\r\n    TActiveAudioWorkletNodeInputsStore,\r\n    TAddAudioWorkletModuleFunction,\r\n    TAnalyserNodeConstructor,\r\n    TAudioBufferConstructor,\r\n    TAudioBufferSourceNodeConstructor,\r\n    TAudioBufferStore,\r\n    TAudioContextConstructor,\r\n    TAudioParamAudioNodeStore,\r\n    TAudioWorkletNodeConstructor,\r\n    TBackupOfflineAudioContextStore,\r\n    TBiquadFilterNodeConstructor,\r\n    TChannelMergerNodeConstructor,\r\n    TChannelSplitterNodeConstructor,\r\n    TConstantSourceNodeConstructor,\r\n    TContext,\r\n    TConvolverNodeConstructor,\r\n    TDecodeAudioDataFunction,\r\n    TDelayNodeConstructor,\r\n    TDynamicsCompressorNodeConstructor,\r\n    TGainNodeConstructor,\r\n    TIIRFilterNodeConstructor,\r\n    TMediaElementAudioSourceNodeConstructor,\r\n    TMediaStreamAudioDestinationNodeConstructor,\r\n    TMediaStreamAudioSourceNodeConstructor,\r\n    TMediaStreamTrackAudioSourceNodeConstructor,\r\n    TMinimalAudioContextConstructor,\r\n    TMinimalOfflineAudioContextConstructor,\r\n    TOscillatorNodeConstructor,\r\n    TPannerNodeConstructor,\r\n    TPeriodicWaveConstructor,\r\n    TStereoPannerNodeConstructor,\r\n    TUnrenderedAudioWorkletNodeStore,\r\n    TWaveShaperNodeConstructor\r\n} from './types';\r\n\r\n/*\r\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\r\n * isolatedModules compiler option.\r\n */\r\nexport * from './interfaces/index';\r\nexport * from './types/index';\r\n\r\nconst addActiveInputConnectionToAudioNode = createAddActiveInputConnectionToAudioNode(insertElementInSet);\r\nconst addPassiveInputConnectionToAudioNode = createAddPassiveInputConnectionToAudioNode(insertElementInSet);\r\nconst deleteActiveInputConnectionToAudioNode = createDeleteActiveInputConnectionToAudioNode(pickElementFromSet);\r\nconst audioNodeTailTimeStore = new WeakMap();\r\nconst getAudioNodeTailTime = createGetAudioNodeTailTime(audioNodeTailTimeStore);\r\nconst cacheTestResult = createCacheTestResult(new Map(), new WeakMap());\r\nconst window = createWindow();\r\nconst createNativeAnalyserNode = createNativeAnalyserNodeFactory(cacheTestResult, createIndexSizeError);\r\nconst getAudioNodeRenderer = createGetAudioNodeRenderer(getAudioNodeConnections);\r\nconst renderInputsOfAudioNode = createRenderInputsOfAudioNode(getAudioNodeConnections, getAudioNodeRenderer, isPartOfACycle);\r\nconst createAnalyserNodeRenderer = createAnalyserNodeRendererFactory(createNativeAnalyserNode, getNativeAudioNode, renderInputsOfAudioNode);\r\nconst getNativeContext = createGetNativeContext(CONTEXT_STORE);\r\nconst nativeOfflineAudioContextConstructor = createNativeOfflineAudioContextConstructor(window);\r\nconst isNativeOfflineAudioContext = createIsNativeOfflineAudioContext(nativeOfflineAudioContextConstructor);\r\nconst audioParamAudioNodeStore: TAudioParamAudioNodeStore = new WeakMap();\r\nconst eventTargetConstructor = createEventTargetConstructor(wrapEventListener);\r\nconst nativeAudioContextConstructor = createNativeAudioContextConstructor(window);\r\nconst isNativeAudioContext = createIsNativeAudioContext(nativeAudioContextConstructor);\r\nconst isNativeAudioNode = createIsNativeAudioNode(window);\r\nconst isNativeAudioParam = createIsNativeAudioParam(window);\r\nconst nativeAudioWorkletNodeConstructor = createNativeAudioWorkletNodeConstructor(window);\r\nconst audioNodeConstructor = createAudioNodeConstructor(\r\n    createAddAudioNodeConnections(AUDIO_NODE_CONNECTIONS_STORE),\r\n    createAddConnectionToAudioNode(\r\n        addActiveInputConnectionToAudioNode,\r\n        addPassiveInputConnectionToAudioNode,\r\n        connectNativeAudioNodeToNativeAudioNode,\r\n        deleteActiveInputConnectionToAudioNode,\r\n        disconnectNativeAudioNodeFromNativeAudioNode,\r\n        getAudioNodeConnections,\r\n        getAudioNodeTailTime,\r\n        getEventListenersOfAudioNode,\r\n        getNativeAudioNode,\r\n        insertElementInSet,\r\n        isActiveAudioNode,\r\n        isPartOfACycle,\r\n        isPassiveAudioNode\r\n    ),\r\n    cacheTestResult,\r\n    createIncrementCycleCounterFactory(\r\n        CYCLE_COUNTERS,\r\n        disconnectNativeAudioNodeFromNativeAudioNode,\r\n        getAudioNodeConnections,\r\n        getNativeAudioNode,\r\n        getNativeAudioParam,\r\n        isActiveAudioNode\r\n    ),\r\n    createIndexSizeError,\r\n    createInvalidAccessError,\r\n    createNotSupportedError,\r\n    createDecrementCycleCounter(\r\n        connectNativeAudioNodeToNativeAudioNode,\r\n        CYCLE_COUNTERS,\r\n        getAudioNodeConnections,\r\n        getNativeAudioNode,\r\n        getNativeAudioParam,\r\n        getNativeContext,\r\n        isActiveAudioNode,\r\n        isNativeOfflineAudioContext\r\n    ),\r\n    createDetectCycles(audioParamAudioNodeStore, getAudioNodeConnections, getValueForKey),\r\n    eventTargetConstructor,\r\n    getNativeContext,\r\n    isNativeAudioContext,\r\n    isNativeAudioNode,\r\n    isNativeAudioParam,\r\n    isNativeOfflineAudioContext,\r\n    nativeAudioWorkletNodeConstructor\r\n);\r\nconst analyserNodeConstructor: TAnalyserNodeConstructor = createAnalyserNodeConstructor(\r\n    audioNodeConstructor,\r\n    createAnalyserNodeRenderer,\r\n    createIndexSizeError,\r\n    createNativeAnalyserNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext\r\n);\r\n\r\ntype analyserNodeConstructor<T extends TContext> = IAnalyserNode<T>;\r\n\r\nexport { analyserNodeConstructor as AnalyserNode };\r\n\r\nconst audioBufferStore: TAudioBufferStore = new WeakSet();\r\nconst nativeAudioBufferConstructor = createNativeAudioBufferConstructor(window);\r\nconst convertNumberToUnsignedLong = createConvertNumberToUnsignedLong(new Uint32Array(1));\r\nconst wrapAudioBufferCopyChannelMethods = createWrapAudioBufferCopyChannelMethods(convertNumberToUnsignedLong, createIndexSizeError);\r\nconst wrapAudioBufferCopyChannelMethodsOutOfBounds = createWrapAudioBufferCopyChannelMethodsOutOfBounds(convertNumberToUnsignedLong);\r\nconst audioBufferConstructor: TAudioBufferConstructor = createAudioBufferConstructor(\r\n    audioBufferStore,\r\n    cacheTestResult,\r\n    createNotSupportedError,\r\n    nativeAudioBufferConstructor,\r\n    nativeOfflineAudioContextConstructor,\r\n    createTestAudioBufferConstructorSupport(nativeAudioBufferConstructor),\r\n    wrapAudioBufferCopyChannelMethods,\r\n    wrapAudioBufferCopyChannelMethodsOutOfBounds\r\n);\r\n\r\ntype audioBufferConstructor = IAudioBuffer;\r\n\r\nexport { audioBufferConstructor as AudioBuffer };\r\n\r\nconst addSilentConnection = createAddSilentConnection(createNativeGainNode);\r\nconst renderInputsOfAudioParam = createRenderInputsOfAudioParam(getAudioNodeRenderer, getAudioParamConnections, isPartOfACycle);\r\nconst connectAudioParam = createConnectAudioParam(renderInputsOfAudioParam);\r\nconst createNativeAudioBufferSourceNode = createNativeAudioBufferSourceNodeFactory(\r\n    addSilentConnection,\r\n    cacheTestResult,\r\n    testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,\r\n    testAudioBufferSourceNodeStartMethodOffsetClampingSupport,\r\n    testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,\r\n    testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,\r\n    testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,\r\n    testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,\r\n    wrapAudioBufferSourceNodeStartMethodOffsetClamping,\r\n    createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer(overwriteAccessors),\r\n    wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls\r\n);\r\nconst renderAutomation = createRenderAutomation(createGetAudioParamRenderer(getAudioParamConnections), renderInputsOfAudioParam);\r\nconst createAudioBufferSourceNodeRenderer = createAudioBufferSourceNodeRendererFactory(\r\n    connectAudioParam,\r\n    createNativeAudioBufferSourceNode,\r\n    getNativeAudioNode,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode\r\n);\r\nconst createAudioParam = createAudioParamFactory(\r\n    createAddAudioParamConnections(AUDIO_PARAM_CONNECTIONS_STORE),\r\n    audioParamAudioNodeStore,\r\n    AUDIO_PARAM_STORE,\r\n    createAudioParamRenderer,\r\n    createCancelAndHoldAutomationEvent,\r\n    createCancelScheduledValuesAutomationEvent,\r\n    createExponentialRampToValueAutomationEvent,\r\n    createLinearRampToValueAutomationEvent,\r\n    createSetTargetAutomationEvent,\r\n    createSetValueAutomationEvent,\r\n    createSetValueCurveAutomationEvent,\r\n    nativeAudioContextConstructor,\r\n    setValueAtTimeUntilPossible\r\n);\r\nconst audioBufferSourceNodeConstructor: TAudioBufferSourceNodeConstructor = createAudioBufferSourceNodeConstructor(\r\n    audioNodeConstructor,\r\n    createAudioBufferSourceNodeRenderer,\r\n    createAudioParam,\r\n    createInvalidStateError,\r\n    createNativeAudioBufferSourceNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    wrapEventListener\r\n);\r\n\r\ntype audioBufferSourceNodeConstructor<T extends TContext> = IAudioBufferSourceNode<T>;\r\n\r\nexport { audioBufferSourceNodeConstructor as AudioBufferSourceNode };\r\n\r\nconst audioDestinationNodeConstructor = createAudioDestinationNodeConstructor(\r\n    audioNodeConstructor,\r\n    createAudioDestinationNodeRenderer,\r\n    createIndexSizeError,\r\n    createInvalidStateError,\r\n    createNativeAudioDestinationNodeFactory(createNativeGainNode, overwriteAccessors),\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    renderInputsOfAudioNode\r\n);\r\nconst createBiquadFilterNodeRenderer = createBiquadFilterNodeRendererFactory(\r\n    connectAudioParam,\r\n    createNativeBiquadFilterNode,\r\n    getNativeAudioNode,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode\r\n);\r\nconst setAudioNodeTailTime = createSetAudioNodeTailTime(audioNodeTailTimeStore);\r\nconst biquadFilterNodeConstructor: TBiquadFilterNodeConstructor = createBiquadFilterNodeConstructor(\r\n    audioNodeConstructor,\r\n    createAudioParam,\r\n    createBiquadFilterNodeRenderer,\r\n    createInvalidAccessError,\r\n    createNativeBiquadFilterNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    setAudioNodeTailTime\r\n);\r\nconst monitorConnections = createMonitorConnections(insertElementInSet, isNativeAudioNode);\r\nconst wrapChannelMergerNode = createWrapChannelMergerNode(createInvalidStateError, monitorConnections);\r\nconst createNativeChannelMergerNode = createNativeChannelMergerNodeFactory(nativeAudioContextConstructor, wrapChannelMergerNode);\r\nconst createChannelMergerNodeRenderer = createChannelMergerNodeRendererFactory(\r\n    createNativeChannelMergerNode,\r\n    getNativeAudioNode,\r\n    renderInputsOfAudioNode\r\n);\r\nconst channelMergerNodeConstructor: TChannelMergerNodeConstructor = createChannelMergerNodeConstructor(\r\n    audioNodeConstructor,\r\n    createChannelMergerNodeRenderer,\r\n    createNativeChannelMergerNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext\r\n);\r\nconst createChannelSplitterNodeRenderer = createChannelSplitterNodeRendererFactory(\r\n    createNativeChannelSplitterNode,\r\n    getNativeAudioNode,\r\n    renderInputsOfAudioNode\r\n);\r\nconst channelSplitterNodeConstructor: TChannelSplitterNodeConstructor = createChannelSplitterNodeConstructor(\r\n    audioNodeConstructor,\r\n    createChannelSplitterNodeRenderer,\r\n    createNativeChannelSplitterNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    sanitizeChannelSplitterOptions\r\n);\r\nconst createNativeConstantSourceNodeFaker = createNativeConstantSourceNodeFakerFactory(\r\n    addSilentConnection,\r\n    createNativeAudioBufferSourceNode,\r\n    createNativeGainNode,\r\n    monitorConnections\r\n);\r\nconst createNativeConstantSourceNode = createNativeConstantSourceNodeFactory(\r\n    addSilentConnection,\r\n    cacheTestResult,\r\n    createNativeConstantSourceNodeFaker,\r\n    testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,\r\n    testAudioScheduledSourceNodeStopMethodNegativeParametersSupport\r\n);\r\nconst createConstantSourceNodeRenderer = createConstantSourceNodeRendererFactory(\r\n    connectAudioParam,\r\n    createNativeConstantSourceNode,\r\n    getNativeAudioNode,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode\r\n);\r\nconst constantSourceNodeConstructor: TConstantSourceNodeConstructor = createConstantSourceNodeConstructor(\r\n    audioNodeConstructor,\r\n    createAudioParam,\r\n    createConstantSourceNodeRenderer,\r\n    createNativeConstantSourceNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    wrapEventListener\r\n);\r\nconst createNativeConvolverNode = createNativeConvolverNodeFactory(createNotSupportedError, overwriteAccessors);\r\nconst createConvolverNodeRenderer = createConvolverNodeRendererFactory(\r\n    createNativeConvolverNode,\r\n    getNativeAudioNode,\r\n    renderInputsOfAudioNode\r\n);\r\nconst convolverNodeConstructor: TConvolverNodeConstructor = createConvolverNodeConstructor(\r\n    audioNodeConstructor,\r\n    createConvolverNodeRenderer,\r\n    createNativeConvolverNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    setAudioNodeTailTime\r\n);\r\nconst createDelayNodeRenderer = createDelayNodeRendererFactory(\r\n    connectAudioParam,\r\n    createNativeDelayNode,\r\n    getNativeAudioNode,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode\r\n);\r\nconst delayNodeConstructor: TDelayNodeConstructor = createDelayNodeConstructor(\r\n    audioNodeConstructor,\r\n    createAudioParam,\r\n    createDelayNodeRenderer,\r\n    createNativeDelayNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    setAudioNodeTailTime\r\n);\r\nconst createNativeDynamicsCompressorNode = createNativeDynamicsCompressorNodeFactory(createNotSupportedError);\r\nconst createDynamicsCompressorNodeRenderer = createDynamicsCompressorNodeRendererFactory(\r\n    connectAudioParam,\r\n    createNativeDynamicsCompressorNode,\r\n    getNativeAudioNode,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode\r\n);\r\nconst dynamicsCompressorNodeConstructor: TDynamicsCompressorNodeConstructor = createDynamicsCompressorNodeConstructor(\r\n    audioNodeConstructor,\r\n    createAudioParam,\r\n    createDynamicsCompressorNodeRenderer,\r\n    createNativeDynamicsCompressorNode,\r\n    createNotSupportedError,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    setAudioNodeTailTime\r\n);\r\nconst createGainNodeRenderer = createGainNodeRendererFactory(\r\n    connectAudioParam,\r\n    createNativeGainNode,\r\n    getNativeAudioNode,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode\r\n);\r\nconst gainNodeConstructor: TGainNodeConstructor = createGainNodeConstructor(\r\n    audioNodeConstructor,\r\n    createAudioParam,\r\n    createGainNodeRenderer,\r\n    createNativeGainNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext\r\n);\r\nconst createNativeIIRFilterNodeFaker = createNativeIIRFilterNodeFakerFactory(\r\n    createInvalidAccessError,\r\n    createInvalidStateError,\r\n    createNativeScriptProcessorNode,\r\n    createNotSupportedError\r\n);\r\nconst renderNativeOfflineAudioContext = createRenderNativeOfflineAudioContext(\r\n    cacheTestResult,\r\n    createNativeGainNode,\r\n    createNativeScriptProcessorNode,\r\n    createTestOfflineAudioContextCurrentTimeSupport(createNativeGainNode, nativeOfflineAudioContextConstructor)\r\n);\r\nconst createIIRFilterNodeRenderer = createIIRFilterNodeRendererFactory(\r\n    createNativeAudioBufferSourceNode,\r\n    getNativeAudioNode,\r\n    nativeOfflineAudioContextConstructor,\r\n    renderInputsOfAudioNode,\r\n    renderNativeOfflineAudioContext\r\n);\r\nconst createNativeIIRFilterNode = createNativeIIRFilterNodeFactory(createNativeIIRFilterNodeFaker);\r\nconst iIRFilterNodeConstructor: TIIRFilterNodeConstructor = createIIRFilterNodeConstructor(\r\n    audioNodeConstructor,\r\n    createNativeIIRFilterNode,\r\n    createIIRFilterNodeRenderer,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    setAudioNodeTailTime\r\n);\r\nconst createAudioListener = createAudioListenerFactory(\r\n    createAudioParam,\r\n    createNativeChannelMergerNode,\r\n    createNativeConstantSourceNode,\r\n    createNativeScriptProcessorNode,\r\n    createNotSupportedError,\r\n    getFirstSample,\r\n    isNativeOfflineAudioContext,\r\n    overwriteAccessors\r\n);\r\nconst unrenderedAudioWorkletNodeStore: TUnrenderedAudioWorkletNodeStore = new WeakMap();\r\nconst minimalBaseAudioContextConstructor = createMinimalBaseAudioContextConstructor(\r\n    audioDestinationNodeConstructor,\r\n    createAudioListener,\r\n    eventTargetConstructor,\r\n    isNativeOfflineAudioContext,\r\n    unrenderedAudioWorkletNodeStore,\r\n    wrapEventListener\r\n);\r\nconst createNativeOscillatorNode = createNativeOscillatorNodeFactory(\r\n    addSilentConnection,\r\n    cacheTestResult,\r\n    testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,\r\n    testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,\r\n    testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,\r\n    wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls\r\n);\r\nconst createOscillatorNodeRenderer = createOscillatorNodeRendererFactory(\r\n    connectAudioParam,\r\n    createNativeOscillatorNode,\r\n    getNativeAudioNode,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode\r\n);\r\nconst oscillatorNodeConstructor: TOscillatorNodeConstructor = createOscillatorNodeConstructor(\r\n    audioNodeConstructor,\r\n    createAudioParam,\r\n    createNativeOscillatorNode,\r\n    createOscillatorNodeRenderer,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    wrapEventListener\r\n);\r\nconst createConnectedNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNodeFactory(createNativeAudioBufferSourceNode);\r\nconst createNativeWaveShaperNodeFaker = createNativeWaveShaperNodeFakerFactory(\r\n    createConnectedNativeAudioBufferSourceNode,\r\n    createInvalidStateError,\r\n    createNativeGainNode,\r\n    isDCCurve,\r\n    monitorConnections\r\n);\r\nconst createNativeWaveShaperNode = createNativeWaveShaperNodeFactory(\r\n    createConnectedNativeAudioBufferSourceNode,\r\n    createInvalidStateError,\r\n    createNativeWaveShaperNodeFaker,\r\n    isDCCurve,\r\n    monitorConnections,\r\n    nativeAudioContextConstructor,\r\n    overwriteAccessors\r\n);\r\nconst createNativePannerNodeFaker = createNativePannerNodeFakerFactory(\r\n    connectNativeAudioNodeToNativeAudioNode,\r\n    createInvalidStateError,\r\n    createNativeChannelMergerNode,\r\n    createNativeGainNode,\r\n    createNativeScriptProcessorNode,\r\n    createNativeWaveShaperNode,\r\n    createNotSupportedError,\r\n    disconnectNativeAudioNodeFromNativeAudioNode,\r\n    getFirstSample,\r\n    monitorConnections\r\n);\r\nconst createNativePannerNode = createNativePannerNodeFactory(createNativePannerNodeFaker);\r\nconst createPannerNodeRenderer = createPannerNodeRendererFactory(\r\n    connectAudioParam,\r\n    createNativeChannelMergerNode,\r\n    createNativeConstantSourceNode,\r\n    createNativeGainNode,\r\n    createNativePannerNode,\r\n    getNativeAudioNode,\r\n    nativeOfflineAudioContextConstructor,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode,\r\n    renderNativeOfflineAudioContext\r\n);\r\nconst pannerNodeConstructor: TPannerNodeConstructor = createPannerNodeConstructor(\r\n    audioNodeConstructor,\r\n    createAudioParam,\r\n    createNativePannerNode,\r\n    createPannerNodeRenderer,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    setAudioNodeTailTime\r\n);\r\nconst createNativePeriodicWave = createNativePeriodicWaveFactory(createIndexSizeError);\r\nconst periodicWaveConstructor: TPeriodicWaveConstructor = createPeriodicWaveConstructor(\r\n    createNativePeriodicWave,\r\n    getNativeContext,\r\n    new WeakSet(),\r\n    sanitizePeriodicWaveOptions\r\n);\r\nconst nativeStereoPannerNodeFakerFactory = createNativeStereoPannerNodeFakerFactory(\r\n    createNativeChannelMergerNode,\r\n    createNativeChannelSplitterNode,\r\n    createNativeGainNode,\r\n    createNativeWaveShaperNode,\r\n    createNotSupportedError,\r\n    monitorConnections\r\n);\r\nconst createNativeStereoPannerNode = createNativeStereoPannerNodeFactory(nativeStereoPannerNodeFakerFactory, createNotSupportedError);\r\nconst createStereoPannerNodeRenderer = createStereoPannerNodeRendererFactory(\r\n    connectAudioParam,\r\n    createNativeStereoPannerNode,\r\n    getNativeAudioNode,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode\r\n);\r\nconst stereoPannerNodeConstructor: TStereoPannerNodeConstructor = createStereoPannerNodeConstructor(\r\n    audioNodeConstructor,\r\n    createAudioParam,\r\n    createNativeStereoPannerNode,\r\n    createStereoPannerNodeRenderer,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext\r\n);\r\nconst createWaveShaperNodeRenderer = createWaveShaperNodeRendererFactory(\r\n    createNativeWaveShaperNode,\r\n    getNativeAudioNode,\r\n    renderInputsOfAudioNode\r\n);\r\nconst waveShaperNodeConstructor: TWaveShaperNodeConstructor = createWaveShaperNodeConstructor(\r\n    audioNodeConstructor,\r\n    createInvalidStateError,\r\n    createNativeWaveShaperNode,\r\n    createWaveShaperNodeRenderer,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext,\r\n    setAudioNodeTailTime\r\n);\r\nconst isSecureContext = createIsSecureContext(window);\r\nconst exposeCurrentFrameAndCurrentTime = createExposeCurrentFrameAndCurrentTime(window);\r\nconst backupOfflineAudioContextStore: TBackupOfflineAudioContextStore = new WeakMap();\r\nconst getOrCreateBackupOfflineAudioContext = createGetOrCreateBackupOfflineAudioContext(\r\n    backupOfflineAudioContextStore,\r\n    nativeOfflineAudioContextConstructor\r\n);\r\n\r\n// The addAudioWorkletModule() function is only available in a SecureContext.\r\nexport const addAudioWorkletModule: undefined | TAddAudioWorkletModuleFunction = isSecureContext\r\n    ? createAddAudioWorkletModule(\r\n          cacheTestResult,\r\n          createNotSupportedError,\r\n          createEvaluateSource(window),\r\n          exposeCurrentFrameAndCurrentTime,\r\n          createFetchSource(createAbortError),\r\n          getNativeContext,\r\n          getOrCreateBackupOfflineAudioContext,\r\n          isNativeOfflineAudioContext,\r\n          nativeAudioWorkletNodeConstructor,\r\n          new WeakMap(),\r\n          new WeakMap(),\r\n          createTestAudioWorkletProcessorPostMessageSupport(nativeAudioWorkletNodeConstructor, nativeOfflineAudioContextConstructor),\r\n          // @todo window is guaranteed to be defined because isSecureContext checks that as well.\r\n          <NonNullable<typeof window>>window\r\n      )\r\n    : undefined;\r\n\r\nconst isNativeContext = createIsNativeContext(isNativeAudioContext, isNativeOfflineAudioContext);\r\n\r\nexport const decodeAudioData: TDecodeAudioDataFunction = createDecodeAudioData(\r\n    audioBufferStore,\r\n    cacheTestResult,\r\n    createDataCloneError,\r\n    createEncodingError,\r\n    new WeakSet(),\r\n    getNativeContext,\r\n    isNativeContext,\r\n    testAudioBufferCopyChannelMethodsOutOfBoundsSupport,\r\n    testPromiseSupport,\r\n    wrapAudioBufferCopyChannelMethods,\r\n    wrapAudioBufferCopyChannelMethodsOutOfBounds\r\n);\r\n\r\nconst baseAudioContextConstructor = createBaseAudioContextConstructor(\r\n    addAudioWorkletModule,\r\n    analyserNodeConstructor,\r\n    audioBufferConstructor,\r\n    audioBufferSourceNodeConstructor,\r\n    biquadFilterNodeConstructor,\r\n    channelMergerNodeConstructor,\r\n    channelSplitterNodeConstructor,\r\n    constantSourceNodeConstructor,\r\n    convolverNodeConstructor,\r\n    decodeAudioData,\r\n    delayNodeConstructor,\r\n    dynamicsCompressorNodeConstructor,\r\n    gainNodeConstructor,\r\n    iIRFilterNodeConstructor,\r\n    minimalBaseAudioContextConstructor,\r\n    oscillatorNodeConstructor,\r\n    pannerNodeConstructor,\r\n    periodicWaveConstructor,\r\n    stereoPannerNodeConstructor,\r\n    waveShaperNodeConstructor\r\n);\r\nconst mediaElementAudioSourceNodeConstructor: TMediaElementAudioSourceNodeConstructor = createMediaElementAudioSourceNodeConstructor(\r\n    audioNodeConstructor,\r\n    createNativeMediaElementAudioSourceNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext\r\n);\r\nconst mediaStreamAudioDestinationNodeConstructor: TMediaStreamAudioDestinationNodeConstructor =\r\n    createMediaStreamAudioDestinationNodeConstructor(\r\n        audioNodeConstructor,\r\n        createNativeMediaStreamAudioDestinationNode,\r\n        getNativeContext,\r\n        isNativeOfflineAudioContext\r\n    );\r\nconst mediaStreamAudioSourceNodeConstructor: TMediaStreamAudioSourceNodeConstructor = createMediaStreamAudioSourceNodeConstructor(\r\n    audioNodeConstructor,\r\n    createNativeMediaStreamAudioSourceNode,\r\n    getNativeContext,\r\n    isNativeOfflineAudioContext\r\n);\r\nconst createNativeMediaStreamTrackAudioSourceNode = createNativeMediaStreamTrackAudioSourceNodeFactory(\r\n    createInvalidStateError,\r\n    isNativeOfflineAudioContext\r\n);\r\nconst mediaStreamTrackAudioSourceNodeConstructor: TMediaStreamTrackAudioSourceNodeConstructor =\r\n    createMediaStreamTrackAudioSourceNodeConstructor(audioNodeConstructor, createNativeMediaStreamTrackAudioSourceNode, getNativeContext);\r\nconst audioContextConstructor: TAudioContextConstructor = createAudioContextConstructor(\r\n    baseAudioContextConstructor,\r\n    createInvalidStateError,\r\n    createNotSupportedError,\r\n    createUnknownError,\r\n    mediaElementAudioSourceNodeConstructor,\r\n    mediaStreamAudioDestinationNodeConstructor,\r\n    mediaStreamAudioSourceNodeConstructor,\r\n    mediaStreamTrackAudioSourceNodeConstructor,\r\n    nativeAudioContextConstructor\r\n);\r\n\r\ntype audioContextConstructor = IAudioContext;\r\n\r\nexport { audioContextConstructor as AudioContext };\r\n\r\nconst getUnrenderedAudioWorkletNodes = createGetUnrenderedAudioWorkletNodes(unrenderedAudioWorkletNodeStore);\r\nconst addUnrenderedAudioWorkletNode = createAddUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes);\r\nconst connectMultipleOutputs = createConnectMultipleOutputs(createIndexSizeError);\r\nconst deleteUnrenderedAudioWorkletNode = createDeleteUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes);\r\nconst disconnectMultipleOutputs = createDisconnectMultipleOutputs(createIndexSizeError);\r\nconst activeAudioWorkletNodeInputsStore: TActiveAudioWorkletNodeInputsStore = new WeakMap();\r\nconst getActiveAudioWorkletNodeInputs = createGetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore, getValueForKey);\r\nconst createNativeAudioWorkletNodeFaker = createNativeAudioWorkletNodeFakerFactory(\r\n    connectMultipleOutputs,\r\n    createIndexSizeError,\r\n    createInvalidStateError,\r\n    createNativeChannelMergerNode,\r\n    createNativeChannelSplitterNode,\r\n    createNativeConstantSourceNode,\r\n    createNativeGainNode,\r\n    createNativeScriptProcessorNode,\r\n    createNotSupportedError,\r\n    disconnectMultipleOutputs,\r\n    exposeCurrentFrameAndCurrentTime,\r\n    getActiveAudioWorkletNodeInputs,\r\n    monitorConnections\r\n);\r\nconst createNativeAudioWorkletNode = createNativeAudioWorkletNodeFactory(\r\n    createInvalidStateError,\r\n    createNativeAudioWorkletNodeFaker,\r\n    createNativeGainNode,\r\n    createNotSupportedError,\r\n    monitorConnections\r\n);\r\nconst createAudioWorkletNodeRenderer = createAudioWorkletNodeRendererFactory(\r\n    connectAudioParam,\r\n    connectMultipleOutputs,\r\n    createNativeAudioBufferSourceNode,\r\n    createNativeChannelMergerNode,\r\n    createNativeChannelSplitterNode,\r\n    createNativeConstantSourceNode,\r\n    createNativeGainNode,\r\n    deleteUnrenderedAudioWorkletNode,\r\n    disconnectMultipleOutputs,\r\n    exposeCurrentFrameAndCurrentTime,\r\n    getNativeAudioNode,\r\n    nativeAudioWorkletNodeConstructor,\r\n    nativeOfflineAudioContextConstructor,\r\n    renderAutomation,\r\n    renderInputsOfAudioNode,\r\n    renderNativeOfflineAudioContext\r\n);\r\nconst getBackupOfflineAudioContext = createGetBackupOfflineAudioContext(backupOfflineAudioContextStore);\r\nconst setActiveAudioWorkletNodeInputs = createSetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore);\r\n\r\n// The AudioWorkletNode constructor is only available in a SecureContext.\r\nconst audioWorkletNodeConstructor: undefined | TAudioWorkletNodeConstructor = isSecureContext\r\n    ? createAudioWorkletNodeConstructor(\r\n          addUnrenderedAudioWorkletNode,\r\n          audioNodeConstructor,\r\n          createAudioParam,\r\n          createAudioWorkletNodeRenderer,\r\n          createNativeAudioWorkletNode,\r\n          getAudioNodeConnections,\r\n          getBackupOfflineAudioContext,\r\n          getNativeContext,\r\n          isNativeOfflineAudioContext,\r\n          nativeAudioWorkletNodeConstructor,\r\n          sanitizeAudioWorkletNodeOptions,\r\n          setActiveAudioWorkletNodeInputs,\r\n          testAudioWorkletNodeOptionsClonability,\r\n          wrapEventListener\r\n      )\r\n    : undefined;\r\n\r\ntype audioWorkletNodeConstructor<T extends TContext> = undefined | IAudioWorkletNode<T>;\r\n\r\nexport { audioWorkletNodeConstructor as AudioWorkletNode };\r\n\r\ntype biquadFilterNodeConstructor<T extends TContext> = IBiquadFilterNode<T>;\r\n\r\nexport { biquadFilterNodeConstructor as BiquadFilterNode };\r\n\r\ntype channelMergerNodeConstructor<T extends TContext> = IAudioNode<T>;\r\n\r\nexport { channelMergerNodeConstructor as ChannelMergerNode };\r\n\r\ntype channelSplitterNodeConstructor<T extends TContext> = IAudioNode<T>;\r\n\r\nexport { channelSplitterNodeConstructor as ChannelSplitterNode };\r\n\r\ntype constantSourceNodeConstructor<T extends TContext> = IConstantSourceNode<T>;\r\n\r\nexport { convolverNodeConstructor as ConvolverNode };\r\n\r\ntype convolverNodeConstructor<T extends TContext> = IConvolverNode<T>;\r\n\r\nexport { constantSourceNodeConstructor as ConstantSourceNode };\r\n\r\ntype delayNodeConstructor<T extends TContext> = IDelayNode<T>;\r\n\r\nexport { delayNodeConstructor as DelayNode };\r\n\r\ntype dynamicsCompressorNodeConstructor<T extends TContext> = IDynamicsCompressorNode<T>;\r\n\r\nexport { dynamicsCompressorNodeConstructor as DynamicsCompressorNode };\r\n\r\ntype gainNodeConstructor<T extends TContext> = IGainNode<T>;\r\n\r\nexport { gainNodeConstructor as GainNode };\r\n\r\ntype iIRFilterNodeConstructor<T extends TContext> = IIIRFilterNode<T>;\r\n\r\nexport { iIRFilterNodeConstructor as IIRFilterNode };\r\n\r\ntype mediaElementAudioSourceNodeConstructor<T extends IAudioContext | IMinimalAudioContext> = IMediaElementAudioSourceNode<T>;\r\n\r\nexport { mediaElementAudioSourceNodeConstructor as MediaElementAudioSourceNode };\r\n\r\ntype mediaStreamAudioDestinationNodeConstructor<T extends IAudioContext | IMinimalAudioContext> = IMediaStreamAudioDestinationNode<T>;\r\n\r\nexport { mediaStreamAudioDestinationNodeConstructor as MediaStreamAudioDestinationNode };\r\n\r\ntype mediaStreamAudioSourceNodeConstructor<T extends IAudioContext | IMinimalAudioContext> = IMediaStreamAudioSourceNode<T>;\r\n\r\nexport { mediaStreamAudioSourceNodeConstructor as MediaStreamAudioSourceNode };\r\n\r\ntype mediaStreamTrackAudioSourceNodeConstructor<T extends IAudioContext | IMinimalAudioContext> = IMediaStreamTrackAudioSourceNode<T>;\r\n\r\nexport { mediaStreamTrackAudioSourceNodeConstructor as MediaStreamTrackAudioSourceNode };\r\n\r\nconst minimalAudioContextConstructor: TMinimalAudioContextConstructor = createMinimalAudioContextConstructor(\r\n    createInvalidStateError,\r\n    createNotSupportedError,\r\n    createUnknownError,\r\n    minimalBaseAudioContextConstructor,\r\n    nativeAudioContextConstructor\r\n);\r\n\r\ntype minimalAudioContextConstructor = IMinimalAudioContext;\r\n\r\nexport { minimalAudioContextConstructor as MinimalAudioContext };\r\n\r\nconst createNativeOfflineAudioContext = createCreateNativeOfflineAudioContext(\r\n    createNotSupportedError,\r\n    nativeOfflineAudioContextConstructor\r\n);\r\nconst startRendering = createStartRendering(\r\n    audioBufferStore,\r\n    cacheTestResult,\r\n    getAudioNodeRenderer,\r\n    getUnrenderedAudioWorkletNodes,\r\n    renderNativeOfflineAudioContext,\r\n    testAudioBufferCopyChannelMethodsOutOfBoundsSupport,\r\n    wrapAudioBufferCopyChannelMethods,\r\n    wrapAudioBufferCopyChannelMethodsOutOfBounds\r\n);\r\nconst minimalOfflineAudioContextConstructor: TMinimalOfflineAudioContextConstructor = createMinimalOfflineAudioContextConstructor(\r\n    cacheTestResult,\r\n    createInvalidStateError,\r\n    createNativeOfflineAudioContext,\r\n    minimalBaseAudioContextConstructor,\r\n    startRendering\r\n);\r\n\r\ntype minimalOfflineAudioContextConstructor = IMinimalOfflineAudioContext;\r\n\r\nexport { minimalOfflineAudioContextConstructor as MinimalOfflineAudioContext };\r\n\r\nconst offlineAudioContextConstructor: IOfflineAudioContextConstructor = createOfflineAudioContextConstructor(\r\n    baseAudioContextConstructor,\r\n    cacheTestResult,\r\n    createInvalidStateError,\r\n    createNativeOfflineAudioContext,\r\n    startRendering\r\n);\r\n\r\ntype offlineAudioContextConstructor = IOfflineAudioContext;\r\n\r\nexport { offlineAudioContextConstructor as OfflineAudioContext };\r\n\r\ntype oscillatorNodeConstructor<T extends TContext> = IOscillatorNode<T>;\r\n\r\nexport { oscillatorNodeConstructor as OscillatorNode };\r\n\r\ntype pannerNodeConstructor<T extends TContext> = IPannerNode<T>;\r\n\r\nexport { pannerNodeConstructor as PannerNode };\r\n\r\ntype periodicWaveConstructor = IPeriodicWave;\r\n\r\nexport { periodicWaveConstructor as PeriodicWave };\r\n\r\ntype stereoPannerNodeConstructor<T extends TContext> = IStereoPannerNode<T>;\r\n\r\nexport { stereoPannerNodeConstructor as StereoPannerNode };\r\n\r\ntype waveShaperNodeConstructor<T extends TContext> = IWaveShaperNode<T>;\r\n\r\nexport { waveShaperNodeConstructor as WaveShaperNode };\r\n\r\nexport const isAnyAudioContext = createIsAnyAudioContext(CONTEXT_STORE, isNativeAudioContext);\r\n\r\nexport const isAnyAudioNode = createIsAnyAudioNode(AUDIO_NODE_STORE, isNativeAudioNode);\r\n\r\nexport const isAnyAudioParam = createIsAnyAudioParam(AUDIO_PARAM_STORE, isNativeAudioParam);\r\n\r\nexport const isAnyOfflineAudioContext = createIsAnyOfflineAudioContext(CONTEXT_STORE, isNativeOfflineAudioContext);\r\n\r\nexport const isSupported = () =>\r\n    createIsSupportedPromise(\r\n        cacheTestResult,\r\n        createTestAudioBufferCopyChannelMethodsSubarraySupport(nativeOfflineAudioContextConstructor),\r\n        createTestAudioContextCloseMethodSupport(nativeAudioContextConstructor),\r\n        createTestAudioContextDecodeAudioDataMethodTypeErrorSupport(nativeOfflineAudioContextConstructor),\r\n        createTestAudioContextOptionsSupport(nativeAudioContextConstructor),\r\n        createTestAudioNodeConnectMethodSupport(nativeOfflineAudioContextConstructor),\r\n        createTestAudioWorkletProcessorNoOutputsSupport(nativeAudioWorkletNodeConstructor, nativeOfflineAudioContextConstructor),\r\n        createTestChannelMergerNodeChannelCountSupport(nativeOfflineAudioContextConstructor),\r\n        createTestConstantSourceNodeAccurateSchedulingSupport(nativeOfflineAudioContextConstructor),\r\n        createTestConvolverNodeBufferReassignabilitySupport(nativeOfflineAudioContextConstructor),\r\n        createTestConvolverNodeChannelCountSupport(nativeOfflineAudioContextConstructor),\r\n        testDomExceptionConstructorSupport,\r\n        createTestIsSecureContextSupport(window),\r\n        createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport(nativeAudioContextConstructor),\r\n        createTestStereoPannerNodeDefaultValueSupport(nativeOfflineAudioContextConstructor),\r\n        testTransferablesSupport\r\n    );\r\n", "import { encode, instantiate } from 'media-encoder-host';\r\nimport { addRecorderAudioWorkletModule, createRecorderAudioWorkletNode } from 'recorder-audio-worklet';\r\nimport {\r\n    AudioBuffer,\r\n    AudioBufferSourceNode,\r\n    AudioWorkletNode,\r\n    ConstantSourceNode,\r\n    IAudioBuffer,\r\n    IMinimalAudioContext,\r\n    MediaStreamAudioSourceNode,\r\n    MinimalAudioContext,\r\n    addAudioWorkletModule\r\n} from 'standardized-audio-context';\r\nimport { IAudioNodesAndEncoderId } from '../interfaces';\r\nimport { TRecordingState, TWebAudioMediaRecorderFactoryFactory } from '../types';\r\n\r\nconst ERROR_MESSAGE = 'Missing AudioWorklet support. Maybe this is not running in a secure context.';\r\n\r\n// @todo This should live in a separate file.\r\nconst createPromisedAudioNodesEncoderIdAndPort = async (\r\n    audioBuffer: IAudioBuffer,\r\n    audioContext: IMinimalAudioContext,\r\n    channelCount: number,\r\n    mediaStream: MediaStream,\r\n    mimeType: string\r\n) => {\r\n    const { encoderId, port } = await instantiate(mimeType, audioContext.sampleRate);\r\n\r\n    if (AudioWorkletNode === undefined) {\r\n        throw new Error(ERROR_MESSAGE);\r\n    }\r\n\r\n    const audioBufferSourceNode = new AudioBufferSourceNode(audioContext, { buffer: audioBuffer });\r\n    const mediaStreamAudioSourceNode = new MediaStreamAudioSourceNode(audioContext, { mediaStream });\r\n    const recorderAudioWorkletNode = createRecorderAudioWorkletNode(AudioWorkletNode, audioContext, { channelCount });\r\n\r\n    return { audioBufferSourceNode, encoderId, mediaStreamAudioSourceNode, port, recorderAudioWorkletNode };\r\n};\r\n\r\nexport const createWebAudioMediaRecorderFactory: TWebAudioMediaRecorderFactoryFactory = (\r\n    createBlobEvent,\r\n    createInvalidModificationError,\r\n    createInvalidStateError,\r\n    createNotSupportedError\r\n) => {\r\n    return (eventTarget, mediaStream, mimeType) => {\r\n        const sampleRate = mediaStream.getAudioTracks()[0]?.getSettings().sampleRate;\r\n        const audioContext = new MinimalAudioContext({ latencyHint: 'playback', sampleRate });\r\n        const length = Math.max(1024, Math.ceil(audioContext.baseLatency * audioContext.sampleRate));\r\n        const audioBuffer = new AudioBuffer({ length, sampleRate: audioContext.sampleRate });\r\n        const bufferedArrayBuffers: ArrayBuffer[] = [];\r\n        const promisedAudioWorkletModule = addRecorderAudioWorkletModule((url: string) => {\r\n            if (addAudioWorkletModule === undefined) {\r\n                throw new Error(ERROR_MESSAGE);\r\n            }\r\n\r\n            return addAudioWorkletModule(audioContext, url);\r\n        });\r\n\r\n        let abortRecording: null | (() => void) = null;\r\n        let intervalId: null | number = null;\r\n        let promisedAudioNodesAndEncoderId: null | Promise<IAudioNodesAndEncoderId> = null;\r\n        let promisedPartialRecording: null | Promise<void> = null;\r\n        let isAudioContextRunning = true;\r\n\r\n        const dispatchDataAvailableEvent = (arrayBuffers: ArrayBuffer[]): void => {\r\n            eventTarget.dispatchEvent(createBlobEvent('dataavailable', { data: new Blob(arrayBuffers, { type: mimeType }) }));\r\n        };\r\n\r\n        const requestNextPartialRecording = async (encoderId: number, timeslice: number): Promise<void> => {\r\n            const arrayBuffers = await encode(encoderId, timeslice);\r\n\r\n            if (promisedAudioNodesAndEncoderId === null) {\r\n                bufferedArrayBuffers.push(...arrayBuffers);\r\n            } else {\r\n                dispatchDataAvailableEvent(arrayBuffers);\r\n\r\n                promisedPartialRecording = requestNextPartialRecording(encoderId, timeslice);\r\n            }\r\n        };\r\n\r\n        const resume = (): Promise<void> => {\r\n            isAudioContextRunning = true;\r\n\r\n            return audioContext.resume();\r\n        };\r\n\r\n        const stop = (): void => {\r\n            if (promisedAudioNodesAndEncoderId === null) {\r\n                return;\r\n            }\r\n\r\n            if (abortRecording !== null) {\r\n                mediaStream.removeEventListener('addtrack', abortRecording);\r\n                mediaStream.removeEventListener('removetrack', abortRecording);\r\n            }\r\n\r\n            if (intervalId !== null) {\r\n                clearTimeout(intervalId);\r\n            }\r\n\r\n            promisedAudioNodesAndEncoderId.then(\r\n                async ({ constantSourceNode, encoderId, mediaStreamAudioSourceNode, recorderAudioWorkletNode }) => {\r\n                    if (promisedPartialRecording !== null) {\r\n                        promisedPartialRecording.catch(() => {\r\n                            /* @todo Only catch the errors caused by a duplicate call to encode. */\r\n                        });\r\n                        promisedPartialRecording = null;\r\n                    }\r\n\r\n                    await recorderAudioWorkletNode.stop();\r\n\r\n                    mediaStreamAudioSourceNode.disconnect(recorderAudioWorkletNode);\r\n                    constantSourceNode.stop();\r\n\r\n                    const arrayBuffers = await encode(encoderId, null);\r\n\r\n                    if (promisedAudioNodesAndEncoderId === null) {\r\n                        await suspend();\r\n                    }\r\n\r\n                    dispatchDataAvailableEvent([...bufferedArrayBuffers, ...arrayBuffers]);\r\n\r\n                    bufferedArrayBuffers.length = 0;\r\n\r\n                    eventTarget.dispatchEvent(new Event('stop'));\r\n                }\r\n            );\r\n\r\n            promisedAudioNodesAndEncoderId = null;\r\n        };\r\n\r\n        const suspend = (): Promise<void> => {\r\n            isAudioContextRunning = false;\r\n\r\n            return audioContext.suspend();\r\n        };\r\n\r\n        suspend();\r\n\r\n        return {\r\n            get mimeType(): string {\r\n                return mimeType;\r\n            },\r\n\r\n            get state(): TRecordingState {\r\n                return promisedAudioNodesAndEncoderId === null ? 'inactive' : isAudioContextRunning ? 'recording' : 'paused';\r\n            },\r\n\r\n            pause(): void {\r\n                if (promisedAudioNodesAndEncoderId === null) {\r\n                    throw createInvalidStateError();\r\n                }\r\n\r\n                if (isAudioContextRunning) {\r\n                    suspend();\r\n                    eventTarget.dispatchEvent(new Event('pause'));\r\n                }\r\n            },\r\n\r\n            resume(): void {\r\n                if (promisedAudioNodesAndEncoderId === null) {\r\n                    throw createInvalidStateError();\r\n                }\r\n\r\n                if (!isAudioContextRunning) {\r\n                    resume();\r\n                    eventTarget.dispatchEvent(new Event('resume'));\r\n                }\r\n            },\r\n\r\n            start(timeslice?: number): void {\r\n                if (promisedAudioNodesAndEncoderId !== null) {\r\n                    throw createInvalidStateError();\r\n                }\r\n\r\n                if (mediaStream.getVideoTracks().length > 0) {\r\n                    throw createNotSupportedError();\r\n                }\r\n\r\n                eventTarget.dispatchEvent(new Event('start'));\r\n\r\n                const audioTracks = mediaStream.getAudioTracks();\r\n                // @todo TypeScript v4.4.2 removed the channelCount property from the MediaTrackSettings interface.\r\n                const channelCount =\r\n                    audioTracks.length === 0\r\n                        ? 2\r\n                        : (<MediaTrackSettings & { channelCount?: number }>audioTracks[0].getSettings()).channelCount ?? 2;\r\n\r\n                promisedAudioNodesAndEncoderId = Promise.all([\r\n                    resume(),\r\n                    promisedAudioWorkletModule.then(() =>\r\n                        createPromisedAudioNodesEncoderIdAndPort(audioBuffer, audioContext, channelCount, mediaStream, mimeType)\r\n                    )\r\n                ]).then(async ([, { audioBufferSourceNode, encoderId, mediaStreamAudioSourceNode, port, recorderAudioWorkletNode }]) => {\r\n                    mediaStreamAudioSourceNode.connect(recorderAudioWorkletNode);\r\n\r\n                    await new Promise((resolve) => {\r\n                        audioBufferSourceNode.onended = resolve;\r\n                        audioBufferSourceNode.connect(recorderAudioWorkletNode);\r\n                        audioBufferSourceNode.start(audioContext.currentTime + length / audioContext.sampleRate);\r\n                    });\r\n\r\n                    audioBufferSourceNode.disconnect(recorderAudioWorkletNode);\r\n\r\n                    // Bug #17: Safari does throttle the processing on hidden tabs if there is no active audio output.\r\n                    const constantSourceNode = new ConstantSourceNode(audioContext, { offset: 0 });\r\n\r\n                    constantSourceNode.onended = () => constantSourceNode.disconnect();\r\n                    constantSourceNode.connect(audioContext.destination);\r\n                    constantSourceNode.start();\r\n\r\n                    await recorderAudioWorkletNode.record(port);\r\n\r\n                    if (timeslice !== undefined) {\r\n                        promisedPartialRecording = requestNextPartialRecording(encoderId, timeslice);\r\n                    }\r\n\r\n                    return { constantSourceNode, encoderId, mediaStreamAudioSourceNode, recorderAudioWorkletNode };\r\n                });\r\n\r\n                const tracks = mediaStream.getTracks();\r\n\r\n                abortRecording = () => {\r\n                    stop();\r\n                    eventTarget.dispatchEvent(new ErrorEvent('error', { error: createInvalidModificationError() }));\r\n                };\r\n\r\n                mediaStream.addEventListener('addtrack', abortRecording);\r\n                mediaStream.addEventListener('removetrack', abortRecording);\r\n\r\n                intervalId = setInterval(() => {\r\n                    const currentTracks = mediaStream.getTracks();\r\n\r\n                    if (\r\n                        (currentTracks.length !== tracks.length || currentTracks.some((track, index) => track !== tracks[index])) &&\r\n                        abortRecording !== null\r\n                    ) {\r\n                        abortRecording();\r\n                    }\r\n                }, 1000);\r\n            },\r\n\r\n            stop\r\n        };\r\n    };\r\n};\r\n", "export class MultiBufferDataView\r\n    implements Omit<DataView, 'buffer' | 'getBigInt64' | 'getBigUint64' | 'setBigInt64' | 'setBigUint64' | symbol>\r\n{\r\n    private _buffers: ArrayBuffer[];\r\n\r\n    private _byteLength: number;\r\n\r\n    private _byteOffset: number;\r\n\r\n    private _dataViews: DataView[];\r\n\r\n    private _internalBuffer: DataView;\r\n\r\n    constructor(buffers: ArrayBuffer[], byteOffset = 0, byteLength?: number) {\r\n        if (byteOffset < 0 || (byteLength !== undefined && byteLength < 0)) {\r\n            throw new RangeError();\r\n        }\r\n\r\n        const availableBytes = buffers.reduce((length, buffer) => length + buffer.byteLength, 0);\r\n\r\n        if (byteOffset > availableBytes || (byteLength !== undefined && byteOffset + byteLength > availableBytes)) {\r\n            throw new RangeError();\r\n        }\r\n\r\n        const dataViews = [];\r\n        const effectiveByteLength = byteLength === undefined ? availableBytes - byteOffset : byteLength;\r\n        const truncatedBuffers = [];\r\n\r\n        let consumedByteLength = 0;\r\n        let truncatedByteOffset = byteOffset;\r\n\r\n        for (const buffer of buffers) {\r\n            if (truncatedBuffers.length === 0) {\r\n                if (buffer.byteLength > truncatedByteOffset) {\r\n                    consumedByteLength = buffer.byteLength - truncatedByteOffset;\r\n\r\n                    const byteLengthOfDataView = consumedByteLength > effectiveByteLength ? effectiveByteLength : consumedByteLength;\r\n\r\n                    dataViews.push(new DataView(buffer, truncatedByteOffset, byteLengthOfDataView));\r\n                    truncatedBuffers.push(buffer);\r\n                } else {\r\n                    truncatedByteOffset -= buffer.byteLength;\r\n                }\r\n            } else if (consumedByteLength < effectiveByteLength) {\r\n                consumedByteLength += buffer.byteLength;\r\n\r\n                const byteLengthOfDataView =\r\n                    consumedByteLength > effectiveByteLength\r\n                        ? buffer.byteLength - consumedByteLength + effectiveByteLength\r\n                        : buffer.byteLength;\r\n\r\n                dataViews.push(new DataView(buffer, 0, byteLengthOfDataView));\r\n                truncatedBuffers.push(buffer);\r\n            }\r\n        }\r\n\r\n        this._buffers = truncatedBuffers;\r\n        this._byteLength = effectiveByteLength;\r\n        this._byteOffset = truncatedByteOffset;\r\n        this._dataViews = dataViews;\r\n        this._internalBuffer = new DataView(new ArrayBuffer(8));\r\n    }\r\n\r\n    get buffers(): ArrayBuffer[] {\r\n        return this._buffers;\r\n    }\r\n\r\n    get byteLength(): number {\r\n        return this._byteLength;\r\n    }\r\n\r\n    get byteOffset(): number {\r\n        return this._byteOffset;\r\n    }\r\n\r\n    public getFloat32(byteOffset: number, littleEndian?: boolean): number {\r\n        this._internalBuffer.setUint8(0, this.getUint8(byteOffset + 0));\r\n        this._internalBuffer.setUint8(1, this.getUint8(byteOffset + 1));\r\n        this._internalBuffer.setUint8(2, this.getUint8(byteOffset + 2));\r\n        this._internalBuffer.setUint8(3, this.getUint8(byteOffset + 3));\r\n\r\n        return this._internalBuffer.getFloat32(0, littleEndian);\r\n    }\r\n\r\n    public getFloat64(byteOffset: number, littleEndian?: boolean): number {\r\n        this._internalBuffer.setUint8(0, this.getUint8(byteOffset + 0));\r\n        this._internalBuffer.setUint8(1, this.getUint8(byteOffset + 1));\r\n        this._internalBuffer.setUint8(2, this.getUint8(byteOffset + 2));\r\n        this._internalBuffer.setUint8(3, this.getUint8(byteOffset + 3));\r\n        this._internalBuffer.setUint8(4, this.getUint8(byteOffset + 4));\r\n        this._internalBuffer.setUint8(5, this.getUint8(byteOffset + 5));\r\n        this._internalBuffer.setUint8(6, this.getUint8(byteOffset + 6));\r\n        this._internalBuffer.setUint8(7, this.getUint8(byteOffset + 7));\r\n\r\n        return this._internalBuffer.getFloat64(0, littleEndian);\r\n    }\r\n\r\n    public getInt16(byteOffset: number, littleEndian?: boolean): number {\r\n        this._internalBuffer.setUint8(0, this.getUint8(byteOffset + 0));\r\n        this._internalBuffer.setUint8(1, this.getUint8(byteOffset + 1));\r\n\r\n        return this._internalBuffer.getInt16(0, littleEndian);\r\n    }\r\n\r\n    public getInt32(byteOffset: number, littleEndian?: boolean): number {\r\n        this._internalBuffer.setUint8(0, this.getUint8(byteOffset + 0));\r\n        this._internalBuffer.setUint8(1, this.getUint8(byteOffset + 1));\r\n        this._internalBuffer.setUint8(2, this.getUint8(byteOffset + 2));\r\n        this._internalBuffer.setUint8(3, this.getUint8(byteOffset + 3));\r\n\r\n        return this._internalBuffer.getInt32(0, littleEndian);\r\n    }\r\n\r\n    public getInt8(byteOffset: number): number {\r\n        const [dataView, byteOffsetOfDataView] = this._findDataViewWithOffset(byteOffset);\r\n\r\n        return dataView.getInt8(byteOffset - byteOffsetOfDataView);\r\n    }\r\n\r\n    public getUint16(byteOffset: number, littleEndian?: boolean): number {\r\n        this._internalBuffer.setUint8(0, this.getUint8(byteOffset + 0));\r\n        this._internalBuffer.setUint8(1, this.getUint8(byteOffset + 1));\r\n\r\n        return this._internalBuffer.getUint16(0, littleEndian);\r\n    }\r\n\r\n    public getUint32(byteOffset: number, littleEndian?: boolean): number {\r\n        this._internalBuffer.setUint8(0, this.getUint8(byteOffset + 0));\r\n        this._internalBuffer.setUint8(1, this.getUint8(byteOffset + 1));\r\n        this._internalBuffer.setUint8(2, this.getUint8(byteOffset + 2));\r\n        this._internalBuffer.setUint8(3, this.getUint8(byteOffset + 3));\r\n\r\n        return this._internalBuffer.getUint32(0, littleEndian);\r\n    }\r\n\r\n    public getUint8(byteOffset: number): number {\r\n        const [dataView, byteOffsetOfDataView] = this._findDataViewWithOffset(byteOffset);\r\n\r\n        return dataView.getUint8(byteOffset - byteOffsetOfDataView);\r\n    }\r\n\r\n    public setFloat32(byteOffset: number, value: number, littleEndian?: boolean): void {\r\n        this._internalBuffer.setFloat32(0, value, littleEndian);\r\n\r\n        this.setUint8(byteOffset, this._internalBuffer.getUint8(0));\r\n        this.setUint8(byteOffset + 1, this._internalBuffer.getUint8(1));\r\n        this.setUint8(byteOffset + 2, this._internalBuffer.getUint8(2));\r\n        this.setUint8(byteOffset + 3, this._internalBuffer.getUint8(3));\r\n    }\r\n\r\n    public setFloat64(byteOffset: number, value: number, littleEndian?: boolean): void {\r\n        this._internalBuffer.setFloat64(0, value, littleEndian);\r\n\r\n        this.setUint8(byteOffset, this._internalBuffer.getUint8(0));\r\n        this.setUint8(byteOffset + 1, this._internalBuffer.getUint8(1));\r\n        this.setUint8(byteOffset + 2, this._internalBuffer.getUint8(2));\r\n        this.setUint8(byteOffset + 3, this._internalBuffer.getUint8(3));\r\n        this.setUint8(byteOffset + 4, this._internalBuffer.getUint8(4));\r\n        this.setUint8(byteOffset + 5, this._internalBuffer.getUint8(5));\r\n        this.setUint8(byteOffset + 6, this._internalBuffer.getUint8(6));\r\n        this.setUint8(byteOffset + 7, this._internalBuffer.getUint8(7));\r\n    }\r\n\r\n    public setInt16(byteOffset: number, value: number, littleEndian?: boolean): void {\r\n        this._internalBuffer.setInt16(0, value, littleEndian);\r\n\r\n        this.setUint8(byteOffset, this._internalBuffer.getUint8(0));\r\n        this.setUint8(byteOffset + 1, this._internalBuffer.getUint8(1));\r\n    }\r\n\r\n    public setInt32(byteOffset: number, value: number, littleEndian?: boolean): void {\r\n        this._internalBuffer.setInt32(0, value, littleEndian);\r\n\r\n        this.setUint8(byteOffset, this._internalBuffer.getUint8(0));\r\n        this.setUint8(byteOffset + 1, this._internalBuffer.getUint8(1));\r\n        this.setUint8(byteOffset + 2, this._internalBuffer.getUint8(2));\r\n        this.setUint8(byteOffset + 3, this._internalBuffer.getUint8(3));\r\n    }\r\n\r\n    public setInt8(byteOffset: number, value: number): void {\r\n        const [dataView, byteOffsetOfDataView] = this._findDataViewWithOffset(byteOffset);\r\n\r\n        dataView.setInt8(byteOffset - byteOffsetOfDataView, value);\r\n    }\r\n\r\n    public setUint16(byteOffset: number, value: number, littleEndian?: boolean): void {\r\n        this._internalBuffer.setUint16(0, value, littleEndian);\r\n\r\n        this.setUint8(byteOffset, this._internalBuffer.getUint8(0));\r\n        this.setUint8(byteOffset + 1, this._internalBuffer.getUint8(1));\r\n    }\r\n\r\n    public setUint32(byteOffset: number, value: number, littleEndian?: boolean): void {\r\n        this._internalBuffer.setUint32(0, value, littleEndian);\r\n\r\n        this.setUint8(byteOffset, this._internalBuffer.getUint8(0));\r\n        this.setUint8(byteOffset + 1, this._internalBuffer.getUint8(1));\r\n        this.setUint8(byteOffset + 2, this._internalBuffer.getUint8(2));\r\n        this.setUint8(byteOffset + 3, this._internalBuffer.getUint8(3));\r\n    }\r\n\r\n    public setUint8(byteOffset: number, value: number): void {\r\n        const [dataView, byteOffsetOfDataView] = this._findDataViewWithOffset(byteOffset);\r\n\r\n        dataView.setUint8(byteOffset - byteOffsetOfDataView, value);\r\n    }\r\n\r\n    private _findDataViewWithOffset(byteOffset: number): [DataView, number] {\r\n        let byteOffsetOfDataView = 0;\r\n\r\n        for (const dataView of this._dataViews) {\r\n            const byteOffsetOfNextDataView = byteOffsetOfDataView + dataView.byteLength;\r\n\r\n            if (byteOffset >= byteOffsetOfDataView && byteOffset < byteOffsetOfNextDataView) {\r\n                return [dataView, byteOffsetOfDataView];\r\n            }\r\n\r\n            byteOffsetOfDataView = byteOffsetOfNextDataView;\r\n        }\r\n\r\n        throw new RangeError();\r\n    }\r\n}\r\n", "export { MultiBufferDataView } from './classes/multi-buffer-data-view';\r\n", "import { encode, instantiate } from 'media-encoder-host';\r\nimport { MultiBufferDataView } from 'multi-buffer-data-view';\r\nimport { on } from 'subscribable-things';\r\nimport { TPromisedDataViewElementTypeEncoderIdAndPort, TRecordingState, TWebmPcmMediaRecorderFactoryFactory } from '../types';\r\n\r\nexport const createWebmPcmMediaRecorderFactory: TWebmPcmMediaRecorderFactoryFactory = (\r\n    createBlobEvent,\r\n    createInvalidModificationError,\r\n    createNotSupportedError,\r\n    decodeWebMChunk,\r\n    readVariableSizeInteger\r\n) => {\r\n    return (eventTarget, nativeMediaRecorderConstructor, mediaStream, mimeType) => {\r\n        const audioTracks = mediaStream.getAudioTracks();\r\n        const bufferedArrayBuffers: ArrayBuffer[] = [];\r\n        // @todo TypeScript v4.4.2 removed the channelCount property from the MediaTrackSettings interface.\r\n        const channelCount =\r\n            audioTracks.length === 0\r\n                ? undefined\r\n                : (<MediaTrackSettings & { channelCount?: number }>audioTracks[0].getSettings()).channelCount;\r\n        const nativeMediaRecorder = new nativeMediaRecorderConstructor(mediaStream, { mimeType: 'audio/webm;codecs=pcm' });\r\n        const sampleRate = audioTracks.length === 0 ? undefined : audioTracks[0].getSettings().sampleRate;\r\n\r\n        let promisedPartialRecording: null | Promise<void> = null;\r\n        let stopRecording = () => {}; // tslint:disable-line:no-empty\r\n\r\n        const dispatchDataAvailableEvent = (arrayBuffers: ArrayBuffer[]): void => {\r\n            eventTarget.dispatchEvent(createBlobEvent('dataavailable', { data: new Blob(arrayBuffers, { type: mimeType }) }));\r\n        };\r\n\r\n        const requestNextPartialRecording = async (encoderId: number, timeslice: number): Promise<void> => {\r\n            const arrayBuffers = await encode(encoderId, timeslice);\r\n\r\n            if (nativeMediaRecorder.state === 'inactive') {\r\n                bufferedArrayBuffers.push(...arrayBuffers);\r\n            } else {\r\n                dispatchDataAvailableEvent(arrayBuffers);\r\n\r\n                promisedPartialRecording = requestNextPartialRecording(encoderId, timeslice);\r\n            }\r\n        };\r\n\r\n        const stop = (): void => {\r\n            if (nativeMediaRecorder.state === 'inactive') {\r\n                return;\r\n            }\r\n\r\n            if (promisedPartialRecording !== null) {\r\n                promisedPartialRecording.catch(() => {\r\n                    /* @todo Only catch the errors caused by a duplicate call to encode. */\r\n                });\r\n                promisedPartialRecording = null;\r\n            }\r\n\r\n            stopRecording();\r\n            stopRecording = () => {}; // tslint:disable-line:no-empty\r\n\r\n            nativeMediaRecorder.stop();\r\n        };\r\n\r\n        nativeMediaRecorder.addEventListener('error', () => {\r\n            stop();\r\n            // Bug #3 & #4: Chrome throws an error event without any error.\r\n            eventTarget.dispatchEvent(new ErrorEvent('error', { error: createInvalidModificationError() }));\r\n        });\r\n        nativeMediaRecorder.addEventListener('start', () => eventTarget.dispatchEvent(new Event('start')));\r\n\r\n        return {\r\n            get mimeType(): string {\r\n                return mimeType;\r\n            },\r\n\r\n            get state(): TRecordingState {\r\n                return nativeMediaRecorder.state;\r\n            },\r\n\r\n            pause(): void {\r\n                return nativeMediaRecorder.pause();\r\n            },\r\n\r\n            resume(): void {\r\n                return nativeMediaRecorder.resume();\r\n            },\r\n\r\n            start(timeslice?: number): void {\r\n                /*\r\n                 * Bug #6: Chrome will emit a blob without any data when asked to encode a MediaStream with a video track into an audio\r\n                 * codec.\r\n                 */\r\n                if (mediaStream.getVideoTracks().length > 0) {\r\n                    throw createNotSupportedError();\r\n                }\r\n\r\n                if (nativeMediaRecorder.state === 'inactive') {\r\n                    if (sampleRate === undefined) {\r\n                        throw new Error('The sampleRate is not defined.');\r\n                    }\r\n\r\n                    let isRecording = false;\r\n                    let isStopped = false;\r\n                    // Bug #9: Chrome sometimes fires more than one dataavailable event while being inactive.\r\n                    let pendingInvocations = 0;\r\n                    let promisedDataViewElementTypeEncoderIdAndPort: TPromisedDataViewElementTypeEncoderIdAndPort = instantiate(\r\n                        mimeType,\r\n                        sampleRate\r\n                    );\r\n\r\n                    stopRecording = () => {\r\n                        isStopped = true;\r\n                    };\r\n\r\n                    const removeEventListener = on(\r\n                        nativeMediaRecorder,\r\n                        'dataavailable'\r\n                    )(({ data }) => {\r\n                        pendingInvocations += 1;\r\n\r\n                        promisedDataViewElementTypeEncoderIdAndPort = promisedDataViewElementTypeEncoderIdAndPort.then(\r\n                            async ({ dataView = null, elementType = null, encoderId, port }) => {\r\n                                const arrayBuffer = await data.arrayBuffer();\r\n\r\n                                pendingInvocations -= 1;\r\n\r\n                                const currentDataView =\r\n                                    dataView === null\r\n                                        ? new MultiBufferDataView([arrayBuffer])\r\n                                        : new MultiBufferDataView([...dataView.buffers, arrayBuffer], dataView.byteOffset);\r\n\r\n                                if (!isRecording && nativeMediaRecorder.state === 'recording' && !isStopped) {\r\n                                    const lengthAndValue = readVariableSizeInteger(currentDataView, 0);\r\n\r\n                                    if (lengthAndValue === null) {\r\n                                        return { dataView: currentDataView, elementType, encoderId, port };\r\n                                    }\r\n\r\n                                    const { value } = lengthAndValue;\r\n\r\n                                    if (value !== 172351395) {\r\n                                        return { dataView, elementType, encoderId, port };\r\n                                    }\r\n\r\n                                    isRecording = true;\r\n                                }\r\n\r\n                                const { currentElementType, offset, contents } = decodeWebMChunk(\r\n                                    currentDataView,\r\n                                    elementType,\r\n                                    channelCount\r\n                                );\r\n                                const remainingDataView =\r\n                                    offset < currentDataView.byteLength\r\n                                        ? new MultiBufferDataView(currentDataView.buffers, currentDataView.byteOffset + offset)\r\n                                        : null;\r\n\r\n                                contents.forEach((content) =>\r\n                                    port.postMessage(\r\n                                        content,\r\n                                        content.map(({ buffer }) => buffer)\r\n                                    )\r\n                                );\r\n\r\n                                if (pendingInvocations === 0 && (nativeMediaRecorder.state === 'inactive' || isStopped)) {\r\n                                    encode(encoderId, null).then((arrayBuffers) => {\r\n                                        dispatchDataAvailableEvent([...bufferedArrayBuffers, ...arrayBuffers]);\r\n\r\n                                        bufferedArrayBuffers.length = 0;\r\n\r\n                                        eventTarget.dispatchEvent(new Event('stop'));\r\n                                    });\r\n\r\n                                    port.postMessage([]);\r\n                                    port.close();\r\n\r\n                                    removeEventListener();\r\n                                }\r\n\r\n                                return { dataView: remainingDataView, elementType: currentElementType, encoderId, port };\r\n                            }\r\n                        );\r\n                    });\r\n\r\n                    if (timeslice !== undefined) {\r\n                        promisedDataViewElementTypeEncoderIdAndPort.then(\r\n                            ({ encoderId }) => (promisedPartialRecording = requestNextPartialRecording(encoderId, timeslice))\r\n                        );\r\n                    }\r\n                }\r\n\r\n                nativeMediaRecorder.start(100);\r\n            },\r\n\r\n            stop\r\n        };\r\n    };\r\n};\r\n", "import { TWindow, TWindowFactory } from '../types';\r\n\r\nexport const createWindow: TWindowFactory = () => (typeof window === 'undefined' ? null : <TWindow>window);\r\n", "import { TReadVariableSizeIntegerLengthFunction } from '../types';\r\n\r\nexport const readVariableSizeIntegerLength: TReadVariableSizeIntegerLengthFunction = (dataView, offset) => {\r\n    if (offset >= dataView.byteLength) {\r\n        return null;\r\n    }\r\n\r\n    const byte = dataView.getUint8(offset);\r\n\r\n    if (byte > 127) {\r\n        return 1;\r\n    }\r\n\r\n    if (byte > 63) {\r\n        return 2;\r\n    }\r\n\r\n    if (byte > 31) {\r\n        return 3;\r\n    }\r\n\r\n    if (byte > 15) {\r\n        return 4;\r\n    }\r\n\r\n    if (byte > 7) {\r\n        return 5;\r\n    }\r\n\r\n    if (byte > 3) {\r\n        return 6;\r\n    }\r\n\r\n    if (byte > 1) {\r\n        return 7;\r\n    }\r\n\r\n    if (byte > 0) {\r\n        return 8;\r\n    }\r\n\r\n    const length = readVariableSizeIntegerLength(dataView, offset + 1);\r\n\r\n    return length === null ? null : length + 8;\r\n};\r\n", "import { TWrapEventListenerFunction } from '../types';\r\n\r\nexport const wrapEventListener: TWrapEventListenerFunction = (target, eventListener) => {\r\n    return (event) => {\r\n        const descriptor = { value: target };\r\n\r\n        Object.defineProperties(event, {\r\n            currentTarget: descriptor,\r\n            target: descriptor\r\n        });\r\n\r\n        if (typeof eventListener === 'function') {\r\n            return eventListener.call(target, event);\r\n        }\r\n\r\n        return eventListener.handleEvent.call(target, event);\r\n    };\r\n};\r\n", "export {};\r\n//# sourceMappingURL=audio-nodes-and-encoder-id.js.map", "export {};\r\n//# sourceMappingURL=blob-event.js.map", "export {};\r\n//# sourceMappingURL=blob-event-init.js.map", "export {};\r\n//# sourceMappingURL=event-target.js.map", "export {};\r\n//# sourceMappingURL=media-recorder.js.map", "export {};\r\n//# sourceMappingURL=media-recorder-constructor.js.map", "export {};\r\n//# sourceMappingURL=media-recorder-event-map.js.map", "export {};\r\n//# sourceMappingURL=media-recorder-options.js.map", "export * from './audio-nodes-and-encoder-id';\r\nexport * from './blob-event';\r\nexport * from './blob-event-init';\r\nexport * from './event-target';\r\nexport * from './media-recorder';\r\nexport * from './media-recorder-constructor';\r\nexport * from './media-recorder-event-map';\r\nexport * from './media-recorder-options';\r\n", "export {};\r\n//# sourceMappingURL=blob-event-constructor.js.map", "export {};\r\n//# sourceMappingURL=blob-event-handler.js.map", "export {};\r\n//# sourceMappingURL=blob-event-factory.js.map", "export {};\r\n//# sourceMappingURL=blob-event-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=decode-web-m-chunk-factory.js.map", "export {};\r\n//# sourceMappingURL=decode-web-m-chunk-function.js.map", "export {};\r\n//# sourceMappingURL=element-type.js.map", "export {};\r\n//# sourceMappingURL=error-event-handler.js.map", "export {};\r\n//# sourceMappingURL=event-handler.js.map", "export {};\r\n//# sourceMappingURL=event-target-constructor.js.map", "export {};\r\n//# sourceMappingURL=event-target-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=event-target-factory.js.map", "export {};\r\n//# sourceMappingURL=event-target-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=invalid-modification-error-factory.js.map", "export {};\r\n//# sourceMappingURL=invalid-state-error-factory.js.map", "export {};\r\n//# sourceMappingURL=is-supported-promise-factory.js.map", "export {};\r\n//# sourceMappingURL=media-recorder-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=native-blob-event-factory.js.map", "export {};\r\n//# sourceMappingURL=native-event-target.js.map", "export {};\r\n//# sourceMappingURL=native-media-recorder-constructor-factory.js.map", "export {};\r\n//# sourceMappingURL=native-media-recorder-factory.js.map", "export {};\r\n//# sourceMappingURL=native-media-recorder-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=not-supported-error-factory.js.map", "export {};\r\n//# sourceMappingURL=promised-data-view-element-type-encoder-id-and-port.js.map", "export {};\r\n//# sourceMappingURL=read-element-content-factory.js.map", "export {};\r\n//# sourceMappingURL=read-element-content-function.js.map", "export {};\r\n//# sourceMappingURL=read-element-type-factory.js.map", "export {};\r\n//# sourceMappingURL=read-element-type-function.js.map", "export {};\r\n//# sourceMappingURL=read-variable-size-integer-factory.js.map", "export {};\r\n//# sourceMappingURL=read-variable-size-integer-function.js.map", "export {};\r\n//# sourceMappingURL=read-variable-size-integer-length-function.js.map", "export {};\r\n//# sourceMappingURL=recording-state.js.map", "export {};\r\n//# sourceMappingURL=web-audio-media-recorder-factory.js.map", "export {};\r\n//# sourceMappingURL=web-audio-media-recorder-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=webm-pcm-media-recorder-factory.js.map", "export {};\r\n//# sourceMappingURL=webm-pcm-media-recorder-factory-factory.js.map", "export {};\r\n//# sourceMappingURL=window.js.map", "export {};\r\n//# sourceMappingURL=window-factory.js.map", "export {};\r\n//# sourceMappingURL=wrap-event-listener-function.js.map", "export * from './blob-event-constructor';\r\nexport * from './blob-event-handler';\r\nexport * from './blob-event-factory';\r\nexport * from './blob-event-factory-factory';\r\nexport * from './decode-web-m-chunk-factory';\r\nexport * from './decode-web-m-chunk-function';\r\nexport * from './element-type';\r\nexport * from './error-event-handler';\r\nexport * from './event-handler';\r\nexport * from './event-target-constructor';\r\nexport * from './event-target-constructor-factory';\r\nexport * from './event-target-factory';\r\nexport * from './event-target-factory-factory';\r\nexport * from './invalid-modification-error-factory';\r\nexport * from './invalid-state-error-factory';\r\nexport * from './is-supported-promise-factory';\r\nexport * from './media-recorder-constructor-factory';\r\nexport * from './native-blob-event-factory';\r\nexport * from './native-event-target';\r\nexport * from './native-media-recorder-constructor-factory';\r\nexport * from './native-media-recorder-factory';\r\nexport * from './native-media-recorder-factory-factory';\r\nexport * from './not-supported-error-factory';\r\nexport * from './promised-data-view-element-type-encoder-id-and-port';\r\nexport * from './read-element-content-factory';\r\nexport * from './read-element-content-function';\r\nexport * from './read-element-type-factory';\r\nexport * from './read-element-type-function';\r\nexport * from './read-variable-size-integer-factory';\r\nexport * from './read-variable-size-integer-function';\r\nexport * from './read-variable-size-integer-length-function';\r\nexport * from './recording-state';\r\nexport * from './web-audio-media-recorder-factory';\r\nexport * from './web-audio-media-recorder-factory-factory';\r\nexport * from './webm-pcm-media-recorder-factory';\r\nexport * from './webm-pcm-media-recorder-factory-factory';\r\nexport * from './window';\r\nexport * from './window-factory';\r\nexport * from './wrap-event-listener-function';\r\n", "import { register as rgstr } from 'media-encoder-host';\r\nimport { createBlobEventFactory } from './factories/blob-event-factory';\r\nimport { createDecodeWebMChunk } from './factories/decode-web-m-chunk';\r\nimport { createEventTargetConstructor } from './factories/event-target-constructor';\r\nimport { createEventTargetFactory } from './factories/event-target-factory';\r\nimport { createInvalidModificationError } from './factories/invalid-modification-error';\r\nimport { createInvalidStateError } from './factories/invalid-state-error';\r\nimport { createIsSupportedPromise } from './factories/is-supported-promise';\r\nimport { createMediaRecorderConstructor } from './factories/media-recorder-constructor';\r\nimport { createNativeBlobEventConstructor } from './factories/native-blob-event-constructor';\r\nimport { createNativeMediaRecorderFactory } from './factories/native-media-recorder';\r\nimport { createNativeMediaRecorderConstructor } from './factories/native-media-recorder-constructor';\r\nimport { createNotSupportedError } from './factories/not-supported-error';\r\nimport { createReadElementContent } from './factories/read-element-content';\r\nimport { createReadElementType } from './factories/read-element-type';\r\nimport { createReadVariableSizeInteger } from './factories/read-variable-size-integer';\r\nimport { createWebAudioMediaRecorderFactory } from './factories/web-audio-media-recorder';\r\nimport { createWebmPcmMediaRecorderFactory } from './factories/webm-pcm-media-recorder';\r\nimport { createWindow } from './factories/window';\r\nimport { readVariableSizeIntegerLength } from './functions/read-variable-size-integer-length';\r\nimport { wrapEventListener } from './functions/wrap-event-listener';\r\nimport { IMediaRecorderConstructor } from './interfaces';\r\n\r\n/*\r\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\r\n * isolatedModules compiler option.\r\n */\r\nexport * from './interfaces/index';\r\nexport * from './types/index';\r\n\r\nconst encoderRegexes: RegExp[] = [];\r\n\r\nconst window = createWindow();\r\nconst nativeBlobEventConstructor = createNativeBlobEventConstructor(window);\r\nconst createBlobEvent = createBlobEventFactory(nativeBlobEventConstructor);\r\nconst createWebAudioMediaRecorder = createWebAudioMediaRecorderFactory(\r\n    createBlobEvent,\r\n    createInvalidModificationError,\r\n    createInvalidStateError,\r\n    createNotSupportedError\r\n);\r\nconst readVariableSizeInteger = createReadVariableSizeInteger(readVariableSizeIntegerLength);\r\nconst readElementContent = createReadElementContent(readVariableSizeInteger);\r\nconst readElementType = createReadElementType(readVariableSizeInteger);\r\nconst decodeWebMChunk = createDecodeWebMChunk(readElementContent, readElementType);\r\nconst createWebmPcmMediaRecorder = createWebmPcmMediaRecorderFactory(\r\n    createBlobEvent,\r\n    createInvalidModificationError,\r\n    createNotSupportedError,\r\n    decodeWebMChunk,\r\n    readVariableSizeInteger\r\n);\r\nconst createEventTarget = createEventTargetFactory(window);\r\nconst nativeMediaRecorderConstructor = createNativeMediaRecorderConstructor(window);\r\n\r\nconst createNativeMediaRecorder = createNativeMediaRecorderFactory(createInvalidModificationError, createNotSupportedError);\r\nconst mediaRecorderConstructor: IMediaRecorderConstructor = createMediaRecorderConstructor(\r\n    createNativeMediaRecorder,\r\n    createNotSupportedError,\r\n    createWebAudioMediaRecorder,\r\n    createWebmPcmMediaRecorder,\r\n    encoderRegexes,\r\n    createEventTargetConstructor(createEventTarget, wrapEventListener),\r\n    nativeMediaRecorderConstructor\r\n);\r\n\r\nexport { mediaRecorderConstructor as MediaRecorder };\r\n\r\nexport const isSupported = () => createIsSupportedPromise(window);\r\n\r\nexport const register = async (port: MessagePort): Promise<void> => {\r\n    encoderRegexes.push(await rgstr(port));\r\n};\r\n", "export {};\r\n//# sourceMappingURL=extendable-media-recorder-wav-encoder-broker-definition.js.map", "export * from './extendable-media-recorder-wav-encoder-broker-definition';\r\n", "export {};\r\n//# sourceMappingURL=extendable-media-recorder-wav-encoder-broker-loader.js.map", "export {};\r\n//# sourceMappingURL=extendable-media-recorder-wav-encoder-broker-wrapper.js.map", "export {};\r\n//# sourceMappingURL=typed-array.js.map", "export * from './extendable-media-recorder-wav-encoder-broker-loader';\r\nexport * from './extendable-media-recorder-wav-encoder-broker-wrapper';\r\nexport * from './typed-array';\r\n", "import { createBroker } from 'broker-factory';\r\nimport { TExtendableMediaRecorderWavEncoderWorkerDefinition } from 'extendable-media-recorder-wav-encoder-worker';\r\nimport { IExtendableMediaRecorderWavEncoderBrokerDefinition } from './interfaces';\r\nimport { TExtendableMediaRecorderWavEncoderBrokerLoader, TExtendableMediaRecorderWavEncoderBrokerWrapper } from './types';\r\n\r\n/*\r\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\r\n * isolatedModules compiler option.\r\n */\r\nexport * from './interfaces/index';\r\nexport * from './types/index';\r\n\r\nexport const wrap: TExtendableMediaRecorderWavEncoderBrokerWrapper = createBroker<\r\n    IExtendableMediaRecorderWavEncoderBrokerDefinition,\r\n    TExtendableMediaRecorderWavEncoderWorkerDefinition\r\n>({\r\n    characterize: ({ call }) => {\r\n        return () => call('characterize');\r\n    },\r\n    encode: ({ call }) => {\r\n        return (recordingId, timeslice) => {\r\n            return call('encode', { recordingId, timeslice });\r\n        };\r\n    },\r\n    record: ({ call }) => {\r\n        return async (recordingId, sampleRate, typedArrays) => {\r\n            await call(\r\n                'record',\r\n                { recordingId, sampleRate, typedArrays },\r\n                typedArrays.map(({ buffer }) => buffer).filter((buffer) => buffer instanceof ArrayBuffer)\r\n            );\r\n        };\r\n    }\r\n});\r\n\r\nexport const load: TExtendableMediaRecorderWavEncoderBrokerLoader = (url: string) => {\r\n    const worker = new Worker(url);\r\n\r\n    return wrap(worker);\r\n};\r\n", "// This is the minified and stringified code of the extendable-media-recorder-wav-encoder-worker package.\r\nexport const worker = `(()=>{var e={455:function(e,t){!function(e){\"use strict\";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,s=536870912,a=2*s,o=function(e,t){return function(r){var o=t.get(r),i=void 0===o?r.size:o<a?o+1:0;if(!r.has(i))return e(r,i);if(r.size<s){for(;r.has(i);)i=Math.floor(Math.random()*a);return e(r,i)}if(r.size>n)throw new Error(\"Congratulations, you created a collection of unique numbers which uses all available integers!\");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,c=r(i),l=o(c,i),u=t(l);e.addUniqueNumber=u,e.generateUniqueNumber=l}(t)}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}(()=>{\"use strict\";const e=-32603,t=-32602,n=-32601,s=(e,t)=>Object.assign(new Error(e),{status:t}),a=t=>s('The handler of the method called \"'.concat(t,'\" returned an unexpected result.'),e),o=(t,r)=>async({data:{id:o,method:i,params:c}})=>{const l=r[i];try{if(void 0===l)throw(e=>s('The requested method called \"'.concat(e,'\" is not supported.'),n))(i);const r=void 0===c?l():l(c);if(void 0===r)throw(t=>s('The handler of the method called \"'.concat(t,'\" returned no required result.'),e))(i);const u=r instanceof Promise?await r:r;if(null===o){if(void 0!==u.result)throw a(i)}else{if(void 0===u.result)throw a(i);const{result:e,transferables:r=[]}=u;t.postMessage({id:o,result:e},r)}}catch(e){const{message:r,status:n=-32603}=e;t.postMessage({error:{code:n,message:r},id:o})}};var i=r(455);const c=new Map,l=(e,r,n)=>({...r,connect:({port:t})=>{t.start();const n=e(t,r),s=(0,i.generateUniqueNumber)(c);return c.set(s,()=>{n(),t.close(),c.delete(s)}),{result:s}},disconnect:({portId:e})=>{const r=c.get(e);if(void 0===r)throw(e=>s('The specified parameter called \"portId\" with the given value \"'.concat(e,'\" does not identify a port connected to this worker.'),t))(e);return r(),{result:null}},isSupported:async()=>{if(await new Promise(e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=({data:t})=>e(null!==t),n.postMessage(t,[t])})){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),u=(e,t,r=()=>!0)=>{const n=l(u,t,r),s=o(e,n);return e.addEventListener(\"message\",s),()=>e.removeEventListener(\"message\",s)},d=e=>e.reduce((e,t)=>e+t.length,0),h=(e,t)=>{const r=[];let n=0;e:for(;n<t;){const t=e.length;for(let s=0;s<t;s+=1){const t=e[s];void 0===r[s]&&(r[s]=[]);const a=t.shift();if(void 0===a)break e;r[s].push(a),0===s&&(n+=a.length)}}if(n>t){const s=n-t;r.forEach((t,r)=>{const n=t.pop(),a=n.length-s;t.push(n.subarray(0,a)),e[r].unshift(n.subarray(a))})}return r},f=new Map,m=(e=>(t,r,n)=>{const s=e.get(t);if(void 0===s){const s={channelDataArrays:n.map(e=>[e]),isComplete:!0,sampleRate:r};return e.set(t,s),s}return s.channelDataArrays.forEach((e,t)=>e.push(n[t])),s})(f),p=((e,t)=>(r,n,s,a)=>{const o=s>>3,i=\"subsequent\"===n?0:44,c=r.length,l=e(r[0]),u=new ArrayBuffer(l*c*o+i),d=new DataView(u);return\"subsequent\"!==n&&t(d,s,c,\"complete\"===n?l:Number.POSITIVE_INFINITY,a),r.forEach((e,t)=>{let r=i+t*o;e.forEach(e=>{const t=e.length;for(let n=0;n<t;n+=1){const t=e[n];d.setInt16(r,t<0?32768*Math.max(-1,t):32767*Math.min(1,t),!0),r+=c*o}})}),[u]})(d,(e,t,r,n,s)=>{const a=t>>3,o=Math.min(n*r*a,4294967251);e.setUint32(0,1380533830),e.setUint32(4,o+36,!0),e.setUint32(8,1463899717),e.setUint32(12,1718449184),e.setUint32(16,16,!0),e.setUint16(20,1,!0),e.setUint16(22,r,!0),e.setUint32(24,s,!0),e.setUint32(28,s*r*a,!0),e.setUint16(32,r*a,!0),e.setUint16(34,t,!0),e.setUint32(36,1684108385),e.setUint32(40,o,!0)}),v=new Map;u(self,{characterize:()=>({result:/^audio\\\\/wav$/}),encode:({recordingId:e,timeslice:t})=>{const r=v.get(e);void 0!==r&&(v.delete(e),r.reject(new Error(\"Another request was made to initiate an encoding.\")));const n=f.get(e);if(null!==t){if(void 0===n||d(n.channelDataArrays[0])*(1e3/n.sampleRate)<t)return new Promise((r,n)=>{v.set(e,{reject:n,resolve:r,timeslice:t})});const r=h(n.channelDataArrays,Math.ceil(t*(n.sampleRate/1e3))),s=p(r,n.isComplete?\"initial\":\"subsequent\",16,n.sampleRate);return n.isComplete=!1,{result:s,transferables:s}}if(void 0!==n){const t=p(n.channelDataArrays,n.isComplete?\"complete\":\"subsequent\",16,n.sampleRate);return f.delete(e),{result:t,transferables:t}}return{result:[],transferables:[]}},record:({recordingId:e,sampleRate:t,typedArrays:r})=>{const n=m(e,t,r),s=v.get(e);if(void 0!==s&&d(n.channelDataArrays[0])*(1e3/t)>=s.timeslice){const r=h(n.channelDataArrays,Math.ceil(s.timeslice*(t/1e3))),a=p(r,n.isComplete?\"initial\":\"subsequent\",16,t);n.isComplete=!1,v.delete(e),s.resolve({result:a,transferables:a})}return{result:null}}})})()})();`; // tslint:disable-line:max-line-length\r\n", "import { load } from 'extendable-media-recorder-wav-encoder-broker';\r\nimport { worker } from './worker/worker';\r\n\r\nconst blob: Blob = new Blob([worker], { type: 'application/javascript; charset=utf-8' });\r\n\r\nconst url: string = URL.createObjectURL(blob);\r\n\r\nconst extendableMediaRecorderWavEncoder = load(url);\r\n\r\nexport const characterize = extendableMediaRecorderWavEncoder.characterize;\r\n\r\nexport const connect = extendableMediaRecorderWavEncoder.connect;\r\n\r\nexport const disconnect = extendableMediaRecorderWavEncoder.disconnect;\r\n\r\nexport const encode = extendableMediaRecorderWavEncoder.encode;\r\n\r\nexport const isSupported = extendableMediaRecorderWavEncoder.isSupported;\r\n\r\nexport const record = extendableMediaRecorderWavEncoder.record;\r\n\r\nURL.revokeObjectURL(url);\r\n", "\"use strict\";var __awaiter=(this&&this.__awaiter)||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value);});}\r\nreturn new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}\r\nfunction rejected(value){try{step(generator[\"throw\"](value));}catch(e){reject(e);}}\r\nfunction step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected);}\r\nstep((generator=generator.apply(thisArg,_arguments||[])).next());});};var __generator=(this&&this.__generator)||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1];},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),\"throw\":verb(1),\"return\":verb(2)},typeof Symbol===\"function\"&&(g[Symbol.iterator]=function(){return this;}),g;function verb(n){return function(v){return step([n,v]);};}\r\nfunction step(op){if(f)throw new TypeError(\"Generator is already executing.\");while(_)try{if(f=1,y&&(t=op[0]&2?y[\"return\"]:op[0]?y[\"throw\"]||((t=y[\"return\"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue;}\r\nif(op[0]===3&&(!t||(op[1]>t[0]&&op[1]<t[3]))){_.label=op[1];break;}\r\nif(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break;}\r\nif(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break;}\r\nif(t[2])_.ops.pop();_.trys.pop();continue;}\r\nop=body.call(thisArg,_);}catch(e){op=[6,e];y=0;}finally{f=t=0;}\r\nif(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true};}};Object.defineProperty(exports,\"__esModule\",{value:true});exports.ReactMediaRecorder=exports.useReactMediaRecorder=exports.RecorderErrors=void 0;var extendable_media_recorder_1=require(\"extendable-media-recorder\");var react_1=require(\"react\");var extendable_media_recorder_wav_encoder_1=require(\"extendable-media-recorder-wav-encoder\");var RecorderErrors;(function(RecorderErrors){RecorderErrors[\"AbortError\"]=\"media_aborted\";RecorderErrors[\"NotAllowedError\"]=\"permission_denied\";RecorderErrors[\"NotFoundError\"]=\"no_specified_media_found\";RecorderErrors[\"NotReadableError\"]=\"media_in_use\";RecorderErrors[\"OverconstrainedError\"]=\"invalid_media_constraints\";RecorderErrors[\"TypeError\"]=\"no_constraints\";RecorderErrors[\"NONE\"]=\"\";RecorderErrors[\"NO_RECORDER\"]=\"recorder_error\";})(RecorderErrors=exports.RecorderErrors||(exports.RecorderErrors={}));function useReactMediaRecorder(_a){var _this=this;var _b=_a.audio,audio=_b===void 0?true:_b,_c=_a.video,video=_c===void 0?false:_c,_d=_a.selfBrowserSurface,selfBrowserSurface=_d===void 0?undefined:_d,_e=_a.preferCurrentTab,preferCurrentTab=_e===void 0?false:_e,_f=_a.onStop,onStop=_f===void 0?function(){return null;}:_f,_g=_a.onStart,onStart=_g===void 0?function(){return null;}:_g,blobPropertyBag=_a.blobPropertyBag,_h=_a.screen,screen=_h===void 0?false:_h,_j=_a.mediaRecorderOptions,mediaRecorderOptions=_j===void 0?undefined:_j,_k=_a.customMediaStream,customMediaStream=_k===void 0?null:_k,_l=_a.stopStreamsOnStop,stopStreamsOnStop=_l===void 0?true:_l,_m=_a.askPermissionOnMount,askPermissionOnMount=_m===void 0?false:_m;var mediaRecorder=(0,react_1.useRef)(null);var mediaChunks=(0,react_1.useRef)([]);var mediaStream=(0,react_1.useRef)(null);var _o=(0,react_1.useState)(\"idle\"),status=_o[0],setStatus=_o[1];var _p=(0,react_1.useState)(false),isAudioMuted=_p[0],setIsAudioMuted=_p[1];var _q=(0,react_1.useState)(undefined),mediaBlobUrl=_q[0],setMediaBlobUrl=_q[1];var _r=(0,react_1.useState)(\"NONE\"),error=_r[0],setError=_r[1];var _s=(0,react_1.useState)(false),init=_s[0],setInit=_s[1];(0,react_1.useEffect)(function(){if(init){return;}\r\nvar setup=function(){return __awaiter(_this,void 0,void 0,function(){var _a,e_1;return __generator(this,function(_b){switch(_b.label){case 0:_b.trys.push([0,3,,4]);_a=extendable_media_recorder_1.register;return[4,(0,extendable_media_recorder_wav_encoder_1.connect)()];case 1:return[4,_a.apply(void 0,[_b.sent()])];case 2:_b.sent();return[3,4];case 3:e_1=_b.sent();return[3,4];case 4:return[2];}});});};setup();setInit(true);},[]);var getMediaStream=(0,react_1.useCallback)(function(){return __awaiter(_this,void 0,void 0,function(){var requiredMedia,stream_1,audioStream,stream,error_1;return __generator(this,function(_a){switch(_a.label){case 0:setStatus(\"acquiring_media\");requiredMedia={audio:typeof audio===\"boolean\"?!!audio:audio,video:typeof video===\"boolean\"?!!video:video,};_a.label=1;case 1:_a.trys.push([1,9,,10]);if(!customMediaStream)return[3,2];mediaStream.current=customMediaStream;return[3,8];case 2:if(!screen)return[3,6];return[4,window.navigator.mediaDevices.getDisplayMedia({video:video||true,selfBrowserSurface:selfBrowserSurface,preferCurrentTab:preferCurrentTab})];case 3:stream_1=(_a.sent());stream_1.getVideoTracks()[0].addEventListener(\"ended\",function(){stopRecording();});if(!audio)return[3,5];return[4,window.navigator.mediaDevices.getUserMedia({audio:audio,})];case 4:audioStream=_a.sent();audioStream.getAudioTracks().forEach(function(audioTrack){return stream_1.addTrack(audioTrack);});_a.label=5;case 5:mediaStream.current=stream_1;return[3,8];case 6:return[4,window.navigator.mediaDevices.getUserMedia(requiredMedia)];case 7:stream=_a.sent();mediaStream.current=stream;_a.label=8;case 8:setStatus(\"idle\");return[3,10];case 9:error_1=_a.sent();setError(error_1.name);setStatus(\"idle\");return[3,10];case 10:return[2];}});});},[audio,video,screen]);(0,react_1.useEffect)(function(){if(!window.MediaRecorder){throw new Error(\"Unsupported Browser\");}\r\nif(screen){if(!window.navigator.mediaDevices.getDisplayMedia){throw new Error(\"This browser doesn't support screen capturing\");}}\r\nvar checkConstraints=function(mediaType){var supportedMediaConstraints=navigator.mediaDevices.getSupportedConstraints();var unSupportedConstraints=Object.keys(mediaType).filter(function(constraint){return!supportedMediaConstraints[constraint];});if(unSupportedConstraints.length>0){console.error(\"The constraints \"+unSupportedConstraints.join(\",\")+\" doesn't support on this browser. Please check your ReactMediaRecorder component.\");}};if(typeof audio===\"object\"){checkConstraints(audio);}\r\nif(typeof video===\"object\"){checkConstraints(video);}\r\nif(mediaRecorderOptions&&mediaRecorderOptions.mimeType){if(!MediaRecorder.isTypeSupported(mediaRecorderOptions.mimeType)){console.error(\"The specified MIME type you supplied for MediaRecorder doesn't support this browser\");}}\r\nif(!mediaStream.current&&askPermissionOnMount){getMediaStream();}\r\nreturn function(){if(mediaStream.current){var tracks=mediaStream.current.getTracks();tracks.forEach(function(track){return track.clone().stop();});}};},[audio,screen,video,getMediaStream,mediaRecorderOptions,askPermissionOnMount,]);var startRecording=function(){return __awaiter(_this,void 0,void 0,function(){var isStreamEnded;return __generator(this,function(_a){switch(_a.label){case 0:setError(\"NONE\");if(!!mediaStream.current)return[3,2];return[4,getMediaStream()];case 1:_a.sent();_a.label=2;case 2:if(!mediaStream.current)return[3,5];isStreamEnded=mediaStream.current.getTracks().some(function(track){return track.readyState===\"ended\";});if(!isStreamEnded)return[3,4];return[4,getMediaStream()];case 3:_a.sent();_a.label=4;case 4:if(!mediaStream.current.active){return[2];}\r\nmediaRecorder.current=new extendable_media_recorder_1.MediaRecorder(mediaStream.current,mediaRecorderOptions||undefined);mediaRecorder.current.ondataavailable=onRecordingActive;mediaRecorder.current.onstop=onRecordingStop;mediaRecorder.current.onstart=onRecordingStart;mediaRecorder.current.onerror=function(){setError(\"NO_RECORDER\");setStatus(\"idle\");};mediaRecorder.current.start();setStatus(\"recording\");_a.label=5;case 5:return[2];}});});};var onRecordingActive=function(_a){var data=_a.data;mediaChunks.current.push(data);};var onRecordingStart=function(){onStart();};var onRecordingStop=function(){var chunk=mediaChunks.current[0];var blobProperty=Object.assign({type:chunk.type},blobPropertyBag||(video?{type:\"video/mp4\"}:{type:\"audio/wav\"}));var blob=new Blob(mediaChunks.current,blobProperty);var url=URL.createObjectURL(blob);setStatus(\"stopped\");setMediaBlobUrl(url);onStop(url,blob);};var muteAudio=function(mute){setIsAudioMuted(mute);if(mediaStream.current){mediaStream.current.getAudioTracks().forEach(function(audioTrack){return(audioTrack.enabled=!mute);});}};var pauseRecording=function(){if(mediaRecorder.current&&mediaRecorder.current.state===\"recording\"){setStatus(\"paused\");mediaRecorder.current.pause();}};var resumeRecording=function(){if(mediaRecorder.current&&mediaRecorder.current.state===\"paused\"){setStatus(\"recording\");mediaRecorder.current.resume();}};var stopRecording=function(){if(mediaRecorder.current){if(mediaRecorder.current.state!==\"inactive\"){setStatus(\"stopping\");mediaRecorder.current.stop();if(stopStreamsOnStop){mediaStream.current&&mediaStream.current.getTracks().forEach(function(track){return track.stop();});}\r\nmediaChunks.current=[];}}};return{error:RecorderErrors[error],muteAudio:function(){return muteAudio(true);},unMuteAudio:function(){return muteAudio(false);},startRecording:startRecording,pauseRecording:pauseRecording,resumeRecording:resumeRecording,stopRecording:stopRecording,mediaBlobUrl:mediaBlobUrl,status:status,isAudioMuted:isAudioMuted,previewStream:mediaStream.current?new MediaStream(mediaStream.current.getVideoTracks()):null,previewAudioStream:mediaStream.current?new MediaStream(mediaStream.current.getAudioTracks()):null,clearBlobUrl:function(){if(mediaBlobUrl){URL.revokeObjectURL(mediaBlobUrl);}\r\nsetMediaBlobUrl(undefined);setStatus(\"idle\");},};}\r\nexports.useReactMediaRecorder=useReactMediaRecorder;var ReactMediaRecorder=function(props){return props.render(useReactMediaRecorder(props));};exports.ReactMediaRecorder=ReactMediaRecorder;", "module.exports = require(\"./lib\");\r\n"],
  "mappings": "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A;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,eAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAA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;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,iCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,mBAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,6BAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,2BAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,2BAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,6BAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,mBAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,kBAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAA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ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,8BAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,mCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,oCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,yCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,wCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAA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A;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,kCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,uCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,4CAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,qFAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,qCAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,0CAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,eAAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,uBAAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA;AAAA;AAAA;AAAA;;;ACAA,IAAAC,eAAA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA,IAAAC;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA,IAAAC;AACA,IAAAC;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC1YA,IA8RM,qCACA,sCACA,wCACA,wBACA,sBACA,iBACAC,SACA,0BACA,sBACA,yBACA,4BACA,kBACA,sCACA,6BACA,0BACA,wBACA,+BACA,sBACAC,oBACA,oBACA,mCACA,sBAgDA,yBAaA,kBACA,8BACA,6BACA,mCACA,8CACA,wBAeA,qBACA,0BACA,mBACA,mCAaA,kBACA,qCAOA,kBAeA,kCAeA,iCAUA,gCAOA,sBACA,6BAUA,oBACA,uBACA,+BACA,iCAKA,8BAOA,mCAKA,gCAQA,qCAMA,gCAOA,kCAOA,+BASA,2BACA,6BAKA,0BAQA,yBAOA,sBASA,oCACA,sCAOA,mCAUA,wBAOA,qBAQA,gCAMA,iCAMA,6BAOA,2BACA,0BAQA,qBAUA,iCACA,oCAQA,4BAQA,8BAOA,2BASA,4CACA,iCAOA,4BASA,6BAYA,wBACA,0BAYA,uBASA,0BACA,yBAMA,oCAQA,8BACA,gCAOA,6BAQA,8BAKA,2BASA,iBACA,kCACA,gCACA,sCAMO,uBAmBP,iBAEO,iBAcP,6BAsBA,wCAMA,4CAOA,uCAMA,6CAIA,4CAEA,yBAgBA,gCACA,+BACA,wBACA,kCACA,2BACA,mCACA,iCACA,mCAeA,8BAOA,gCAkBA,8BACA,iCAGA,6BA2EA,gCAYA,iCAIA,gBAUA,uCAYA,gCAgCO,mBAEA,gBAEA,iBAEA;AA1iCb,IAAAC,gBAAA;;IAAAA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAAC;AACA;AACA;AACA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAqEA,IAAAC;AACA,IAAAC;AAEA,IAAM,sCAAsC,0CAA0C,kBAAkB;AACxG,IAAM,uCAAuC,2CAA2C,kBAAkB;AAC1G,IAAM,yCAAyC,6CAA6C,kBAAkB;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",
  "names": ["generateUniqueNumber", "cache", "init_module", "handler", "init_interfaces", "init_types", "init_module", "init_interfaces", "init_types", "url", "worker", "init_module", "nativeBlobEventConstructor", "readElementContent", "readElementType", "createEventTarget", "wrapEventListener", "window", "window", "createNativeMediaRecorder", "createNotSupportedError", "createWebAudioMediaRecorder", "createWebmPcmMediaRecorder", "encoderRegexes", "eventTargetConstructor", "nativeMediaRecorderConstructor", "window", "createInvalidModificationError", "createNotSupportedError", "nativeMediaRecorderConstructor", "blob", "window", "readVariableSizeInteger", "readVariableSizeInteger", "readVariableSizeIntegerLength", "createAddUniqueNumber", "init_add_unique_number", "generateUniqueNumber", "createCache", "init_cache", "MAX_SAFE_INTEGER", "TWO_TO_THE_POWER_OF_TWENTY_NINE", "TWO_TO_THE_POWER_OF_THIRTY", "createGenerateUniqueNumber", "init_generate_unique_number", "cache", "init_types", "LAST_NUMBER_WEAK_MAP", "cache", "generateUniqueNumber", "addUniqueNumber", "init_module", "init_add_unique_number", "init_cache", "init_generate_unique_number", "init_types", "createCache", "createGenerateUniqueNumber", "createAddUniqueNumber", "init_types", "init_types", "emitNotSupportedError", "window", "wrapSubscribeFunction", "mapSubscribableThing", "mutations", "prependSubscribableThing", "emitNotSupportedError", "window", "wrapSubscribeFunction", "emitNotSupportedError", "window", "wrapSubscribeFunction", "wrapSubscribeFunction", "emitNotSupportedError", "window", "wrapSubscribeFunction", "mediaDevices", "emitNotSupportedError", "window", "wrapSubscribeFunction", "emitNotSupportedError", "window", "wrapSubscribeFunction", "wrapSubscribeFunction", "midiInputs", "wrapSubscribeFunction", "midiOutputs", "emitNotSupportedError", "window", "wrapSubscribeFunction", "wrapSubscribeFunction", "emitNotSupportedError", "window", "wrapSubscribeFunction", "emitNotSupportedError", "window", "wrapSubscribeFunction", "wrapSubscribeFunction", "emitNotSupportedError", "window", "wrapSubscribeFunction", "emitNotSupportedError", "window", "wrapSubscribeFunction", "emitNotSupportedError", "window", "wrapSubscribeFunction", "emitNotSupportedError", "wrapSubscribeFunction", "emitNotSupportedError", "window", "wrapSubscribeFunction", "patch", "toObserver", "init_wake_lock", "init_interfaces", "init_wake_lock", "init_window", "init_types", "init_window", "window", "init_module", "init_interfaces", "init_types", "indefiniteArticle", "init_interfaces", "init_types", "init_module", "init_interfaces", "init_types", "dashify", "indefiniteArticle", "init_module", "init_module", "init_interfaces", "init_value_map", "init_worker_definition", "init_types", "init_value_map", "init_worker_definition", "init_module", "init_interfaces", "init_types", "worklet", "addAudioWorkletModule", "blob", "url", "generateUniqueNumber", "createListener", "on", "validateState", "audioWorkletNodeConstructor", "init_interfaces", "init_types", "init_module", "init_interfaces", "init_types", "generateUniqueNumber", "init_cancel_and_hold_automation_event", "init_cancel_scheduled_values_automation_event", "init_exponential_ramp_to_value_automation_event", "init_linear_ramp_to_value_automation_event", "init_set_value_automation_event", "init_set_target_automation_event", "init_set_value_curve_automation_event", "init_interfaces", "init_cancel_and_hold_automation_event", "init_cancel_scheduled_values_automation_event", "init_exponential_ramp_to_value_automation_event", "init_linear_ramp_to_value_automation_event", "init_set_value_automation_event", "init_set_target_automation_event", "init_set_value_curve_automation_event", "init_types", "init_module", "init_interfaces", "init_types", "insertElementInSet", "url", "cacheTestResult", "createNotSupportedError", "exposeCurrentFrameAndCurrentTime", "getNativeContext", "getOrCreateBackupOfflineAudioContext", "isNativeOfflineAudioContext", "nativeAudioWorkletNodeConstructor", "window", "blob", "url", "addActiveInputConnectionToAudioNode", "addPassiveInputConnectionToAudioNode", "connectNativeAudioNodeToNativeAudioNode", "deleteActiveInputConnectionToAudioNode", "disconnectNativeAudioNodeFromNativeAudioNode", "getAudioNodeConnections", "getAudioNodeTailTime", "getEventListenersOfAudioNode", "getNativeAudioNode", "insertElementInSet", "isActiveAudioNode", "isPartOfACycle", "isPassiveAudioNode", "insertElementInSet", "createNativeGainNode", "disconnect", "getUnrenderedAudioWorkletNodes", "createAnalyserNodeRenderer", "createIndexSizeError", "createNativeAnalyserNode", "getNativeContext", "isNativeOfflineAudioContext", "createNativeAnalyserNode", "getNativeAudioNode", "renderInputsOfAudioNode", "DEFAULT_OPTIONS", "audioBufferStore", "cacheTestResult", "createNotSupportedError", "nativeAudioBufferConstructor", "nativeOfflineAudioContextConstructor", "wrapAudioBufferCopyChannelMethods", "wrapAudioBufferCopyChannelMethodsOutOfBounds", "DEFAULT_OPTIONS", "audioNodeConstructor", "createAudioBufferSourceNodeRenderer", "createAudioParam", "createInvalidStateError", "createNativeAudioBufferSourceNode", "getNativeContext", "isNativeOfflineAudioContext", "wrapEventListener", "connectAudioParam", "createNativeAudioBufferSourceNode", "getNativeAudioNode", "renderAutomation", "renderInputsOfAudioNode", "baseAudioContextConstructor", "createInvalidStateError", "createNotSupportedError", "createUnknownError", "mediaElementAudioSourceNodeConstructor", "mediaStreamAudioDestinationNodeConstructor", "mediaStreamAudioSourceNodeConstructor", "mediaStreamTrackAudioSourceNodeConstructor", "nativeAudioContextConstructor", "audioNodeConstructor", "createAudioDestinationNodeRenderer", "createIndexSizeError", "createInvalidStateError", "getNativeContext", "isNativeOfflineAudioContext", "renderInputsOfAudioNode", "renderInputsOfAudioNode", "createAudioParam", "createNativeChannelMergerNode", "createNativeConstantSourceNode", "createNativeScriptProcessorNode", "createNotSupportedError", "getFirstSample", "isNativeOfflineAudioContext", "overwriteAccessors", "nativeAudioWorkletNodeConstructor", "connect", "disconnect", "cacheTestResult", "createIndexSizeError", "createInvalidAccessError", "createNotSupportedError", "eventTargetConstructor", "getNativeContext", "isNativeAudioContext", "isNativeAudioNode", "isNativeAudioParam", "isNativeOfflineAudioContext", "nativeAudioWorkletNodeConstructor", "init_module", "audioParamAudioNodeStore", "createAudioParamRenderer", "createCancelAndHoldAutomationEvent", "createCancelScheduledValuesAutomationEvent", "createExponentialRampToValueAutomationEvent", "createLinearRampToValueAutomationEvent", "createSetTargetAutomationEvent", "createSetValueAutomationEvent", "createSetValueCurveAutomationEvent", "nativeAudioContextConstructor", "setValueAtTimeUntilPossible", "DEFAULT_OPTIONS", "addUnrenderedAudioWorkletNode", "audioNodeConstructor", "createAudioParam", "createAudioWorkletNodeRenderer", "createNativeAudioWorkletNode", "getAudioNodeConnections", "getBackupOfflineAudioContext", "getNativeContext", "isNativeOfflineAudioContext", "nativeAudioWorkletNodeConstructor", "sanitizeAudioWorkletNodeOptions", "setActiveAudioWorkletNodeInputs", "testAudioWorkletNodeOptionsClonability", "wrapEventListener", "exposeCurrentFrameAndCurrentTime", "connectAudioParam", "connectMultipleOutputs", "createNativeAudioBufferSourceNode", "createNativeChannelMergerNode", "createNativeChannelSplitterNode", "createNativeConstantSourceNode", "createNativeGainNode", "deleteUnrenderedAudioWorkletNode", "disconnectMultipleOutputs", "getNativeAudioNode", "nativeAudioWorkletNodeConstructor", "nativeOfflineAudioContextConstructor", "renderAutomation", "renderInputsOfAudioNode", "renderNativeOfflineAudioContext", "addAudioWorkletModule", "analyserNodeConstructor", "audioBufferConstructor", "audioBufferSourceNodeConstructor", "biquadFilterNodeConstructor", "channelMergerNodeConstructor", "channelSplitterNodeConstructor", "constantSourceNodeConstructor", "convolverNodeConstructor", "decodeAudioData", "delayNodeConstructor", "dynamicsCompressorNodeConstructor", "gainNodeConstructor", "iIRFilterNodeConstructor", "minimalBaseAudioContextConstructor", "oscillatorNodeConstructor", "pannerNodeConstructor", "periodicWaveConstructor", "stereoPannerNodeConstructor", "waveShaperNodeConstructor", "DEFAULT_OPTIONS", "audioNodeConstructor", "createAudioParam", "createBiquadFilterNodeRenderer", "createInvalidAccessError", "createNativeBiquadFilterNode", "getNativeContext", "isNativeOfflineAudioContext", "setAudioNodeTailTime", "connectAudioParam", "createNativeBiquadFilterNode", "getNativeAudioNode", "renderAutomation", "renderInputsOfAudioNode", "DEFAULT_OPTIONS", "audioNodeConstructor", "createChannelMergerNodeRenderer", "createNativeChannelMergerNode", "getNativeContext", "isNativeOfflineAudioContext", "createNativeChannelMergerNode", "getNativeAudioNode", "renderInputsOfAudioNode", "DEFAULT_OPTIONS", "audioNodeConstructor", "createChannelSplitterNodeRenderer", "createNativeChannelSplitterNode", "getNativeContext", "isNativeOfflineAudioContext", "sanitizeChannelSplitterOptions", "createNativeChannelSplitterNode", "getNativeAudioNode", "renderInputsOfAudioNode", "renderInputsOfAudioParam", "createIndexSizeError", "createNativeAudioBufferSourceNode", "DEFAULT_OPTIONS", "audioNodeConstructor", "createAudioParam", "createConstantSourceNodeRendererFactory", "createNativeConstantSourceNode", "getNativeContext", "isNativeOfflineAudioContext", "wrapEventListener", "connectAudioParam", "createNativeConstantSourceNode", "getNativeAudioNode", "renderAutomation", "renderInputsOfAudioNode", "DEFAULT_OPTIONS", "audioNodeConstructor", "createConvolverNodeRenderer", "createNativeConvolverNode", "getNativeContext", "isNativeOfflineAudioContext", "setAudioNodeTailTime", "createNativeConvolverNode", "getNativeAudioNode", "renderInputsOfAudioNode", "createNotSupportedError", "nativeOfflineAudioContextConstructor", "audioBufferStore", "cacheTestResult", "createDataCloneError", "createEncodingError", "getNativeContext", "isNativeContext", "testAudioBufferCopyChannelMethodsOutOfBoundsSupport", "testPromiseSupport", "wrapAudioBufferCopyChannelMethods", "wrapAudioBufferCopyChannelMethodsOutOfBounds", "connectNativeAudioNodeToNativeAudioNode", "getAudioNodeConnections", "getNativeAudioNode", "getNativeAudioParam", "getNativeContext", "isActiveAudioNode", "isNativeOfflineAudioContext", "DEFAULT_OPTIONS", "audioNodeConstructor", "createAudioParam", "createDelayNodeRenderer", "createNativeDelayNode", "getNativeContext", "isNativeOfflineAudioContext", "setAudioNodeTailTime", "connectAudioParam", "createNativeDelayNode", "getNativeAudioNode", "renderAutomation", "renderInputsOfAudioNode", "pickElementFromSet", "getUnrenderedAudioWorkletNodes", "audioParamAudioNodeStore", "getAudioNodeConnections", "getValueForKey", "createIndexSizeError", "DEFAULT_OPTIONS", "audioNodeConstructor", "createAudioParam", "createDynamicsCompressorNodeRenderer", "createNativeDynamicsCompressorNode", "createNotSupportedError", "getNativeContext", "isNativeOfflineAudioContext", "setAudioNodeTailTime", "connectAudioParam", "createNativeDynamicsCompressorNode", "getNativeAudioNode", "renderAutomation", "renderInputsOfAudioNode", "window", "blob", "url", "createEventTargetConstructor", "init_event_target_constructor", "wrapEventListener", "window", "createAbortError", "url", "DEFAULT_OPTIONS", "audioNodeConstructor", "createAudioParam", "createGainNodeRenderer", "createNativeGainNode", "getNativeContext", "isNativeOfflineAudioContext", "connectAudioParam", "createNativeGainNode", "getNativeAudioNode", "renderAutomation", "renderInputsOfAudioNode", "activeAudioWorkletNodeInputsStore", "getValueForKey", "getAudioNodeConnections", "audioNodeTailTimeStore", "getAudioParamConnections", "backupOfflineAudioContextStore", "createInvalidStateError", "init_invalid_state_error", "init_invalid_state_error", "createInvalidStateError", "backupOfflineAudioContextStore", "nativeOfflineAudioContextConstructor", "unrenderedAudioWorkletNodeStore", "DEFAULT_OPTIONS", "audioNodeConstructor", "createNativeIIRFilterNode", "createIIRFilterNodeRenderer", "getNativeContext", "isNativeOfflineAudioContext", "setAudioNodeTailTime", "createNativeAudioBufferSourceNode", "getNativeAudioNode", "nativeOfflineAudioContextConstructor", "renderInputsOfAudioNode", "renderNativeOfflineAudioContext", "disconnectNativeAudioNodeFromNativeAudioNode", "getAudioNodeConnections", "getNativeAudioNode", "getNativeAudioParam", "isActiveAudioNode", "isNativeAudioContext", "isNativeAudioNode", "isNativeAudioParam", "isNativeOfflineAudioContext", "nativeAudioContextConstructor", "window", "window", "isNativeAudioContext", "isNativeOfflineAudioContext", "nativeOfflineAudioContextConstructor", "window", "init_is_supported_promise", "audioNodeConstructor", "createNativeMediaElementAudioSourceNode", "getNativeContext", "isNativeOfflineAudioContext", "DEFAULT_OPTIONS", "audioNodeConstructor", "createNativeMediaStreamAudioDestinationNode", "getNativeContext", "isNativeOfflineAudioContext", "audioNodeConstructor", "createNativeMediaStreamAudioSourceNode", "getNativeContext", "isNativeOfflineAudioContext", "audioNodeConstructor", "createNativeMediaStreamTrackAudioSourceNode", "getNativeContext", "createInvalidStateError", "createNotSupportedError", "createUnknownError", "minimalBaseAudioContextConstructor", "nativeAudioContextConstructor", "audioDestinationNodeConstructor", "createAudioListener", "eventTargetConstructor", "isNativeOfflineAudioContext", "unrenderedAudioWorkletNodeStore", "wrapEventListener", "DEFAULT_OPTIONS", "cacheTestResult", "createInvalidStateError", "createNativeOfflineAudioContext", "minimalBaseAudioContextConstructor", "startRendering", "insertElementInSet", "isNativeAudioNode", "connect", "disconnect", "cacheTestResult", "createIndexSizeError", "window", "init_invalid_state_error", "createInvalidStateError", "addSilentConnection", "cacheTestResult", "testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport", "testAudioBufferSourceNodeStartMethodOffsetClampingSupport", "testAudioBufferSourceNodeStopMethodNullifiedBufferSupport", "testAudioScheduledSourceNodeStartMethodNegativeParametersSupport", "testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport", "testAudioScheduledSourceNodeStopMethodNegativeParametersSupport", "wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls", "window", "createNativeGainNode", "overwriteAccessors", "window", "createInvalidStateError", "createNativeAudioWorkletNodeFaker", "createNativeGainNode", "createNotSupportedError", "monitorConnections", "nativeAudioWorkletNodeConstructor", "connectMultipleOutputs", "createIndexSizeError", "createInvalidStateError", "createNativeChannelMergerNode", "createNativeChannelSplitterNode", "createNativeConstantSourceNode", "createNativeGainNode", "createNativeScriptProcessorNode", "createNotSupportedError", "disconnectMultipleOutputs", "exposeCurrentFrameAndCurrentTime", "getActiveAudioWorkletNodeInputs", "monitorConnections", "nativeAudioContextConstructor", "wrapChannelMergerNode", "init_invalid_state_error", "createInvalidStateError", "addSilentConnection", "cacheTestResult", "createNativeConstantSourceNodeFaker", "testAudioScheduledSourceNodeStartMethodNegativeParametersSupport", "testAudioScheduledSourceNodeStopMethodNegativeParametersSupport", "addSilentConnection", "createNativeAudioBufferSourceNode", "createNativeGainNode", "monitorConnections", "createNotSupportedError", "overwriteAccessors", "createNotSupportedError", "createNativeIIRFilterNodeFaker", "createInvalidAccessError", "createInvalidStateError", "createNativeScriptProcessorNode", "createNotSupportedError", "createInvalidStateError", "isNativeOfflineAudioContext", "window", "addSilentConnection", "cacheTestResult", "testAudioScheduledSourceNodeStartMethodNegativeParametersSupport", "testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport", "testAudioScheduledSourceNodeStopMethodNegativeParametersSupport", "wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls", "createNativePannerNodeFaker", "connectNativeAudioNodeToNativeAudioNode", "createInvalidStateError", "createNativeChannelMergerNode", "createNativeGainNode", "createNativeScriptProcessorNode", "createNativeWaveShaperNode", "createNotSupportedError", "disconnectNativeAudioNodeFromNativeAudioNode", "getFirstSample", "monitorConnections", "createIndexSizeError", "createNotSupportedError", "createNativeChannelMergerNode", "createNativeChannelSplitterNode", "createNativeGainNode", "createNativeWaveShaperNode", "createNotSupportedError", "monitorConnections", "nativeStereoPannerNodeFakerFactory", "createConnectedNativeAudioBufferSourceNode", "createInvalidStateError", "createNativeWaveShaperNodeFaker", "isDCCurve", "monitorConnections", "nativeAudioContextConstructor", "overwriteAccessors", "createConnectedNativeAudioBufferSourceNode", "createInvalidStateError", "createNativeGainNode", "isDCCurve", "monitorConnections", "createNotSupportedError", "init_not_supported_error", "DEFAULT_OPTIONS", "baseAudioContextConstructor", "cacheTestResult", "createInvalidStateError", "createNativeOfflineAudioContext", "startRendering", "DEFAULT_OPTIONS", "audioNodeConstructor", "createAudioParam", "createNativeOscillatorNode", "createOscillatorNodeRenderer", "getNativeContext", "isNativeOfflineAudioContext", "wrapEventListener", "connectAudioParam", "createNativeOscillatorNode", "getNativeAudioNode", "renderAutomation", "renderInputsOfAudioNode", "DEFAULT_OPTIONS", "audioNodeConstructor", "createAudioParam", "createNativePannerNode", "createPannerNodeRenderer", "getNativeContext", "isNativeOfflineAudioContext", "setAudioNodeTailTime", "connectAudioParam", "createNativeChannelMergerNode", "createNativeConstantSourceNode", "createNativeGainNode", "createNativePannerNode", "getNativeAudioNode", "nativeOfflineAudioContextConstructor", "renderAutomation", "renderInputsOfAudioNode", "renderNativeOfflineAudioContext", "DEFAULT_OPTIONS", "createNativePeriodicWave", "getNativeContext", "sanitizePeriodicWaveOptions", "renderInputsOfAudioParam", "getAudioNodeConnections", "getAudioNodeRenderer", "isPartOfACycle", "getAudioNodeRenderer", "getAudioParamConnections", "isPartOfACycle", "cacheTestResult", "createNativeGainNode", "createNativeScriptProcessorNode", "activeAudioWorkletNodeInputsStore", "audioNodeTailTimeStore", "audioBufferStore", "cacheTestResult", "getAudioNodeRenderer", "getUnrenderedAudioWorkletNodes", "renderNativeOfflineAudioContext", "testAudioBufferCopyChannelMethodsOutOfBoundsSupport", "wrapAudioBufferCopyChannelMethods", "wrapAudioBufferCopyChannelMethodsOutOfBounds", "DEFAULT_OPTIONS", "audioNodeConstructor", "createAudioParam", "createNativeStereoPannerNode", "createStereoPannerNodeRenderer", "getNativeContext", "isNativeOfflineAudioContext", "connectAudioParam", "createNativeStereoPannerNode", "getNativeAudioNode", "renderAutomation", "renderInputsOfAudioNode", "nativeAudioBufferConstructor", "nativeAudioWorkletNodeConstructor", "nativeOfflineAudioContextConstructor", "blob", "url", "createNativeGainNode", "nativeOfflineAudioContextConstructor", "DEFAULT_OPTIONS", "audioNodeConstructor", "createInvalidStateError", "createNativeWaveShaperNode", "createWaveShaperNodeRenderer", "getNativeContext", "isNativeOfflineAudioContext", "setAudioNodeTailTime", "createNativeWaveShaperNode", "getNativeAudioNode", "renderInputsOfAudioNode", "createWindow", "init_window", "convertNumberToUnsignedLong", "createIndexSizeError", "convertNumberToUnsignedLong", "copyFromChannel", "copyToChannel", "overwriteAccessors", "createInvalidStateError", "monitorConnections", "disconnect", "init_audio_buffer_source_node", "init_audio_node", "init_audio_param_renderer", "init_audio_worklet_node", "init_biquad_filter_node", "init_constant_source_node", "init_delay_node", "init_gain_node", "init_native_audio_node_faker", "init_offline_audio_context_constructor", "init_oscillator_node", "init_read_only_map", "init_stereo_panner_node", "init_interfaces", "init_audio_buffer_source_node", "init_audio_node", "init_audio_param_renderer", "init_audio_worklet_node", "init_biquad_filter_node", "init_constant_source_node", "init_delay_node", "init_gain_node", "init_native_audio_node_faker", "init_offline_audio_context_constructor", "init_oscillator_node", "init_read_only_map", "init_stereo_panner_node", "init_analyser_node_constructor", "init_analyser_node_renderer_factory", "init_audio_buffer_constructor", "init_audio_buffer_source_node_constructor", "init_audio_buffer_source_node_renderer", "init_audio_buffer_source_node_renderer_factory", "init_audio_context_constructor", "init_audio_destination_node_constructor", "init_audio_destination_node_renderer_factory", "init_audio_listener_factory", "init_audio_node_constructor", "init_audio_node_output_connection", "init_audio_node_renderer", "init_audio_param_factory", "init_audio_worklet_node_constructor", "init_audio_worklet_node_renderer_factory", "init_base_audio_context_constructor", "init_biquad_filter_node_constructor", "init_biquad_filter_node_renderer_factory", "init_channel_merger_node_constructor", "init_channel_merger_node_renderer_factory", "init_channel_splitter_node_constructor", "init_channel_splitter_node_renderer_factory", "init_connected_native_audio_buffer_source_node_factory", "init_constant_source_node_constructor", "init_constant_source_node_renderer", "init_constant_source_node_renderer_factory", "init_convolver_node_constructor", "init_convolver_node_renderer_factory", "init_delay_node_constructor", "init_delay_node_renderer_factory", "init_dynamics_compressor_node_constructor", "init_dynamics_compressor_node_renderer_factory", "init_event_handler", "init_event_target_constructor", "init_gain_node_constructor", "init_gain_node_renderer_factory", "init_iir_filter_node_constructor", "init_iir_filter_node_renderer_factory", "init_increment_cycle_counter_factory", "init_media_element_audio_source_node_constructor", "init_media_stream_audio_destination_node_constructor", "init_media_stream_audio_source_node_constructor", "init_media_stream_track_audio_source_node_constructor", "init_minimal_audio_context_constructor", "init_minimal_base_audio_context_constructor", "init_minimal_offline_audio_context_constructor", "init_native_analyser_node_factory", "init_native_audio_buffer_constructor", "init_native_audio_buffer_source_node_factory", "init_native_audio_context_constructor", "init_native_audio_destination_node", "init_native_audio_node", "init_native_audio_worklet_node_constructor", "init_native_audio_worklet_node_factory", "init_native_audio_worklet_node_faker_factory", "init_native_biquad_filter_node", "init_native_channel_merger_node_factory", "init_native_channel_splitter_node", "init_native_constant_source_node_factory", "init_native_constant_source_node_faker_factory", "init_native_convolver_node_factory", "init_native_delay_node", "init_native_dynamics_compressor_node_factory", "init_native_gain_node", "init_native_iir_filter_node_factory", "init_native_iir_filter_node_faker_factory", "init_native_media_element_audio_source_node", "init_native_media_stream_audio_destination_node", "init_native_media_stream_audio_source_node", "init_native_media_stream_track_audio_source_node_factory", "init_native_offline_audio_context_constructor", "init_native_oscillator_node_factory", "init_native_panner_node_factory", "init_native_panner_node_faker_factory", "init_native_periodic_wave_factory", "init_native_script_processor_node", "init_native_stereo_panner_node_factory", "init_native_stereo_panner_node_faker_factory", "init_native_wave_shaper_node_factory", "init_native_wave_shaper_node_faker_factory", "init_oscillator_node_constructor", "init_oscillator_node_renderer", "init_oscillator_node_renderer_factory", "init_panner_node_constructor", "init_panner_node_renderer_factory", "init_periodic_wave_constructor", "init_stereo_panner_node_constructor", "init_stereo_panner_node_renderer_factory", "init_test_media_stream_audio_source_node_media_stream_without_audio_track_support", "init_wave_shaper_node_constructor", "init_wave_shaper_node_renderer_factory", "init_window", "init_window_factory", "init_types", "init_analyser_node_constructor", "init_analyser_node_renderer_factory", "init_audio_buffer_constructor", "init_audio_buffer_source_node_constructor", "init_audio_buffer_source_node_renderer", "init_audio_buffer_source_node_renderer_factory", "init_audio_context_constructor", "init_audio_destination_node_constructor", "init_audio_destination_node_renderer_factory", "init_audio_listener_factory", "init_audio_node_constructor", "init_audio_node_output_connection", "init_audio_node_renderer", "init_audio_param_factory", "init_audio_worklet_node_constructor", "init_audio_worklet_node_renderer_factory", "init_base_audio_context_constructor", "init_biquad_filter_node_constructor", "init_biquad_filter_node_renderer_factory", "init_channel_merger_node_constructor", "init_channel_merger_node_renderer_factory", "init_channel_splitter_node_constructor", "init_channel_splitter_node_renderer_factory", "init_connected_native_audio_buffer_source_node_factory", "init_constant_source_node_constructor", "init_constant_source_node_renderer", "init_constant_source_node_renderer_factory", "init_convolver_node_constructor", "init_convolver_node_renderer_factory", "init_delay_node_constructor", "init_delay_node_renderer_factory", "init_dynamics_compressor_node_constructor", "init_dynamics_compressor_node_renderer_factory", "init_event_handler", "init_event_target_constructor", "init_gain_node_constructor", "init_gain_node_renderer_factory", "init_iir_filter_node_constructor", "init_iir_filter_node_renderer_factory", "init_increment_cycle_counter_factory", "init_media_element_audio_source_node_constructor", "init_media_stream_audio_destination_node_constructor", "init_media_stream_audio_source_node_constructor", "init_media_stream_track_audio_source_node_constructor", "init_minimal_audio_context_constructor", "init_minimal_base_audio_context_constructor", "init_minimal_offline_audio_context_constructor", "init_native_analyser_node_factory", "init_native_audio_buffer_constructor", "init_native_audio_buffer_source_node_factory", "init_native_audio_context_constructor", "init_native_audio_destination_node", "init_native_audio_node", "init_native_audio_worklet_node_constructor", "init_native_audio_worklet_node_factory", "init_native_audio_worklet_node_faker_factory", "init_native_biquad_filter_node", "init_native_channel_merger_node_factory", "init_native_channel_splitter_node", "init_native_constant_source_node_factory", "init_native_constant_source_node_faker_factory", "init_native_convolver_node_factory", "init_native_delay_node", "init_native_dynamics_compressor_node_factory", "init_native_gain_node", "init_native_iir_filter_node_factory", "init_native_iir_filter_node_faker_factory", "init_native_media_element_audio_source_node", "init_native_media_stream_audio_destination_node", "init_native_media_stream_audio_source_node", "init_native_media_stream_track_audio_source_node_factory", "init_native_offline_audio_context_constructor", "init_native_oscillator_node_factory", "init_native_panner_node_factory", "init_native_panner_node_faker_factory", "init_native_periodic_wave_factory", "init_native_script_processor_node", "init_native_stereo_panner_node_factory", "init_native_stereo_panner_node_faker_factory", "init_native_wave_shaper_node_factory", "init_native_wave_shaper_node_faker_factory", "init_oscillator_node_constructor", "init_oscillator_node_renderer", "init_oscillator_node_renderer_factory", "init_panner_node_constructor", "init_panner_node_renderer_factory", "init_periodic_wave_constructor", "init_stereo_panner_node_constructor", "init_stereo_panner_node_renderer_factory", "init_test_media_stream_audio_source_node_media_stream_without_audio_track_support", "init_wave_shaper_node_constructor", "init_wave_shaper_node_renderer_factory", "init_window", "init_window_factory", "window", "isNativeAudioNode", "init_module", "init_event_target_constructor", "init_invalid_state_error", "init_is_supported_promise", "init_not_supported_error", "init_window", "init_interfaces", "init_types", "createWindow", "createEventTargetConstructor", "createNotSupportedError", "createInvalidStateError", "init_module", "createBlobEvent", "createInvalidModificationError", "createInvalidStateError", "createNotSupportedError", "url", "_a", "init_module", "init_module", "createBlobEvent", "createInvalidModificationError", "createNotSupportedError", "decodeWebMChunk", "readVariableSizeInteger", "nativeMediaRecorderConstructor", "createWindow", "init_window", "wrapEventListener", "init_wrap_event_listener", "init_event_target", "init_media_recorder_constructor", "init_interfaces", "init_event_target", "init_media_recorder_constructor", "init_blob_event_factory", "init_error_event_handler", "init_event_handler", "init_event_target_constructor", "init_event_target_constructor_factory", "init_event_target_factory", "init_invalid_state_error_factory", "init_is_supported_promise_factory", "init_native_event_target", "init_not_supported_error_factory", "init_window", "init_window_factory", "init_wrap_event_listener_function", "init_types", "init_blob_event_factory", "init_error_event_handler", "init_event_handler", "init_event_target_constructor", "init_event_target_constructor_factory", "init_event_target_factory", "init_invalid_state_error_factory", "init_is_supported_promise_factory", "init_native_event_target", "init_not_supported_error_factory", "init_window", "init_window_factory", "init_wrap_event_listener_function", "isSupported", "register", "window", "init_module", "init_window", "init_wrap_event_listener", "init_interfaces", "init_types", "createWindow", "wrapEventListener", "init_interfaces", "init_typed_array", "init_types", "init_typed_array", "wrap", "load", "init_module", "init_interfaces", "init_types", "url", "worker", "worker", "init_worker", "module_exports", "connect", "disconnect", "encode", "isSupported", "blob", "url", "init_module", "init_worker", "worker", "load", "RecorderErrors", "_a", "_b", "blob", "url"]
}
